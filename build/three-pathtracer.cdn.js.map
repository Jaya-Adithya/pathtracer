{"version":3,"file":"three-pathtracer.cdn.js","sources":["../node_modules/three-mesh-bvh/src/core/Constants.js","../node_modules/three-mesh-bvh/src/utils/ArrayBoxUtilities.js","../node_modules/three-mesh-bvh/src/core/utils/nodeBufferUtils.js","../node_modules/three-mesh-bvh/src/core/build/computeBoundsUtils.js","../node_modules/three-mesh-bvh/src/core/build/splitUtils.js","../node_modules/three-mesh-bvh/src/core/BVHNode.js","../node_modules/three-mesh-bvh/src/core/build/sortUtils.js","../node_modules/three-mesh-bvh/src/core/build/buildUtils.js","../node_modules/three-mesh-bvh/src/core/build/buildTree.js","../node_modules/three-mesh-bvh/src/utils/PrimitivePool.js","../node_modules/three-mesh-bvh/src/core/utils/BufferStack.js","../node_modules/three-mesh-bvh/src/core/cast/shapecast.js","../node_modules/three-mesh-bvh/src/core/build/geometryUtils.js","../node_modules/three-mesh-bvh/src/core/BVH.js","../node_modules/three-mesh-bvh/src/math/SeparatingAxisBounds.js","../node_modules/three-mesh-bvh/src/math/MathUtilities.js","../node_modules/three-mesh-bvh/src/math/ExtendedTriangle.js","../node_modules/three-mesh-bvh/src/math/OrientedBox.js","../node_modules/three-mesh-bvh/src/utils/ExtendedTrianglePool.js","../node_modules/three-mesh-bvh/src/core/cast/closestPointToPoint.js","../node_modules/three-mesh-bvh/src/utils/ThreeRayIntersectUtilities.js","../node_modules/three-mesh-bvh/src/utils/TriangleUtilities.js","../node_modules/three-mesh-bvh/src/core/utils/iterationUtils.generated.js","../node_modules/three-mesh-bvh/src/core/cast/refit.generated.js","../node_modules/three-mesh-bvh/src/core/utils/intersectUtils.js","../node_modules/three-mesh-bvh/src/core/utils/iterationUtils_indirect.generated.js","../node_modules/three-mesh-bvh/src/core/cast/raycast.generated.js","../node_modules/three-mesh-bvh/src/core/cast/raycastFirst.generated.js","../node_modules/three-mesh-bvh/src/core/cast/intersectsGeometry.generated.js","../node_modules/three-mesh-bvh/src/core/cast/closestPointToGeometry.generated.js","../node_modules/three-mesh-bvh/src/core/cast/refit_indirect.generated.js","../node_modules/three-mesh-bvh/src/core/cast/raycast_indirect.generated.js","../node_modules/three-mesh-bvh/src/core/cast/raycastFirst_indirect.generated.js","../node_modules/three-mesh-bvh/src/core/cast/intersectsGeometry_indirect.generated.js","../node_modules/three-mesh-bvh/src/core/cast/closestPointToGeometry_indirect.generated.js","../node_modules/three-mesh-bvh/src/core/cast/bvhcast.js","../node_modules/three-mesh-bvh/src/utils/GeometryRayIntersectUtilities.js","../node_modules/three-mesh-bvh/src/utils/BufferUtils.js","../node_modules/three-mesh-bvh/src/core/GeometryBVH.js","../node_modules/three-mesh-bvh/src/core/MeshBVH.js","../node_modules/three-mesh-bvh/src/core/LineBVH.js","../node_modules/three-mesh-bvh/src/core/PointsBVH.js","../node_modules/three-mesh-bvh/src/objects/BVHHelper.js","../node_modules/three-mesh-bvh/src/debug/Debug.js","../node_modules/three-mesh-bvh/src/utils/ExtensionUtilities.js","../node_modules/three-mesh-bvh/src/webgl/VertexAttributeTexture.js","../node_modules/three-mesh-bvh/src/webgl/MeshBVHUniformStruct.js","../node_modules/three-mesh-bvh/src/utils/StaticGeometryGenerator.js","../node_modules/three-mesh-bvh/src/webgl/glsl/common_functions.glsl.js","../node_modules/three-mesh-bvh/src/webgl/glsl/bvh_distance_functions.glsl.js","../node_modules/three-mesh-bvh/src/webgl/glsl/bvh_ray_functions.glsl.js","../node_modules/three-mesh-bvh/src/webgl/glsl/bvh_struct_definitions.glsl.js","../node_modules/three-mesh-bvh/src/index.js","../src/core/utils/BufferAttributeUtils.js","../src/core/utils/mergeGeometries.js","../src/core/utils/GeometryPreparationUtils.js","../src/utils/bufferToHash.js","../src/core/utils/MeshDiff.js","../src/core/utils/convertToStaticGeometry.js","../src/core/utils/BakedGeometry.js","../src/core/utils/StaticGeometryGenerator.js","../src/core/PathTracingSceneGenerator.js","../src/materials/MaterialBase.js","../src/materials/fullscreen/BlendMaterial.js","../src/shader/rand/sobol.glsl.js","../src/utils/SobolNumberMapGenerator.js","../src/objects/PhysicalCamera.js","../src/uniforms/PhysicalCameraUniform.js","../src/utils/TextureUtils.js","../src/uniforms/EquirectHdrInfoUniform.js","../src/uniforms/LightsInfoUniformStruct.js","../src/uniforms/FloatAttributeTextureArray.js","../src/uniforms/AttributesTextureArray.js","../src/core/utils/sceneUpdateUtils.js","../src/uniforms/MaterialsTexture.js","../src/uniforms/RenderTarget2DArray.js","../src/uniforms/stratified/StratifiedSampler.js","../src/uniforms/stratified/StratifiedSamplerCombined.js","../src/uniforms/StratifiedSamplesTexture.js","../src/textures/blueNoise/utils.js","../src/textures/blueNoise/BlueNoiseSamples.js","../src/textures/blueNoise/BlueNoiseGenerator.js","../src/textures/BlueNoiseTexture.js","../src/shader/structs/camera_struct.glsl.js","../src/shader/structs/equirect_struct.glsl.js","../src/shader/structs/lights_struct.glsl.js","../src/shader/structs/material_struct.glsl.js","../src/shader/structs/surface_record_struct.glsl.js","../src/shader/sampling/equirect_sampling_functions.glsl.js","../src/shader/sampling/light_sampling_functions.glsl.js","../src/shader/sampling/shape_sampling_functions.glsl.js","../src/shader/common/fresnel_functions.glsl.js","../src/shader/common/math_functions.glsl.js","../src/shader/common/shape_intersection_functions.glsl.js","../src/shader/common/texture_sample_functions.glsl.js","../src/shader/common/util_functions.glsl.js","../src/shader/rand/pcg.glsl.js","../src/shader/rand/stratified.glsl.js","../src/shader/bsdf/bsdf_functions.glsl.js","../src/shader/bsdf/fog_functions.glsl.js","../src/shader/bsdf/ggx_functions.glsl.js","../src/shader/bsdf/iridescence_functions.glsl.js","../src/shader/bsdf/sheen_functions.glsl.js","../src/shader/bvh/inside_fog_volume_function.glsl.js","../src/shader/bvh/ray_any_hit_function.glsl.js","../src/materials/pathtracing/glsl/attenuate_hit_function.glsl.js","../src/materials/pathtracing/glsl/camera_util_functions.glsl.js","../src/materials/pathtracing/glsl/direct_light_contribution_function.glsl.js","../src/materials/pathtracing/glsl/get_surface_record_function.glsl.js","../src/materials/pathtracing/glsl/render_structs.glsl.js","../src/materials/pathtracing/glsl/trace_scene_function.glsl.js","../src/materials/pathtracing/PhysicalPathTracingMaterial.js","../src/core/PathTracingRenderer.js","../src/textures/ProceduralEquirectTexture.js","../src/textures/GradientEquirectTexture.js","../src/materials/fullscreen/ClampedInterpolationMaterial.js","../src/utils/CubeToEquirectGenerator.js","../src/core/WebGLPathTracer.js","../src/objects/EquirectCamera.js","../src/objects/PhysicalSpotLight.js","../src/objects/ShapedAreaLight.js","../src/utils/BlurredEnvMapGenerator.js","../src/materials/fullscreen/DenoiseMaterial.js","../src/materials/surface/FogVolumeMaterial.js","../src/index.js"],"sourcesContent":["// Split strategy constants\nexport const CENTER = 0;\nexport const AVERAGE = 1;\nexport const SAH = 2;\n\n// Traversal constants\nexport const NOT_INTERSECTED = 0;\nexport const INTERSECTED = 1;\nexport const CONTAINED = 2;\n\n// SAH cost constants\n// TODO: hone these costs more. The relative difference between them should be the\n// difference in measured time to perform a primitive intersection vs traversing\n// bounds.\n// TODO: could be tuned per primitive type (triangles vs lines vs points)\nexport const PRIMITIVE_INTERSECT_COST = 1.25;\nexport const TRAVERSAL_COST = 1;\n\n\n// Build constants\nexport const BYTES_PER_NODE = 6 * 4 + 4 + 4;\nexport const UINT32_PER_NODE = BYTES_PER_NODE / 4;\nexport const IS_LEAFNODE_FLAG = 0xFFFF;\n\n// Bit masks for 32 bit node data\nexport const LEAFNODE_MASK_32 = IS_LEAFNODE_FLAG << 16;\n\n// EPSILON for computing floating point error during build\n// https://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics\nexport const FLOAT32_EPSILON = Math.pow( 2, - 24 );\n\nexport const SKIP_GENERATION = Symbol( 'SKIP_GENERATION' );\n\nexport const DEFAULT_OPTIONS = {\n\tstrategy: CENTER,\n\tmaxDepth: 40,\n\tmaxLeafSize: 10,\n\tuseSharedArrayBuffer: false,\n\tsetBoundingBox: true,\n\tonProgress: null,\n\tindirect: false,\n\tverbose: true,\n\trange: null,\n\t[ SKIP_GENERATION ]: false,\n};\n\n","export function arrayToBox( nodeIndex32, array, target ) {\n\n\ttarget.min.x = array[ nodeIndex32 ];\n\ttarget.min.y = array[ nodeIndex32 + 1 ];\n\ttarget.min.z = array[ nodeIndex32 + 2 ];\n\n\ttarget.max.x = array[ nodeIndex32 + 3 ];\n\ttarget.max.y = array[ nodeIndex32 + 4 ];\n\ttarget.max.z = array[ nodeIndex32 + 5 ];\n\n\treturn target;\n\n}\n\nexport function makeEmptyBounds( target ) {\n\n\ttarget[ 0 ] = target[ 1 ] = target[ 2 ] = Infinity;\n\ttarget[ 3 ] = target[ 4 ] = target[ 5 ] = - Infinity;\n\n}\n\nexport function getLongestEdgeIndex( bounds ) {\n\n\tlet splitDimIdx = - 1;\n\tlet splitDist = - Infinity;\n\n\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\tconst dist = bounds[ i + 3 ] - bounds[ i ];\n\t\tif ( dist > splitDist ) {\n\n\t\t\tsplitDist = dist;\n\t\t\tsplitDimIdx = i;\n\n\t\t}\n\n\t}\n\n\treturn splitDimIdx;\n\n}\n\n// copies bounds a into bounds b\nexport function copyBounds( source, target ) {\n\n\ttarget.set( source );\n\n}\n\n// sets bounds target to the union of bounds a and b\nexport function unionBounds( a, b, target ) {\n\n\tlet aVal, bVal;\n\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\tconst d3 = d + 3;\n\n\t\t// set the minimum values\n\t\taVal = a[ d ];\n\t\tbVal = b[ d ];\n\t\ttarget[ d ] = aVal < bVal ? aVal : bVal;\n\n\t\t// set the max values\n\t\taVal = a[ d3 ];\n\t\tbVal = b[ d3 ];\n\t\ttarget[ d3 ] = aVal > bVal ? aVal : bVal;\n\n\t}\n\n}\n\n// expands the given bounds by the provided primitive bounds\nexport function expandByPrimitiveBounds( startIndex, primitiveBounds, bounds ) {\n\n\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\tconst tCenter = primitiveBounds[ startIndex + 2 * d ];\n\t\tconst tHalf = primitiveBounds[ startIndex + 2 * d + 1 ];\n\n\t\tconst tMin = tCenter - tHalf;\n\t\tconst tMax = tCenter + tHalf;\n\n\t\tif ( tMin < bounds[ d ] ) {\n\n\t\t\tbounds[ d ] = tMin;\n\n\t\t}\n\n\t\tif ( tMax > bounds[ d + 3 ] ) {\n\n\t\t\tbounds[ d + 3 ] = tMax;\n\n\t\t}\n\n\t}\n\n}\n\n// compute bounds surface area\nexport function computeSurfaceArea( bounds ) {\n\n\tconst d0 = bounds[ 3 ] - bounds[ 0 ];\n\tconst d1 = bounds[ 4 ] - bounds[ 1 ];\n\tconst d2 = bounds[ 5 ] - bounds[ 2 ];\n\n\treturn 2 * ( d0 * d1 + d1 * d2 + d2 * d0 );\n\n}\n","import { IS_LEAFNODE_FLAG, UINT32_PER_NODE } from '../Constants.js';\n\nexport function IS_LEAF( n16, uint16Array ) {\n\n\treturn uint16Array[ n16 + 15 ] === IS_LEAFNODE_FLAG;\n\n}\n\nexport function OFFSET( n32, uint32Array ) {\n\n\treturn uint32Array[ n32 + 6 ];\n\n}\n\nexport function COUNT( n16, uint16Array ) {\n\n\treturn uint16Array[ n16 + 14 ];\n\n}\n\n// Returns the uint32-aligned offset of the left child node for performance\nexport function LEFT_NODE( n32 ) {\n\n\treturn n32 + UINT32_PER_NODE;\n\n}\n\n// Returns the uint32-aligned offset of the right child node for performance\nexport function RIGHT_NODE( n32, uint32Array ) {\n\n\t// stored value is relative offset from parent, convert to absolute uint32 index\n\tconst relativeOffset = uint32Array[ n32 + 6 ];\n\treturn n32 + relativeOffset * UINT32_PER_NODE;\n\n}\n\nexport function SPLIT_AXIS( n32, uint32Array ) {\n\n\treturn uint32Array[ n32 + 7 ];\n\n}\n\nexport function BOUNDING_DATA_INDEX( n32 ) {\n\n\treturn n32;\n\n}\n","// computes the union of the bounds of all of the given primitives and puts the resulting box in \"target\".\n// A bounding box is computed for the centroids of the primitives, as well, and placed in \"centroidTarget\".\n// These are computed together to avoid redundant accesses to bounds array.\nexport function getBounds( primitiveBounds, offset, count, target, centroidTarget ) {\n\n\tlet minx = Infinity;\n\tlet miny = Infinity;\n\tlet minz = Infinity;\n\tlet maxx = - Infinity;\n\tlet maxy = - Infinity;\n\tlet maxz = - Infinity;\n\n\tlet cminx = Infinity;\n\tlet cminy = Infinity;\n\tlet cminz = Infinity;\n\tlet cmaxx = - Infinity;\n\tlet cmaxy = - Infinity;\n\tlet cmaxz = - Infinity;\n\n\tconst boundsOffset = primitiveBounds.offset || 0;\n\tfor ( let i = ( offset - boundsOffset ) * 6, end = ( offset + count - boundsOffset ) * 6; i < end; i += 6 ) {\n\n\t\tconst cx = primitiveBounds[ i + 0 ];\n\t\tconst hx = primitiveBounds[ i + 1 ];\n\t\tconst lx = cx - hx;\n\t\tconst rx = cx + hx;\n\t\tif ( lx < minx ) minx = lx;\n\t\tif ( rx > maxx ) maxx = rx;\n\t\tif ( cx < cminx ) cminx = cx;\n\t\tif ( cx > cmaxx ) cmaxx = cx;\n\n\t\tconst cy = primitiveBounds[ i + 2 ];\n\t\tconst hy = primitiveBounds[ i + 3 ];\n\t\tconst ly = cy - hy;\n\t\tconst ry = cy + hy;\n\t\tif ( ly < miny ) miny = ly;\n\t\tif ( ry > maxy ) maxy = ry;\n\t\tif ( cy < cminy ) cminy = cy;\n\t\tif ( cy > cmaxy ) cmaxy = cy;\n\n\t\tconst cz = primitiveBounds[ i + 4 ];\n\t\tconst hz = primitiveBounds[ i + 5 ];\n\t\tconst lz = cz - hz;\n\t\tconst rz = cz + hz;\n\t\tif ( lz < minz ) minz = lz;\n\t\tif ( rz > maxz ) maxz = rz;\n\t\tif ( cz < cminz ) cminz = cz;\n\t\tif ( cz > cmaxz ) cmaxz = cz;\n\n\t}\n\n\ttarget[ 0 ] = minx;\n\ttarget[ 1 ] = miny;\n\ttarget[ 2 ] = minz;\n\n\ttarget[ 3 ] = maxx;\n\ttarget[ 4 ] = maxy;\n\ttarget[ 5 ] = maxz;\n\n\tcentroidTarget[ 0 ] = cminx;\n\tcentroidTarget[ 1 ] = cminy;\n\tcentroidTarget[ 2 ] = cminz;\n\n\tcentroidTarget[ 3 ] = cmaxx;\n\tcentroidTarget[ 4 ] = cmaxy;\n\tcentroidTarget[ 5 ] = cmaxz;\n\n}\n","import { getLongestEdgeIndex, computeSurfaceArea, copyBounds, unionBounds, expandByPrimitiveBounds } from '../../utils/ArrayBoxUtilities.js';\nimport { CENTER, AVERAGE, SAH, PRIMITIVE_INTERSECT_COST, TRAVERSAL_COST } from '../Constants.js';\n\nconst BIN_COUNT = 32;\nconst binsSort = ( a, b ) => a.candidate - b.candidate;\nconst sahBins = /* @__PURE__ */ new Array( BIN_COUNT ).fill().map( () => {\n\n\treturn {\n\n\t\tcount: 0,\n\t\tbounds: new Float32Array( 6 ),\n\t\trightCacheBounds: new Float32Array( 6 ),\n\t\tleftCacheBounds: new Float32Array( 6 ),\n\t\tcandidate: 0,\n\n\t};\n\n} );\nconst leftBounds = /* @__PURE__ */ new Float32Array( 6 );\n\nexport function getOptimalSplit( nodeBoundingData, centroidBoundingData, primitiveBounds, offset, count, strategy ) {\n\n\tlet axis = - 1;\n\tlet pos = 0;\n\n\t// Center\n\tif ( strategy === CENTER ) {\n\n\t\taxis = getLongestEdgeIndex( centroidBoundingData );\n\t\tif ( axis !== - 1 ) {\n\n\t\t\tpos = ( centroidBoundingData[ axis ] + centroidBoundingData[ axis + 3 ] ) / 2;\n\n\t\t}\n\n\t} else if ( strategy === AVERAGE ) {\n\n\t\taxis = getLongestEdgeIndex( nodeBoundingData );\n\t\tif ( axis !== - 1 ) {\n\n\t\t\tpos = getAverage( primitiveBounds, offset, count, axis );\n\n\t\t}\n\n\t} else if ( strategy === SAH ) {\n\n\t\tconst rootSurfaceArea = computeSurfaceArea( nodeBoundingData );\n\t\tlet bestCost = PRIMITIVE_INTERSECT_COST * count;\n\n\t\t// iterate over all axes\n\t\tconst boundsOffset = primitiveBounds.offset || 0;\n\t\tconst cStart = ( offset - boundsOffset ) * 6;\n\t\tconst cEnd = ( offset + count - boundsOffset ) * 6;\n\t\tfor ( let a = 0; a < 3; a ++ ) {\n\n\t\t\tconst axisLeft = centroidBoundingData[ a ];\n\t\t\tconst axisRight = centroidBoundingData[ a + 3 ];\n\t\t\tconst axisLength = axisRight - axisLeft;\n\t\t\tconst binWidth = axisLength / BIN_COUNT;\n\n\t\t\t// If we have fewer primitives than we're planning to split then just check all\n\t\t\t// the primitive positions because it will be faster.\n\t\t\tif ( count < BIN_COUNT / 4 ) {\n\n\t\t\t\t// initialize the bin candidates\n\t\t\t\tconst truncatedBins = [ ...sahBins ];\n\t\t\t\ttruncatedBins.length = count;\n\n\t\t\t\t// set the candidates\n\t\t\t\tlet b = 0;\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6, b ++ ) {\n\n\t\t\t\t\tconst bin = truncatedBins[ b ];\n\t\t\t\t\tbin.candidate = primitiveBounds[ c + 2 * a ];\n\t\t\t\t\tbin.count = 0;\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tbounds,\n\t\t\t\t\t\tleftCacheBounds,\n\t\t\t\t\t\trightCacheBounds,\n\t\t\t\t\t} = bin;\n\t\t\t\t\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\t\t\t\t\trightCacheBounds[ d ] = Infinity;\n\t\t\t\t\t\trightCacheBounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t\tleftCacheBounds[ d ] = Infinity;\n\t\t\t\t\t\tleftCacheBounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t\tbounds[ d ] = Infinity;\n\t\t\t\t\t\tbounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t}\n\n\t\t\t\t\texpandByPrimitiveBounds( c, primitiveBounds, bounds );\n\n\t\t\t\t}\n\n\t\t\t\ttruncatedBins.sort( binsSort );\n\n\t\t\t\t// remove redundant splits\n\t\t\t\tlet splitCount = count;\n\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\n\n\t\t\t\t\tconst bin = truncatedBins[ bi ];\n\t\t\t\t\twhile ( bi + 1 < splitCount && truncatedBins[ bi + 1 ].candidate === bin.candidate ) {\n\n\t\t\t\t\t\ttruncatedBins.splice( bi + 1, 1 );\n\t\t\t\t\t\tsplitCount --;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// find the appropriate bin for each primitive and expand the bounds.\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6 ) {\n\n\t\t\t\t\tconst center = primitiveBounds[ c + 2 * a ];\n\t\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\n\n\t\t\t\t\t\tconst bin = truncatedBins[ bi ];\n\t\t\t\t\t\tif ( center >= bin.candidate ) {\n\n\t\t\t\t\t\t\texpandByPrimitiveBounds( c, primitiveBounds, bin.rightCacheBounds );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\texpandByPrimitiveBounds( c, primitiveBounds, bin.leftCacheBounds );\n\t\t\t\t\t\t\tbin.count ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// expand all the bounds\n\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\n\n\t\t\t\t\tconst bin = truncatedBins[ bi ];\n\t\t\t\t\tconst leftCount = bin.count;\n\t\t\t\t\tconst rightCount = count - bin.count;\n\n\t\t\t\t\t// check the cost of this split\n\t\t\t\t\tconst leftBounds = bin.leftCacheBounds;\n\t\t\t\t\tconst rightBounds = bin.rightCacheBounds;\n\n\t\t\t\t\tlet leftProb = 0;\n\t\t\t\t\tif ( leftCount !== 0 ) {\n\n\t\t\t\t\t\tleftProb = computeSurfaceArea( leftBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet rightProb = 0;\n\t\t\t\t\tif ( rightCount !== 0 ) {\n\n\t\t\t\t\t\trightProb = computeSurfaceArea( rightBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cost = TRAVERSAL_COST + PRIMITIVE_INTERSECT_COST * (\n\t\t\t\t\t\tleftProb * leftCount + rightProb * rightCount\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( cost < bestCost ) {\n\n\t\t\t\t\t\taxis = a;\n\t\t\t\t\t\tbestCost = cost;\n\t\t\t\t\t\tpos = bin.candidate;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// reset the bins\n\t\t\t\tfor ( let i = 0; i < BIN_COUNT; i ++ ) {\n\n\t\t\t\t\tconst bin = sahBins[ i ];\n\t\t\t\t\tbin.count = 0;\n\t\t\t\t\tbin.candidate = axisLeft + binWidth + i * binWidth;\n\n\t\t\t\t\tconst bounds = bin.bounds;\n\t\t\t\t\tfor ( let d = 0; d < 3; d ++ ) {\n\n\t\t\t\t\t\tbounds[ d ] = Infinity;\n\t\t\t\t\t\tbounds[ d + 3 ] = - Infinity;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over all center positions\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6 ) {\n\n\t\t\t\t\tconst triCenter = primitiveBounds[ c + 2 * a ];\n\t\t\t\t\tconst relativeCenter = triCenter - axisLeft;\n\n\t\t\t\t\t// in the partition function if the centroid lies on the split plane then it is\n\t\t\t\t\t// considered to be on the right side of the split\n\t\t\t\t\tlet binIndex = ~ ~ ( relativeCenter / binWidth );\n\t\t\t\t\tif ( binIndex >= BIN_COUNT ) binIndex = BIN_COUNT - 1;\n\n\t\t\t\t\tconst bin = sahBins[ binIndex ];\n\t\t\t\t\tbin.count ++;\n\n\t\t\t\t\texpandByPrimitiveBounds( c, primitiveBounds, bin.bounds );\n\n\t\t\t\t}\n\n\t\t\t\t// cache the unioned bounds from right to left so we don't have to regenerate them each time\n\t\t\t\tconst lastBin = sahBins[ BIN_COUNT - 1 ];\n\t\t\t\tcopyBounds( lastBin.bounds, lastBin.rightCacheBounds );\n\t\t\t\tfor ( let i = BIN_COUNT - 2; i >= 0; i -- ) {\n\n\t\t\t\t\tconst bin = sahBins[ i ];\n\t\t\t\t\tconst nextBin = sahBins[ i + 1 ];\n\t\t\t\t\tunionBounds( bin.bounds, nextBin.rightCacheBounds, bin.rightCacheBounds );\n\n\t\t\t\t}\n\n\t\t\t\tlet leftCount = 0;\n\t\t\t\tfor ( let i = 0; i < BIN_COUNT - 1; i ++ ) {\n\n\t\t\t\t\tconst bin = sahBins[ i ];\n\t\t\t\t\tconst binCount = bin.count;\n\t\t\t\t\tconst bounds = bin.bounds;\n\n\t\t\t\t\tconst nextBin = sahBins[ i + 1 ];\n\t\t\t\t\tconst rightBounds = nextBin.rightCacheBounds;\n\n\t\t\t\t\t// don't do anything with the bounds if the new bounds have no primitives\n\t\t\t\t\tif ( binCount !== 0 ) {\n\n\t\t\t\t\t\tif ( leftCount === 0 ) {\n\n\t\t\t\t\t\t\tcopyBounds( bounds, leftBounds );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tunionBounds( bounds, leftBounds, leftBounds );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tleftCount += binCount;\n\n\t\t\t\t\t// check the cost of this split\n\t\t\t\t\tlet leftProb = 0;\n\t\t\t\t\tlet rightProb = 0;\n\n\t\t\t\t\tif ( leftCount !== 0 ) {\n\n\t\t\t\t\t\tleftProb = computeSurfaceArea( leftBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst rightCount = count - leftCount;\n\t\t\t\t\tif ( rightCount !== 0 ) {\n\n\t\t\t\t\t\trightProb = computeSurfaceArea( rightBounds ) / rootSurfaceArea;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cost = TRAVERSAL_COST + PRIMITIVE_INTERSECT_COST * (\n\t\t\t\t\t\tleftProb * leftCount + rightProb * rightCount\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( cost < bestCost ) {\n\n\t\t\t\t\t\taxis = a;\n\t\t\t\t\t\tbestCost = cost;\n\t\t\t\t\t\tpos = bin.candidate;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\tconsole.warn( `BVH: Invalid build strategy value ${ strategy } used.` );\n\n\t}\n\n\treturn { axis, pos };\n\n}\n\n// returns the average coordinate on the specified axis of all the provided primitives\nfunction getAverage( primitiveBounds, offset, count, axis ) {\n\n\tlet avg = 0;\n\tconst boundsOffset = primitiveBounds.offset;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tavg += primitiveBounds[ ( i - boundsOffset ) * 6 + axis * 2 ];\n\n\t}\n\n\treturn avg / count;\n\n}\n","export class BVHNode {\n\n\tconstructor() {\n\n\t\t// internal nodes have boundingData, left, right, and splitAxis\n\t\t// leaf nodes have offset and count (referring to primitives in the mesh geometry)\n\n\t\tthis.boundingData = new Float32Array( 6 );\n\n\t}\n\n}\n","// reorders the partition buffer such that for `count` elements after `offset`, elements on the left side of the split\n// will be on the left and elements on the right side of the split will be on the right. returns the index\n// of the first element on the right side, or offset + count if there are no elements on the right side.\nexport function partition( buffer, stride, primitiveBounds, offset, count, split ) {\n\n\tlet left = offset;\n\tlet right = offset + count - 1;\n\tconst pos = split.pos;\n\tconst axisOffset = split.axis * 2;\n\tconst boundsOffset = primitiveBounds.offset || 0;\n\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\n\twhile ( true ) {\n\n\t\twhile ( left <= right && primitiveBounds[ ( left - boundsOffset ) * 6 + axisOffset ] < pos ) {\n\n\t\t\tleft ++;\n\n\t\t}\n\n\t\t// if a primitive center lies on the partition plane it is considered to be on the right side\n\t\twhile ( left <= right && primitiveBounds[ ( right - boundsOffset ) * 6 + axisOffset ] >= pos ) {\n\n\t\t\tright --;\n\n\t\t}\n\n\t\tif ( left < right ) {\n\n\t\t\t// we need to swap all of the information associated with the primitives at index\n\t\t\t// left and right; that's the elements in the partition buffer and the bounds\n\t\t\tfor ( let i = 0; i < stride; i ++ ) {\n\n\t\t\t\tlet t0 = buffer[ left * stride + i ];\n\t\t\t\tbuffer[ left * stride + i ] = buffer[ right * stride + i ];\n\t\t\t\tbuffer[ right * stride + i ] = t0;\n\n\t\t\t}\n\n\t\t\t// swap bounds\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tconst l = left - boundsOffset;\n\t\t\t\tconst r = right - boundsOffset;\n\t\t\t\tconst tb = primitiveBounds[ l * 6 + i ];\n\t\t\t\tprimitiveBounds[ l * 6 + i ] = primitiveBounds[ r * 6 + i ];\n\t\t\t\tprimitiveBounds[ r * 6 + i ] = tb;\n\n\t\t\t}\n\n\t\t\tleft ++;\n\t\t\tright --;\n\n\t\t} else {\n\n\t\t\treturn left;\n\n\t\t}\n\n\t}\n\n}\n","import { BYTES_PER_NODE, IS_LEAFNODE_FLAG } from '../Constants.js';\n\nlet float32Array, uint32Array, uint16Array, uint8Array;\nconst MAX_POINTER = Math.pow( 2, 32 );\n\nexport function countNodes( node ) {\n\n\tif ( 'count' in node ) {\n\n\t\treturn 1;\n\n\t} else {\n\n\t\treturn 1 + countNodes( node.left ) + countNodes( node.right );\n\n\t}\n\n}\n\nexport function populateBuffer( byteOffset, node, buffer ) {\n\n\tfloat32Array = new Float32Array( buffer );\n\tuint32Array = new Uint32Array( buffer );\n\tuint16Array = new Uint16Array( buffer );\n\tuint8Array = new Uint8Array( buffer );\n\n\treturn _populateBuffer( byteOffset, node );\n\n}\n\n// pack structure\n// boundingData  \t\t\t\t: 6 float32\n// right / offset \t\t\t\t: 1 uint32\n// splitAxis / isLeaf + count \t: 1 uint32 / 2 uint16\nfunction _populateBuffer( byteOffset, node ) {\n\n\tconst node32Index = byteOffset / 4;\n\tconst node16Index = byteOffset / 2;\n\tconst isLeaf = 'count' in node;\n\tconst boundingData = node.boundingData;\n\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\tfloat32Array[ node32Index + i ] = boundingData[ i ];\n\n\t}\n\n\tif ( isLeaf ) {\n\n\t\tif ( node.buffer ) {\n\n\t\t\tuint8Array.set( new Uint8Array( node.buffer ), byteOffset );\n\t\t\treturn byteOffset + node.buffer.byteLength;\n\n\t\t} else {\n\n\t\t\tuint32Array[ node32Index + 6 ] = node.offset;\n\t\t\tuint16Array[ node16Index + 14 ] = node.count;\n\t\t\tuint16Array[ node16Index + 15 ] = IS_LEAFNODE_FLAG;\n\t\t\treturn byteOffset + BYTES_PER_NODE;\n\n\t\t}\n\n\t} else {\n\n\t\tconst { left, right, splitAxis } = node;\n\n\t\t// fill in the left node contents\n\t\tconst leftByteOffset = byteOffset + BYTES_PER_NODE;\n\t\tlet rightByteOffset = _populateBuffer( leftByteOffset, left );\n\n\t\t// calculate relative offset from parent to right child\n\t\tconst currentNodeIndex = byteOffset / BYTES_PER_NODE;\n\t\tconst rightNodeIndex = rightByteOffset / BYTES_PER_NODE;\n\t\tconst relativeRightIndex = rightNodeIndex - currentNodeIndex;\n\n\t\t// check if the relative offset is too high\n\t\tif ( relativeRightIndex > MAX_POINTER ) {\n\n\t\t\tthrow new Error( 'MeshBVH: Cannot store relative child node offset greater than 32 bits.' );\n\n\t\t}\n\n\t\t// fill in the right node contents (store as relative offset)\n\t\tuint32Array[ node32Index + 6 ] = relativeRightIndex;\n\t\tuint32Array[ node32Index + 7 ] = splitAxis;\n\n\t\t// return the next available buffer pointer\n\t\treturn _populateBuffer( rightByteOffset, right );\n\n\t}\n\n}\n","import { getBounds } from './computeBoundsUtils.js';\nimport { getOptimalSplit } from './splitUtils.js';\nimport { BVHNode } from '../BVHNode.js';\nimport { BYTES_PER_NODE } from '../Constants.js';\n\nimport { partition } from './sortUtils.js';\nimport { countNodes, populateBuffer } from './buildUtils.js';\n\nexport function buildTree( bvh, primitiveBounds, offset, count, options ) {\n\n\t// expand variables\n\tconst {\n\t\tmaxDepth,\n\t\tverbose,\n\t\tmaxLeafSize,\n\t\tstrategy,\n\t\tonProgress,\n\t} = options;\n\n\tconst partitionBuffer = bvh.primitiveBuffer;\n\tconst partitionStride = bvh.primitiveBufferStride;\n\n\t// generate intermediate variables\n\tconst cacheCentroidBoundingData = new Float32Array( 6 );\n\tlet reachedMaxDepth = false;\n\n\tconst root = new BVHNode();\n\tgetBounds( primitiveBounds, offset, count, root.boundingData, cacheCentroidBoundingData );\n\tsplitNode( root, offset, count, cacheCentroidBoundingData );\n\treturn root;\n\n\tfunction triggerProgress( primitivesProcessed ) {\n\n\t\tif ( onProgress ) {\n\n\t\t\tonProgress( primitivesProcessed / count );\n\n\t\t}\n\n\t}\n\n\t// either recursively splits the given node, creating left and right subtrees for it, or makes it a leaf node,\n\t// recording the offset and count of its primitives and writing them into the reordered geometry index.\n\tfunction splitNode( node, offset, count, centroidBoundingData = null, depth = 0 ) {\n\n\t\tif ( ! reachedMaxDepth && depth >= maxDepth ) {\n\n\t\t\treachedMaxDepth = true;\n\t\t\tif ( verbose ) {\n\n\t\t\t\tconsole.warn( `BVH: Max depth of ${ maxDepth } reached when generating BVH. Consider increasing maxDepth.` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// early out if we've met our capacity\n\t\tif ( count <= maxLeafSize || depth >= maxDepth ) {\n\n\t\t\ttriggerProgress( offset + count );\n\t\t\tnode.offset = offset;\n\t\t\tnode.count = count;\n\t\t\treturn node;\n\n\t\t}\n\n\t\t// Find where to split the volume\n\t\tconst split = getOptimalSplit( node.boundingData, centroidBoundingData, primitiveBounds, offset, count, strategy );\n\t\tif ( split.axis === - 1 ) {\n\n\t\t\ttriggerProgress( offset + count );\n\t\t\tnode.offset = offset;\n\t\t\tnode.count = count;\n\t\t\treturn node;\n\n\t\t}\n\n\t\tconst splitOffset = partition( partitionBuffer, partitionStride, primitiveBounds, offset, count, split );\n\n\t\t// create the two new child nodes\n\t\tif ( splitOffset === offset || splitOffset === offset + count ) {\n\n\t\t\ttriggerProgress( offset + count );\n\t\t\tnode.offset = offset;\n\t\t\tnode.count = count;\n\n\t\t} else {\n\n\t\t\tnode.splitAxis = split.axis;\n\n\t\t\t// create the left child and compute its bounding box\n\t\t\tconst left = new BVHNode();\n\t\t\tconst lstart = offset;\n\t\t\tconst lcount = splitOffset - offset;\n\t\t\tnode.left = left;\n\n\t\t\tgetBounds( primitiveBounds, lstart, lcount, left.boundingData, cacheCentroidBoundingData );\n\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\n\n\t\t\t// repeat for right\n\t\t\tconst right = new BVHNode();\n\t\t\tconst rstart = splitOffset;\n\t\t\tconst rcount = count - lcount;\n\t\t\tnode.right = right;\n\n\t\t\tgetBounds( primitiveBounds, rstart, rcount, right.boundingData, cacheCentroidBoundingData );\n\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\n\n\t\t}\n\n\t\treturn node;\n\n\t}\n\n}\n\nexport function buildPackedTree( bvh, options ) {\n\n\tconst BufferConstructor = options.useSharedArrayBuffer ? SharedArrayBuffer : ArrayBuffer;\n\n\t// get the range of buffer data to construct / arrange\n\tconst rootRanges = bvh.getRootRanges( options.range );\n\tconst firstRange = rootRanges[ 0 ];\n\tconst lastRange = rootRanges[ rootRanges.length - 1 ];\n\tconst fullRange = {\n\t\toffset: firstRange.offset,\n\t\tcount: lastRange.offset + lastRange.count - firstRange.offset,\n\t};\n\n\t// construct the primitive bounds for sorting\n\tconst primitiveBounds = new Float32Array( 6 * fullRange.count );\n\tprimitiveBounds.offset = fullRange.offset;\n\tbvh.computePrimitiveBounds( fullRange.offset, fullRange.count, primitiveBounds );\n\n\t// Build BVH roots\n\tbvh._roots = rootRanges.map( range => {\n\n\t\tconst root = buildTree( bvh, primitiveBounds, range.offset, range.count, options );\n\t\tconst nodeCount = countNodes( root );\n\t\tconst buffer = new BufferConstructor( BYTES_PER_NODE * nodeCount );\n\t\tpopulateBuffer( 0, root, buffer );\n\t\treturn buffer;\n\n\t} );\n\n}\n","export class PrimitivePool {\n\n\tconstructor( getNewPrimitive ) {\n\n\t\tthis._getNewPrimitive = getNewPrimitive;\n\t\tthis._primitives = [];\n\n\t}\n\n\tgetPrimitive() {\n\n\t\tconst primitives = this._primitives;\n\t\tif ( primitives.length === 0 ) {\n\n\t\t\treturn this._getNewPrimitive();\n\n\t\t} else {\n\n\t\t\treturn primitives.pop();\n\n\t\t}\n\n\t}\n\n\treleasePrimitive( primitive ) {\n\n\t\tthis._primitives.push( primitive );\n\n\t}\n\n}\n","class _BufferStack {\n\n\tconstructor() {\n\n\t\tthis.float32Array = null;\n\t\tthis.uint16Array = null;\n\t\tthis.uint32Array = null;\n\n\t\tconst stack = [];\n\t\tlet prevBuffer = null;\n\t\tthis.setBuffer = buffer => {\n\n\t\t\tif ( prevBuffer ) {\n\n\t\t\t\tstack.push( prevBuffer );\n\n\t\t\t}\n\n\t\t\tprevBuffer = buffer;\n\t\t\tthis.float32Array = new Float32Array( buffer );\n\t\t\tthis.uint16Array = new Uint16Array( buffer );\n\t\t\tthis.uint32Array = new Uint32Array( buffer );\n\n\t\t};\n\n\t\tthis.clearBuffer = () => {\n\n\t\t\tprevBuffer = null;\n\t\t\tthis.float32Array = null;\n\t\t\tthis.uint16Array = null;\n\t\t\tthis.uint32Array = null;\n\n\t\t\tif ( stack.length !== 0 ) {\n\n\t\t\t\tthis.setBuffer( stack.pop() );\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n}\n\nexport const BufferStack = /* @__PURE__ */ new _BufferStack();\n","import { Box3 } from 'three';\nimport { CONTAINED, UINT32_PER_NODE } from '../Constants.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { PrimitivePool } from '../../utils/PrimitivePool.js';\nimport { COUNT, OFFSET, LEFT_NODE, RIGHT_NODE, IS_LEAF, BOUNDING_DATA_INDEX } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\n\nlet _box1, _box2;\nconst boxStack = [];\nconst boxPool = /* @__PURE__ */ new PrimitivePool( () => new Box3() );\n\nexport function shapecast( bvh, root, intersectsBounds, intersectsRange, boundsTraverseOrder, nodeOffset ) {\n\n\t// setup\n\t_box1 = boxPool.getPrimitive();\n\t_box2 = boxPool.getPrimitive();\n\tboxStack.push( _box1, _box2 );\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\n\tconst result = shapecastTraverse( 0, bvh.geometry, intersectsBounds, intersectsRange, boundsTraverseOrder, nodeOffset );\n\n\t// cleanup\n\tBufferStack.clearBuffer();\n\tboxPool.releasePrimitive( _box1 );\n\tboxPool.releasePrimitive( _box2 );\n\tboxStack.pop();\n\tboxStack.pop();\n\n\tconst length = boxStack.length;\n\tif ( length > 0 ) {\n\n\t\t_box2 = boxStack[ length - 1 ];\n\t\t_box1 = boxStack[ length - 2 ];\n\n\t}\n\n\treturn result;\n\n}\n\nfunction shapecastTraverse(\n\tnodeIndex32,\n\tgeometry,\n\tintersectsBoundsFunc,\n\tintersectsRangeFunc,\n\tnodeScoreFunc = null,\n\tnodeIndexOffset = 0, // offset for unique node identifier\n\tdepth = 0\n) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, _box1 );\n\t\treturn intersectsRangeFunc( offset, count, false, depth, nodeIndexOffset + nodeIndex32 / UINT32_PER_NODE, _box1 );\n\n\t} else {\n\n\t\tconst left = LEFT_NODE( nodeIndex32 );\n\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\tlet c1 = left;\n\t\tlet c2 = right;\n\n\t\tlet score1, score2;\n\t\tlet box1, box2;\n\t\tif ( nodeScoreFunc ) {\n\n\t\t\tbox1 = _box1;\n\t\t\tbox2 = _box2;\n\n\t\t\t// bounding data is not offset\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c1 ), float32Array, box1 );\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c2 ), float32Array, box2 );\n\n\t\t\tscore1 = nodeScoreFunc( box1 );\n\t\t\tscore2 = nodeScoreFunc( box2 );\n\n\t\t\tif ( score2 < score1 ) {\n\n\t\t\t\tc1 = right;\n\t\t\t\tc2 = left;\n\n\t\t\t\tconst temp = score1;\n\t\t\t\tscore1 = score2;\n\t\t\t\tscore2 = temp;\n\n\t\t\t\tbox1 = box2;\n\t\t\t\t// box2 is always set before use below\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Check box 1 intersection\n\t\tif ( ! box1 ) {\n\n\t\t\tbox1 = _box1;\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c1 ), float32Array, box1 );\n\n\t\t}\n\n\t\tconst isC1Leaf = IS_LEAF( c1 * 2, uint16Array );\n\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1, nodeIndexOffset + c1 / UINT32_PER_NODE );\n\n\t\tlet c1StopTraversal;\n\t\tif ( c1Intersection === CONTAINED ) {\n\n\t\t\tconst offset = getLeftOffset( c1 );\n\t\t\tconst end = getRightEndOffset( c1 );\n\t\t\tconst count = end - offset;\n\n\t\t\tc1StopTraversal = intersectsRangeFunc( offset, count, true, depth + 1, nodeIndexOffset + c1 / UINT32_PER_NODE, box1 );\n\n\t\t} else {\n\n\t\t\tc1StopTraversal =\n\t\t\t\tc1Intersection &&\n\t\t\t\tshapecastTraverse(\n\t\t\t\t\tc1,\n\t\t\t\t\tgeometry,\n\t\t\t\t\tintersectsBoundsFunc,\n\t\t\t\t\tintersectsRangeFunc,\n\t\t\t\t\tnodeScoreFunc,\n\t\t\t\t\tnodeIndexOffset,\n\t\t\t\t\tdepth + 1\n\t\t\t\t);\n\n\t\t}\n\n\t\tif ( c1StopTraversal ) return true;\n\n\t\t// Check box 2 intersection\n\t\t// cached box2 will have been overwritten by previous traversal\n\t\tbox2 = _box2;\n\t\tarrayToBox( BOUNDING_DATA_INDEX( c2 ), float32Array, box2 );\n\n\t\tconst isC2Leaf = IS_LEAF( c2 * 2, uint16Array );\n\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1, nodeIndexOffset + c2 / UINT32_PER_NODE );\n\n\t\tlet c2StopTraversal;\n\t\tif ( c2Intersection === CONTAINED ) {\n\n\t\t\tconst offset = getLeftOffset( c2 );\n\t\t\tconst end = getRightEndOffset( c2 );\n\t\t\tconst count = end - offset;\n\n\t\t\tc2StopTraversal = intersectsRangeFunc( offset, count, true, depth + 1, nodeIndexOffset + c2 / UINT32_PER_NODE, box2 );\n\n\t\t} else {\n\n\t\t\tc2StopTraversal =\n\t\t\t\tc2Intersection &&\n\t\t\t\tshapecastTraverse(\n\t\t\t\t\tc2,\n\t\t\t\t\tgeometry,\n\t\t\t\t\tintersectsBoundsFunc,\n\t\t\t\t\tintersectsRangeFunc,\n\t\t\t\t\tnodeScoreFunc,\n\t\t\t\t\tnodeIndexOffset,\n\t\t\t\t\tdepth + 1\n\t\t\t\t);\n\n\t\t}\n\n\t\tif ( c2StopTraversal ) return true;\n\n\t\treturn false;\n\n\t\t// Define these inside the function so it has access to the local variables needed\n\t\t// when converting to the buffer equivalents\n\t\tfunction getLeftOffset( nodeIndex32 ) {\n\n\t\t\tconst { uint16Array, uint32Array } = BufferStack;\n\t\t\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t// traverse until we find a leaf\n\t\t\twhile ( ! IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\t\tnodeIndex32 = LEFT_NODE( nodeIndex32 );\n\t\t\t\tnodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t}\n\n\t\t\treturn OFFSET( nodeIndex32, uint32Array );\n\n\t\t}\n\n\t\tfunction getRightEndOffset( nodeIndex32 ) {\n\n\t\t\tconst { uint16Array, uint32Array } = BufferStack;\n\t\t\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t// traverse until we find a leaf\n\t\t\twhile ( ! IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\t\t// adjust offset to point to the right node\n\t\t\t\tnodeIndex32 = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\t\t\tnodeIndex16 = nodeIndex32 * 2;\n\n\t\t\t}\n\n\t\t\t// return the end offset of the triangle range\n\t\t\treturn OFFSET( nodeIndex32, uint32Array ) + COUNT( nodeIndex16, uint16Array );\n\n\t\t}\n\n\t}\n\n}\n","import { BufferAttribute } from 'three';\n\nexport function getVertexCount( geo ) {\n\n\treturn geo.index ? geo.index.count : geo.attributes.position.count;\n\n}\n\nexport function getTriCount( geo ) {\n\n\treturn getVertexCount( geo ) / 3;\n\n}\n\nexport function getIndexArray( vertexCount, BufferConstructor = ArrayBuffer ) {\n\n\tif ( vertexCount > 65535 ) {\n\n\t\treturn new Uint32Array( new BufferConstructor( 4 * vertexCount ) );\n\n\t} else {\n\n\t\treturn new Uint16Array( new BufferConstructor( 2 * vertexCount ) );\n\n\t}\n\n}\n\n// ensures that an index is present on the geometry\nexport function ensureIndex( geo, options ) {\n\n\tif ( ! geo.index ) {\n\n\t\tconst vertexCount = geo.attributes.position.count;\n\t\tconst BufferConstructor = options.useSharedArrayBuffer ? SharedArrayBuffer : ArrayBuffer;\n\t\tconst index = getIndexArray( vertexCount, BufferConstructor );\n\t\tgeo.setIndex( new BufferAttribute( index, 1 ) );\n\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\n\n\t\t\tindex[ i ] = i;\n\n\t\t}\n\n\t}\n\n}\n\n// Computes the set of { offset, count } ranges which need independent BVH roots. Each\n// region in the geometry index that belongs to a different set of material groups requires\n// a separate BVH root, so that triangles indices belonging to one group never get swapped\n// with triangle indices belongs to another group. For example, if the groups were like this:\n//\n// [-------------------------------------------------------------]\n// |__________________|\n//   g0 = [0, 20]  |______________________||_____________________|\n//                      g1 = [16, 40]           g2 = [41, 60]\n//\n// we would need four BVH roots: [0, 15], [16, 20], [21, 40], [41, 60].\nfunction getFullPrimitiveRange( geo, range, stride ) {\n\n\tconst primitiveCount = getVertexCount( geo ) / stride;\n\tconst drawRange = range ? range : geo.drawRange;\n\tconst start = drawRange.start / stride;\n\tconst end = ( drawRange.start + drawRange.count ) / stride;\n\n\tconst offset = Math.max( 0, start );\n\tconst count = Math.min( primitiveCount, end ) - offset;\n\treturn {\n\t\toffset: Math.floor( offset ),\n\t\tcount: Math.floor( count ),\n\t};\n\n}\n\nfunction getPrimitiveGroupRanges( geo, stride ) {\n\n\treturn geo.groups.map( group => ( {\n\t\toffset: group.start / stride,\n\t\tcount: group.count / stride,\n\t} ));\n\n}\n\n// Function that extracts a set of mutually exclusive ranges representing the primitives being\n// drawn as determined by the geometry groups, draw range, and user specified range\nexport function getRootPrimitiveRanges( geo, range, stride ) {\n\n\tconst drawRange = getFullPrimitiveRange( geo, range, stride );\n\tconst primitiveRanges = getPrimitiveGroupRanges( geo, stride );\n\tif ( ! primitiveRanges.length ) {\n\n\t\treturn [ drawRange ];\n\n\t}\n\n\tconst ranges = [];\n\tconst drawRangeStart = drawRange.offset;\n\tconst drawRangeEnd = drawRange.offset + drawRange.count;\n\n\t// Create events for group boundaries\n\tconst primitiveCount = getVertexCount( geo ) / stride;\n\tconst events = [];\n\tfor ( const group of primitiveRanges ) {\n\n\t\t// Account for cases where group size is set to Infinity\n\t\tconst { offset, count } = group;\n\t\tconst groupStart = offset;\n\t\tconst groupCount = isFinite( count ) ? count : ( primitiveCount - offset );\n\t\tconst groupEnd = ( offset + groupCount );\n\n\t\t// Only add events if the group intersects with the draw range\n\t\tif ( groupStart < drawRangeEnd && groupEnd > drawRangeStart ) {\n\n\t\t\tevents.push( { pos: Math.max( drawRangeStart, groupStart ), isStart: true } );\n\t\t\tevents.push( { pos: Math.min( drawRangeEnd, groupEnd ), isStart: false } );\n\n\t\t}\n\n\t}\n\n\t// Sort events by position, with 'end' events before 'start' events at the same position\n\tevents.sort( ( a, b ) => {\n\n\t\tif ( a.pos !== b.pos ) {\n\n\t\t\treturn a.pos - b.pos;\n\n\t\t} else {\n\n\t\t\treturn a.type === 'end' ? - 1 : 1;\n\n\t\t}\n\n\t} );\n\n\t// sweep through events and create ranges where activeGroups > 0\n\tlet activeGroups = 0;\n\tlet lastPos = null;\n\tfor ( const event of events ) {\n\n\t\tconst newPos = event.pos;\n\t\tif ( activeGroups !== 0 && newPos !== lastPos ) {\n\n\t\t\tranges.push( {\n\t\t\t\toffset: lastPos,\n\t\t\t\tcount: newPos - lastPos,\n\t\t\t} );\n\n\t\t}\n\n\t\tactiveGroups += event.isStart ? 1 : - 1;\n\t\tlastPos = newPos;\n\n\t}\n\n\treturn ranges;\n\n}\n","import { Box3 } from 'three';\nimport { BYTES_PER_NODE, UINT32_PER_NODE, DEFAULT_OPTIONS } from './Constants.js';\nimport { arrayToBox } from '../utils/ArrayBoxUtilities.js';\nimport { IS_LEAF, LEFT_NODE, RIGHT_NODE, SPLIT_AXIS } from './utils/nodeBufferUtils.js';\nimport { buildPackedTree } from './build/buildTree.js';\nimport { shapecast as shapecastFunc } from './cast/shapecast.js';\nimport { getRootPrimitiveRanges } from './build/geometryUtils.js';\n\nconst tempBox = /* @__PURE__ */ new Box3();\n\nexport class BVH {\n\n\tconstructor() {\n\n\t\tthis._roots = null;\n\t\tthis.primitiveBuffer = null;\n\t\tthis.primitiveBufferStride = null;\n\n\t}\n\n\tinit( options ) {\n\n\t\toptions = {\n\t\t\t...DEFAULT_OPTIONS,\n\t\t\t...options,\n\t\t};\n\n\t\tbuildPackedTree( this, options );\n\n\t}\n\n\tgetRootRanges( range ) {\n\n\t\t// TODO: can we avoid passing options in here\n\t\treturn getRootPrimitiveRanges( this.geometry, range, this.primitiveStride );\n\n\t}\n\n\traycastObject3D( /* object, raycaster, intersects = [] */ ) {\n\n\t\tthrow new Error( 'BVH: raycastObject3D() not implemented' );\n\n\t}\n\n\tshiftPrimitiveOffsets( offset ) {\n\n\t\tconst indirectBuffer = this._indirectBuffer;\n\t\tif ( indirectBuffer ) {\n\n\t\t\t// the offsets are embedded in the indirect buffer\n\t\t\tfor ( let i = 0, l = indirectBuffer.length; i < l; i ++ ) {\n\n\t\t\t\tindirectBuffer[ i ] += offset;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// offsets are embedded in the leaf nodes\n\t\t\tconst roots = this._roots;\n\t\t\tfor ( let rootIndex = 0; rootIndex < roots.length; rootIndex ++ ) {\n\n\t\t\t\tconst root = roots[ rootIndex ];\n\t\t\t\tconst uint32Array = new Uint32Array( root );\n\t\t\t\tconst uint16Array = new Uint16Array( root );\n\t\t\t\tconst totalNodes = root.byteLength / BYTES_PER_NODE;\n\t\t\t\tfor ( let node = 0; node < totalNodes; node ++ ) {\n\n\t\t\t\t\tconst node32Index = UINT32_PER_NODE * node;\n\t\t\t\t\tconst node16Index = 2 * node32Index;\n\t\t\t\t\tif ( IS_LEAF( node16Index, uint16Array ) ) {\n\n\t\t\t\t\t\t// offset value\n\t\t\t\t\t\tuint32Array[ node32Index + 6 ] += offset;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttraverse( callback, rootIndex = 0 ) {\n\n\t\tconst buffer = this._roots[ rootIndex ];\n\t\tconst uint32Array = new Uint32Array( buffer );\n\t\tconst uint16Array = new Uint16Array( buffer );\n\t\t_traverse( 0 );\n\n\t\tfunction _traverse( node32Index, depth = 0 ) {\n\n\t\t\tconst node16Index = node32Index * 2;\n\t\t\tconst isLeaf = IS_LEAF( node16Index, uint16Array );\n\t\t\tif ( isLeaf ) {\n\n\t\t\t\tconst offset = uint32Array[ node32Index + 6 ];\n\t\t\t\tconst count = uint16Array[ node16Index + 14 ];\n\t\t\t\tcallback( depth, isLeaf, new Float32Array( buffer, node32Index * 4, 6 ), offset, count );\n\n\t\t\t} else {\n\n\t\t\t\tconst left = LEFT_NODE( node32Index );\n\t\t\t\tconst right = RIGHT_NODE( node32Index, uint32Array );\n\t\t\t\tconst splitAxis = SPLIT_AXIS( node32Index, uint32Array );\n\t\t\t\tconst stopTraversal = callback( depth, isLeaf, new Float32Array( buffer, node32Index * 4, 6 ), splitAxis );\n\n\t\t\t\tif ( ! stopTraversal ) {\n\n\t\t\t\t\t_traverse( left, depth + 1 );\n\t\t\t\t\t_traverse( right, depth + 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\ttarget.makeEmpty();\n\n\t\tconst roots = this._roots;\n\t\troots.forEach( buffer => {\n\n\t\t\tarrayToBox( 0, new Float32Array( buffer ), tempBox );\n\t\t\ttarget.union( tempBox );\n\n\t\t} );\n\n\t\treturn target;\n\n\t}\n\n\t// Base shapecast implementation that can be used by subclasses\n\t// TODO: see if we can get rid of \"iterateFunc\" here as well as the primitive so the function\n\t// API aligns with the \"shapecast\" implementation\n\tshapecast( callbacks ) {\n\n\t\tlet {\n\t\t\tboundsTraverseOrder,\n\t\t\tintersectsBounds,\n\t\t\tintersectsRange,\n\t\t\tintersectsPrimitive,\n\t\t\tscratchPrimitive,\n\t\t\titerate,\n\t\t} = callbacks;\n\n\t\t// wrap the intersectsRange function\n\t\tif ( intersectsRange && intersectsPrimitive ) {\n\n\t\t\tconst originalIntersectsRange = intersectsRange;\n\t\t\tintersectsRange = ( offset, count, contained, depth, nodeIndex ) => {\n\n\t\t\t\tif ( ! originalIntersectsRange( offset, count, contained, depth, nodeIndex ) ) {\n\n\t\t\t\t\treturn iterate( offset, count, this, intersectsPrimitive, contained, depth, scratchPrimitive );\n\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\t};\n\n\t\t} else if ( ! intersectsRange ) {\n\n\t\t\tif ( intersectsPrimitive ) {\n\n\t\t\t\tintersectsRange = ( offset, count, contained, depth ) => {\n\n\t\t\t\t\treturn iterate( offset, count, this, intersectsPrimitive, contained, depth, scratchPrimitive );\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tintersectsRange = ( offset, count, contained ) => {\n\n\t\t\t\t\treturn contained;\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\t// run shapecast\n\t\tlet result = false;\n\t\tlet nodeOffset = 0;\n\t\tconst roots = this._roots;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tconst root = roots[ i ];\n\t\t\tresult = shapecastFunc( this, i, intersectsBounds, intersectsRange, boundsTraverseOrder, nodeOffset );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tnodeOffset += root.byteLength / BYTES_PER_NODE;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n","import { Vector3 } from 'three';\n\nexport class SeparatingAxisBounds {\n\n\tconstructor() {\n\n\t\tthis.min = Infinity;\n\t\tthis.max = - Infinity;\n\n\t}\n\n\tsetFromPointsField( points, field ) {\n\n\t\tlet min = Infinity;\n\t\tlet max = - Infinity;\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tconst val = p[ field ];\n\t\t\tmin = val < min ? val : min;\n\t\t\tmax = val > max ? val : max;\n\n\t\t}\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tsetFromPoints( axis, points ) {\n\n\t\tlet min = Infinity;\n\t\tlet max = - Infinity;\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tconst val = axis.dot( p );\n\t\t\tmin = val < min ? val : min;\n\t\t\tmax = val > max ? val : max;\n\n\t\t}\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tisSeparated( other ) {\n\n\t\treturn this.min > other.max || other.min > this.max;\n\n\t}\n\n}\n\nSeparatingAxisBounds.prototype.setFromBox = ( function () {\n\n\tconst p = /* @__PURE__ */ new Vector3();\n\treturn function setFromBox( axis, box ) {\n\n\t\tconst boxMin = box.min;\n\t\tconst boxMax = box.max;\n\t\tlet min = Infinity;\n\t\tlet max = - Infinity;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tp.x = boxMin.x * x + boxMax.x * ( 1 - x );\n\t\t\t\t\tp.y = boxMin.y * y + boxMax.y * ( 1 - y );\n\t\t\t\t\tp.z = boxMin.z * z + boxMax.z * ( 1 - z );\n\n\t\t\t\t\tconst val = axis.dot( p );\n\t\t\t\t\tmin = Math.min( val, min );\n\t\t\t\t\tmax = Math.max( val, max );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t};\n\n} )();\n\nexport const areIntersecting = ( function () {\n\n\tconst cacheSatBounds = /* @__PURE__ */ new SeparatingAxisBounds();\n\treturn function areIntersecting( shape1, shape2 ) {\n\n\t\tconst points1 = shape1.points;\n\t\tconst satAxes1 = shape1.satAxes;\n\t\tconst satBounds1 = shape1.satBounds;\n\n\t\tconst points2 = shape2.points;\n\t\tconst satAxes2 = shape2.satAxes;\n\t\tconst satBounds2 = shape2.satBounds;\n\n\t\t// check axes of the first shape\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds1[ i ];\n\t\t\tconst sa = satAxes1[ i ];\n\t\t\tcacheSatBounds.setFromPoints( sa, points2 );\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check axes of the second shape\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds2[ i ];\n\t\t\tconst sa = satAxes2[ i ];\n\t\t\tcacheSatBounds.setFromPoints( sa, points1 );\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\n\n\t\t}\n\n\t};\n\n} )();\n","import { Vector3, Vector2, Plane, Line3 } from 'three';\n\nexport const closestPointLineToLine = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/Line.cpp#L56\n\tconst dir1 = /* @__PURE__ */ new Vector3();\n\tconst dir2 = /* @__PURE__ */ new Vector3();\n\tconst v02 = /* @__PURE__ */ new Vector3();\n\treturn function closestPointLineToLine( l1, l2, result ) {\n\n\t\tconst v0 = l1.start;\n\t\tconst v10 = dir1;\n\t\tconst v2 = l2.start;\n\t\tconst v32 = dir2;\n\n\t\tv02.subVectors( v0, v2 );\n\t\tdir1.subVectors( l1.end, l1.start );\n\t\tdir2.subVectors( l2.end, l2.start );\n\n\t\t// float d0232 = v02.Dot(v32);\n\t\tconst d0232 = v02.dot( v32 );\n\n\t\t// float d3210 = v32.Dot(v10);\n\t\tconst d3210 = v32.dot( v10 );\n\n\t\t// float d3232 = v32.Dot(v32);\n\t\tconst d3232 = v32.dot( v32 );\n\n\t\t// float d0210 = v02.Dot(v10);\n\t\tconst d0210 = v02.dot( v10 );\n\n\t\t// float d1010 = v10.Dot(v10);\n\t\tconst d1010 = v10.dot( v10 );\n\n\t\t// float denom = d1010*d3232 - d3210*d3210;\n\t\tconst denom = d1010 * d3232 - d3210 * d3210;\n\n\t\tlet d, d2;\n\t\tif ( denom !== 0 ) {\n\n\t\t\td = ( d0232 * d3210 - d0210 * d3232 ) / denom;\n\n\t\t} else {\n\n\t\t\td = 0;\n\n\t\t}\n\n\t\td2 = ( d0232 + d * d3210 ) / d3232;\n\n\t\tresult.x = d;\n\t\tresult.y = d2;\n\n\t};\n\n} )();\n\nexport const closestPointsSegmentToSegment = ( function () {\n\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/LineSegment.cpp#L187\n\tconst paramResult = /* @__PURE__ */ new Vector2();\n\tconst temp1 = /* @__PURE__ */ new Vector3();\n\tconst temp2 = /* @__PURE__ */ new Vector3();\n\treturn function closestPointsSegmentToSegment( l1, l2, target1, target2 ) {\n\n\t\tclosestPointLineToLine( l1, l2, paramResult );\n\n\t\tlet d = paramResult.x;\n\t\tlet d2 = paramResult.y;\n\t\tif ( d >= 0 && d <= 1 && d2 >= 0 && d2 <= 1 ) {\n\n\t\t\tl1.at( d, target1 );\n\t\t\tl2.at( d2, target2 );\n\n\t\t\treturn;\n\n\t\t} else if ( d >= 0 && d <= 1 ) {\n\n\t\t\t// Only d2 is out of bounds.\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tl2.at( 0, target2 );\n\n\t\t\t} else {\n\n\t\t\t\tl2.at( 1, target2 );\n\n\t\t\t}\n\n\t\t\tl1.closestPointToPoint( target2, true, target1 );\n\t\t\treturn;\n\n\t\t} else if ( d2 >= 0 && d2 <= 1 ) {\n\n\t\t\t// Only d is out of bounds.\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tl1.at( 0, target1 );\n\n\t\t\t} else {\n\n\t\t\t\tl1.at( 1, target1 );\n\n\t\t\t}\n\n\t\t\tl2.closestPointToPoint( target1, true, target2 );\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// Both u and u2 are out of bounds.\n\t\t\tlet p;\n\t\t\tif ( d < 0 ) {\n\n\t\t\t\tp = l1.start;\n\n\t\t\t} else {\n\n\t\t\t\tp = l1.end;\n\n\t\t\t}\n\n\t\t\tlet p2;\n\t\t\tif ( d2 < 0 ) {\n\n\t\t\t\tp2 = l2.start;\n\n\t\t\t} else {\n\n\t\t\t\tp2 = l2.end;\n\n\t\t\t}\n\n\t\t\tconst closestPoint = temp1;\n\t\t\tconst closestPoint2 = temp2;\n\t\t\tl1.closestPointToPoint( p2, true, temp1 );\n\t\t\tl2.closestPointToPoint( p, true, temp2 );\n\n\t\t\tif ( closestPoint.distanceToSquared( p2 ) <= closestPoint2.distanceToSquared( p ) ) {\n\n\t\t\t\ttarget1.copy( closestPoint );\n\t\t\t\ttarget2.copy( p2 );\n\t\t\t\treturn;\n\n\t\t\t} else {\n\n\t\t\t\ttarget1.copy( p );\n\t\t\t\ttarget2.copy( closestPoint2 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n} )();\n\n\nexport const sphereIntersectTriangle = ( function () {\n\n\t// https://stackoverflow.com/questions/34043955/detect-collision-between-sphere-and-triangle-in-three-js\n\tconst closestPointTemp = /* @__PURE__ */ new Vector3();\n\tconst projectedPointTemp = /* @__PURE__ */ new Vector3();\n\tconst planeTemp = /* @__PURE__ */ new Plane();\n\tconst lineTemp = /* @__PURE__ */ new Line3();\n\treturn function sphereIntersectTriangle( sphere, triangle ) {\n\n\t\tconst { radius, center } = sphere;\n\t\tconst { a, b, c } = triangle;\n\n\t\t// phase 1\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = b;\n\t\tconst closestPoint1 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint1.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = a;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint2 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint2.distanceTo( center ) <= radius ) return true;\n\n\t\tlineTemp.start = b;\n\t\tlineTemp.end = c;\n\t\tconst closestPoint3 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\n\t\tif ( closestPoint3.distanceTo( center ) <= radius ) return true;\n\n\t\t// phase 2\n\t\tconst plane = triangle.getPlane( planeTemp );\n\t\tconst dp = Math.abs( plane.distanceToPoint( center ) );\n\t\tif ( dp <= radius ) {\n\n\t\t\tconst pp = plane.projectPoint( center, projectedPointTemp );\n\t\t\tconst cp = triangle.containsPoint( pp );\n\t\t\tif ( cp ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t};\n\n} )();\n","import { Triangle, Vector3, Vector2, Line3, Plane } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { closestPointsSegmentToSegment, sphereIntersectTriangle } from './MathUtilities.js';\n\nconst componentKeys = [ 'x', 'y', 'z' ];\nconst ZERO_EPSILON = 1e-15;\nconst ZERO_EPSILON_SQR = ZERO_EPSILON * ZERO_EPSILON;\nfunction isNearZero( value ) {\n\n\treturn Math.abs( value ) < ZERO_EPSILON;\n\n}\n\nexport class ExtendedTriangle extends Triangle {\n\n\tconstructor( ...args ) {\n\n\t\tsuper( ...args );\n\n\t\tthis.isExtendedTriangle = true;\n\t\tthis.satAxes = new Array( 4 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 4 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.points = [ this.a, this.b, this.c ];\n\t\tthis.plane = new Plane();\n\t\tthis.isDegenerateIntoSegment = false;\n\t\tthis.isDegenerateIntoPoint = false;\n\t\tthis.degenerateSegment = new Line3();\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphereIntersectTriangle( sphere, this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst a = this.a;\n\t\tconst b = this.b;\n\t\tconst c = this.c;\n\t\tconst points = this.points;\n\n\t\tconst satAxes = this.satAxes;\n\t\tconst satBounds = this.satBounds;\n\n\t\tconst axis0 = satAxes[ 0 ];\n\t\tconst sab0 = satBounds[ 0 ];\n\t\tthis.getNormal( axis0 );\n\t\tsab0.setFromPoints( axis0, points );\n\n\t\tconst axis1 = satAxes[ 1 ];\n\t\tconst sab1 = satBounds[ 1 ];\n\t\taxis1.subVectors( a, b );\n\t\tsab1.setFromPoints( axis1, points );\n\n\t\tconst axis2 = satAxes[ 2 ];\n\t\tconst sab2 = satBounds[ 2 ];\n\t\taxis2.subVectors( b, c );\n\t\tsab2.setFromPoints( axis2, points );\n\n\t\tconst axis3 = satAxes[ 3 ];\n\t\tconst sab3 = satBounds[ 3 ];\n\t\taxis3.subVectors( c, a );\n\t\tsab3.setFromPoints( axis3, points );\n\n\t\tconst lengthAB = axis1.length();\n\t\tconst lengthBC = axis2.length();\n\t\tconst lengthCA = axis3.length();\n\n\t\tthis.isDegenerateIntoPoint = false;\n\t\tthis.isDegenerateIntoSegment = false;\n\n\t\tif ( lengthAB < ZERO_EPSILON ) {\n\n\t\t\tif ( lengthBC < ZERO_EPSILON || lengthCA < ZERO_EPSILON ) {\n\n\t\t\t\tthis.isDegenerateIntoPoint = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.isDegenerateIntoSegment = true;\n\t\t\t\tthis.degenerateSegment.start.copy( a );\n\t\t\t\tthis.degenerateSegment.end.copy( c );\n\n\t\t\t}\n\n\t\t} else if ( lengthBC < ZERO_EPSILON ) {\n\n\t\t\tif ( lengthCA < ZERO_EPSILON ) {\n\n\t\t\t\tthis.isDegenerateIntoPoint = true;\n\n\t\t\t} else {\n\n\t\t\t\tthis.isDegenerateIntoSegment = true;\n\t\t\t\tthis.degenerateSegment.start.copy( b );\n\t\t\t\tthis.degenerateSegment.end.copy( a );\n\n\t\t\t}\n\n\t\t} else if ( lengthCA < ZERO_EPSILON ) {\n\n\t\t\tthis.isDegenerateIntoSegment = true;\n\t\t\tthis.degenerateSegment.start.copy( c );\n\t\t\tthis.degenerateSegment.end.copy( b );\n\n\t\t}\n\n\t\tthis.plane.setFromNormalAndCoplanarPoint( axis0, a );\n\n\t\tthis.needsUpdate = false;\n\n\t}\n\n}\n\nExtendedTriangle.prototype.closestPointToSegment = ( function () {\n\n\tconst point1 = /* @__PURE__ */ new Vector3();\n\tconst point2 = /* @__PURE__ */ new Vector3();\n\tconst edge = /* @__PURE__ */ new Line3();\n\n\treturn function distanceToSegment( segment, target1 = null, target2 = null ) {\n\n\t\tconst { start, end } = segment;\n\t\tconst points = this.points;\n\t\tlet distSq;\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check the triangle edges\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst nexti = ( i + 1 ) % 3;\n\t\t\tedge.start.copy( points[ i ] );\n\t\t\tedge.end.copy( points[ nexti ] );\n\n\t\t\tclosestPointsSegmentToSegment( edge, segment, point1, point2 );\n\n\t\t\tdistSq = point1.distanceToSquared( point2 );\n\t\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = distSq;\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check end points\n\t\tthis.closestPointToPoint( start, point1 );\n\t\tdistSq = start.distanceToSquared( point1 );\n\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\tclosestDistanceSq = distSq;\n\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\tif ( target2 ) target2.copy( start );\n\n\t\t}\n\n\t\tthis.closestPointToPoint( end, point1 );\n\t\tdistSq = end.distanceToSquared( point1 );\n\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\tclosestDistanceSq = distSq;\n\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\tif ( target2 ) target2.copy( end );\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n\nExtendedTriangle.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri2 = /* @__PURE__ */ new ExtendedTriangle();\n\tconst cachedSatBounds = /* @__PURE__ */ new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = /* @__PURE__ */ new SeparatingAxisBounds();\n\tconst tmpVec = /* @__PURE__ */ new Vector3();\n\tconst dir1 = /* @__PURE__ */ new Vector3();\n\tconst dir2 = /* @__PURE__ */ new Vector3();\n\tconst tempDir = /* @__PURE__ */ new Vector3();\n\tconst edge1 = /* @__PURE__ */ new Line3();\n\tconst edge2 = /* @__PURE__ */ new Line3();\n\tconst tempPoint = /* @__PURE__ */ new Vector3();\n\tconst bounds1 = /* @__PURE__ */ new Vector2();\n\tconst bounds2 = /* @__PURE__ */ new Vector2();\n\n\tfunction coplanarIntersectsTriangle( self, other, target, suppressLog ) {\n\n\t\t// Perform separating axis intersection test only for coplanar triangles\n\t\t// There should be at least one non-degenerate triangle when calling this\n\t\t// Otherwise we won't know the plane normal\n\t\tconst planeNormal = tmpVec;\n\t\tif ( ! self.isDegenerateIntoPoint && ! self.isDegenerateIntoSegment ) {\n\n\t\t\tplaneNormal.copy( self.plane.normal );\n\n\t\t} else {\n\n\t\t\tplaneNormal.copy( other.plane.normal );\n\n\t\t}\n\n\t\tconst satBounds1 = self.satBounds;\n\t\tconst satAxes1 = self.satAxes;\n\t\tfor ( let i = 1; i < 4; i ++ ) {\n\n\t\t\tconst sb = satBounds1[ i ];\n\t\t\tconst sa = satAxes1[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, other.points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t\ttempDir.copy( planeNormal ).cross( sa );\n\t\t\tcachedSatBounds.setFromPoints( tempDir, self.points );\n\t\t\tcachedSatBounds2.setFromPoints( tempDir, other.points );\n\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t}\n\n\t\tconst satBounds2 = other.satBounds;\n\t\tconst satAxes2 = other.satAxes;\n\t\tfor ( let i = 1; i < 4; i ++ ) {\n\n\t\t\tconst sb = satBounds2[ i ];\n\t\t\tconst sa = satAxes2[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, self.points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t\ttempDir.crossVectors( planeNormal, sa );\n\t\t\tcachedSatBounds.setFromPoints( tempDir, self.points );\n\t\t\tcachedSatBounds2.setFromPoints( tempDir, other.points );\n\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t}\n\n\t\tif ( target ) {\n\n\t\t\t// TODO find two points that intersect on the edges and make that the result\n\t\t\tif ( ! suppressLog ) {\n\n\t\t\t\tconsole.warn( 'ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0.' );\n\n\t\t\t}\n\n\t\t\ttarget.start.set( 0, 0, 0 );\n\t\t\ttarget.end.set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction findSingleBounds( a, b, c, aProj, bProj, cProj, aDist, bDist, cDist, bounds, edge ) {\n\n\t\tlet t = aDist / ( aDist - bDist );\n\t\tbounds.x = aProj + ( bProj - aProj ) * t;\n\t\tedge.start.subVectors( b, a ).multiplyScalar( t ).add( a );\n\n\t\tt = aDist / ( aDist - cDist );\n\t\tbounds.y = aProj + ( cProj - aProj ) * t;\n\t\tedge.end.subVectors( c, a ).multiplyScalar( t ).add( a );\n\n\t}\n\n\t/**\n\t * Calculates intersection segment of a triangle with intersection line.\n\t * Intersection line is snapped to its biggest component.\n\t * And triangle points are passed as a projection on that component.\n\t * @returns whether this is a coplanar case or not\n\t */\n\tfunction findIntersectionLineBounds( self, aProj, bProj, cProj, abDist, acDist, aDist, bDist, cDist, bounds, edge ) {\n\n\t\tif ( abDist > 0 ) {\n\n\t\t\t// then bcDist < 0\n\t\t\tfindSingleBounds( self.c, self.a, self.b, cProj, aProj, bProj, cDist, aDist, bDist, bounds, edge );\n\n\t\t} else if ( acDist > 0 ) {\n\n\t\t\tfindSingleBounds( self.b, self.a, self.c, bProj, aProj, cProj, bDist, aDist, cDist, bounds, edge );\n\n\t\t} else if ( bDist * cDist > 0 || aDist != 0 ) {\n\n\t\t\tfindSingleBounds( self.a, self.b, self.c, aProj, bProj, cProj, aDist, bDist, cDist, bounds, edge );\n\n\t\t} else if ( bDist != 0 ) {\n\n\t\t\tfindSingleBounds( self.b, self.a, self.c, bProj, aProj, cProj, bDist, aDist, cDist, bounds, edge );\n\n\t\t} else if ( cDist != 0 ) {\n\n\t\t\tfindSingleBounds( self.c, self.a, self.b, cProj, aProj, bProj, cDist, aDist, bDist, bounds, edge );\n\n\t\t} else {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction intersectTriangleSegment( triangle, degenerateTriangle, target, suppressLog ) {\n\n\t\tconst segment = degenerateTriangle.degenerateSegment;\n\t\tconst startDist = triangle.plane.distanceToPoint( segment.start );\n\t\tconst endDist = triangle.plane.distanceToPoint( segment.end );\n\t\tif ( isNearZero( startDist ) ) {\n\n\t\t\tif ( isNearZero( endDist ) ) {\n\n\t\t\t\treturn coplanarIntersectsTriangle( triangle, degenerateTriangle, target, suppressLog );\n\n\t\t\t} else {\n\n\t\t\t\t// Is this fine to modify target even if there might be no intersection?\n\t\t\t\tif ( target ) {\n\n\t\t\t\t\ttarget.start.copy( segment.start );\n\t\t\t\t\ttarget.end.copy( segment.start );\n\n\t\t\t\t}\n\n\t\t\t\treturn triangle.containsPoint( segment.start );\n\n\t\t\t}\n\n\t\t} else if ( isNearZero( endDist ) ) {\n\n\t\t\tif ( target ) {\n\n\t\t\t\ttarget.start.copy( segment.end );\n\t\t\t\ttarget.end.copy( segment.end );\n\n\t\t\t}\n\n\t\t\treturn triangle.containsPoint( segment.end );\n\n\t\t} else {\n\n\t\t\tif ( triangle.plane.intersectLine( segment, tmpVec ) != null ) {\n\n\t\t\t\tif ( target ) {\n\n\t\t\t\t\ttarget.start.copy( tmpVec );\n\t\t\t\t\ttarget.end.copy( tmpVec );\n\n\t\t\t\t}\n\n\t\t\t\treturn triangle.containsPoint( tmpVec );\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction intersectTrianglePoint( triangle, degenerateTriangle, target ) {\n\n\t\tconst point = degenerateTriangle.a;\n\n\t\tif ( isNearZero( triangle.plane.distanceToPoint( point ) ) && triangle.containsPoint( point ) ) {\n\n\t\t\tif ( target ) {\n\n\t\t\t\ttarget.start.copy( point );\n\t\t\t\ttarget.end.copy( point );\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\tfunction intersectSegmentPoint( segmentTri, pointTri, target ) {\n\n\t\tconst segment = segmentTri.degenerateSegment;\n\t\tconst point = pointTri.a;\n\n\t\tsegment.closestPointToPoint( point, true, tmpVec );\n\n\t\tif ( point.distanceToSquared( tmpVec ) < ZERO_EPSILON_SQR ) {\n\n\t\t\tif ( target ) {\n\n\t\t\t\ttarget.start.copy( point );\n\t\t\t\ttarget.end.copy( point );\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\tfunction handleDegenerateCases( self, other, target, suppressLog ) {\n\n\t\tif ( self.isDegenerateIntoSegment ) {\n\n\t\t\tif ( other.isDegenerateIntoSegment ) {\n\n\t\t\t\t// TODO: replace with Line.distanceSqToLine3 after r179\n\t\t\t\tconst segment1 = self.degenerateSegment;\n\t\t\t\tconst segment2 = other.degenerateSegment;\n\t\t\t\tconst delta1 = dir1;\n\t\t\t\tconst delta2 = dir2;\n\t\t\t\tsegment1.delta( delta1 );\n\t\t\t\tsegment2.delta( delta2 );\n\t\t\t\tconst startDelta = tmpVec.subVectors( segment2.start, segment1.start );\n\n\t\t\t\tconst denom = delta1.x * delta2.y - delta1.y * delta2.x;\n\t\t\t\tif ( isNearZero( denom ) ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t\tconst t = ( startDelta.x * delta2.y - startDelta.y * delta2.x ) / denom;\n\t\t\t\tconst u = - ( delta1.x * startDelta.y - delta1.y * startDelta.x ) / denom;\n\n\t\t\t\tif ( t < 0 || t > 1 || u < 0 || u > 1 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t\tconst z1 = segment1.start.z + delta1.z * t;\n\t\t\t\tconst z2 = segment2.start.z + delta2.z * u;\n\n\t\t\t\tif ( isNearZero( z1 - z2 ) ) {\n\n\t\t\t\t\tif ( target ) {\n\n\t\t\t\t\t\ttarget.start.copy( segment1.start ).addScaledVector( delta1, t );\n\t\t\t\t\t\ttarget.end.copy( segment1.start ).addScaledVector( delta1, t );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t} else if ( other.isDegenerateIntoPoint ) {\n\n\t\t\t\treturn intersectSegmentPoint( self, other, target );\n\n\t\t\t} else {\n\n\t\t\t\treturn intersectTriangleSegment( other, self, target, suppressLog );\n\n\t\t\t}\n\n\t\t} else if ( self.isDegenerateIntoPoint ) {\n\n\t\t\tif ( other.isDegenerateIntoPoint ) {\n\n\t\t\t\tif ( other.a.distanceToSquared( self.a ) < ZERO_EPSILON_SQR ) {\n\n\t\t\t\t\tif ( target ) {\n\n\t\t\t\t\t\ttarget.start.copy( self.a );\n\t\t\t\t\t\ttarget.end.copy( self.a );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t} else if ( other.isDegenerateIntoSegment ) {\n\n\t\t\t\treturn intersectSegmentPoint( other, self, target );\n\n\t\t\t} else {\n\n\t\t\t\treturn intersectTrianglePoint( other, self, target );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( other.isDegenerateIntoPoint ) {\n\n\t\t\t\treturn intersectTrianglePoint( self, other, target );\n\n\t\t\t} else if ( other.isDegenerateIntoSegment ) {\n\n\t\t\t\treturn intersectTriangleSegment( self, other, target, suppressLog );\n\n\t\t\t} /* else this is a general triangle-traingle case, so return undefined */\n\n\t\t}\n\n\t}\n\n\t/* TODO: If the triangles are coplanar and intersecting the target is nonsensical. It should at least\n\t * be a line contained by both triangles if not a different special case somehow represented in the return result.\n\t *\n\t * General triangle intersection code is based on Moller's algorithm from here: https://web.stanford.edu/class/cs277/resources/papers/Moller1997b.pdf\n\t * Reference implementation from here: https://github.com/erich666/jgt-code/blob/master/Volume_08/Number_1/Shen2003/tri_tri_test/include/Moller97.c#L570\n\t * All degeneracies are handled before the general algorithm.\n\t * Coplanar check is different from Moller's and based on SAT tests.\n\t */\n\treturn function intersectsTriangle( other, target = null, suppressLog = false ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tif ( ! other.isExtendedTriangle ) {\n\n\t\t\tsaTri2.copy( other );\n\t\t\tsaTri2.update();\n\t\t\tother = saTri2;\n\n\t\t} else if ( other.needsUpdate ) {\n\n\t\t\tother.update();\n\n\t\t}\n\n\t\tconst res = handleDegenerateCases( this, other, target, suppressLog );\n\t\tif ( res !== undefined ) {\n\n\t\t\treturn res;\n\n\t\t}\n\n\t\tconst plane1 = this.plane;\n\t\tconst plane2 = other.plane;\n\n\t\tlet a1Dist = plane2.distanceToPoint( this.a );\n\t\tlet b1Dist = plane2.distanceToPoint( this.b );\n\t\tlet c1Dist = plane2.distanceToPoint( this.c );\n\n\t\tif ( isNearZero( a1Dist ) )\n\t\t\ta1Dist = 0;\n\n\t\tif ( isNearZero( b1Dist ) )\n\t\t\tb1Dist = 0;\n\n\t\tif ( isNearZero( c1Dist ) )\n\t\t\tc1Dist = 0;\n\n\t\tconst a1b1Dist = a1Dist * b1Dist;\n\t\tconst a1c1Dist = a1Dist * c1Dist;\n\t\tif ( a1b1Dist > 0 && a1c1Dist > 0 ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tlet a2Dist = plane1.distanceToPoint( other.a );\n\t\tlet b2Dist = plane1.distanceToPoint( other.b );\n\t\tlet c2Dist = plane1.distanceToPoint( other.c );\n\n\t\tif ( isNearZero( a2Dist ) )\n\t\t\ta2Dist = 0;\n\n\t\tif ( isNearZero( b2Dist ) )\n\t\t\tb2Dist = 0;\n\n\t\tif ( isNearZero( c2Dist ) )\n\t\t\tc2Dist = 0;\n\n\t\tconst a2b2Dist = a2Dist * b2Dist;\n\t\tconst a2c2Dist = a2Dist * c2Dist;\n\t\tif ( a2b2Dist > 0 && a2c2Dist > 0 ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tdir1.copy( plane1.normal );\n\t\tdir2.copy( plane2.normal );\n\t\tconst intersectionLine = dir1.cross( dir2 );\n\n\t\tlet componentIndex = 0;\n\t\tlet maxComponent = Math.abs( intersectionLine.x );\n\t\tconst comp1 = Math.abs( intersectionLine.y );\n\t\tif ( comp1 > maxComponent ) {\n\n\t\t\tmaxComponent = comp1;\n\t\t\tcomponentIndex = 1;\n\n\t\t}\n\n\t\tconst comp2 = Math.abs( intersectionLine.z );\n\t\tif ( comp2 > maxComponent ) {\n\n\t\t\tcomponentIndex = 2;\n\n\t\t}\n\n\t\tconst key = componentKeys[ componentIndex ];\n\t\tconst a1Proj = this.a[ key ];\n\t\tconst b1Proj = this.b[ key ];\n\t\tconst c1Proj = this.c[ key ];\n\n\t\tconst a2Proj = other.a[ key ];\n\t\tconst b2Proj = other.b[ key ];\n\t\tconst c2Proj = other.c[ key ];\n\n\t\tif ( findIntersectionLineBounds( this, a1Proj, b1Proj, c1Proj, a1b1Dist, a1c1Dist, a1Dist, b1Dist, c1Dist, bounds1, edge1 ) ) {\n\n\t\t\treturn coplanarIntersectsTriangle( this, other, target, suppressLog );\n\n\t\t}\n\n\t\tif ( findIntersectionLineBounds( other, a2Proj, b2Proj, c2Proj, a2b2Dist, a2c2Dist, a2Dist, b2Dist, c2Dist, bounds2, edge2 ) ) {\n\n\t\t\treturn coplanarIntersectsTriangle( this, other, target, suppressLog );\n\n\t\t}\n\n\t\tif ( bounds1.y < bounds1.x ) {\n\n\t\t\tconst tmp = bounds1.y;\n\t\t\tbounds1.y = bounds1.x;\n\t\t\tbounds1.x = tmp;\n\n\t\t\ttempPoint.copy( edge1.start );\n\t\t\tedge1.start.copy( edge1.end );\n\t\t\tedge1.end.copy( tempPoint );\n\n\t\t}\n\n\t\tif ( bounds2.y < bounds2.x ) {\n\n\t\t\tconst tmp = bounds2.y;\n\t\t\tbounds2.y = bounds2.x;\n\t\t\tbounds2.x = tmp;\n\n\t\t\ttempPoint.copy( edge2.start );\n\t\t\tedge2.start.copy( edge2.end );\n\t\t\tedge2.end.copy( tempPoint );\n\n\t\t}\n\n\t\tif ( bounds1.y < bounds2.x || bounds2.y < bounds1.x ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tif ( target ) {\n\n\t\t\tif ( bounds2.x > bounds1.x ) {\n\n\t\t\t\ttarget.start.copy( edge2.start );\n\n\t\t\t} else {\n\n\t\t\t\ttarget.start.copy( edge1.start );\n\n\t\t\t}\n\n\t\t\tif ( bounds2.y < bounds1.y ) {\n\n\t\t\t\ttarget.end.copy( edge2.end );\n\n\t\t\t} else {\n\n\t\t\t\ttarget.end.copy( edge1.end );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\n\nExtendedTriangle.prototype.distanceToPoint = ( function () {\n\n\tconst target = /* @__PURE__ */ new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\n\nExtendedTriangle.prototype.distanceToTriangle = ( function () {\n\n\tconst point = /* @__PURE__ */ new Vector3();\n\tconst point2 = /* @__PURE__ */ new Vector3();\n\tconst cornerFields = [ 'a', 'b', 'c' ];\n\tconst line1 = /* @__PURE__ */ new Line3();\n\tconst line2 = /* @__PURE__ */ new Line3();\n\n\treturn function distanceToTriangle( other, target1 = null, target2 = null ) {\n\n\t\tconst lineTarget = target1 || target2 ? line1 : null;\n\t\tif ( this.intersectsTriangle( other, lineTarget ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tif ( target1 ) lineTarget.getCenter( target1 );\n\t\t\t\tif ( target2 ) lineTarget.getCenter( target2 );\n\n\t\t\t}\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check all point distances\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tlet dist;\n\t\t\tconst field = cornerFields[ i ];\n\t\t\tconst otherVec = other[ field ];\n\t\t\tthis.closestPointToPoint( otherVec, point );\n\n\t\t\tdist = otherVec.distanceToSquared( point );\n\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( point );\n\t\t\t\tif ( target2 ) target2.copy( otherVec );\n\n\t\t\t}\n\n\n\t\t\tconst thisVec = this[ field ];\n\t\t\tother.closestPointToPoint( thisVec, point );\n\n\t\t\tdist = thisVec.distanceToSquared( point );\n\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( thisVec );\n\t\t\t\tif ( target2 ) target2.copy( point );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst f11 = cornerFields[ i ];\n\t\t\tconst f12 = cornerFields[ ( i + 1 ) % 3 ];\n\t\t\tline1.set( this[ f11 ], this[ f12 ] );\n\t\t\tfor ( let i2 = 0; i2 < 3; i2 ++ ) {\n\n\t\t\t\tconst f21 = cornerFields[ i2 ];\n\t\t\t\tconst f22 = cornerFields[ ( i2 + 1 ) % 3 ];\n\t\t\t\tline2.set( other[ f21 ], other[ f22 ] );\n\n\t\t\t\tclosestPointsSegmentToSegment( line1, line2, point, point2 );\n\n\t\t\t\tconst dist = point.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","import { Vector3, Matrix4, Line3 } from 'three';\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\nimport { ExtendedTriangle } from './ExtendedTriangle.js';\nimport { closestPointsSegmentToSegment } from './MathUtilities.js';\n\nexport class OrientedBox {\n\n\tconstructor( min, max, matrix ) {\n\n\t\tthis.isOrientedBox = true;\n\t\tthis.min = new Vector3();\n\t\tthis.max = new Vector3();\n\t\tthis.matrix = new Matrix4();\n\t\tthis.invMatrix = new Matrix4();\n\t\tthis.points = new Array( 8 ).fill().map( () => new Vector3() );\n\t\tthis.satAxes = new Array( 3 ).fill().map( () => new Vector3() );\n\t\tthis.satBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.alignedSatBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\n\t\tthis.needsUpdate = false;\n\n\t\tif ( min ) this.min.copy( min );\n\t\tif ( max ) this.max.copy( max );\n\t\tif ( matrix ) this.matrix.copy( matrix );\n\n\t}\n\n\tset( min, max, matrix ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\t\tthis.matrix.copy( matrix );\n\t\tthis.needsUpdate = true;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.min.copy( other.min );\n\t\tthis.max.copy( other.max );\n\t\tthis.matrix.copy( other.matrix );\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nOrientedBox.prototype.update = ( function () {\n\n\treturn function update() {\n\n\t\tconst matrix = this.matrix;\n\t\tconst min = this.min;\n\t\tconst max = this.max;\n\n\t\tconst points = this.points;\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tconst i = ( ( 1 << 0 ) * x ) | ( ( 1 << 1 ) * y ) | ( ( 1 << 2 ) * z );\n\t\t\t\t\tconst v = points[ i ];\n\t\t\t\t\tv.x = x ? max.x : min.x;\n\t\t\t\t\tv.y = y ? max.y : min.y;\n\t\t\t\t\tv.z = z ? max.z : min.z;\n\n\t\t\t\t\tv.applyMatrix4( matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst minVec = points[ 0 ];\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst index = 1 << i;\n\t\t\tconst pi = points[ index ];\n\n\t\t\taxis.subVectors( minVec, pi );\n\t\t\tsb.setFromPoints( axis, points );\n\n\t\t}\n\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\t\talignedSatBounds[ 0 ].setFromPointsField( points, 'x' );\n\t\talignedSatBounds[ 1 ].setFromPointsField( points, 'y' );\n\t\talignedSatBounds[ 2 ].setFromPointsField( points, 'z' );\n\n\t\tthis.invMatrix.copy( this.matrix ).invert();\n\t\tthis.needsUpdate = false;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsBox = ( function () {\n\n\tconst aabbBounds = /* @__PURE__ */ new SeparatingAxisBounds();\n\treturn function intersectsBox( box ) {\n\n\t\t// TODO: should this be doing SAT against the AABB?\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\t\tconst alignedSatBounds = this.alignedSatBounds;\n\n\t\taabbBounds.min = min.x;\n\t\taabbBounds.max = max.x;\n\t\tif ( alignedSatBounds[ 0 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.y;\n\t\taabbBounds.max = max.y;\n\t\tif ( alignedSatBounds[ 1 ].isSeparated( aabbBounds ) ) return false;\n\n\t\taabbBounds.min = min.z;\n\t\taabbBounds.max = max.z;\n\t\tif ( alignedSatBounds[ 2 ].isSeparated( aabbBounds ) ) return false;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst axis = satAxes[ i ];\n\t\t\tconst sb = satBounds[ i ];\n\t\t\taabbBounds.setFromBox( axis, box );\n\t\t\tif ( sb.isSeparated( aabbBounds ) ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.intersectsTriangle = ( function () {\n\n\tconst saTri = /* @__PURE__ */ new ExtendedTriangle();\n\tconst pointsArr = /* @__PURE__ */ new Array( 3 );\n\tconst cachedSatBounds = /* @__PURE__ */ new SeparatingAxisBounds();\n\tconst cachedSatBounds2 = /* @__PURE__ */ new SeparatingAxisBounds();\n\tconst cachedAxis = /* @__PURE__ */ new Vector3();\n\treturn function intersectsTriangle( triangle ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tif ( ! triangle.isExtendedTriangle ) {\n\n\t\t\tsaTri.copy( triangle );\n\t\t\tsaTri.update();\n\t\t\ttriangle = saTri;\n\n\t\t} else if ( triangle.needsUpdate ) {\n\n\t\t\ttriangle.update();\n\n\t\t}\n\n\t\tconst satBounds = this.satBounds;\n\t\tconst satAxes = this.satAxes;\n\n\t\tpointsArr[ 0 ] = triangle.a;\n\t\tpointsArr[ 1 ] = triangle.b;\n\t\tpointsArr[ 2 ] = triangle.c;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = satBounds[ i ];\n\t\t\tconst sa = satAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, pointsArr );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\tconst triSatBounds = triangle.satBounds;\n\t\tconst triSatAxes = triangle.satAxes;\n\t\tconst points = this.points;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sb = triSatBounds[ i ];\n\t\t\tconst sa = triSatAxes[ i ];\n\t\t\tcachedSatBounds.setFromPoints( sa, points );\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\n\n\t\t}\n\n\t\t// check crossed axes\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst sa1 = satAxes[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\n\n\t\t\t\tconst sa2 = triSatAxes[ i2 ];\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, pointsArr );\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, points );\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.closestPointToPoint = ( function () {\n\n\treturn function closestPointToPoint( point, target1 ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\ttarget1\n\t\t\t.copy( point )\n\t\t\t.applyMatrix4( this.invMatrix )\n\t\t\t.clamp( this.min, this.max )\n\t\t\t.applyMatrix4( this.matrix );\n\n\t\treturn target1;\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToPoint = ( function () {\n\n\tconst target = new Vector3();\n\treturn function distanceToPoint( point ) {\n\n\t\tthis.closestPointToPoint( point, target );\n\t\treturn point.distanceTo( target );\n\n\t};\n\n} )();\n\nOrientedBox.prototype.distanceToBox = ( function () {\n\n\tconst xyzFields = [ 'x', 'y', 'z' ];\n\tconst segments1 = /* @__PURE__ */ new Array( 12 ).fill().map( () => new Line3() );\n\tconst segments2 = /* @__PURE__ */ new Array( 12 ).fill().map( () => new Line3() );\n\n\tconst point1 = /* @__PURE__ */ new Vector3();\n\tconst point2 = /* @__PURE__ */ new Vector3();\n\n\t// early out if we find a value below threshold\n\treturn function distanceToBox( box, threshold = 0, target1 = null, target2 = null ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t\tif ( this.intersectsBox( box ) ) {\n\n\t\t\tif ( target1 || target2 ) {\n\n\t\t\t\tbox.getCenter( point2 );\n\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\tbox.closestPointToPoint( point1, point2 );\n\n\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t}\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tconst threshold2 = threshold * threshold;\n\t\tconst min = box.min;\n\t\tconst max = box.max;\n\t\tconst points = this.points;\n\n\n\t\t// iterate over every edge and compare distances\n\t\tlet closestDistanceSq = Infinity;\n\n\t\t// check over all these points\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst p = points[ i ];\n\t\t\tpoint2.copy( p ).clamp( min, max );\n\n\t\t\tconst dist = p.distanceToSquared( point2 );\n\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\tif ( target1 ) target1.copy( p );\n\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate and check all line segment distances\n\t\tlet count = 0;\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tfor ( let i1 = 0; i1 <= 1; i1 ++ ) {\n\n\t\t\t\tfor ( let i2 = 0; i2 <= 1; i2 ++ ) {\n\n\t\t\t\t\tconst nextIndex = ( i + 1 ) % 3;\n\t\t\t\t\tconst nextIndex2 = ( i + 2 ) % 3;\n\n\t\t\t\t\t// get obb line segments\n\t\t\t\t\tconst index = i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst index2 = 1 << i | i1 << nextIndex | i2 << nextIndex2;\n\t\t\t\t\tconst p1 = points[ index ];\n\t\t\t\t\tconst p2 = points[ index2 ];\n\t\t\t\t\tconst line1 = segments1[ count ];\n\t\t\t\t\tline1.set( p1, p2 );\n\n\n\t\t\t\t\t// get aabb line segments\n\t\t\t\t\tconst f1 = xyzFields[ i ];\n\t\t\t\t\tconst f2 = xyzFields[ nextIndex ];\n\t\t\t\t\tconst f3 = xyzFields[ nextIndex2 ];\n\t\t\t\t\tconst line2 = segments2[ count ];\n\t\t\t\t\tconst start = line2.start;\n\t\t\t\t\tconst end = line2.end;\n\n\t\t\t\t\tstart[ f1 ] = min[ f1 ];\n\t\t\t\t\tstart[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tstart[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tend[ f1 ] = max[ f1 ];\n\t\t\t\t\tend[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\n\t\t\t\t\tend[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\n\n\t\t\t\t\tcount ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check all the other boxes point\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\n\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\n\n\t\t\t\t\tpoint2.x = x ? max.x : min.x;\n\t\t\t\t\tpoint2.y = y ? max.y : min.y;\n\t\t\t\t\tpoint2.z = z ? max.z : min.z;\n\n\t\t\t\t\tthis.closestPointToPoint( point2, point1 );\n\t\t\t\t\tconst dist = point2.distanceToSquared( point1 );\n\t\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 12; i ++ ) {\n\n\t\t\tconst l1 = segments1[ i ];\n\t\t\tfor ( let i2 = 0; i2 < 12; i2 ++ ) {\n\n\t\t\t\tconst l2 = segments2[ i2 ];\n\t\t\t\tclosestPointsSegmentToSegment( l1, l2, point1, point2 );\n\t\t\t\tconst dist = point1.distanceToSquared( point2 );\n\t\t\t\tif ( dist < closestDistanceSq ) {\n\n\t\t\t\t\tclosestDistanceSq = dist;\n\t\t\t\t\tif ( target1 ) target1.copy( point1 );\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\n\n\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.sqrt( closestDistanceSq );\n\n\t};\n\n} )();\n","import { ExtendedTriangle } from '../math/ExtendedTriangle.js';\nimport { PrimitivePool } from './PrimitivePool.js';\n\nclass ExtendedTrianglePoolBase extends PrimitivePool {\n\n\tconstructor() {\n\n\t\tsuper( () => new ExtendedTriangle() );\n\n\t}\n\n}\n\nexport const ExtendedTrianglePool = /* @__PURE__ */ new ExtendedTrianglePoolBase();\n","import { Vector3 } from 'three';\n\nconst temp = /* @__PURE__ */ new Vector3();\nconst temp1 = /* @__PURE__ */ new Vector3();\n\nexport function closestPointToPoint(\n\tbvh,\n\tpoint,\n\ttarget = { },\n\tminThreshold = 0,\n\tmaxThreshold = Infinity,\n) {\n\n\t// early out if under minThreshold\n\t// skip checking if over maxThreshold\n\t// set minThreshold = maxThreshold to quickly check if a point is within a threshold\n\t// returns Infinity if no value found\n\tconst minThresholdSq = minThreshold * minThreshold;\n\tconst maxThresholdSq = maxThreshold * maxThreshold;\n\tlet closestDistanceSq = Infinity;\n\tlet closestDistanceTriIndex = null;\n\tbvh.shapecast(\n\n\t\t{\n\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\ttemp.copy( point ).clamp( box.min, box.max );\n\t\t\t\treturn temp.distanceToSquared( point );\n\n\t\t\t},\n\n\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\treturn score < closestDistanceSq && score < maxThresholdSq;\n\n\t\t\t},\n\n\t\t\tintersectsTriangle: ( tri, triIndex ) => {\n\n\t\t\t\ttri.closestPointToPoint( point, temp );\n\t\t\t\tconst distSq = point.distanceToSquared( temp );\n\t\t\t\tif ( distSq < closestDistanceSq ) {\n\n\t\t\t\t\ttemp1.copy( temp );\n\t\t\t\t\tclosestDistanceSq = distSq;\n\t\t\t\t\tclosestDistanceTriIndex = triIndex;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distSq < minThresholdSq ) {\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t}\n\n\t);\n\n\tif ( closestDistanceSq === Infinity ) return null;\n\n\tconst closestDistance = Math.sqrt( closestDistanceSq );\n\n\tif ( ! target.point ) target.point = temp1.clone();\n\telse target.point.copy( temp1 );\n\ttarget.distance = closestDistance,\n\ttarget.faceIndex = closestDistanceTriIndex;\n\n\treturn target;\n\n}\n","import { Vector3, Vector2, Triangle, DoubleSide, BackSide, REVISION } from 'three';\n\nconst IS_GT_REVISION_169 = parseInt( REVISION ) >= 169;\nconst IS_LT_REVISION_161 = parseInt( REVISION ) <= 161;\n\n// Ripped and modified From THREE.js Mesh raycast\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\nconst _vA = /* @__PURE__ */ new Vector3();\nconst _vB = /* @__PURE__ */ new Vector3();\nconst _vC = /* @__PURE__ */ new Vector3();\n\nconst _uvA = /* @__PURE__ */ new Vector2();\nconst _uvB = /* @__PURE__ */ new Vector2();\nconst _uvC = /* @__PURE__ */ new Vector2();\n\nconst _normalA = /* @__PURE__ */ new Vector3();\nconst _normalB = /* @__PURE__ */ new Vector3();\nconst _normalC = /* @__PURE__ */ new Vector3();\n\nconst _intersectionPoint = /* @__PURE__ */ new Vector3();\nfunction checkIntersection( ray, pA, pB, pC, point, side, near, far ) {\n\n\tlet intersect;\n\tif ( side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\tconst distance = ray.origin.distanceTo( point );\n\n\tif ( distance < near || distance > far ) return null;\n\n\treturn {\n\n\t\tdistance: distance,\n\t\tpoint: point.clone(),\n\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( ray, position, normal, uv, uv1, a, b, c, side, near, far ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst intersection = checkIntersection( ray, _vA, _vB, _vC, _intersectionPoint, side, near, far );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = new Vector2();\n\t\t\tconst res = Triangle.getInterpolation( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, intersection.uv );\n\t\t\tif ( ! IS_GT_REVISION_169 ) {\n\n\t\t\t\tintersection.uv = res;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv1 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv1, a );\n\t\t\t_uvB.fromBufferAttribute( uv1, b );\n\t\t\t_uvC.fromBufferAttribute( uv1, c );\n\n\t\t\tintersection.uv1 = new Vector2();\n\t\t\tconst res = Triangle.getInterpolation( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, intersection.uv1 );\n\t\t\tif ( ! IS_GT_REVISION_169 ) {\n\n\t\t\t\tintersection.uv1 = res;\n\n\t\t\t}\n\n\t\t\tif ( IS_LT_REVISION_161 ) {\n\n\t\t\t\tintersection.uv2 = intersection.uv1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( normal ) {\n\n\t\t\t_normalA.fromBufferAttribute( normal, a );\n\t\t\t_normalB.fromBufferAttribute( normal, b );\n\t\t\t_normalC.fromBufferAttribute( normal, c );\n\n\t\t\tintersection.normal = new Vector3();\n\t\t\tconst res = Triangle.getInterpolation( _intersectionPoint, _vA, _vB, _vC, _normalA, _normalB, _normalC, intersection.normal );\n\t\t\tif ( intersection.normal.dot( ray.direction ) > 0 ) {\n\n\t\t\t\tintersection.normal.multiplyScalar( - 1 );\n\n\t\t\t}\n\n\t\t\tif ( ! IS_GT_REVISION_169 ) {\n\n\t\t\t\tintersection.normal = res;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\t\tintersection.faceIndex = a;\n\n\t\tif ( IS_GT_REVISION_169 ) {\n\n\t\t\tconst barycoord = new Vector3();\n\t\t\tTriangle.getBarycoord( _intersectionPoint, _vA, _vB, _vC, barycoord );\n\n\t\t\tintersection.barycoord = barycoord;\n\n\t\t}\n\n\t}\n\n\treturn intersection;\n\n}\n\nfunction getSide( materialOrSide ) {\n\n\treturn materialOrSide && materialOrSide.isMaterial ? materialOrSide.side : materialOrSide;\n\n}\n\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\nexport function intersectTri( geometry, materialOrSide, ray, tri, intersections, near, far ) {\n\n\tconst triOffset = tri * 3;\n\tlet a = triOffset + 0;\n\tlet b = triOffset + 1;\n\tlet c = triOffset + 2;\n\n\tconst { index, groups } = geometry;\n\tif ( geometry.index ) {\n\n\t\ta = index.getX( a );\n\t\tb = index.getX( b );\n\t\tc = index.getX( c );\n\n\t}\n\n\tconst { position, normal, uv, uv1 } = geometry.attributes;\n\tif ( Array.isArray( materialOrSide ) ) {\n\n\t\t// check which groups a triangle is present in and run the intersections\n\t\t// TODO: we shouldn't need to run and intersection test multiple times\n\t\tconst firstIndex = tri * 3;\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst { start, count, materialIndex } = groups[ i ];\n\t\t\tif ( firstIndex >= start && firstIndex < start + count ) {\n\n\t\t\t\tconst side = getSide( materialOrSide[ materialIndex ] );\n\t\t\t\tconst intersection = checkBufferGeometryIntersection( ray, position, normal, uv, uv1, a, b, c, side, near, far );\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tintersection.faceIndex = tri;\n\t\t\t\t\tintersection.face.materialIndex = materialIndex;\n\n\t\t\t\t\tif ( intersections ) {\n\n\t\t\t\t\t\tintersections.push( intersection );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn intersection;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} else {\n\n\t\t// run the intersection for the single material\n\t\tconst side = getSide( materialOrSide );\n\t\tconst intersection = checkBufferGeometryIntersection( ray, position, normal, uv, uv1, a, b, c, side, near, far );\n\t\tif ( intersection ) {\n\n\t\t\tintersection.faceIndex = tri;\n\t\t\tintersection.face.materialIndex = 0;\n\n\t\t\tif ( intersections ) {\n\n\t\t\t\tintersections.push( intersection );\n\n\t\t\t} else {\n\n\t\t\t\treturn intersection;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn null;\n\n}\n","\nimport { Vector2, Vector3, Triangle } from 'three';\n\n// sets the vertices of triangle `tri` with the 3 vertices after i\nexport function setTriangle( tri, i, index, pos ) {\n\n\tconst ta = tri.a;\n\tconst tb = tri.b;\n\tconst tc = tri.c;\n\n\tlet i0 = i;\n\tlet i1 = i + 1;\n\tlet i2 = i + 2;\n\tif ( index ) {\n\n\t\ti0 = index.getX( i0 );\n\t\ti1 = index.getX( i1 );\n\t\ti2 = index.getX( i2 );\n\n\t}\n\n\tta.x = pos.getX( i0 );\n\tta.y = pos.getY( i0 );\n\tta.z = pos.getZ( i0 );\n\n\ttb.x = pos.getX( i1 );\n\ttb.y = pos.getY( i1 );\n\ttb.z = pos.getZ( i1 );\n\n\ttc.x = pos.getX( i2 );\n\ttc.y = pos.getY( i2 );\n\ttc.z = pos.getZ( i2 );\n\n}\n\nconst tempV1 = /* @__PURE__ */ new Vector3();\nconst tempV2 = /* @__PURE__ */ new Vector3();\nconst tempV3 = /* @__PURE__ */ new Vector3();\nconst tempUV1 = /* @__PURE__ */ new Vector2();\nconst tempUV2 = /* @__PURE__ */ new Vector2();\nconst tempUV3 = /* @__PURE__ */ new Vector2();\n\nexport function getTriangleHitPointInfo( point, geometry, triangleIndex, target ) {\n\n\tconst indices = geometry.getIndex().array;\n\tconst positions = geometry.getAttribute( 'position' );\n\tconst uvs = geometry.getAttribute( 'uv' );\n\n\tconst a = indices[ triangleIndex * 3 ];\n\tconst b = indices[ triangleIndex * 3 + 1 ];\n\tconst c = indices[ triangleIndex * 3 + 2 ];\n\n\ttempV1.fromBufferAttribute( positions, a );\n\ttempV2.fromBufferAttribute( positions, b );\n\ttempV3.fromBufferAttribute( positions, c );\n\n\t// find the associated material index\n\tlet materialIndex = 0;\n\tconst groups = geometry.groups;\n\tconst firstVertexIndex = triangleIndex * 3;\n\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\tconst group = groups[ i ];\n\t\tconst { start, count } = group;\n\t\tif ( firstVertexIndex >= start && firstVertexIndex < start + count ) {\n\n\t\t\tmaterialIndex = group.materialIndex;\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t// extract barycoord\n\tconst barycoord = target && target.barycoord ? target.barycoord : new Vector3();\n\tTriangle.getBarycoord( point, tempV1, tempV2, tempV3, barycoord );\n\n\t// extract uvs\n\tlet uv = null;\n\tif ( uvs ) {\n\n\t\ttempUV1.fromBufferAttribute( uvs, a );\n\t\ttempUV2.fromBufferAttribute( uvs, b );\n\t\ttempUV3.fromBufferAttribute( uvs, c );\n\n\t\tif ( target && target.uv ) uv = target.uv;\n\t\telse uv = new Vector2();\n\n\t\tTriangle.getInterpolation( point, tempV1, tempV2, tempV3, tempUV1, tempUV2, tempUV3, uv );\n\n\t}\n\n\t// adjust the provided target or create a new one\n\tif ( target ) {\n\n\t\tif ( ! target.face ) target.face = { };\n\t\ttarget.face.a = a;\n\t\ttarget.face.b = b;\n\t\ttarget.face.c = c;\n\t\ttarget.face.materialIndex = materialIndex;\n\t\tif ( ! target.face.normal ) target.face.normal = new Vector3();\n\t\tTriangle.getNormal( tempV1, tempV2, tempV3, target.face.normal );\n\n\t\tif ( uv ) target.uv = uv;\n\t\ttarget.barycoord = barycoord;\n\n\t\treturn target;\n\n\t} else {\n\n\t\treturn {\n\t\t\tface: {\n\t\t\t\ta: a,\n\t\t\t\tb: b,\n\t\t\t\tc: c,\n\t\t\t\tmaterialIndex: materialIndex,\n\t\t\t\tnormal: Triangle.getNormal( tempV1, tempV2, tempV3, new Vector3() )\n\t\t\t},\n\t\t\tuv: uv,\n\t\t\tbarycoord: barycoord,\n\t\t};\n\n\t}\n\n}\n","import { intersectTri } from '../../utils/ThreeRayIntersectUtilities.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\n\n/*************************************************************/\n/* This file is generated from \"iterationUtils.template.js\". */\n/*************************************************************/\n\nfunction intersectTris( bvh, materialOrSide, ray, offset, count, intersections, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\n\t\tintersectTri( geometry, materialOrSide, ray, i, intersections, near, far );\n\n\n\t}\n\n}\n\nfunction intersectClosestTri( bvh, materialOrSide, ray, offset, count, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tlet dist = Infinity;\n\tlet res = null;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tlet intersection;\n\n\t\tintersection = intersectTri( geometry, materialOrSide, ray, i, null, near, far );\n\n\n\t\tif ( intersection && intersection.distance < dist ) {\n\n\t\t\tres = intersection;\n\t\t\tdist = intersection.distance;\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\nfunction iterateOverTriangles(\n\toffset,\n\tcount,\n\tbvh,\n\tintersectsTriangleFunc,\n\tcontained,\n\tdepth,\n\ttriangle\n) {\n\n\tconst { geometry } = bvh;\n\tconst { index } = geometry;\n\tconst pos = geometry.attributes.position;\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\tlet tri;\n\n\t\ttri = i;\n\n\t\tsetTriangle( triangle, tri * 3, index, pos );\n\t\ttriangle.needsUpdate = true;\n\n\t\tif ( intersectsTriangleFunc( triangle, tri, contained, depth ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\nexport { intersectClosestTri, intersectTris, iterateOverTriangles };\n","import { UINT32_PER_NODE, BYTES_PER_NODE } from '../Constants.js';\nimport { IS_LEAF, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\n\n/****************************************************/\n/* This file is generated from \"refit.template.js\". */\n/****************************************************/\n\nfunction refit( bvh, nodeIndices = null ) {\n\n\tif ( nodeIndices && Array.isArray( nodeIndices ) ) {\n\n\t\tnodeIndices = new Set( nodeIndices );\n\n\t}\n\n\tconst geometry = bvh.geometry;\n\tconst indexArr = geometry.index ? geometry.index.array : null;\n\tconst posAttr = geometry.attributes.position;\n\n\tlet buffer, uint32Array, uint16Array, float32Array;\n\tlet byteOffset = 0;\n\tconst roots = bvh._roots;\n\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\tbuffer = roots[ i ];\n\t\tuint32Array = new Uint32Array( buffer );\n\t\tuint16Array = new Uint16Array( buffer );\n\t\tfloat32Array = new Float32Array( buffer );\n\n\t\t_traverse( 0, byteOffset );\n\t\tbyteOffset += buffer.byteLength;\n\n\t}\n\n\tfunction _traverse( nodeIndex32, byteOffset, force = false ) {\n\n\t\tconst nodeIndex16 = nodeIndex32 * 2;\n\t\tif ( IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\tconst offset = uint32Array[ nodeIndex32 + 6 ];\n\t\t\tconst count = uint16Array[ nodeIndex16 + 14 ];\n\n\t\t\tlet minx = Infinity;\n\t\t\tlet miny = Infinity;\n\t\t\tlet minz = Infinity;\n\t\t\tlet maxx = - Infinity;\n\t\t\tlet maxy = - Infinity;\n\t\t\tlet maxz = - Infinity;\n\n\n\t\t\tfor ( let i = 3 * offset, l = 3 * ( offset + count ); i < l; i ++ ) {\n\n\t\t\t\tlet index = indexArr[ i ];\n\t\t\t\tconst x = posAttr.getX( index );\n\t\t\t\tconst y = posAttr.getY( index );\n\t\t\t\tconst z = posAttr.getZ( index );\n\n\t\t\t\tif ( x < minx ) minx = x;\n\t\t\t\tif ( x > maxx ) maxx = x;\n\n\t\t\t\tif ( y < miny ) miny = y;\n\t\t\t\tif ( y > maxy ) maxy = y;\n\n\t\t\t\tif ( z < minz ) minz = z;\n\t\t\t\tif ( z > maxz ) maxz = z;\n\n\t\t\t}\n\n\n\t\t\tif (\n\t\t\t\tfloat32Array[ nodeIndex32 + 0 ] !== minx ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 1 ] !== miny ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 2 ] !== minz ||\n\n\t\t\t\tfloat32Array[ nodeIndex32 + 3 ] !== maxx ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 4 ] !== maxy ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 5 ] !== maxz\n\t\t\t) {\n\n\t\t\t\tfloat32Array[ nodeIndex32 + 0 ] = minx;\n\t\t\t\tfloat32Array[ nodeIndex32 + 1 ] = miny;\n\t\t\t\tfloat32Array[ nodeIndex32 + 2 ] = minz;\n\n\t\t\t\tfloat32Array[ nodeIndex32 + 3 ] = maxx;\n\t\t\t\tfloat32Array[ nodeIndex32 + 4 ] = maxy;\n\t\t\t\tfloat32Array[ nodeIndex32 + 5 ] = maxz;\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = LEFT_NODE( nodeIndex32 );\n\t\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\t\t// the identifying node indices provided by the shapecast function include offsets of all\n\t\t\t// root buffers to guarantee they're unique between roots so offset left and right indices here.\n\t\t\tlet forceChildren = force;\n\t\t\tlet includesLeft = false;\n\t\t\tlet includesRight = false;\n\n\t\t\tif ( nodeIndices ) {\n\n\t\t\t\t// if we see that neither the left or right child are included in the set that need to be updated\n\t\t\t\t// then we assume that all children need to be updated.\n\t\t\t\tif ( ! forceChildren ) {\n\n\t\t\t\t\tconst leftNodeId = left / UINT32_PER_NODE + byteOffset / BYTES_PER_NODE;\n\t\t\t\t\tconst rightNodeId = right / UINT32_PER_NODE + byteOffset / BYTES_PER_NODE;\n\t\t\t\t\tincludesLeft = nodeIndices.has( leftNodeId );\n\t\t\t\t\tincludesRight = nodeIndices.has( rightNodeId );\n\t\t\t\t\tforceChildren = ! includesLeft && ! includesRight;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tincludesLeft = true;\n\t\t\t\tincludesRight = true;\n\n\t\t\t}\n\n\t\t\tconst traverseLeft = forceChildren || includesLeft;\n\t\t\tconst traverseRight = forceChildren || includesRight;\n\n\t\t\tlet leftChange = false;\n\t\t\tif ( traverseLeft ) {\n\n\t\t\t\tleftChange = _traverse( left, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tlet rightChange = false;\n\t\t\tif ( traverseRight ) {\n\n\t\t\t\trightChange = _traverse( right, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tconst didChange = leftChange || rightChange;\n\t\t\tif ( didChange ) {\n\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tconst left_i = left + i;\n\t\t\t\t\tconst right_i = right + i;\n\t\t\t\t\tconst minLeftValue = float32Array[ left_i ];\n\t\t\t\t\tconst maxLeftValue = float32Array[ left_i + 3 ];\n\t\t\t\t\tconst minRightValue = float32Array[ right_i ];\n\t\t\t\t\tconst maxRightValue = float32Array[ right_i + 3 ];\n\n\t\t\t\t\tfloat32Array[ nodeIndex32 + i ] = minLeftValue < minRightValue ? minLeftValue : minRightValue;\n\t\t\t\t\tfloat32Array[ nodeIndex32 + i + 3 ] = maxLeftValue > maxRightValue ? maxLeftValue : maxRightValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn didChange;\n\n\t\t}\n\n\t}\n\n}\n\nexport { refit };\n","/**\n * This function performs intersection tests similar to Ray.intersectBox in three.js,\n * with the difference that the box values are read from an array to improve performance.\n */\nexport function intersectRay( nodeIndex32, array, ray, near, far ) {\n\n\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\tconst invdirx = 1 / ray.direction.x,\n\t\tinvdiry = 1 / ray.direction.y,\n\t\tinvdirz = 1 / ray.direction.z;\n\n\tconst ox = ray.origin.x;\n\tconst oy = ray.origin.y;\n\tconst oz = ray.origin.z;\n\n\tlet minx = array[ nodeIndex32 ];\n\tlet maxx = array[ nodeIndex32 + 3 ];\n\n\tlet miny = array[ nodeIndex32 + 1 ];\n\tlet maxy = array[ nodeIndex32 + 3 + 1 ];\n\n\tlet minz = array[ nodeIndex32 + 2 ];\n\tlet maxz = array[ nodeIndex32 + 3 + 2 ];\n\n\tif ( invdirx >= 0 ) {\n\n\t\ttmin = ( minx - ox ) * invdirx;\n\t\ttmax = ( maxx - ox ) * invdirx;\n\n\t} else {\n\n\t\ttmin = ( maxx - ox ) * invdirx;\n\t\ttmax = ( minx - ox ) * invdirx;\n\n\t}\n\n\tif ( invdiry >= 0 ) {\n\n\t\ttymin = ( miny - oy ) * invdiry;\n\t\ttymax = ( maxy - oy ) * invdiry;\n\n\t} else {\n\n\t\ttymin = ( maxy - oy ) * invdiry;\n\t\ttymax = ( miny - oy ) * invdiry;\n\n\t}\n\n\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return false;\n\n\tif ( tymin > tmin || isNaN( tmin ) ) tmin = tymin;\n\n\tif ( tymax < tmax || isNaN( tmax ) ) tmax = tymax;\n\n\tif ( invdirz >= 0 ) {\n\n\t\ttzmin = ( minz - oz ) * invdirz;\n\t\ttzmax = ( maxz - oz ) * invdirz;\n\n\t} else {\n\n\t\ttzmin = ( maxz - oz ) * invdirz;\n\t\ttzmax = ( minz - oz ) * invdirz;\n\n\t}\n\n\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return false;\n\n\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t//return point closest to the ray (positive side)\n\n\treturn tmin <= far && tmax >= near;\n\n}\n","import { intersectTri } from '../../utils/ThreeRayIntersectUtilities.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\n\n/*************************************************************/\n/* This file is generated from \"iterationUtils.template.js\". */\n/*************************************************************/\n\nfunction intersectTris_indirect( bvh, materialOrSide, ray, offset, count, intersections, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tlet vi = _indirectBuffer ? _indirectBuffer[ i ] : i;\n\t\tintersectTri( geometry, materialOrSide, ray, vi, intersections, near, far );\n\n\n\t}\n\n}\n\nfunction intersectClosestTri_indirect( bvh, materialOrSide, ray, offset, count, near, far ) {\n\n\tconst { geometry, _indirectBuffer } = bvh;\n\tlet dist = Infinity;\n\tlet res = null;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tlet intersection;\n\t\tintersection = intersectTri( geometry, materialOrSide, ray, _indirectBuffer ? _indirectBuffer[ i ] : i, null, near, far );\n\n\n\t\tif ( intersection && intersection.distance < dist ) {\n\n\t\t\tres = intersection;\n\t\t\tdist = intersection.distance;\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\nfunction iterateOverTriangles_indirect(\n\toffset,\n\tcount,\n\tbvh,\n\tintersectsTriangleFunc,\n\tcontained,\n\tdepth,\n\ttriangle\n) {\n\n\tconst { geometry } = bvh;\n\tconst { index } = geometry;\n\tconst pos = geometry.attributes.position;\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\tlet tri;\n\t\ttri = bvh.resolveTriangleIndex( i );\n\n\t\tsetTriangle( triangle, tri * 3, index, pos );\n\t\ttriangle.needsUpdate = true;\n\n\t\tif ( intersectsTriangleFunc( triangle, tri, contained, depth ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n\nexport { intersectClosestTri_indirect, intersectTris_indirect, iterateOverTriangles_indirect };\n","import { intersectRay } from '../utils/intersectUtils.js';\nimport { IS_LEAF, OFFSET, COUNT, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectTris } from '../utils/iterationUtils.generated.js';\nimport '../utils/iterationUtils_indirect.generated.js';\n\n/******************************************************/\n/* This file is generated from \"raycast.template.js\". */\n/******************************************************/\n\nfunction raycast( bvh, root, materialOrSide, ray, intersects, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\t_raycast( 0, bvh, materialOrSide, ray, intersects, near, far );\n\tBufferStack.clearBuffer();\n\n}\n\nfunction _raycast( nodeIndex32, bvh, materialOrSide, ray, intersects, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tconst nodeIndex16 = nodeIndex32 * 2;\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\n\t\tintersectTris( bvh, materialOrSide, ray, offset, count, intersects, near, far );\n\n\n\t} else {\n\n\t\tconst leftIndex = LEFT_NODE( nodeIndex32 );\n\t\tif ( intersectRay( leftIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( leftIndex, bvh, materialOrSide, ray, intersects, near, far );\n\n\t\t}\n\n\t\tconst rightIndex = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\tif ( intersectRay( rightIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( rightIndex, bvh, materialOrSide, ray, intersects, near, far );\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycast };\n","import { IS_LEAF, OFFSET, COUNT, SPLIT_AXIS, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectRay } from '../utils/intersectUtils.js';\nimport { intersectClosestTri } from '../utils/iterationUtils.generated.js';\nimport '../utils/iterationUtils_indirect.generated.js';\n\n/***********************************************************/\n/* This file is generated from \"raycastFirst.template.js\". */\n/***********************************************************/\n\nconst _xyzFields = [ 'x', 'y', 'z' ];\n\nfunction raycastFirst( bvh, root, materialOrSide, ray, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _raycastFirst( 0, bvh, materialOrSide, ray, near, far );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _raycastFirst( nodeIndex32, bvh, materialOrSide, ray, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\n\t\t// eslint-disable-next-line no-unreachable\n\t\treturn intersectClosestTri( bvh, materialOrSide, ray, offset, count, near, far );\n\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\n\t\tconst splitAxis = SPLIT_AXIS( nodeIndex32, uint32Array );\n\t\tconst xyzAxis = _xyzFields[ splitAxis ];\n\t\tconst rayDir = ray.direction[ xyzAxis ];\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\n\t\tlet c1, c2;\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = LEFT_NODE( nodeIndex32 );\n\t\t\tc2 = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\t} else {\n\n\t\t\tc1 = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\t\tc2 = LEFT_NODE( nodeIndex32 );\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRay( c1, float32Array, ray, near, far );\n\t\tconst c1Result = c1Intersection ? _raycastFirst( c1, bvh, materialOrSide, ray, near, far ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\n\t\t\t// \"point\" is in the local frame of the bvh\n\t\t\tconst point = c1Result.point[ xyzAxis ];\n\t\t\tconst isOutside = leftToRight ?\n\t\t\t\tpoint <= float32Array[ c2 + splitAxis ] : // min bounding data\n\t\t\t\tpoint >= float32Array[ c2 + splitAxis + 3 ]; // max bounding data\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\n\t\t// intersection in the second, so check the second node and then take the better of the two\n\t\tconst c2Intersection = intersectRay( c2, float32Array, ray, near, far );\n\t\tconst c2Result = c2Intersection ? _raycastFirst( c2, bvh, materialOrSide, ray, near, far ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycastFirst };\n","import { Box3, Matrix4 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { ExtendedTriangle } from '../../math/ExtendedTriangle.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { IS_LEAF, OFFSET, COUNT, BOUNDING_DATA_INDEX, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { getTriCount } from '../build/geometryUtils.js';\n\n/*****************************************************************/\n/* This file is generated from \"intersectsGeometry.template.js\". */\n/*****************************************************************/\n/* eslint-disable indent */\n\nconst boundingBox = /* @__PURE__ */ new Box3();\nconst triangle = /* @__PURE__ */ new ExtendedTriangle();\nconst triangle2 = /* @__PURE__ */ new ExtendedTriangle();\nconst invertedMat = /* @__PURE__ */ new Matrix4();\n\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\n\nfunction intersectsGeometry( bvh, root, otherGeometry, geometryToBvh ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _intersectsGeometry( 0, bvh, otherGeometry, geometryToBvh );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _intersectsGeometry( nodeIndex32, bvh, otherGeometry, geometryToBvh, cachedObb = null ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tif ( cachedObb === null ) {\n\n\t\tif ( ! otherGeometry.boundingBox ) {\n\n\t\t\totherGeometry.computeBoundingBox();\n\n\t\t}\n\n\t\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\t\tcachedObb = obb;\n\n\t}\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst thisGeometry = bvh.geometry;\n\t\tconst thisIndex = thisGeometry.index;\n\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\tconst otherIndex = otherGeometry.index;\n\t\tconst otherPos = otherGeometry.attributes.position;\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\n\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\n\t\t// here.\n\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t// if there's a bounds tree\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, obb2 );\n\t\t\tobb2.matrix.copy( invertedMat );\n\t\t\tobb2.needsUpdate = true;\n\n\t\t\t// TODO: use a triangle iteration function here\n\t\t\tconst res = otherGeometry.boundsTree.shapecast( {\n\n\t\t\t\tintersectsBounds: box => obb2.intersectsBox( box ),\n\n\t\t\t\tintersectsTriangle: tri => {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.needsUpdate = true;\n\n\n\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn res;\n\n\t\t} else {\n\n\t\t\t// if we're just dealing with raw geometry\n\t\t\tconst otherTriangleCount = getTriCount( otherGeometry );\n\n\n\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\n\n\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\n\n\n\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\tfor ( let i2 = 0, l2 = otherTriangleCount * 3; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\tsetTriangle( triangle2, i2, otherIndex, otherPos );\n\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\n\t\t}\n\n\t} else {\n\n\t\tconst left = LEFT_NODE( nodeIndex32 );\n\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( left ), float32Array, boundingBox );\n\t\tconst leftIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( left, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( leftIntersection ) return true;\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( right ), float32Array, boundingBox );\n\t\tconst rightIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( right, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( rightIntersection ) return true;\n\n\t\treturn false;\n\n\t}\n\n}\n\nexport { intersectsGeometry };\n","import { Matrix4, Vector3 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { getTriCount } from '../build/geometryUtils.js';\nimport { ExtendedTrianglePool } from '../../utils/ExtendedTrianglePool.js';\n\n/*********************************************************************/\n/* This file is generated from \"closestPointToGeometry.template.js\". */\n/*********************************************************************/\n\nconst tempMatrix = /* @__PURE__ */ new Matrix4();\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\nconst temp1 = /* @__PURE__ */ new Vector3();\nconst temp2 = /* @__PURE__ */ new Vector3();\nconst temp3 = /* @__PURE__ */ new Vector3();\nconst temp4 = /* @__PURE__ */ new Vector3();\n\nfunction closestPointToGeometry(\n\tbvh,\n\totherGeometry,\n\tgeometryToBvh,\n\ttarget1 = { },\n\ttarget2 = { },\n\tminThreshold = 0,\n\tmaxThreshold = Infinity,\n) {\n\n\tif ( ! otherGeometry.boundingBox ) {\n\n\t\totherGeometry.computeBoundingBox();\n\n\t}\n\n\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\tobb.needsUpdate = true;\n\n\tconst geometry = bvh.geometry;\n\tconst pos = geometry.attributes.position;\n\tconst index = geometry.index;\n\tconst otherPos = otherGeometry.attributes.position;\n\tconst otherIndex = otherGeometry.index;\n\tconst triangle = ExtendedTrianglePool.getPrimitive();\n\tconst triangle2 = ExtendedTrianglePool.getPrimitive();\n\n\tlet tempTarget1 = temp1;\n\tlet tempTargetDest1 = temp2;\n\tlet tempTarget2 = null;\n\tlet tempTargetDest2 = null;\n\n\tif ( target2 ) {\n\n\t\ttempTarget2 = temp3;\n\t\ttempTargetDest2 = temp4;\n\n\t}\n\n\tlet closestDistance = Infinity;\n\tlet closestDistanceTriIndex = null;\n\tlet closestDistanceOtherTriIndex = null;\n\ttempMatrix.copy( geometryToBvh ).invert();\n\tobb2.matrix.copy( tempMatrix );\n\tbvh.shapecast(\n\t\t{\n\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\treturn obb.distanceToBox( box );\n\n\t\t\t},\n\n\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\tif ( score < closestDistance && score < maxThreshold ) {\n\n\t\t\t\t\t// if we know the triangles of this bounds will be intersected next then\n\t\t\t\t\t// save the bounds to use during triangle checks.\n\t\t\t\t\tif ( isLeaf ) {\n\n\t\t\t\t\t\tobb2.min.copy( box.min );\n\t\t\t\t\t\tobb2.max.copy( box.max );\n\t\t\t\t\t\tobb2.needsUpdate = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\tintersectsRange: ( offset, count ) => {\n\n\t\t\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t\t\t// if the other geometry has a bvh then use the accelerated path where we use shapecast to find\n\t\t\t\t\t// the closest bounds in the other geometry to check.\n\t\t\t\t\tconst otherBvh = otherGeometry.boundsTree;\n\t\t\t\t\treturn otherBvh.shapecast( {\n\t\t\t\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\t\t\t\treturn obb2.distanceToBox( box );\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\t\t\t\treturn score < closestDistance && score < maxThreshold;\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsRange: ( otherOffset, otherCount ) => {\n\n\t\t\t\t\t\t\tfor ( let i2 = otherOffset, l2 = otherOffset + otherCount; i2 < l2; i2 ++ ) {\n\n\n\t\t\t\t\t\t\t\tsetTriangle( triangle2, 3 * i2, otherIndex, otherPos );\n\n\t\t\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\n\t\t\t\t\t\t\t\t\tsetTriangle( triangle, 3 * i, index, pos );\n\n\t\t\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// If no bounds tree then we'll just check every triangle.\n\t\t\t\t\tconst triCount = getTriCount( otherGeometry );\n\t\t\t\t\tfor ( let i2 = 0, l2 = triCount; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, 3 * i2, otherIndex, otherPos );\n\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\n\t\t\t\t\t\t\tsetTriangle( triangle, 3 * i, index, pos );\n\n\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t}\n\n\t);\n\n\tExtendedTrianglePool.releasePrimitive( triangle );\n\tExtendedTrianglePool.releasePrimitive( triangle2 );\n\n\tif ( closestDistance === Infinity ) {\n\n\t\treturn null;\n\n\t}\n\n\tif ( ! target1.point ) {\n\n\t\ttarget1.point = tempTargetDest1.clone();\n\n\t} else {\n\n\t\ttarget1.point.copy( tempTargetDest1 );\n\n\t}\n\n\ttarget1.distance = closestDistance,\n\ttarget1.faceIndex = closestDistanceTriIndex;\n\n\tif ( target2 ) {\n\n\t\tif ( ! target2.point ) target2.point = tempTargetDest2.clone();\n\t\telse target2.point.copy( tempTargetDest2 );\n\t\ttarget2.point.applyMatrix4( tempMatrix );\n\t\ttempTargetDest1.applyMatrix4( tempMatrix );\n\t\ttarget2.distance = tempTargetDest1.sub( target2.point ).length();\n\t\ttarget2.faceIndex = closestDistanceOtherTriIndex;\n\n\t}\n\n\treturn target1;\n\n}\n\nexport { closestPointToGeometry };\n","import { UINT32_PER_NODE, BYTES_PER_NODE } from '../Constants.js';\nimport { IS_LEAF, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\n\n/****************************************************/\n/* This file is generated from \"refit.template.js\". */\n/****************************************************/\n\nfunction refit_indirect( bvh, nodeIndices = null ) {\n\n\tif ( nodeIndices && Array.isArray( nodeIndices ) ) {\n\n\t\tnodeIndices = new Set( nodeIndices );\n\n\t}\n\n\tconst geometry = bvh.geometry;\n\tconst indexArr = geometry.index ? geometry.index.array : null;\n\tconst posAttr = geometry.attributes.position;\n\n\tlet buffer, uint32Array, uint16Array, float32Array;\n\tlet byteOffset = 0;\n\tconst roots = bvh._roots;\n\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\tbuffer = roots[ i ];\n\t\tuint32Array = new Uint32Array( buffer );\n\t\tuint16Array = new Uint16Array( buffer );\n\t\tfloat32Array = new Float32Array( buffer );\n\n\t\t_traverse( 0, byteOffset );\n\t\tbyteOffset += buffer.byteLength;\n\n\t}\n\n\tfunction _traverse( nodeIndex32, byteOffset, force = false ) {\n\n\t\tconst nodeIndex16 = nodeIndex32 * 2;\n\t\tif ( IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\tconst offset = uint32Array[ nodeIndex32 + 6 ];\n\t\t\tconst count = uint16Array[ nodeIndex16 + 14 ];\n\n\t\t\tlet minx = Infinity;\n\t\t\tlet miny = Infinity;\n\t\t\tlet minz = Infinity;\n\t\t\tlet maxx = - Infinity;\n\t\t\tlet maxy = - Infinity;\n\t\t\tlet maxz = - Infinity;\n\n\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\tconst t = 3 * bvh.resolveTriangleIndex( i );\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tlet index = t + j;\n\t\t\t\t\tindex = indexArr ? indexArr[ index ] : index;\n\n\t\t\t\t\tconst x = posAttr.getX( index );\n\t\t\t\t\tconst y = posAttr.getY( index );\n\t\t\t\t\tconst z = posAttr.getZ( index );\n\n\t\t\t\t\tif ( x < minx ) minx = x;\n\t\t\t\t\tif ( x > maxx ) maxx = x;\n\n\t\t\t\t\tif ( y < miny ) miny = y;\n\t\t\t\t\tif ( y > maxy ) maxy = y;\n\n\t\t\t\t\tif ( z < minz ) minz = z;\n\t\t\t\t\tif ( z > maxz ) maxz = z;\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tif (\n\t\t\t\tfloat32Array[ nodeIndex32 + 0 ] !== minx ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 1 ] !== miny ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 2 ] !== minz ||\n\n\t\t\t\tfloat32Array[ nodeIndex32 + 3 ] !== maxx ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 4 ] !== maxy ||\n\t\t\t\tfloat32Array[ nodeIndex32 + 5 ] !== maxz\n\t\t\t) {\n\n\t\t\t\tfloat32Array[ nodeIndex32 + 0 ] = minx;\n\t\t\t\tfloat32Array[ nodeIndex32 + 1 ] = miny;\n\t\t\t\tfloat32Array[ nodeIndex32 + 2 ] = minz;\n\n\t\t\t\tfloat32Array[ nodeIndex32 + 3 ] = maxx;\n\t\t\t\tfloat32Array[ nodeIndex32 + 4 ] = maxy;\n\t\t\t\tfloat32Array[ nodeIndex32 + 5 ] = maxz;\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst left = LEFT_NODE( nodeIndex32 );\n\t\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\t\t// the identifying node indices provided by the shapecast function include offsets of all\n\t\t\t// root buffers to guarantee they're unique between roots so offset left and right indices here.\n\t\t\tlet forceChildren = force;\n\t\t\tlet includesLeft = false;\n\t\t\tlet includesRight = false;\n\n\t\t\tif ( nodeIndices ) {\n\n\t\t\t\t// if we see that neither the left or right child are included in the set that need to be updated\n\t\t\t\t// then we assume that all children need to be updated.\n\t\t\t\tif ( ! forceChildren ) {\n\n\t\t\t\t\tconst leftNodeId = left / UINT32_PER_NODE + byteOffset / BYTES_PER_NODE;\n\t\t\t\t\tconst rightNodeId = right / UINT32_PER_NODE + byteOffset / BYTES_PER_NODE;\n\t\t\t\t\tincludesLeft = nodeIndices.has( leftNodeId );\n\t\t\t\t\tincludesRight = nodeIndices.has( rightNodeId );\n\t\t\t\t\tforceChildren = ! includesLeft && ! includesRight;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tincludesLeft = true;\n\t\t\t\tincludesRight = true;\n\n\t\t\t}\n\n\t\t\tconst traverseLeft = forceChildren || includesLeft;\n\t\t\tconst traverseRight = forceChildren || includesRight;\n\n\t\t\tlet leftChange = false;\n\t\t\tif ( traverseLeft ) {\n\n\t\t\t\tleftChange = _traverse( left, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tlet rightChange = false;\n\t\t\tif ( traverseRight ) {\n\n\t\t\t\trightChange = _traverse( right, byteOffset, forceChildren );\n\n\t\t\t}\n\n\t\t\tconst didChange = leftChange || rightChange;\n\t\t\tif ( didChange ) {\n\n\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tconst left_i = left + i;\n\t\t\t\t\tconst right_i = right + i;\n\t\t\t\t\tconst minLeftValue = float32Array[ left_i ];\n\t\t\t\t\tconst maxLeftValue = float32Array[ left_i + 3 ];\n\t\t\t\t\tconst minRightValue = float32Array[ right_i ];\n\t\t\t\t\tconst maxRightValue = float32Array[ right_i + 3 ];\n\n\t\t\t\t\tfloat32Array[ nodeIndex32 + i ] = minLeftValue < minRightValue ? minLeftValue : minRightValue;\n\t\t\t\t\tfloat32Array[ nodeIndex32 + i + 3 ] = maxLeftValue > maxRightValue ? maxLeftValue : maxRightValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn didChange;\n\n\t\t}\n\n\t}\n\n}\n\nexport { refit_indirect };\n","import { intersectRay } from '../utils/intersectUtils.js';\nimport { IS_LEAF, OFFSET, COUNT, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport '../utils/iterationUtils.generated.js';\nimport { intersectTris_indirect } from '../utils/iterationUtils_indirect.generated.js';\n\n/******************************************************/\n/* This file is generated from \"raycast.template.js\". */\n/******************************************************/\n\nfunction raycast_indirect( bvh, root, materialOrSide, ray, intersects, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\t_raycast( 0, bvh, materialOrSide, ray, intersects, near, far );\n\tBufferStack.clearBuffer();\n\n}\n\nfunction _raycast( nodeIndex32, bvh, materialOrSide, ray, intersects, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tconst nodeIndex16 = nodeIndex32 * 2;\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\tintersectTris_indirect( bvh, materialOrSide, ray, offset, count, intersects, near, far );\n\n\n\t} else {\n\n\t\tconst leftIndex = LEFT_NODE( nodeIndex32 );\n\t\tif ( intersectRay( leftIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( leftIndex, bvh, materialOrSide, ray, intersects, near, far );\n\n\t\t}\n\n\t\tconst rightIndex = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\tif ( intersectRay( rightIndex, float32Array, ray, near, far ) ) {\n\n\t\t\t_raycast( rightIndex, bvh, materialOrSide, ray, intersects, near, far );\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycast_indirect };\n","import { IS_LEAF, OFFSET, COUNT, SPLIT_AXIS, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { intersectRay } from '../utils/intersectUtils.js';\nimport '../utils/iterationUtils.generated.js';\nimport { intersectClosestTri_indirect } from '../utils/iterationUtils_indirect.generated.js';\n\n/***********************************************************/\n/* This file is generated from \"raycastFirst.template.js\". */\n/***********************************************************/\n\nconst _xyzFields = [ 'x', 'y', 'z' ];\n\nfunction raycastFirst_indirect( bvh, root, materialOrSide, ray, near, far ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _raycastFirst( 0, bvh, materialOrSide, ray, near, far );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _raycastFirst( nodeIndex32, bvh, materialOrSide, ray, near, far ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\treturn intersectClosestTri_indirect( bvh, materialOrSide, ray, offset, count, near, far );\n\n\n\t} else {\n\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\n\t\tconst splitAxis = SPLIT_AXIS( nodeIndex32, uint32Array );\n\t\tconst xyzAxis = _xyzFields[ splitAxis ];\n\t\tconst rayDir = ray.direction[ xyzAxis ];\n\t\tconst leftToRight = rayDir >= 0;\n\n\t\t// c1 is the child to check first\n\t\tlet c1, c2;\n\t\tif ( leftToRight ) {\n\n\t\t\tc1 = LEFT_NODE( nodeIndex32 );\n\t\t\tc2 = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\t} else {\n\n\t\t\tc1 = RIGHT_NODE( nodeIndex32, uint32Array );\n\t\t\tc2 = LEFT_NODE( nodeIndex32 );\n\n\t\t}\n\n\t\tconst c1Intersection = intersectRay( c1, float32Array, ray, near, far );\n\t\tconst c1Result = c1Intersection ? _raycastFirst( c1, bvh, materialOrSide, ray, near, far ) : null;\n\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\n\t\tif ( c1Result ) {\n\n\t\t\t// check if the point is within the second bounds\n\t\t\t// \"point\" is in the local frame of the bvh\n\t\t\tconst point = c1Result.point[ xyzAxis ];\n\t\t\tconst isOutside = leftToRight ?\n\t\t\t\tpoint <= float32Array[ c2 + splitAxis ] : // min bounding data\n\t\t\t\tpoint >= float32Array[ c2 + splitAxis + 3 ]; // max bounding data\n\n\t\t\tif ( isOutside ) {\n\n\t\t\t\treturn c1Result;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// either there was no intersection in the first node, or there could still be a closer\n\t\t// intersection in the second, so check the second node and then take the better of the two\n\t\tconst c2Intersection = intersectRay( c2, float32Array, ray, near, far );\n\t\tconst c2Result = c2Intersection ? _raycastFirst( c2, bvh, materialOrSide, ray, near, far ) : null;\n\n\t\tif ( c1Result && c2Result ) {\n\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\n\n\t\t} else {\n\n\t\t\treturn c1Result || c2Result || null;\n\n\t\t}\n\n\t}\n\n}\n\nexport { raycastFirst_indirect };\n","import { Box3, Matrix4 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { ExtendedTriangle } from '../../math/ExtendedTriangle.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { IS_LEAF, OFFSET, COUNT, BOUNDING_DATA_INDEX, LEFT_NODE, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { getTriCount } from '../build/geometryUtils.js';\n\n/*****************************************************************/\n/* This file is generated from \"intersectsGeometry.template.js\". */\n/*****************************************************************/\n/* eslint-disable indent */\n\nconst boundingBox = /* @__PURE__ */ new Box3();\nconst triangle = /* @__PURE__ */ new ExtendedTriangle();\nconst triangle2 = /* @__PURE__ */ new ExtendedTriangle();\nconst invertedMat = /* @__PURE__ */ new Matrix4();\n\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\n\nfunction intersectsGeometry_indirect( bvh, root, otherGeometry, geometryToBvh ) {\n\n\tBufferStack.setBuffer( bvh._roots[ root ] );\n\tconst result = _intersectsGeometry( 0, bvh, otherGeometry, geometryToBvh );\n\tBufferStack.clearBuffer();\n\n\treturn result;\n\n}\n\nfunction _intersectsGeometry( nodeIndex32, bvh, otherGeometry, geometryToBvh, cachedObb = null ) {\n\n\tconst { float32Array, uint16Array, uint32Array } = BufferStack;\n\tlet nodeIndex16 = nodeIndex32 * 2;\n\n\tif ( cachedObb === null ) {\n\n\t\tif ( ! otherGeometry.boundingBox ) {\n\n\t\t\totherGeometry.computeBoundingBox();\n\n\t\t}\n\n\t\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\t\tcachedObb = obb;\n\n\t}\n\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\n\tif ( isLeaf ) {\n\n\t\tconst thisGeometry = bvh.geometry;\n\t\tconst thisIndex = thisGeometry.index;\n\t\tconst thisPos = thisGeometry.attributes.position;\n\n\t\tconst otherIndex = otherGeometry.index;\n\t\tconst otherPos = otherGeometry.attributes.position;\n\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\n\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\n\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\n\t\t// here.\n\t\tinvertedMat.copy( geometryToBvh ).invert();\n\n\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t// if there's a bounds tree\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, obb2 );\n\t\t\tobb2.matrix.copy( invertedMat );\n\t\t\tobb2.needsUpdate = true;\n\n\t\t\t// TODO: use a triangle iteration function here\n\t\t\tconst res = otherGeometry.boundsTree.shapecast( {\n\n\t\t\t\tintersectsBounds: box => obb2.intersectsBox( box ),\n\n\t\t\t\tintersectsTriangle: tri => {\n\n\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\ttri.needsUpdate = true;\n\n\t\t\t\t\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\t\t\tsetTriangle( triangle2, 3 * bvh.resolveTriangleIndex( i ), thisIndex, thisPos );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn res;\n\n\t\t} else {\n\n\t\t\t// if we're just dealing with raw geometry\n\t\t\tconst otherTriangleCount = getTriCount( otherGeometry );\n\n\t\t\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\n\t\t\t\tconst ti = bvh.resolveTriangleIndex( i );\n\t\t\t\tsetTriangle( triangle, 3 * ti, thisIndex, thisPos );\n\n\n\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\n\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\tfor ( let i2 = 0, l2 = otherTriangleCount * 3; i2 < l2; i2 += 3 ) {\n\n\t\t\t\t\tsetTriangle( triangle2, i2, otherIndex, otherPos );\n\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\n\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t} else {\n\n\t\tconst left = LEFT_NODE( nodeIndex32 );\n\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( left ), float32Array, boundingBox );\n\t\tconst leftIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( left, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( leftIntersection ) return true;\n\n\t\tarrayToBox( BOUNDING_DATA_INDEX( right ), float32Array, boundingBox );\n\t\tconst rightIntersection =\n\t\t\tcachedObb.intersectsBox( boundingBox ) &&\n\t\t\t_intersectsGeometry( right, bvh, otherGeometry, geometryToBvh, cachedObb );\n\n\t\tif ( rightIntersection ) return true;\n\n\t\treturn false;\n\n\t}\n\n}\n\nexport { intersectsGeometry_indirect };\n","import { Matrix4, Vector3 } from 'three';\nimport { OrientedBox } from '../../math/OrientedBox.js';\nimport { setTriangle } from '../../utils/TriangleUtilities.js';\nimport { getTriCount } from '../build/geometryUtils.js';\nimport { ExtendedTrianglePool } from '../../utils/ExtendedTrianglePool.js';\n\n/*********************************************************************/\n/* This file is generated from \"closestPointToGeometry.template.js\". */\n/*********************************************************************/\n\nconst tempMatrix = /* @__PURE__ */ new Matrix4();\nconst obb = /* @__PURE__ */ new OrientedBox();\nconst obb2 = /* @__PURE__ */ new OrientedBox();\nconst temp1 = /* @__PURE__ */ new Vector3();\nconst temp2 = /* @__PURE__ */ new Vector3();\nconst temp3 = /* @__PURE__ */ new Vector3();\nconst temp4 = /* @__PURE__ */ new Vector3();\n\nfunction closestPointToGeometry_indirect(\n\tbvh,\n\totherGeometry,\n\tgeometryToBvh,\n\ttarget1 = { },\n\ttarget2 = { },\n\tminThreshold = 0,\n\tmaxThreshold = Infinity,\n) {\n\n\tif ( ! otherGeometry.boundingBox ) {\n\n\t\totherGeometry.computeBoundingBox();\n\n\t}\n\n\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\n\tobb.needsUpdate = true;\n\n\tconst geometry = bvh.geometry;\n\tconst pos = geometry.attributes.position;\n\tconst index = geometry.index;\n\tconst otherPos = otherGeometry.attributes.position;\n\tconst otherIndex = otherGeometry.index;\n\tconst triangle = ExtendedTrianglePool.getPrimitive();\n\tconst triangle2 = ExtendedTrianglePool.getPrimitive();\n\n\tlet tempTarget1 = temp1;\n\tlet tempTargetDest1 = temp2;\n\tlet tempTarget2 = null;\n\tlet tempTargetDest2 = null;\n\n\tif ( target2 ) {\n\n\t\ttempTarget2 = temp3;\n\t\ttempTargetDest2 = temp4;\n\n\t}\n\n\tlet closestDistance = Infinity;\n\tlet closestDistanceTriIndex = null;\n\tlet closestDistanceOtherTriIndex = null;\n\ttempMatrix.copy( geometryToBvh ).invert();\n\tobb2.matrix.copy( tempMatrix );\n\tbvh.shapecast(\n\t\t{\n\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\treturn obb.distanceToBox( box );\n\n\t\t\t},\n\n\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\tif ( score < closestDistance && score < maxThreshold ) {\n\n\t\t\t\t\t// if we know the triangles of this bounds will be intersected next then\n\t\t\t\t\t// save the bounds to use during triangle checks.\n\t\t\t\t\tif ( isLeaf ) {\n\n\t\t\t\t\t\tobb2.min.copy( box.min );\n\t\t\t\t\t\tobb2.max.copy( box.max );\n\t\t\t\t\t\tobb2.needsUpdate = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\tintersectsRange: ( offset, count ) => {\n\n\t\t\t\tif ( otherGeometry.boundsTree ) {\n\n\t\t\t\t\t// if the other geometry has a bvh then use the accelerated path where we use shapecast to find\n\t\t\t\t\t// the closest bounds in the other geometry to check.\n\t\t\t\t\tconst otherBvh = otherGeometry.boundsTree;\n\t\t\t\t\treturn otherBvh.shapecast( {\n\t\t\t\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\t\t\t\treturn obb2.distanceToBox( box );\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\n\n\t\t\t\t\t\t\treturn score < closestDistance && score < maxThreshold;\n\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tintersectsRange: ( otherOffset, otherCount ) => {\n\n\t\t\t\t\t\t\tfor ( let i2 = otherOffset, l2 = otherOffset + otherCount; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\t\t\t\tconst ti2 = otherBvh.resolveTriangleIndex( i2 );\n\t\t\t\t\t\t\t\tsetTriangle( triangle2, 3 * ti2, otherIndex, otherPos );\n\n\t\t\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\t\tconst ti = bvh.resolveTriangleIndex( i );\n\t\t\t\t\t\t\t\t\tsetTriangle( triangle, 3 * ti, index, pos );\n\n\t\t\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// If no bounds tree then we'll just check every triangle.\n\t\t\t\t\tconst triCount = getTriCount( otherGeometry );\n\t\t\t\t\tfor ( let i2 = 0, l2 = triCount; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\t\tsetTriangle( triangle2, 3 * i2, otherIndex, otherPos );\n\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst ti = bvh.resolveTriangleIndex( i );\n\t\t\t\t\t\t\tsetTriangle( triangle, 3 * ti, index, pos );\n\n\t\t\t\t\t\t\ttriangle.needsUpdate = true;\n\n\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\n\t\t\t\t\t\t\tif ( dist < closestDistance ) {\n\n\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\n\n\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\n\n\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tclosestDistance = dist;\n\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i;\n\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\n\t\t\t\t\t\t\tif ( dist < minThreshold ) {\n\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t}\n\n\t);\n\n\tExtendedTrianglePool.releasePrimitive( triangle );\n\tExtendedTrianglePool.releasePrimitive( triangle2 );\n\n\tif ( closestDistance === Infinity ) {\n\n\t\treturn null;\n\n\t}\n\n\tif ( ! target1.point ) {\n\n\t\ttarget1.point = tempTargetDest1.clone();\n\n\t} else {\n\n\t\ttarget1.point.copy( tempTargetDest1 );\n\n\t}\n\n\ttarget1.distance = closestDistance,\n\ttarget1.faceIndex = closestDistanceTriIndex;\n\n\tif ( target2 ) {\n\n\t\tif ( ! target2.point ) target2.point = tempTargetDest2.clone();\n\t\telse target2.point.copy( tempTargetDest2 );\n\t\ttarget2.point.applyMatrix4( tempMatrix );\n\t\ttempTargetDest1.applyMatrix4( tempMatrix );\n\t\ttarget2.distance = tempTargetDest1.sub( target2.point ).length();\n\t\ttarget2.faceIndex = closestDistanceOtherTriIndex;\n\n\t}\n\n\treturn target1;\n\n}\n\nexport { closestPointToGeometry_indirect };\n","import { Box3, Matrix4 } from 'three';\nimport { BufferStack } from '../utils/BufferStack.js';\nimport { BOUNDING_DATA_INDEX, COUNT, IS_LEAF, LEFT_NODE, OFFSET, RIGHT_NODE } from '../utils/nodeBufferUtils.js';\nimport { arrayToBox } from '../../utils/ArrayBoxUtilities.js';\nimport { PrimitivePool } from '../../utils/PrimitivePool.js';\nimport { BYTES_PER_NODE, UINT32_PER_NODE } from '../Constants.js';\n\nconst _bufferStack1 = /* @__PURE__ */ new BufferStack.constructor();\nconst _bufferStack2 = /* @__PURE__ */ new BufferStack.constructor();\nconst _boxPool = /* @__PURE__ */ new PrimitivePool( () => new Box3() );\nconst _leftBox1 = /* @__PURE__ */ new Box3();\nconst _rightBox1 = /* @__PURE__ */ new Box3();\n\nconst _leftBox2 = /* @__PURE__ */ new Box3();\nconst _rightBox2 = /* @__PURE__ */ new Box3();\n\nlet _active = false;\n\nexport function bvhcast( bvh, otherBvh, matrixToLocal, intersectsRanges ) {\n\n\tif ( _active ) {\n\n\t\tthrow new Error( 'MeshBVH: Recursive calls to bvhcast not supported.' );\n\n\t}\n\n\t_active = true;\n\n\tconst roots = bvh._roots;\n\tconst otherRoots = otherBvh._roots;\n\tlet result;\n\tlet nodeOffset1 = 0;\n\tlet nodeOffset2 = 0;\n\tconst invMat = new Matrix4().copy( matrixToLocal ).invert();\n\n\t// iterate over the first set of roots\n\tfor ( let i = 0, il = roots.length; i < il; i ++ ) {\n\n\t\t_bufferStack1.setBuffer( roots[ i ] );\n\t\tnodeOffset2 = 0;\n\n\t\t// prep the initial root box\n\t\tconst localBox = _boxPool.getPrimitive();\n\t\tarrayToBox( BOUNDING_DATA_INDEX( 0 ), _bufferStack1.float32Array, localBox );\n\t\tlocalBox.applyMatrix4( invMat );\n\n\t\t// iterate over the second set of roots\n\t\tfor ( let j = 0, jl = otherRoots.length; j < jl; j ++ ) {\n\n\t\t\t_bufferStack2.setBuffer( otherRoots[ j ] );\n\n\t\t\tresult = _traverse(\n\t\t\t\t0, 0, matrixToLocal, invMat, intersectsRanges,\n\t\t\t\tnodeOffset1, nodeOffset2, 0, 0,\n\t\t\t\tlocalBox,\n\t\t\t);\n\n\t\t\t_bufferStack2.clearBuffer();\n\t\t\tnodeOffset2 += otherRoots[ j ].byteLength / BYTES_PER_NODE;\n\n\t\t\tif ( result ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// release stack info\n\t\t_boxPool.releasePrimitive( localBox );\n\t\t_bufferStack1.clearBuffer();\n\t\tnodeOffset1 += roots[ i ].byteLength / BYTES_PER_NODE;\n\n\t\tif ( result ) {\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t_active = false;\n\treturn result;\n\n}\n\nfunction _traverse(\n\tnode1Index32,\n\tnode2Index32,\n\tmatrix2to1,\n\tmatrix1to2,\n\tintersectsRangesFunc,\n\n\t// offsets for ids\n\tnode1IndexOffset = 0,\n\tnode2IndexOffset = 0,\n\n\t// tree depth\n\tdepth1 = 0,\n\tdepth2 = 0,\n\n\tcurrBox = null,\n\treversed = false,\n\n) {\n\n\t// get the buffer stacks associated with the current indices\n\tlet bufferStack1, bufferStack2;\n\tif ( reversed ) {\n\n\t\tbufferStack1 = _bufferStack2;\n\t\tbufferStack2 = _bufferStack1;\n\n\t} else {\n\n\t\tbufferStack1 = _bufferStack1;\n\t\tbufferStack2 = _bufferStack2;\n\n\t}\n\n\t// get the local instances of the typed buffers\n\tconst\n\t\tfloat32Array1 = bufferStack1.float32Array,\n\t\tuint32Array1 = bufferStack1.uint32Array,\n\t\tuint16Array1 = bufferStack1.uint16Array,\n\t\tfloat32Array2 = bufferStack2.float32Array,\n\t\tuint32Array2 = bufferStack2.uint32Array,\n\t\tuint16Array2 = bufferStack2.uint16Array;\n\n\tconst node1Index16 = node1Index32 * 2;\n\tconst node2Index16 = node2Index32 * 2;\n\tconst isLeaf1 = IS_LEAF( node1Index16, uint16Array1 );\n\tconst isLeaf2 = IS_LEAF( node2Index16, uint16Array2 );\n\tlet result = false;\n\tif ( isLeaf2 && isLeaf1 ) {\n\n\t\t// if both bounds are leaf nodes then fire the callback if the boxes intersect\n\t\t// Note the \"nodeIndex\" values are just intended to be used as unique identifiers in the tree and\n\t\t// not used for accessing data\n\t\tif ( reversed ) {\n\n\t\t\tresult = intersectsRangesFunc(\n\t\t\t\tOFFSET( node2Index32, uint32Array2 ), COUNT( node2Index32 * 2, uint16Array2 ),\n\t\t\t\tOFFSET( node1Index32, uint32Array1 ), COUNT( node1Index32 * 2, uint16Array1 ),\n\t\t\t\tdepth2, node2IndexOffset + node2Index32 / UINT32_PER_NODE,\n\t\t\t\tdepth1, node1IndexOffset + node1Index32 / UINT32_PER_NODE,\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tresult = intersectsRangesFunc(\n\t\t\t\tOFFSET( node1Index32, uint32Array1 ), COUNT( node1Index32 * 2, uint16Array1 ),\n\t\t\t\tOFFSET( node2Index32, uint32Array2 ), COUNT( node2Index32 * 2, uint16Array2 ),\n\t\t\t\tdepth1, node1IndexOffset + node1Index32 / UINT32_PER_NODE,\n\t\t\t\tdepth2, node2IndexOffset + node2Index32 / UINT32_PER_NODE,\n\t\t\t);\n\n\t\t}\n\n\t} else if ( isLeaf2 ) {\n\n\t\t// SWAP\n\t\t// If we've traversed to the leaf node on the other bvh then we need to swap over\n\t\t// to traverse down the first one\n\n\t\t// get the new box to use\n\t\tconst newBox = _boxPool.getPrimitive();\n\t\tarrayToBox( BOUNDING_DATA_INDEX( node2Index32 ), float32Array2, newBox );\n\t\tnewBox.applyMatrix4( matrix2to1 );\n\n\t\t// get the child bounds to check before traversal\n\t\tconst cl1 = LEFT_NODE( node1Index32 );\n\t\tconst cr1 = RIGHT_NODE( node1Index32, uint32Array1 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cl1 ), float32Array1, _leftBox1 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cr1 ), float32Array1, _rightBox1 );\n\n\t\t// precompute the intersections otherwise the global boxes will be modified during traversal\n\t\tconst intersectCl1 = newBox.intersectsBox( _leftBox1 );\n\t\tconst intersectCr1 = newBox.intersectsBox( _rightBox1 );\n\t\tresult = (\n\t\t\tintersectCl1 && _traverse(\n\t\t\t\tnode2Index32, cl1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\tnode2IndexOffset, node1IndexOffset, depth2, depth1 + 1,\n\t\t\t\tnewBox, ! reversed,\n\t\t\t)\n\t\t) || (\n\t\t\tintersectCr1 && _traverse(\n\t\t\t\tnode2Index32, cr1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\tnode2IndexOffset, node1IndexOffset, depth2, depth1 + 1,\n\t\t\t\tnewBox, ! reversed,\n\t\t\t)\n\t\t);\n\n\t\t_boxPool.releasePrimitive( newBox );\n\n\t} else {\n\n\t\t// if neither are leaves then we should swap if one of the children does not\n\t\t// intersect with the current bounds\n\n\t\t// get the child bounds to check\n\t\tconst cl2 = LEFT_NODE( node2Index32 );\n\t\tconst cr2 = RIGHT_NODE( node2Index32, uint32Array2 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cl2 ), float32Array2, _leftBox2 );\n\t\tarrayToBox( BOUNDING_DATA_INDEX( cr2 ), float32Array2, _rightBox2 );\n\n\t\tconst leftIntersects = currBox.intersectsBox( _leftBox2 );\n\t\tconst rightIntersects = currBox.intersectsBox( _rightBox2 );\n\t\tif ( leftIntersects && rightIntersects ) {\n\n\t\t\t// continue to traverse both children if they both intersect\n\t\t\tresult = _traverse(\n\t\t\t\tnode1Index32, cl2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\tnode1IndexOffset, node2IndexOffset, depth1, depth2 + 1,\n\t\t\t\tcurrBox, reversed,\n\t\t\t) || _traverse(\n\t\t\t\tnode1Index32, cr2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\tnode1IndexOffset, node2IndexOffset, depth1, depth2 + 1,\n\t\t\t\tcurrBox, reversed,\n\t\t\t);\n\n\t\t} else if ( leftIntersects ) {\n\n\t\t\tif ( isLeaf1 ) {\n\n\t\t\t\t// if the current box is a leaf then just continue\n\t\t\t\tresult = _traverse(\n\t\t\t\t\tnode1Index32, cl2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\t\tnode1IndexOffset, node2IndexOffset, depth1, depth2 + 1,\n\t\t\t\t\tcurrBox, reversed,\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// SWAP\n\t\t\t\t// if only one box intersects then we have to swap to the other bvh to continue\n\t\t\t\tconst newBox = _boxPool.getPrimitive();\n\t\t\t\tnewBox.copy( _leftBox2 ).applyMatrix4( matrix2to1 );\n\n\t\t\t\tconst cl1 = LEFT_NODE( node1Index32 );\n\t\t\t\tconst cr1 = RIGHT_NODE( node1Index32, uint32Array1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cl1 ), float32Array1, _leftBox1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cr1 ), float32Array1, _rightBox1 );\n\n\t\t\t\t// precompute the intersections otherwise the global boxes will be modified during traversal\n\t\t\t\tconst intersectCl1 = newBox.intersectsBox( _leftBox1 );\n\t\t\t\tconst intersectCr1 = newBox.intersectsBox( _rightBox1 );\n\t\t\t\tresult = (\n\t\t\t\t\tintersectCl1 && _traverse(\n\t\t\t\t\t\tcl2, cl1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexOffset, node1IndexOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t) || (\n\t\t\t\t\tintersectCr1 && _traverse(\n\t\t\t\t\t\tcl2, cr1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexOffset, node1IndexOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\t_boxPool.releasePrimitive( newBox );\n\n\t\t\t}\n\n\t\t} else if ( rightIntersects ) {\n\n\t\t\tif ( isLeaf1 ) {\n\n\t\t\t\t// if the current box is a leaf then just continue\n\t\t\t\tresult = _traverse(\n\t\t\t\t\tnode1Index32, cr2, matrix2to1, matrix1to2, intersectsRangesFunc,\n\t\t\t\t\tnode1IndexOffset, node2IndexOffset, depth1, depth2 + 1,\n\t\t\t\t\tcurrBox, reversed,\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\t// SWAP\n\t\t\t\t// if only one box intersects then we have to swap to the other bvh to continue\n\t\t\t\tconst newBox = _boxPool.getPrimitive();\n\t\t\t\tnewBox.copy( _rightBox2 ).applyMatrix4( matrix2to1 );\n\n\t\t\t\tconst cl1 = LEFT_NODE( node1Index32 );\n\t\t\t\tconst cr1 = RIGHT_NODE( node1Index32, uint32Array1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cl1 ), float32Array1, _leftBox1 );\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( cr1 ), float32Array1, _rightBox1 );\n\n\t\t\t\t// precompute the intersections otherwise the global boxes will be modified during traversal\n\t\t\t\tconst intersectCl1 = newBox.intersectsBox( _leftBox1 );\n\t\t\t\tconst intersectCr1 = newBox.intersectsBox( _rightBox1 );\n\t\t\t\tresult = (\n\t\t\t\t\tintersectCl1 && _traverse(\n\t\t\t\t\t\tcr2, cl1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexOffset, node1IndexOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t) || (\n\t\t\t\t\tintersectCr1 && _traverse(\n\t\t\t\t\t\tcr2, cr1, matrix1to2, matrix2to1, intersectsRangesFunc,\n\t\t\t\t\t\tnode2IndexOffset, node1IndexOffset, depth2, depth1 + 1,\n\t\t\t\t\t\tnewBox, ! reversed,\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\t_boxPool.releasePrimitive( newBox );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n","// converts the given BVH raycast intersection to align with the three.js raycast\n// structure (include object, world space distance and point).\nexport function convertRaycastIntersect( hit, object, raycaster ) {\n\n\tif ( hit === null ) {\n\n\t\treturn null;\n\n\t}\n\n\thit.point.applyMatrix4( object.matrixWorld );\n\thit.distance = hit.point.distanceTo( raycaster.ray.origin );\n\thit.object = object;\n\n\treturn hit;\n\n}\n","export function isSharedArrayBufferSupported() {\n\n\treturn typeof SharedArrayBuffer !== 'undefined';\n\n}\n\nexport function convertToBufferType( array, BufferConstructor ) {\n\n\tif ( array === null ) {\n\n\t\treturn array;\n\n\t} else if ( array.buffer ) {\n\n\t\tconst buffer = array.buffer;\n\t\tif ( buffer.constructor === BufferConstructor ) {\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tconst ArrayConstructor = array.constructor;\n\t\tconst result = new ArrayConstructor( new BufferConstructor( buffer.byteLength ) );\n\t\tresult.set( array );\n\t\treturn result;\n\n\t} else {\n\n\t\tif ( array.constructor === BufferConstructor ) {\n\n\t\t\treturn array;\n\n\t\t}\n\n\t\tconst result = new BufferConstructor( array.byteLength );\n\t\tnew Uint8Array( result ).set( new Uint8Array( array ) );\n\t\treturn result;\n\n\t}\n\n}\n","import { Box3 } from 'three';\nimport { SKIP_GENERATION, DEFAULT_OPTIONS } from './Constants.js';\nimport { isSharedArrayBufferSupported } from '../utils/BufferUtils.js';\nimport { ensureIndex, getRootPrimitiveRanges } from './build/geometryUtils.js';\nimport { BVH } from './BVH.js';\n\n// construct a new buffer that points to the set of triangles represented by the given ranges\nexport function generateIndirectBuffer( ranges, useSharedArrayBuffer ) {\n\n\tconst lastRange = ranges[ ranges.length - 1 ];\n\tconst useUint32 = lastRange.offset + lastRange.count > 2 ** 16;\n\n\t// use getRootIndexRanges which excludes gaps\n\tconst length = ranges.reduce( ( acc, val ) => acc + val.count, 0 );\n\tconst byteCount = useUint32 ? 4 : 2;\n\tconst buffer = useSharedArrayBuffer ? new SharedArrayBuffer( length * byteCount ) : new ArrayBuffer( length * byteCount );\n\tconst indirectBuffer = useUint32 ? new Uint32Array( buffer ) : new Uint16Array( buffer );\n\n\t// construct a compact form of the triangles in these ranges\n\tlet index = 0;\n\tfor ( let r = 0; r < ranges.length; r ++ ) {\n\n\t\tconst { offset, count } = ranges[ r ];\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tindirectBuffer[ index + i ] = offset + i;\n\n\t\t}\n\n\t\tindex += count;\n\n\t}\n\n\treturn indirectBuffer;\n\n}\n\nexport class GeometryBVH extends BVH {\n\n\tget indirect() {\n\n\t\treturn ! ! this._indirectBuffer;\n\n\t}\n\n\tget primitiveStride() {\n\n\t\treturn null;\n\n\t}\n\n\tget primitiveBufferStride() {\n\n\t\treturn this.indirect ? 1 : this.primitiveStride;\n\n\t}\n\tset primitiveBufferStride( v ) {}\n\n\tget primitiveBuffer() {\n\n\t\treturn this.indirect ? this._indirectBuffer : this.geometry.index.array;\n\n\t}\n\tset primitiveBuffer( v ) {}\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tif ( ! geometry.isBufferGeometry ) {\n\n\t\t\tthrow new Error( 'BVH: Only BufferGeometries are supported.' );\n\n\t\t} else if ( geometry.index && geometry.index.isInterleavedBufferAttribute ) {\n\n\t\t\tthrow new Error( 'BVH: InterleavedBufferAttribute is not supported for the index attribute.' );\n\n\t\t}\n\n\t\tif ( options.useSharedArrayBuffer && ! isSharedArrayBufferSupported() ) {\n\n\t\t\tthrow new Error( 'BVH: SharedArrayBuffer is not available.' );\n\n\t\t}\n\n\t\tsuper();\n\n\t\t// retain references to the geometry so we can use them it without having to\n\t\t// take a geometry reference in every function.\n\t\tthis.geometry = geometry;\n\t\tthis.resolvePrimitiveIndex = options.indirect ? i => this._indirectBuffer[ i ] : i => i;\n\t\tthis.primitiveBuffer = null;\n\t\tthis.primitiveBufferStride = null;\n\t\tthis._indirectBuffer = null;\n\n\t\toptions = {\n\t\t\t...DEFAULT_OPTIONS,\n\t\t\t...options,\n\t\t};\n\n\t\t// build the BVH unless we're deserializing\n\t\tif ( ! options[ SKIP_GENERATION ] ) {\n\n\t\t\tthis.init( options );\n\n\t\t}\n\n\t}\n\n\tinit( options ) {\n\n\t\tconst { geometry, primitiveStride } = this;\n\n\t\tif ( options.indirect ) {\n\n\t\t\t// construct an buffer that is indirectly sorts the triangles used for the BVH\n\t\t\tconst ranges = getRootPrimitiveRanges( geometry, options.range, primitiveStride );\n\t\t\tconst indirectBuffer = generateIndirectBuffer( ranges, options.useSharedArrayBuffer );\n\t\t\tthis._indirectBuffer = indirectBuffer;\n\n\t\t} else {\n\n\t\t\tensureIndex( geometry, options );\n\n\t\t}\n\n\t\tsuper.init( options );\n\n\t\tif ( ! geometry.boundingBox && options.setBoundingBox ) {\n\n\t\t\tgeometry.boundingBox = this.getBoundingBox( new Box3() );\n\n\t\t}\n\n\t}\n\n\t// Abstract methods to be implemented by subclasses\n\tcomputePrimitiveBounds( /* offset, count */ ) {\n\n\t\tthrow new Error( 'BVH: computePrimitiveBounds() not implemented' );\n\n\t}\n\n\tgetRootRanges( range ) {\n\n\t\t// TODO: can we avoid passing options in here\n\t\tif ( this.indirect ) {\n\n\t\t\treturn [ { offset: 0, count: this._indirectBuffer.length } ];\n\n\n\t\t} else {\n\n\t\t\treturn getRootPrimitiveRanges( this.geometry, range, this.primitiveStride );\n\n\t\t}\n\n\t}\n\n\traycastObject3D( /* object, raycaster, intersects = [] */ ) {\n\n\t\tthrow new Error( 'BVH: raycastObject3D() not implemented' );\n\n\t}\n\n\tshapecast( callbacks ) {\n\n\t\tlet {\n\t\t\titerateDirect,\n\t\t\titerateIndirect,\n\t\t\t...rest\n\t\t} = callbacks;\n\n\t\tconst selectedIterateFunc = this.indirect ? iterateIndirect : iterateDirect;\n\t\treturn super.shapecast( {\n\t\t\t...rest,\n\t\t\titerate: selectedIterateFunc,\n\t\t} );\n\n\t}\n\n}\n","import { BufferAttribute, FrontSide, Ray, Vector3, Matrix4 } from 'three';\nimport { SKIP_GENERATION, BYTES_PER_NODE, UINT32_PER_NODE, FLOAT32_EPSILON } from './Constants.js';\nimport { OrientedBox } from '../math/OrientedBox.js';\nimport { ExtendedTrianglePool } from '../utils/ExtendedTrianglePool.js';\nimport { closestPointToPoint } from './cast/closestPointToPoint.js';\nimport { IS_LEAF } from './utils/nodeBufferUtils.js';\n\nimport { iterateOverTriangles } from './utils/iterationUtils.generated.js';\nimport { refit } from './cast/refit.generated.js';\nimport { raycast } from './cast/raycast.generated.js';\nimport { raycastFirst } from './cast/raycastFirst.generated.js';\nimport { intersectsGeometry } from './cast/intersectsGeometry.generated.js';\nimport { closestPointToGeometry } from './cast/closestPointToGeometry.generated.js';\n\nimport { iterateOverTriangles_indirect } from './utils/iterationUtils_indirect.generated.js';\nimport { refit_indirect } from './cast/refit_indirect.generated.js';\nimport { raycast_indirect } from './cast/raycast_indirect.generated.js';\nimport { raycastFirst_indirect } from './cast/raycastFirst_indirect.generated.js';\nimport { intersectsGeometry_indirect } from './cast/intersectsGeometry_indirect.generated.js';\nimport { closestPointToGeometry_indirect } from './cast/closestPointToGeometry_indirect.generated.js';\nimport { setTriangle } from '../utils/TriangleUtilities.js';\nimport { bvhcast } from './cast/bvhcast.js';\nimport { convertRaycastIntersect } from '../utils/GeometryRayIntersectUtilities.js';\nimport { GeometryBVH } from './GeometryBVH.js';\n\nconst _obb = /* @__PURE__ */ new OrientedBox();\nconst _ray = /* @__PURE__ */ new Ray();\nconst _direction = /* @__PURE__ */ new Vector3();\nconst _InverseMatrix = /* @__PURE__ */ new Matrix4();\nconst _worldScale = /* @__PURE__ */ new Vector3();\n\nexport class MeshBVH extends GeometryBVH {\n\n\tstatic serialize( bvh, options = {} ) {\n\n\t\toptions = {\n\t\t\tcloneBuffers: true,\n\t\t\t...options,\n\t\t};\n\n\t\tconst geometry = bvh.geometry;\n\t\tconst rootData = bvh._roots;\n\t\tconst indirectBuffer = bvh._indirectBuffer;\n\t\tconst indexAttribute = geometry.getIndex();\n\t\tconst result = {\n\t\t\tversion: 1,\n\t\t\troots: null,\n\t\t\tindex: null,\n\t\t\tindirectBuffer: null,\n\t\t};\n\t\tif ( options.cloneBuffers ) {\n\n\t\t\tresult.roots = rootData.map( root => root.slice() );\n\t\t\tresult.index = indexAttribute ? indexAttribute.array.slice() : null;\n\t\t\tresult.indirectBuffer = indirectBuffer ? indirectBuffer.slice() : null;\n\n\t\t} else {\n\n\t\t\tresult.roots = rootData;\n\t\t\tresult.index = indexAttribute ? indexAttribute.array : null;\n\t\t\tresult.indirectBuffer = indirectBuffer;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tstatic deserialize( data, geometry, options = {} ) {\n\n\t\toptions = {\n\t\t\tsetIndex: true,\n\t\t\tindirect: Boolean( data.indirectBuffer ),\n\t\t\t...options,\n\t\t};\n\n\t\tconst { index, roots, indirectBuffer } = data;\n\n\t\t// handle backwards compatibility by fixing up the buffer roots\n\t\t// see issue gkjohnson/three-mesh-bvh#759\n\t\tif ( ! data.version ) {\n\n\t\t\tconsole.warn(\n\t\t\t\t'MeshBVH.deserialize: Serialization format has been changed and will be fixed up. ' +\n\t\t\t\t'It is recommended to regenerate any stored serialized data.'\n\t\t\t);\n\t\t\tfixupVersion0( roots );\n\n\t\t}\n\n\t\tconst bvh = new MeshBVH( geometry, { ...options, [ SKIP_GENERATION ]: true } );\n\t\tbvh._roots = roots;\n\t\tbvh._indirectBuffer = indirectBuffer || null;\n\n\t\tif ( options.setIndex ) {\n\n\t\t\tconst indexAttribute = geometry.getIndex();\n\t\t\tif ( indexAttribute === null ) {\n\n\t\t\t\tconst newIndex = new BufferAttribute( data.index, 1, false );\n\t\t\t\tgeometry.setIndex( newIndex );\n\n\t\t\t} else if ( indexAttribute.array !== index ) {\n\n\t\t\t\tindexAttribute.array.set( index );\n\t\t\t\tindexAttribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bvh;\n\n\t\t// convert version 0 serialized data (uint32 indices) to version 1 (node indices)\n\t\tfunction fixupVersion0( roots ) {\n\n\t\t\tfor ( let rootIndex = 0; rootIndex < roots.length; rootIndex ++ ) {\n\n\t\t\t\tconst root = roots[ rootIndex ];\n\t\t\t\tconst uint32Array = new Uint32Array( root );\n\t\t\t\tconst uint16Array = new Uint16Array( root );\n\n\t\t\t\t// iterate over nodes and convert right child offsets\n\t\t\t\tfor ( let node = 0, l = root.byteLength / BYTES_PER_NODE; node < l; node ++ ) {\n\n\t\t\t\t\tconst node32Index = UINT32_PER_NODE * node;\n\t\t\t\t\tconst node16Index = 2 * node32Index;\n\t\t\t\t\tif ( ! IS_LEAF( node16Index, uint16Array ) ) {\n\n\t\t\t\t\t\t// convert absolute right child offset to relative offset\n\t\t\t\t\t\tuint32Array[ node32Index + 6 ] = uint32Array[ node32Index + 6 ] / UINT32_PER_NODE - node;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tget primitiveStride() {\n\n\t\treturn 3;\n\n\t}\n\n\tget resolveTriangleIndex() {\n\n\t\treturn this.resolvePrimitiveIndex;\n\n\t}\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tif ( options.maxLeafTris ) {\n\n\t\t\toptions = {\n\t\t\t\t...options,\n\t\t\t\tmaxLeafSize: options.maxLeafTris,\n\t\t\t};\n\n\t\t}\n\n\t\tsuper( geometry, options );\n\n\t}\n\n\t// implement abstract methods from BVH base class\n\tshiftTriangleOffsets( offset ) {\n\n\t\treturn super.shiftPrimitiveOffsets( offset );\n\n\t}\n\n\t// precomputes the bounding box for each triangle; required for quickly calculating tree splits.\n\t// result is an array of size count * 6 where triangle i maps to a\n\t// [x_center, x_delta, y_center, y_delta, z_center, z_delta] tuple starting at index (i - offset) * 6,\n\t// representing the center and half-extent in each dimension of triangle i\n\tcomputePrimitiveBounds( offset, count, targetBuffer ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst indirectBuffer = this._indirectBuffer;\n\t\tconst posAttr = geometry.attributes.position;\n\t\tconst index = geometry.index ? geometry.index.array : null;\n\t\tconst normalized = posAttr.normalized;\n\n\t\tif ( offset < 0 || count + offset - targetBuffer.offset > targetBuffer.length / 6 ) {\n\n\t\t\tthrow new Error( 'MeshBVH: compute triangle bounds range is invalid.' );\n\n\t\t}\n\n\t\t// used for non-normalized positions\n\t\tconst posArr = posAttr.array;\n\n\t\t// support for an interleaved position buffer\n\t\tconst bufferOffset = posAttr.offset || 0;\n\t\tlet stride = 3;\n\t\tif ( posAttr.isInterleavedBufferAttribute ) {\n\n\t\t\tstride = posAttr.data.stride;\n\n\t\t}\n\n\t\t// used for normalized positions\n\t\tconst getters = [ 'getX', 'getY', 'getZ' ];\n\t\tconst writeOffset = targetBuffer.offset;\n\n\t\t// iterate over the triangle range\n\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\tconst tri = indirectBuffer ? indirectBuffer[ i ] : i;\n\t\t\tconst tri3 = tri * 3;\n\t\t\tconst boundsIndexOffset = ( i - writeOffset ) * 6;\n\n\t\t\tlet ai = tri3 + 0;\n\t\t\tlet bi = tri3 + 1;\n\t\t\tlet ci = tri3 + 2;\n\n\t\t\tif ( index ) {\n\n\t\t\t\tai = index[ ai ];\n\t\t\t\tbi = index[ bi ];\n\t\t\t\tci = index[ ci ];\n\n\t\t\t}\n\n\t\t\t// we add the stride and offset here since we access the array directly\n\t\t\t// below for the sake of performance\n\t\t\tif ( ! normalized ) {\n\n\t\t\t\tai = ai * stride + bufferOffset;\n\t\t\t\tbi = bi * stride + bufferOffset;\n\t\t\t\tci = ci * stride + bufferOffset;\n\n\t\t\t}\n\n\t\t\tfor ( let el = 0; el < 3; el ++ ) {\n\n\t\t\t\tlet a, b, c;\n\n\t\t\t\tif ( normalized ) {\n\n\t\t\t\t\ta = posAttr[ getters[ el ] ]( ai );\n\t\t\t\t\tb = posAttr[ getters[ el ] ]( bi );\n\t\t\t\t\tc = posAttr[ getters[ el ] ]( ci );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ta = posArr[ ai + el ];\n\t\t\t\t\tb = posArr[ bi + el ];\n\t\t\t\t\tc = posArr[ ci + el ];\n\n\t\t\t\t}\n\n\t\t\t\tlet min = a;\n\t\t\t\tif ( b < min ) min = b;\n\t\t\t\tif ( c < min ) min = c;\n\n\t\t\t\tlet max = a;\n\t\t\t\tif ( b > max ) max = b;\n\t\t\t\tif ( c > max ) max = c;\n\n\t\t\t\t// Increase the bounds size by float32 epsilon to avoid precision errors when\n\t\t\t\t// converting to 32 bit float. Scale the epsilon by the size of the numbers being\n\t\t\t\t// worked with.\n\t\t\t\tconst halfExtents = ( max - min ) / 2;\n\t\t\t\tconst el2 = el * 2;\n\t\t\t\ttargetBuffer[ boundsIndexOffset + el2 + 0 ] = min + halfExtents;\n\t\t\t\ttargetBuffer[ boundsIndexOffset + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn targetBuffer;\n\n\t}\n\n\traycastObject3D( object, raycaster, intersects = [] ) {\n\n\t\tconst { material } = object;\n\t\tif ( material === undefined ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t_InverseMatrix.copy( object.matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _InverseMatrix );\n\n\t\t_worldScale.setFromMatrixScale( object.matrixWorld );\n\t\t_direction.copy( _ray.direction ).multiply( _worldScale );\n\n\t\tconst scaleFactor = _direction.length();\n\t\tconst near = raycaster.near / scaleFactor;\n\t\tconst far = raycaster.far / scaleFactor;\n\n\t\tif ( raycaster.firstHitOnly === true ) {\n\n\t\t\tlet hit = this.raycastFirst( _ray, material, near, far );\n\t\t\thit = convertRaycastIntersect( hit, object, raycaster );\n\t\t\tif ( hit ) {\n\n\t\t\t\tintersects.push( hit );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst hits = this.raycast( _ray, material, near, far );\n\t\t\tfor ( let i = 0, l = hits.length; i < l; i ++ ) {\n\n\t\t\t\tconst hit = convertRaycastIntersect( hits[ i ], object, raycaster );\n\t\t\t\tif ( hit ) {\n\n\t\t\t\t\tintersects.push( hit );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn intersects;\n\n\t}\n\n\trefit( nodeIndices = null ) {\n\n\t\tconst refitFunc = this.indirect ? refit_indirect : refit;\n\t\treturn refitFunc( this, nodeIndices );\n\n\t}\n\n\t/* Core Cast Functions */\n\traycast( ray, materialOrSide = FrontSide, near = 0, far = Infinity ) {\n\n\t\tconst roots = this._roots;\n\t\tconst intersects = [];\n\t\tconst raycastFunc = this.indirect ? raycast_indirect : raycast;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\traycastFunc( this, i, materialOrSide, ray, intersects, near, far );\n\n\t\t}\n\n\t\treturn intersects;\n\n\t}\n\n\traycastFirst( ray, materialOrSide = FrontSide, near = 0, far = Infinity ) {\n\n\t\tconst roots = this._roots;\n\t\tlet closestResult = null;\n\n\t\tconst raycastFirstFunc = this.indirect ? raycastFirst_indirect : raycastFirst;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tconst result = raycastFirstFunc( this, i, materialOrSide, ray, near, far );\n\t\t\tif ( result != null && ( closestResult == null || result.distance < closestResult.distance ) ) {\n\n\t\t\t\tclosestResult = result;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn closestResult;\n\n\t}\n\n\tintersectsGeometry( otherGeometry, geomToMesh ) {\n\n\t\tlet result = false;\n\t\tconst roots = this._roots;\n\t\tconst intersectsGeometryFunc = this.indirect ? intersectsGeometry_indirect : intersectsGeometry;\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\n\n\t\t\tresult = intersectsGeometryFunc( this, i, otherGeometry, geomToMesh );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tshapecast( callbacks ) {\n\n\t\tconst triangle = ExtendedTrianglePool.getPrimitive();\n\t\tconst result = super.shapecast(\n\t\t\t{\n\t\t\t\t...callbacks,\n\t\t\t\tintersectsPrimitive: callbacks.intersectsTriangle,\n\t\t\t\tscratchPrimitive: triangle,\n\n\t\t\t\t// TODO: is the performance significant enough for the added complexity here?\n\t\t\t\t// can we just use one function?\n\t\t\t\titerateDirect: iterateOverTriangles,\n\t\t\t\titerateIndirect: iterateOverTriangles_indirect,\n\t\t\t}\n\t\t);\n\t\tExtendedTrianglePool.releasePrimitive( triangle );\n\n\t\treturn result;\n\n\t}\n\n\tbvhcast( otherBvh, matrixToLocal, callbacks ) {\n\n\t\tlet {\n\t\t\tintersectsRanges,\n\t\t\tintersectsTriangles,\n\t\t} = callbacks;\n\n\t\tconst triangle1 = ExtendedTrianglePool.getPrimitive();\n\t\tconst indexAttr1 = this.geometry.index;\n\t\tconst positionAttr1 = this.geometry.attributes.position;\n\t\tconst assignTriangle1 = this.indirect ?\n\t\t\ti1 => {\n\n\n\t\t\t\tconst ti = this.resolveTriangleIndex( i1 );\n\t\t\t\tsetTriangle( triangle1, ti * 3, indexAttr1, positionAttr1 );\n\n\t\t\t} :\n\t\t\ti1 => {\n\n\t\t\t\tsetTriangle( triangle1, i1 * 3, indexAttr1, positionAttr1 );\n\n\t\t\t};\n\n\t\tconst triangle2 = ExtendedTrianglePool.getPrimitive();\n\t\tconst indexAttr2 = otherBvh.geometry.index;\n\t\tconst positionAttr2 = otherBvh.geometry.attributes.position;\n\t\tconst assignTriangle2 = otherBvh.indirect ?\n\t\t\ti2 => {\n\n\t\t\t\tconst ti2 = otherBvh.resolveTriangleIndex( i2 );\n\t\t\t\tsetTriangle( triangle2, ti2 * 3, indexAttr2, positionAttr2 );\n\n\t\t\t} :\n\t\t\ti2 => {\n\n\t\t\t\tsetTriangle( triangle2, i2 * 3, indexAttr2, positionAttr2 );\n\n\t\t\t};\n\n\t\t// generate triangle callback if needed\n\t\tif ( intersectsTriangles ) {\n\n\t\t\tconst iterateOverDoubleTriangles = ( offset1, count1, offset2, count2, depth1, nodeIndex1, depth2, nodeIndex2 ) => {\n\n\t\t\t\tfor ( let i2 = offset2, l2 = offset2 + count2; i2 < l2; i2 ++ ) {\n\n\t\t\t\t\tassignTriangle2( i2 );\n\n\t\t\t\t\ttriangle2.a.applyMatrix4( matrixToLocal );\n\t\t\t\t\ttriangle2.b.applyMatrix4( matrixToLocal );\n\t\t\t\t\ttriangle2.c.applyMatrix4( matrixToLocal );\n\t\t\t\t\ttriangle2.needsUpdate = true;\n\n\t\t\t\t\tfor ( let i1 = offset1, l1 = offset1 + count1; i1 < l1; i1 ++ ) {\n\n\t\t\t\t\t\tassignTriangle1( i1 );\n\n\t\t\t\t\t\ttriangle1.needsUpdate = true;\n\n\t\t\t\t\t\tif ( intersectsTriangles( triangle1, triangle2, i1, i2, depth1, nodeIndex1, depth2, nodeIndex2 ) ) {\n\n\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t\tif ( intersectsRanges ) {\n\n\t\t\t\tconst originalIntersectsRanges = intersectsRanges;\n\t\t\t\tintersectsRanges = function ( offset1, count1, offset2, count2, depth1, nodeIndex1, depth2, nodeIndex2 ) {\n\n\t\t\t\t\tif ( ! originalIntersectsRanges( offset1, count1, offset2, count2, depth1, nodeIndex1, depth2, nodeIndex2 ) ) {\n\n\t\t\t\t\t\treturn iterateOverDoubleTriangles( offset1, count1, offset2, count2, depth1, nodeIndex1, depth2, nodeIndex2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tintersectsRanges = iterateOverDoubleTriangles;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bvhcast( this, otherBvh, matrixToLocal, intersectsRanges );\n\n\t}\n\n\n\t/* Derived Cast Functions */\n\tintersectsBox( box, boxToMesh ) {\n\n\t\t_obb.set( box.min, box.max, boxToMesh );\n\t\t_obb.needsUpdate = true;\n\n\t\treturn this.shapecast(\n\t\t\t{\n\t\t\t\tintersectsBounds: box => _obb.intersectsBox( box ),\n\t\t\t\tintersectsTriangle: tri => _obb.intersectsTriangle( tri )\n\t\t\t}\n\t\t);\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.shapecast(\n\t\t\t{\n\t\t\t\tintersectsBounds: box => sphere.intersectsBox( box ),\n\t\t\t\tintersectsTriangle: tri => tri.intersectsSphere( sphere )\n\t\t\t}\n\t\t);\n\n\t}\n\n\tclosestPointToGeometry( otherGeometry, geometryToBvh, target1 = { }, target2 = { }, minThreshold = 0, maxThreshold = Infinity ) {\n\n\t\tconst closestPointToGeometryFunc = this.indirect ? closestPointToGeometry_indirect : closestPointToGeometry;\n\t\treturn closestPointToGeometryFunc(\n\t\t\tthis,\n\t\t\totherGeometry,\n\t\t\tgeometryToBvh,\n\t\t\ttarget1,\n\t\t\ttarget2,\n\t\t\tminThreshold,\n\t\t\tmaxThreshold,\n\t\t);\n\n\t}\n\n\tclosestPointToPoint( point, target = { }, minThreshold = 0, maxThreshold = Infinity ) {\n\n\t\treturn closestPointToPoint(\n\t\t\tthis,\n\t\t\tpoint,\n\t\t\ttarget,\n\t\t\tminThreshold,\n\t\t\tmaxThreshold,\n\t\t);\n\n\t}\n\n}\n","import { Matrix4, Line3, Vector3, Ray, Box3 } from 'three';\nimport { PrimitivePool } from '../utils/PrimitivePool.js';\nimport { FLOAT32_EPSILON, INTERSECTED, NOT_INTERSECTED } from './Constants.js';\nimport { GeometryBVH } from './GeometryBVH.js';\n\nconst _inverseMatrix = /* @__PURE__ */ new Matrix4();\nconst _ray = /* @__PURE__ */ new Ray();\nconst _linePool = /* @__PURE__ */ new PrimitivePool( () => new Line3() );\nconst _intersectPointOnRay = /*@__PURE__*/ new Vector3();\nconst _intersectPointOnSegment = /*@__PURE__*/ new Vector3();\nconst _box = /* @__PURE__ */ new Box3();\n\nexport class LineSegmentsBVH extends GeometryBVH {\n\n\tget primitiveStride() {\n\n\t\treturn 2;\n\n\t}\n\n\tcomputePrimitiveBounds( offset, count, targetBuffer ) {\n\n\t\tconst indirectBuffer = this._indirectBuffer;\n\t\tconst { geometry, primitiveStride } = this;\n\n\t\tconst posAttr = geometry.attributes.position;\n\t\tconst boundsOffset = targetBuffer.offset || 0;\n\n\t\t// TODO: this may not be right for a LineLoop with a limited draw range / groups\n\t\tconst vertCount = geometry.index ? geometry.index.count : geometry.attributes.position.count;\n\t\tconst getters = [ 'getX', 'getY', 'getZ' ];\n\n\t\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\t\tconst prim = indirectBuffer ? indirectBuffer[ i ] : i;\n\t\t\tlet i0 = prim * primitiveStride;\n\t\t\tlet i1 = ( i0 + 1 ) % vertCount;\n\t\t\tif ( geometry.index ) {\n\n\t\t\t\ti0 = geometry.index.getX( i0 );\n\t\t\t\ti1 = geometry.index.getX( i1 );\n\n\t\t\t}\n\n\t\t\tconst baseIndex = ( i - boundsOffset ) * 6;\n\t\t\tfor ( let el = 0; el < 3; el ++ ) {\n\n\t\t\t\tconst v0 = posAttr[ getters[ el ] ]( i0 );\n\t\t\t\tconst v1 = posAttr[ getters[ el ] ]( i1 );\n\t\t\t\tconst min = v0 < v1 ? v0 : v1;\n\t\t\t\tconst max = v0 > v1 ? v0 : v1;\n\n\t\t\t\tconst halfExtents = ( max - min ) / 2;\n\t\t\t\tconst el2 = el * 2;\n\t\t\t\ttargetBuffer[ baseIndex + el2 + 0 ] = min + halfExtents;\n\t\t\t\ttargetBuffer[ baseIndex + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn targetBuffer;\n\n\t}\n\n\tshapecast( callbacks ) {\n\n\t\tconst line = _linePool.getPrimitive();\n\t\tconst result = super.shapecast( {\n\t\t\t...callbacks,\n\t\t\tintersectsPrimitive: callbacks.intersectsLine,\n\t\t\tscratchPrimitive: line,\n\t\t\titerateDirect: iterateOverLines,\n\t\t\titerateIndirect: iterateOverLines,\n\t\t} );\n\t\t_linePool.releasePrimitive( line );\n\n\t\treturn result;\n\n\t}\n\n\traycastObject3D( object, raycaster, intersects = [] ) {\n\n\t\tconst { matrixWorld } = object;\n\t\tconst { firstHitOnly } = raycaster;\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst threshold = raycaster.params.Line.threshold;\n\t\tconst localThreshold = threshold / ( ( object.scale.x + object.scale.y + object.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tlet closestHit = null;\n\t\tlet closestDistance = Infinity;\n\t\tthis.shapecast( {\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\treturn box.distanceToPoint( _ray.origin );\n\n\t\t\t},\n\t\t\tintersectsBounds: box => {\n\n\t\t\t\t// TODO: for some reason trying to early-out here is causing firstHitOnly tests to fail\n\t\t\t\t_box.copy( box ).expandByScalar( Math.abs( localThreshold ) );\n\t\t\t\treturn _ray.intersectsBox( _box ) ? INTERSECTED : NOT_INTERSECTED;\n\n\t\t\t},\n\t\t\tintersectsLine: ( line, index ) => {\n\n\t\t\t\tconst distSq = _ray.distanceSqToSegment( line.start, line.end, _intersectPointOnRay, _intersectPointOnSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) return;\n\n\t\t\t\t_intersectPointOnRay.applyMatrix4( object.matrixWorld );\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPointOnRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\t\t\tif ( firstHitOnly && distance >= closestDistance ) return;\n\t\t\t\tclosestDistance = distance;\n\n\t\t\t\tindex = this.resolvePrimitiveIndex( index );\n\n\t\t\t\tclosestHit = {\n\t\t\t\t\tdistance,\n\t\t\t\t\tpoint: _intersectPointOnSegment.clone().applyMatrix4( matrixWorld ),\n\t\t\t\t\tindex: index * this.primitiveStride,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tbarycoord: null,\n\t\t\t\t\tobject,\n\t\t\t\t};\n\n\t\t\t\tif ( ! firstHitOnly ) {\n\n\t\t\t\t\tintersects.push( closestHit );\n\n\t\t\t\t}\n\n\t\t\t},\n\t\t} );\n\n\t\tif ( firstHitOnly && closestHit ) {\n\n\t\t\tintersects.push( closestHit );\n\n\t\t}\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nexport class LineLoopBVH extends LineSegmentsBVH {\n\n\tget primitiveStride() {\n\n\t\treturn 1;\n\n\t}\n\n\tconstructor( geometry, options = {} ) {\n\n\t\t// \"Line\" and \"LineLoop\" BVH must be indirect since we cannot rearrange the index\n\t\t// buffer without breaking the lines\n\t\toptions = {\n\t\t\t...options,\n\t\t\tindirect: true,\n\t\t};\n\n\t\tsuper( geometry, options );\n\n\t}\n\n}\n\nexport class LineBVH extends LineLoopBVH {\n\n\tgetRootRanges( ...args ) {\n\n\t\tconst res = super.getRootRanges( ...args );\n\t\tres.forEach( group => group.count -- );\n\t\treturn res;\n\n\t}\n\n}\n\nfunction iterateOverLines(\n\toffset,\n\tcount,\n\tbvh,\n\tintersectsPointFunc,\n\tcontained,\n\tdepth,\n\tline\n) {\n\n\tconst { geometry, primitiveStride } = bvh;\n\tconst { index } = geometry;\n\tconst posAttr = geometry.attributes.position;\n\tconst vertCount = index ? index.count : posAttr.count;\n\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\tconst prim = bvh.resolvePrimitiveIndex( i );\n\t\tlet i0 = prim * primitiveStride;\n\t\tlet i1 = ( i0 + 1 ) % vertCount;\n\t\tif ( index ) {\n\n\t\t\ti0 = index.getX( i0 );\n\t\t\ti1 = index.getX( i1 );\n\n\t\t}\n\n\t\tline.start.fromBufferAttribute( posAttr, i0 );\n\t\tline.end.fromBufferAttribute( posAttr, i1 );\n\n\t\tif ( intersectsPointFunc( line, i, contained, depth ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n","import { Vector3, Matrix4, Ray, Box3 } from 'three';\nimport { FLOAT32_EPSILON, INTERSECTED, NOT_INTERSECTED } from './Constants.js';\nimport { PrimitivePool } from '../utils/PrimitivePool.js';\nimport { GeometryBVH } from './GeometryBVH.js';\n\nconst _inverseMatrix = /* @__PURE__ */ new Matrix4();\nconst _ray = /* @__PURE__ */ new Ray();\nconst _pointPool = /* @__PURE__ */ new PrimitivePool( () => new Vector3() );\nconst _box = /* @__PURE__ */ new Box3();\n\nexport class PointsBVH extends GeometryBVH {\n\n\tget primitiveStride() {\n\n\t\treturn 1;\n\n\t}\n\n\t// Implement abstract methods from BVH base class\n\tcomputePrimitiveBounds( offset, count, targetBuffer ) {\n\n\t\tconst indirectBuffer = this._indirectBuffer;\n\t\tconst { geometry } = this;\n\n\t\tconst posAttr = geometry.attributes.position;\n\t\tconst boundsOffset = targetBuffer.offset || 0;\n\t\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\t\tlet pointIndex = indirectBuffer ? indirectBuffer[ i ] : i;\n\t\t\tif ( geometry.index ) {\n\n\t\t\t\tpointIndex = geometry.index.getX( pointIndex );\n\n\t\t\t}\n\n\t\t\tconst baseIndex = ( i - boundsOffset ) * 6;\n\t\t\tconst px = posAttr.getX( pointIndex );\n\t\t\tconst py = posAttr.getY( pointIndex );\n\t\t\tconst pz = posAttr.getZ( pointIndex );\n\t\t\ttargetBuffer[ baseIndex + 0 ] = px;\n\t\t\ttargetBuffer[ baseIndex + 1 ] = Math.abs( px ) * FLOAT32_EPSILON;\n\t\t\ttargetBuffer[ baseIndex + 2 ] = py;\n\t\t\ttargetBuffer[ baseIndex + 3 ] = Math.abs( py ) * FLOAT32_EPSILON;\n\t\t\ttargetBuffer[ baseIndex + 4 ] = pz;\n\t\t\ttargetBuffer[ baseIndex + 5 ] = Math.abs( pz ) * FLOAT32_EPSILON;\n\n\t\t}\n\n\t\treturn targetBuffer;\n\n\t}\n\n\tshapecast( callbacks ) {\n\n\t\t// TODO: avoid unnecessary \"iterate over points\" function\n\t\tconst point = _pointPool.getPrimitive();\n\t\tconst result = super.shapecast(\n\t\t\t{\n\t\t\t\t...callbacks,\n\t\t\t\tintersectsPrimitive: callbacks.intersectsPoint,\n\t\t\t\tscratchPrimitive: point,\n\t\t\t\titerateDirect: iterateOverPoints,\n\t\t\t\titerateIndirect: iterateOverPoints,\n\t\t\t},\n\t\t);\n\n\t\t_pointPool.releasePrimitive( point );\n\t\treturn result;\n\n\t}\n\n\traycastObject3D( object, raycaster, intersects = [] ) {\n\n\t\tconst { geometry } = this;\n\t\tconst { matrixWorld } = object;\n\t\tconst { firstHitOnly } = raycaster;\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst threshold = raycaster.params.Points.threshold;\n\t\tconst localThreshold = threshold / ( ( object.scale.x + object.scale.y + object.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tlet closestHit = null;\n\t\tlet closestDistance = Infinity;\n\t\tthis.shapecast( {\n\t\t\tboundsTraverseOrder: box => {\n\n\t\t\t\treturn box.distanceToPoint( _ray.origin );\n\n\t\t\t},\n\t\t\tintersectsBounds: box => {\n\n\t\t\t\t// TODO: for some reason trying to early-out here is causing firstHitOnly tests to fail\n\t\t\t\t_box.copy( box ).expandByScalar( Math.abs( localThreshold ) );\n\t\t\t\treturn _ray.intersectsBox( _box ) ? INTERSECTED : NOT_INTERSECTED;\n\n\t\t\t},\n\t\t\tintersectsPoint: ( point, index ) => {\n\n\t\t\t\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\t\t\t\tconst intersectPoint = new Vector3();\n\n\t\t\t\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\t\t\t\tif ( firstHitOnly && distance >= closestDistance ) return;\n\t\t\t\t\tclosestDistance = distance;\n\n\t\t\t\t\tindex = this.resolvePrimitiveIndex( index );\n\n\t\t\t\t\tclosestHit = {\n\t\t\t\t\t\tdistance,\n\t\t\t\t\t\t// TODO: this doesn't seem right?\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\t\t\t\tpoint: intersectPoint,\n\t\t\t\t\t\tindex: geometry.index ? geometry.index.getX( index ) : index,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tbarycoord: null,\n\t\t\t\t\t\tobject,\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( ! firstHitOnly ) {\n\n\t\t\t\t\t\tintersects.push( closestHit );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\t\t} );\n\n\t\tif ( firstHitOnly && closestHit ) {\n\n\t\t\tintersects.push( closestHit );\n\n\t\t}\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nfunction iterateOverPoints(\n\toffset,\n\tcount,\n\tbvh,\n\tintersectsPointFunc,\n\tcontained,\n\tdepth,\n\tpoint\n) {\n\n\tconst { geometry } = bvh;\n\tconst { index } = geometry;\n\tconst pos = geometry.attributes.position;\n\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\n\n\t\tconst prim = bvh.resolvePrimitiveIndex( i );\n\t\tconst vertexIndex = index ? index.array[ prim ] : prim;\n\t\tpoint.fromBufferAttribute( pos, vertexIndex );\n\n\t\tif ( intersectsPointFunc( point, i, contained, depth ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t}\n\n\treturn false;\n\n}\n","import { LineBasicMaterial, BufferAttribute, Box3, Group, MeshBasicMaterial, Object3D, BufferGeometry, Mesh, Matrix4 } from 'three';\nimport { arrayToBox } from '../utils/ArrayBoxUtilities.js';\nimport { MeshBVH } from '../core/MeshBVH.js';\n\nconst boundingBox = /* @__PURE__ */ new Box3();\nconst matrix = /* @__PURE__ */ new Matrix4();\n\nclass BVHRootHelper extends Object3D {\n\n\tget isMesh() {\n\n\t\treturn ! this.displayEdges;\n\n\t}\n\n\tget isLineSegments() {\n\n\t\treturn this.displayEdges;\n\n\t}\n\n\tget isLine() {\n\n\t\treturn this.displayEdges;\n\n\t}\n\n\tgetVertexPosition( ...args ) {\n\n\t\t// implement this function so it works with Box3.setFromObject\n\t\treturn Mesh.prototype.getVertexPosition.call( this, ...args );\n\n\t}\n\n\tconstructor( bvh, material, depth = 10, group = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.material = material;\n\t\tthis.geometry = new BufferGeometry();\n\t\tthis.name = 'BVHRootHelper';\n\t\tthis.depth = depth;\n\t\tthis.displayParents = false;\n\t\tthis.bvh = bvh;\n\t\tthis.displayEdges = true;\n\t\tthis._group = group;\n\n\t}\n\n\traycast() {}\n\n\tupdate() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst boundsTree = this.bvh;\n\t\tconst group = this._group;\n\t\tgeometry.dispose();\n\t\tthis.visible = false;\n\t\tif ( boundsTree ) {\n\n\t\t\t// count the number of bounds required\n\t\t\tconst targetDepth = this.depth - 1;\n\t\t\tconst displayParents = this.displayParents;\n\t\t\tlet boundsCount = 0;\n\t\t\tboundsTree.traverse( ( depth, isLeaf ) => {\n\n\t\t\t\tif ( depth >= targetDepth || isLeaf ) {\n\n\t\t\t\t\tboundsCount ++;\n\t\t\t\t\treturn true;\n\n\t\t\t\t} else if ( displayParents ) {\n\n\t\t\t\t\tboundsCount ++;\n\n\t\t\t\t}\n\n\t\t\t}, group );\n\n\t\t\t// fill in the position buffer with the bounds corners\n\t\t\tlet posIndex = 0;\n\t\t\tconst positionArray = new Float32Array( 8 * 3 * boundsCount );\n\t\t\tboundsTree.traverse( ( depth, isLeaf, boundingData ) => {\n\n\t\t\t\tconst terminate = depth >= targetDepth || isLeaf;\n\t\t\t\tif ( terminate || displayParents ) {\n\n\t\t\t\t\tarrayToBox( 0, boundingData, boundingBox );\n\n\t\t\t\t\tconst { min, max } = boundingBox;\n\t\t\t\t\tfor ( let x = - 1; x <= 1; x += 2 ) {\n\n\t\t\t\t\t\tconst xVal = x < 0 ? min.x : max.x;\n\t\t\t\t\t\tfor ( let y = - 1; y <= 1; y += 2 ) {\n\n\t\t\t\t\t\t\tconst yVal = y < 0 ? min.y : max.y;\n\t\t\t\t\t\t\tfor ( let z = - 1; z <= 1; z += 2 ) {\n\n\t\t\t\t\t\t\t\tconst zVal = z < 0 ? min.z : max.z;\n\t\t\t\t\t\t\t\tpositionArray[ posIndex + 0 ] = xVal;\n\t\t\t\t\t\t\t\tpositionArray[ posIndex + 1 ] = yVal;\n\t\t\t\t\t\t\t\tpositionArray[ posIndex + 2 ] = zVal;\n\n\t\t\t\t\t\t\t\tposIndex += 3;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn terminate;\n\n\t\t\t\t}\n\n\t\t\t}, group );\n\n\t\t\tlet indexArray;\n\t\t\tlet indices;\n\t\t\tif ( this.displayEdges ) {\n\n\t\t\t\t// fill in the index buffer to point to the corner points\n\t\t\t\tindices = new Uint8Array( [\n\t\t\t\t\t// x axis\n\t\t\t\t\t0, 4,\n\t\t\t\t\t1, 5,\n\t\t\t\t\t2, 6,\n\t\t\t\t\t3, 7,\n\n\t\t\t\t\t// y axis\n\t\t\t\t\t0, 2,\n\t\t\t\t\t1, 3,\n\t\t\t\t\t4, 6,\n\t\t\t\t\t5, 7,\n\n\t\t\t\t\t// z axis\n\t\t\t\t\t0, 1,\n\t\t\t\t\t2, 3,\n\t\t\t\t\t4, 5,\n\t\t\t\t\t6, 7,\n\t\t\t\t] );\n\n\t\t\t} else {\n\n\t\t\t\tindices = new Uint8Array( [\n\n\t\t\t\t\t// X-, X+\n\t\t\t\t\t0, 1, 2,\n\t\t\t\t\t2, 1, 3,\n\n\t\t\t\t\t4, 6, 5,\n\t\t\t\t\t6, 7, 5,\n\n\t\t\t\t\t// Y-, Y+\n\t\t\t\t\t1, 4, 5,\n\t\t\t\t\t0, 4, 1,\n\n\t\t\t\t\t2, 3, 6,\n\t\t\t\t\t3, 7, 6,\n\n\t\t\t\t\t// Z-, Z+\n\t\t\t\t\t0, 2, 4,\n\t\t\t\t\t2, 6, 4,\n\n\t\t\t\t\t1, 5, 3,\n\t\t\t\t\t3, 5, 7,\n\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( positionArray.length > 65535 ) {\n\n\t\t\t\tindexArray = new Uint32Array( indices.length * boundsCount );\n\n\t\t\t} else {\n\n\t\t\t\tindexArray = new Uint16Array( indices.length * boundsCount );\n\n\t\t\t}\n\n\t\t\tconst indexLength = indices.length;\n\t\t\tfor ( let i = 0; i < boundsCount; i ++ ) {\n\n\t\t\t\tconst posOffset = i * 8;\n\t\t\t\tconst indexOffset = i * indexLength;\n\t\t\t\tfor ( let j = 0; j < indexLength; j ++ ) {\n\n\t\t\t\t\tindexArray[ indexOffset + j ] = posOffset + indices[ j ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// update the geometry\n\t\t\tgeometry.setIndex(\n\t\t\t\tnew BufferAttribute( indexArray, 1, false ),\n\t\t\t);\n\t\t\tgeometry.setAttribute(\n\t\t\t\t'position',\n\t\t\t\tnew BufferAttribute( positionArray, 3, false ),\n\t\t\t);\n\t\t\tthis.visible = true;\n\n\t\t}\n\n\t}\n\n}\n\nclass BVHHelper extends Group {\n\n\tget color() {\n\n\t\treturn this.edgeMaterial.color;\n\n\t}\n\n\tget opacity() {\n\n\t\treturn this.edgeMaterial.opacity;\n\n\t}\n\n\tset opacity( v ) {\n\n\t\tthis.edgeMaterial.opacity = v;\n\t\tthis.meshMaterial.opacity = v;\n\n\t}\n\n\tconstructor( mesh = null, bvh = null, depth = 10 ) {\n\n\t\t// handle bvh, depth signature\n\t\tif ( mesh instanceof MeshBVH ) {\n\n\t\t\tdepth = bvh || 10;\n\t\t\tbvh = mesh;\n\t\t\tmesh = null;\n\n\t\t}\n\n\t\t// handle mesh, depth signature\n\t\tif ( typeof bvh === 'number' ) {\n\n\t\t\tdepth = bvh;\n\t\t\tbvh = null;\n\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'BVHHelper';\n\t\tthis.depth = depth;\n\t\tthis.mesh = mesh;\n\t\tthis.bvh = bvh;\n\t\tthis.displayParents = false;\n\t\tthis.displayEdges = true;\n\t\tthis.objectIndex = 0;\n\t\tthis._roots = [];\n\n\t\tconst edgeMaterial = new LineBasicMaterial( {\n\t\t\tcolor: 0x00FF88,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.3,\n\t\t\tdepthWrite: false,\n\t\t} );\n\n\t\tconst meshMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: 0x00FF88,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.3,\n\t\t\tdepthWrite: false,\n\t\t} );\n\n\t\tmeshMaterial.color = edgeMaterial.color;\n\n\t\tthis.edgeMaterial = edgeMaterial;\n\t\tthis.meshMaterial = meshMaterial;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.mesh;\n\t\tlet bvh = this.bvh || mesh.geometry.boundsTree || null;\n\t\tif ( mesh && mesh.isBatchedMesh && mesh.boundsTrees && ! bvh ) {\n\n\t\t\t// get the bvh from a batchedMesh if not provided\n\t\t\t// TODO: we should have an official way to get the geometry index cleanly\n\t\t\tconst drawInfo = mesh._drawInfo[ this.objectIndex ];\n\t\t\tif ( drawInfo ) {\n\n\t\t\t\tbvh = mesh.boundsTrees[ drawInfo.geometryIndex ] || bvh;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst totalRoots = bvh ? bvh._roots.length : 0;\n\t\twhile ( this._roots.length > totalRoots ) {\n\n\t\t\tconst root = this._roots.pop();\n\t\t\troot.geometry.dispose();\n\t\t\tthis.remove( root );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < totalRoots; i ++ ) {\n\n\t\t\tconst { depth, edgeMaterial, meshMaterial, displayParents, displayEdges } = this;\n\n\t\t\tif ( i >= this._roots.length ) {\n\n\t\t\t\tconst root = new BVHRootHelper( bvh, edgeMaterial, depth, i );\n\t\t\t\tthis.add( root );\n\t\t\t\tthis._roots.push( root );\n\n\t\t\t}\n\n\t\t\tconst root = this._roots[ i ];\n\t\t\troot.bvh = bvh;\n\t\t\troot.depth = depth;\n\t\t\troot.displayParents = displayParents;\n\t\t\troot.displayEdges = displayEdges;\n\t\t\troot.material = displayEdges ? edgeMaterial : meshMaterial;\n\t\t\troot.update();\n\n\t\t}\n\n\t}\n\n\tupdateMatrixWorld( ...args ) {\n\n\t\tconst mesh = this.mesh;\n\t\tconst parent = this.parent;\n\n\t\tif ( mesh !== null ) {\n\n\t\t\tmesh.updateWorldMatrix( true, false );\n\n\t\t\tif ( parent ) {\n\n\t\t\t\tthis.matrix\n\t\t\t\t\t.copy( parent.matrixWorld )\n\t\t\t\t\t.invert()\n\t\t\t\t\t.multiply( mesh.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrix\n\t\t\t\t\t.copy( mesh.matrixWorld );\n\n\t\t\t}\n\n\t\t\t// handle batched and instanced mesh bvhs\n\t\t\tif ( mesh.isInstancedMesh || mesh.isBatchedMesh ) {\n\n\t\t\t\tmesh.getMatrixAt( this.objectIndex, matrix );\n\t\t\t\tthis.matrix.multiply( matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrix.decompose(\n\t\t\t\tthis.position,\n\t\t\t\tthis.quaternion,\n\t\t\t\tthis.scale,\n\t\t\t);\n\n\t\t}\n\n\t\tsuper.updateMatrixWorld( ...args );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.depth = source.depth;\n\t\tthis.mesh = source.mesh;\n\t\tthis.bvh = source.bvh;\n\t\tthis.opacity = source.opacity;\n\t\tthis.color.copy( source.color );\n\n\t}\n\n\tclone() {\n\n\t\treturn new MeshBVHHelper( this.mesh, this.bvh, this.depth );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.edgeMaterial.dispose();\n\t\tthis.meshMaterial.dispose();\n\n\t\tconst children = this.children;\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].geometry.dispose();\n\n\t\t}\n\n\t}\n\n}\n\nexport {\n\tBVHHelper,\n\tBVHHelper as MeshBVHHelper,\n};\n","import { Box3, Vector3 } from 'three';\nimport { PRIMITIVE_INTERSECT_COST, TRAVERSAL_COST } from '../core/Constants.js';\nimport { arrayToBox } from '../utils/ArrayBoxUtilities.js';\nimport { isSharedArrayBufferSupported } from '../utils/BufferUtils.js';\n\nconst _box1 = /* @__PURE__ */ new Box3();\nconst _box2 = /* @__PURE__ */ new Box3();\nconst _vec = /* @__PURE__ */ new Vector3();\n\n// https://stackoverflow.com/questions/1248302/how-to-get-the-size-of-a-javascript-object\nfunction getPrimitiveSize( el ) {\n\n\tswitch ( typeof el ) {\n\n\t\tcase 'number':\n\t\t\treturn 8;\n\t\tcase 'string':\n\t\t\treturn el.length * 2;\n\t\tcase 'boolean':\n\t\t\treturn 4;\n\t\tdefault:\n\t\t\treturn 0;\n\n\t}\n\n}\n\nfunction isTypedArray( arr ) {\n\n\tconst regex = /(Uint|Int|Float)(8|16|32)Array/;\n\treturn regex.test( arr.constructor.name );\n\n}\n\nfunction getRootExtremes( bvh, group ) {\n\n\tconst result = {\n\t\tnodeCount: 0,\n\t\tleafNodeCount: 0,\n\n\t\tdepth: {\n\t\t\tmin: Infinity, max: - Infinity\n\t\t},\n\t\tprimitives: {\n\t\t\tmin: Infinity, max: - Infinity\n\t\t},\n\t\tsplits: [ 0, 0, 0 ],\n\t\tsurfaceAreaScore: 0,\n\t};\n\n\tbvh.traverse( ( depth, isLeaf, boundingData, offsetOrSplit, count ) => {\n\n\t\tconst l0 = boundingData[ 0 + 3 ] - boundingData[ 0 ];\n\t\tconst l1 = boundingData[ 1 + 3 ] - boundingData[ 1 ];\n\t\tconst l2 = boundingData[ 2 + 3 ] - boundingData[ 2 ];\n\n\t\tconst surfaceArea = 2 * ( l0 * l1 + l1 * l2 + l2 * l0 );\n\n\t\tresult.nodeCount ++;\n\t\tif ( isLeaf ) {\n\n\t\t\tresult.leafNodeCount ++;\n\n\t\t\tresult.depth.min = Math.min( depth, result.depth.min );\n\t\t\tresult.depth.max = Math.max( depth, result.depth.max );\n\n\t\t\tresult.primitives.min = Math.min( count, result.primitives.min );\n\t\t\tresult.primitives.max = Math.max( count, result.primitives.max );\n\n\t\t\tresult.surfaceAreaScore += surfaceArea * PRIMITIVE_INTERSECT_COST * count;\n\n\t\t} else {\n\n\t\t\tresult.splits[ offsetOrSplit ] ++;\n\n\t\t\tresult.surfaceAreaScore += surfaceArea * TRAVERSAL_COST;\n\n\t\t}\n\n\t}, group );\n\n\t// If there are no leaf nodes because the tree hasn't finished generating yet.\n\tif ( result.primitives.min === Infinity ) {\n\n\t\tresult.primitives.min = 0;\n\t\tresult.primitives.max = 0;\n\n\t}\n\n\tif ( result.depth.min === Infinity ) {\n\n\t\tresult.depth.min = 0;\n\t\tresult.depth.max = 0;\n\n\t}\n\n\treturn result;\n\n}\n\nfunction getBVHExtremes( bvh ) {\n\n\treturn bvh._roots.map( ( root, i ) => getRootExtremes( bvh, i ) );\n\n}\n\nfunction estimateMemoryInBytes( obj ) {\n\n\tconst traversed = new Set();\n\tconst stack = [ obj ];\n\tlet bytes = 0;\n\n\twhile ( stack.length ) {\n\n\t\tconst curr = stack.pop();\n\t\tif ( traversed.has( curr ) ) {\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\ttraversed.add( curr );\n\n\t\tfor ( let key in curr ) {\n\n\t\t\tif ( ! Object.hasOwn( curr, key ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tbytes += getPrimitiveSize( key );\n\n\t\t\tconst value = curr[ key ];\n\t\t\tif ( value && ( typeof value === 'object' || typeof value === 'function' ) ) {\n\n\t\t\t\tif ( isTypedArray( value ) ) {\n\n\t\t\t\t\tbytes += value.byteLength;\n\n\t\t\t\t} else if ( isSharedArrayBufferSupported() && value instanceof SharedArrayBuffer ) {\n\n\t\t\t\t\tbytes += value.byteLength;\n\n\t\t\t\t} else if ( value instanceof ArrayBuffer ) {\n\n\t\t\t\t\tbytes += value.byteLength;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstack.push( value );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tbytes += getPrimitiveSize( value );\n\n\t\t\t}\n\n\n\t\t}\n\n\t}\n\n\treturn bytes;\n\n}\n\nfunction validateBounds( bvh ) {\n\n\tconst geometry = bvh.geometry;\n\tconst depthStack = [];\n\tconst index = geometry.index;\n\tconst position = geometry.getAttribute( 'position' );\n\tlet passes = true;\n\n\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\n\n\t\tconst info = {\n\t\t\tdepth,\n\t\t\tisLeaf,\n\t\t\tboundingData,\n\t\t\toffset,\n\t\t\tcount,\n\t\t};\n\t\tdepthStack[ depth ] = info;\n\n\t\tarrayToBox( 0, boundingData, _box1 );\n\t\tconst parent = depthStack[ depth - 1 ];\n\n\t\tif ( isLeaf ) {\n\n\t\t\t// check triangles\n\t\t\tfor ( let i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\t\t\tconst triIndex = bvh.resolveTriangleIndex( i );\n\t\t\t\tlet i0 = 3 * triIndex;\n\t\t\t\tlet i1 = 3 * triIndex + 1;\n\t\t\t\tlet i2 = 3 * triIndex + 2;\n\n\t\t\t\tif ( index ) {\n\n\t\t\t\t\ti0 = index.getX( i0 );\n\t\t\t\t\ti1 = index.getX( i1 );\n\t\t\t\t\ti2 = index.getX( i2 );\n\n\t\t\t\t}\n\n\t\t\t\tlet isContained;\n\n\t\t\t\t_vec.fromBufferAttribute( position, i0 );\n\t\t\t\tisContained = _box1.containsPoint( _vec );\n\n\t\t\t\t_vec.fromBufferAttribute( position, i1 );\n\t\t\t\tisContained = isContained && _box1.containsPoint( _vec );\n\n\t\t\t\t_vec.fromBufferAttribute( position, i2 );\n\t\t\t\tisContained = isContained && _box1.containsPoint( _vec );\n\n\t\t\t\tconsole.assert( isContained, 'Leaf bounds does not fully contain triangle.' );\n\t\t\t\tpasses = passes && isContained;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parent ) {\n\n\t\t\t// check if my bounds fit in my parents\n\t\t\tarrayToBox( 0, boundingData, _box2 );\n\n\t\t\tconst isContained = _box2.containsBox( _box1 );\n\t\t\tconsole.assert( isContained, 'Parent bounds does not fully contain child.' );\n\t\t\tpasses = passes && isContained;\n\n\t\t}\n\n\t} );\n\n\treturn passes;\n\n}\n\n// Returns a simple, human readable object that represents the BVH.\nfunction getJSONStructure( bvh ) {\n\n\tconst depthStack = [];\n\n\tbvh.traverse( ( depth, isLeaf, boundingData, offset, count ) => {\n\n\t\tconst info = {\n\t\t\tbounds: arrayToBox( 0, boundingData, new Box3() ),\n\t\t};\n\n\t\tif ( isLeaf ) {\n\n\t\t\tinfo.count = count;\n\t\t\tinfo.offset = offset;\n\n\t\t} else {\n\n\t\t\tinfo.left = null;\n\t\t\tinfo.right = null;\n\n\t\t}\n\n\t\tdepthStack[ depth ] = info;\n\n\t\t// traversal hits the left then right node\n\t\tconst parent = depthStack[ depth - 1 ];\n\t\tif ( parent ) {\n\n\t\t\tif ( parent.left === null ) {\n\n\t\t\t\tparent.left = info;\n\n\t\t\t} else {\n\n\t\t\t\tparent.right = info;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\treturn depthStack[ 0 ];\n\n}\n\nexport { estimateMemoryInBytes, getBVHExtremes, validateBounds, getJSONStructure };\n","import { Mesh, Points, Line, LineLoop, LineSegments, Sphere, BatchedMesh, REVISION } from 'three';\nimport { MeshBVH } from '../core/MeshBVH.js';\n\nconst IS_REVISION_166 = parseInt( REVISION ) >= 166;\n\n// TODO: how can we expand these raycast functions?\nconst _raycastFunctions = {\n\t'Mesh': Mesh.prototype.raycast,\n\t'Line': Line.prototype.raycast,\n\t'LineSegments': LineSegments.prototype.raycast,\n\t'LineLoop': LineLoop.prototype.raycast,\n\t'Points': Points.prototype.raycast,\n\t'BatchedMesh': BatchedMesh.prototype.raycast,\n};\n\nconst _mesh = /* @__PURE__ */ new Mesh();\nconst _batchIntersects = [];\n\nexport function acceleratedRaycast( raycaster, intersects ) {\n\n\tif ( this.isBatchedMesh ) {\n\n\t\tacceleratedBatchedMeshRaycast.call( this, raycaster, intersects );\n\n\t} else {\n\n\t\tconst { geometry } = this;\n\t\tif ( geometry.boundsTree ) {\n\n\t\t\tgeometry.boundsTree.raycastObject3D( this, raycaster, intersects );\n\n\t\t} else {\n\n\t\t\t_raycastFunctions[ this.type ].call( this, raycaster, intersects );\n\n\t\t}\n\n\t}\n\n}\n\nfunction acceleratedBatchedMeshRaycast( raycaster, intersects ) {\n\n\tif ( this.boundsTrees ) {\n\n\t\t// TODO: remove use of geometry info, instance info when r170 is minimum version\n\t\tconst boundsTrees = this.boundsTrees;\n\t\tconst drawInfo = this._drawInfo || this._instanceInfo;\n\t\tconst drawRanges = this._drawRanges || this._geometryInfo;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\t_mesh.material = this.material;\n\t\t_mesh.geometry = this.geometry;\n\n\t\tconst oldBoundsTree = _mesh.geometry.boundsTree;\n\t\tconst oldDrawRange = _mesh.geometry.drawRange;\n\n\t\tif ( _mesh.geometry.boundingSphere === null ) {\n\n\t\t\t_mesh.geometry.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\t// TODO: provide new method to get instances count instead of 'drawInfo.length'\n\t\tfor ( let i = 0, l = drawInfo.length; i < l; i ++ ) {\n\n\t\t\tif ( ! this.getVisibleAt( i ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// TODO: use getGeometryIndex\n\t\t\tconst geometryId = drawInfo[ i ].geometryIndex;\n\n\t\t\t_mesh.geometry.boundsTree = boundsTrees[ geometryId ];\n\n\t\t\tthis.getMatrixAt( i, _mesh.matrixWorld ).premultiply( matrixWorld );\n\n\t\t\tif ( ! _mesh.geometry.boundsTree ) {\n\n\t\t\t\tthis.getBoundingBoxAt( geometryId, _mesh.geometry.boundingBox );\n\t\t\t\tthis.getBoundingSphereAt( geometryId, _mesh.geometry.boundingSphere );\n\n\t\t\t\tconst drawRange = drawRanges[ geometryId ];\n\t\t\t\t_mesh.geometry.setDrawRange( drawRange.start, drawRange.count );\n\n\t\t\t}\n\n\t\t\t_mesh.raycast( raycaster, _batchIntersects );\n\n\t\t\tfor ( let j = 0, l = _batchIntersects.length; j < l; j ++ ) {\n\n\t\t\t\tconst intersect = _batchIntersects[ j ];\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersect.batchId = i;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_batchIntersects.length = 0;\n\n\t\t}\n\n\t\t_mesh.geometry.boundsTree = oldBoundsTree;\n\t\t_mesh.geometry.drawRange = oldDrawRange;\n\t\t_mesh.material = null;\n\t\t_mesh.geometry = null;\n\n\t} else {\n\n\t\t_raycastFunctions.BatchedMesh.call( this, raycaster, intersects );\n\n\t}\n\n}\n\nexport function computeBoundsTree( options = {} ) {\n\n\tconst { type = MeshBVH } = options;\n\tthis.boundsTree = new type( this, options );\n\treturn this.boundsTree;\n\n}\n\nexport function disposeBoundsTree() {\n\n\tthis.boundsTree = null;\n\n}\n\nexport function computeBatchedBoundsTree( index = - 1, options = {} ) {\n\n\tif ( ! IS_REVISION_166 ) {\n\n\t\tthrow new Error( 'BatchedMesh: Three r166+ is required to compute bounds trees.' );\n\n\t}\n\n\toptions = {\n\t\t...options,\n\t\trange: null\n\t};\n\n\tconst drawRanges = this._drawRanges || this._geometryInfo;\n\tconst geometryCount = this._geometryCount;\n\tif ( ! this.boundsTrees ) {\n\n\t\tthis.boundsTrees = new Array( geometryCount ).fill( null );\n\n\t}\n\n\tconst boundsTrees = this.boundsTrees;\n\twhile ( boundsTrees.length < geometryCount ) {\n\n\t\tboundsTrees.push( null );\n\n\t}\n\n\tif ( index < 0 ) {\n\n\t\tfor ( let i = 0; i < geometryCount; i ++ ) {\n\n\t\t\toptions.range = drawRanges[ i ];\n\t\t\tboundsTrees[ i ] = new MeshBVH( this.geometry, options );\n\n\t\t}\n\n\t\treturn boundsTrees;\n\n\t} else {\n\n\t\tif ( index < drawRanges.length ) {\n\n\t\t\toptions.range = drawRanges[ index ];\n\t\t\tboundsTrees[ index ] = new MeshBVH( this.geometry, options );\n\n\t\t}\n\n\t\treturn boundsTrees[ index ] || null;\n\n\t}\n\n}\n\nexport function disposeBatchedBoundsTree( index = - 1 ) {\n\n\tif ( index < 0 ) {\n\n\t\tthis.boundsTrees.fill( null );\n\n\t} else {\n\n\t\tif ( index < this.boundsTrees.length ) {\n\n\t\t\tthis.boundsTrees[ index ] = null;\n\n\t\t}\n\n\t}\n\n}\n","import {\n\tDataTexture,\n\tFloatType,\n\tIntType,\n\tUnsignedIntType,\n\tByteType,\n\tUnsignedByteType,\n\tShortType,\n\tUnsignedShortType,\n\n\tRedFormat,\n\tRGFormat,\n\tRGBAFormat,\n\n\tRedIntegerFormat,\n\tRGIntegerFormat,\n\tRGBAIntegerFormat,\n\n\tNearestFilter,\n} from 'three';\n\nfunction countToStringFormat( count ) {\n\n\tswitch ( count ) {\n\n\t\tcase 1: return 'R';\n\t\tcase 2: return 'RG';\n\t\tcase 3: return 'RGBA';\n\t\tcase 4: return 'RGBA';\n\n\t}\n\n\tthrow new Error();\n\n}\n\nfunction countToFormat( count ) {\n\n\tswitch ( count ) {\n\n\t\tcase 1: return RedFormat;\n\t\tcase 2: return RGFormat;\n\t\tcase 3: return RGBAFormat;\n\t\tcase 4: return RGBAFormat;\n\n\t}\n\n}\n\nfunction countToIntFormat( count ) {\n\n\tswitch ( count ) {\n\n\t\tcase 1: return RedIntegerFormat;\n\t\tcase 2: return RGIntegerFormat;\n\t\tcase 3: return RGBAIntegerFormat;\n\t\tcase 4: return RGBAIntegerFormat;\n\n\t}\n\n}\n\nexport class VertexAttributeTexture extends DataTexture {\n\n\tconstructor() {\n\n\t\tsuper();\n\t\tthis.minFilter = NearestFilter;\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.generateMipmaps = false;\n\t\tthis.overrideItemSize = null;\n\t\tthis._forcedType = null;\n\n\t}\n\n\tupdateFrom( attr ) {\n\n\t\tconst overrideItemSize = this.overrideItemSize;\n\t\tconst originalItemSize = attr.itemSize;\n\t\tconst originalCount = attr.count;\n\t\tif ( overrideItemSize !== null ) {\n\n\t\t\tif ( ( originalItemSize * originalCount ) % overrideItemSize !== 0.0 ) {\n\n\t\t\t\tthrow new Error( 'VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.' );\n\n\t\t\t}\n\n\t\t\tattr.itemSize = overrideItemSize;\n\t\t\tattr.count = originalCount * originalItemSize / overrideItemSize;\n\n\t\t}\n\n\t\tconst itemSize = attr.itemSize;\n\t\tconst count = attr.count;\n\t\tconst normalized = attr.normalized;\n\t\tconst originalBufferCons = attr.array.constructor;\n\t\tconst byteCount = originalBufferCons.BYTES_PER_ELEMENT;\n\t\tlet targetType = this._forcedType;\n\t\tlet finalStride = itemSize;\n\n\t\t// derive the type of texture this should be in the shader\n\t\tif ( targetType === null ) {\n\n\t\t\tswitch ( originalBufferCons ) {\n\n\t\t\t\tcase Float32Array:\n\t\t\t\t\ttargetType = FloatType;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Uint8Array:\n\t\t\t\tcase Uint16Array:\n\t\t\t\tcase Uint32Array:\n\t\t\t\t\ttargetType = UnsignedIntType;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Int8Array:\n\t\t\t\tcase Int16Array:\n\t\t\t\tcase Int32Array:\n\t\t\t\t\ttargetType = IntType;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// get the target format to store the texture as\n\t\tlet type, format, normalizeValue, targetBufferCons;\n\t\tlet internalFormat = countToStringFormat( itemSize );\n\t\tswitch ( targetType ) {\n\n\t\t\tcase FloatType:\n\t\t\t\tnormalizeValue = 1.0;\n\t\t\t\tformat = countToFormat( itemSize );\n\n\t\t\t\tif ( normalized && byteCount === 1 ) {\n\n\t\t\t\t\ttargetBufferCons = originalBufferCons;\n\t\t\t\t\tinternalFormat += '8';\n\n\t\t\t\t\tif ( originalBufferCons === Uint8Array ) {\n\n\t\t\t\t\t\ttype = UnsignedByteType;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttype = ByteType;\n\t\t\t\t\t\tinternalFormat += '_SNORM';\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetBufferCons = Float32Array;\n\t\t\t\t\tinternalFormat += '32F';\n\t\t\t\t\ttype = FloatType;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase IntType:\n\t\t\t\tinternalFormat += byteCount * 8 + 'I';\n\t\t\t\tnormalizeValue = normalized ? Math.pow( 2, originalBufferCons.BYTES_PER_ELEMENT * 8 - 1 ) : 1.0;\n\t\t\t\tformat = countToIntFormat( itemSize );\n\n\t\t\t\tif ( byteCount === 1 ) {\n\n\t\t\t\t\ttargetBufferCons = Int8Array;\n\t\t\t\t\ttype = ByteType;\n\n\t\t\t\t} else if ( byteCount === 2 ) {\n\n\t\t\t\t\ttargetBufferCons = Int16Array;\n\t\t\t\t\ttype = ShortType;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetBufferCons = Int32Array;\n\t\t\t\t\ttype = IntType;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase UnsignedIntType:\n\t\t\t\tinternalFormat += byteCount * 8 + 'UI';\n\t\t\t\tnormalizeValue = normalized ? Math.pow( 2, originalBufferCons.BYTES_PER_ELEMENT * 8 - 1 ) : 1.0;\n\t\t\t\tformat = countToIntFormat( itemSize );\n\n\t\t\t\tif ( byteCount === 1 ) {\n\n\t\t\t\t\ttargetBufferCons = Uint8Array;\n\t\t\t\t\ttype = UnsignedByteType;\n\n\t\t\t\t} else if ( byteCount === 2 ) {\n\n\t\t\t\t\ttargetBufferCons = Uint16Array;\n\t\t\t\t\ttype = UnsignedShortType;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetBufferCons = Uint32Array;\n\t\t\t\t\ttype = UnsignedIntType;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// there will be a mismatch between format length and final length because\n\t\t// RGBFormat and RGBIntegerFormat was removed\n\t\tif ( finalStride === 3 && ( format === RGBAFormat || format === RGBAIntegerFormat ) ) {\n\n\t\t\tfinalStride = 4;\n\n\t\t}\n\n\t\t// copy the data over to the new texture array\n\t\tconst dimension = Math.ceil( Math.sqrt( count ) ) || 1;\n\t\tconst length = finalStride * dimension * dimension;\n\t\tconst dataArray = new targetBufferCons( length );\n\n\t\t// temporarily set the normalized state to false since we have custom normalization logic\n\t\tconst originalNormalized = attr.normalized;\n\t\tattr.normalized = false;\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tconst ii = finalStride * i;\n\t\t\tdataArray[ ii ] = attr.getX( i ) / normalizeValue;\n\n\t\t\tif ( itemSize >= 2 ) {\n\n\t\t\t\tdataArray[ ii + 1 ] = attr.getY( i ) / normalizeValue;\n\n\t\t\t}\n\n\t\t\tif ( itemSize >= 3 ) {\n\n\t\t\t\tdataArray[ ii + 2 ] = attr.getZ( i ) / normalizeValue;\n\n\t\t\t\tif ( finalStride === 4 ) {\n\n\t\t\t\t\tdataArray[ ii + 3 ] = 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( itemSize >= 4 ) {\n\n\t\t\t\tdataArray[ ii + 3 ] = attr.getW( i ) / normalizeValue;\n\n\t\t\t}\n\n\t\t}\n\n\t\tattr.normalized = originalNormalized;\n\n\t\tthis.internalFormat = internalFormat;\n\t\tthis.format = format;\n\t\tthis.type = type;\n\t\tthis.image.width = dimension;\n\t\tthis.image.height = dimension;\n\t\tthis.image.data = dataArray;\n\t\tthis.needsUpdate = true;\n\t\tthis.dispose();\n\n\t\tattr.itemSize = originalItemSize;\n\t\tattr.count = originalCount;\n\n\t}\n\n}\n\nexport class UIntVertexAttributeTexture extends VertexAttributeTexture {\n\n\tconstructor() {\n\n\t\tsuper();\n\t\tthis._forcedType = UnsignedIntType;\n\n\t}\n\n}\n\nexport class IntVertexAttributeTexture extends VertexAttributeTexture {\n\n\tconstructor() {\n\n\t\tsuper();\n\t\tthis._forcedType = IntType;\n\n\t}\n\n\n}\n\nexport class FloatVertexAttributeTexture extends VertexAttributeTexture {\n\n\tconstructor() {\n\n\t\tsuper();\n\t\tthis._forcedType = FloatType;\n\n\t}\n\n}\n","import {\n\tDataTexture,\n\tFloatType,\n\tUnsignedIntType,\n\tRGBAFormat,\n\tRGIntegerFormat,\n\tNearestFilter,\n\tBufferAttribute,\n} from 'three';\nimport {\n\tFloatVertexAttributeTexture,\n\tUIntVertexAttributeTexture,\n} from './VertexAttributeTexture.js';\nimport { BYTES_PER_NODE, LEAFNODE_MASK_32 } from '../core/Constants.js';\nimport {\n\tBOUNDING_DATA_INDEX,\n\tCOUNT,\n\tIS_LEAF,\n\tOFFSET,\n\tSPLIT_AXIS,\n} from '../core/utils/nodeBufferUtils.js';\nimport { getIndexArray, getVertexCount } from '../core/build/geometryUtils.js';\n\nexport class MeshBVHUniformStruct {\n\n\tconstructor() {\n\n\t\tthis.index = new UIntVertexAttributeTexture();\n\t\tthis.position = new FloatVertexAttributeTexture();\n\t\tthis.bvhBounds = new DataTexture();\n\t\tthis.bvhContents = new DataTexture();\n\t\tthis._cachedIndexAttr = null;\n\n\t\tthis.index.overrideItemSize = 3;\n\n\t}\n\n\tupdateFrom( bvh ) {\n\n\t\tconst { geometry } = bvh;\n\t\tbvhToTextures( bvh, this.bvhBounds, this.bvhContents );\n\n\t\tthis.position.updateFrom( geometry.attributes.position );\n\n\t\t// dereference a new index attribute if we're using indirect storage\n\t\tif ( bvh.indirect ) {\n\n\t\t\tconst indirectBuffer = bvh._indirectBuffer;\n\t\t\tif (\n\t\t\t\tthis._cachedIndexAttr === null ||\n\t\t\t\tthis._cachedIndexAttr.count !== indirectBuffer.length\n\t\t\t) {\n\n\t\t\t\tif ( geometry.index ) {\n\n\t\t\t\t\tthis._cachedIndexAttr = geometry.index.clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst array = getIndexArray( getVertexCount( geometry ) );\n\t\t\t\t\tthis._cachedIndexAttr = new BufferAttribute( array, 1, false );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tdereferenceIndex( geometry, indirectBuffer, this._cachedIndexAttr );\n\t\t\tthis.index.updateFrom( this._cachedIndexAttr );\n\n\t\t} else {\n\n\t\t\tthis.index.updateFrom( geometry.index );\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tconst { index, position, bvhBounds, bvhContents } = this;\n\n\t\tif ( index ) index.dispose();\n\t\tif ( position ) position.dispose();\n\t\tif ( bvhBounds ) bvhBounds.dispose();\n\t\tif ( bvhContents ) bvhContents.dispose();\n\n\t}\n\n}\n\nfunction dereferenceIndex( geometry, indirectBuffer, target ) {\n\n\tconst unpacked = target.array;\n\tconst indexArray = geometry.index ? geometry.index.array : null;\n\tfor ( let i = 0, l = indirectBuffer.length; i < l; i ++ ) {\n\n\t\tconst i3 = 3 * i;\n\t\tconst v3 = 3 * indirectBuffer[ i ];\n\t\tfor ( let c = 0; c < 3; c ++ ) {\n\n\t\t\tunpacked[ i3 + c ] = indexArray ? indexArray[ v3 + c ] : v3 + c;\n\n\t\t}\n\n\t}\n\n}\n\nfunction bvhToTextures( bvh, boundsTexture, contentsTexture ) {\n\n\tconst roots = bvh._roots;\n\n\tif ( roots.length !== 1 ) {\n\n\t\tthrow new Error( 'MeshBVHUniformStruct: Multi-root BVHs not supported.' );\n\n\t}\n\n\tconst root = roots[ 0 ];\n\tconst uint16Array = new Uint16Array( root );\n\tconst uint32Array = new Uint32Array( root );\n\tconst float32Array = new Float32Array( root );\n\n\t// Both bounds need two elements per node so compute the height so it's twice as long as\n\t// the width so we can expand the row by two and still have a square texture\n\tconst nodeCount = root.byteLength / BYTES_PER_NODE;\n\tconst boundsDimension = 2 * Math.ceil( Math.sqrt( nodeCount / 2 ) );\n\tconst boundsArray = new Float32Array( 4 * boundsDimension * boundsDimension );\n\n\tconst contentsDimension = Math.ceil( Math.sqrt( nodeCount ) );\n\tconst contentsArray = new Uint32Array( 2 * contentsDimension * contentsDimension );\n\n\tfor ( let i = 0; i < nodeCount; i ++ ) {\n\n\t\tconst nodeIndex32 = i * BYTES_PER_NODE / 4;\n\t\tconst nodeIndex16 = nodeIndex32 * 2;\n\t\tconst boundsIndex = BOUNDING_DATA_INDEX( nodeIndex32 );\n\t\tfor ( let b = 0; b < 3; b ++ ) {\n\n\t\t\tboundsArray[ 8 * i + 0 + b ] = float32Array[ boundsIndex + 0 + b ];\n\t\t\tboundsArray[ 8 * i + 4 + b ] = float32Array[ boundsIndex + 3 + b ];\n\n\t\t}\n\n\t\tif ( IS_LEAF( nodeIndex16, uint16Array ) ) {\n\n\t\t\tconst count = COUNT( nodeIndex16, uint16Array );\n\t\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\n\n\t\t\tconst mergedLeafCount = LEAFNODE_MASK_32 | count;\n\t\t\tcontentsArray[ i * 2 + 0 ] = mergedLeafCount;\n\t\t\tcontentsArray[ i * 2 + 1 ] = offset;\n\n\t\t} else {\n\n\t\t\tconst rightNodeIndex = uint32Array[ nodeIndex32 + 6 ];\n\t\t\tconst splitAxis = SPLIT_AXIS( nodeIndex32, uint32Array );\n\n\t\t\tcontentsArray[ i * 2 + 0 ] = splitAxis;\n\t\t\tcontentsArray[ i * 2 + 1 ] = rightNodeIndex;\n\n\t\t}\n\n\t}\n\n\tboundsTexture.image.data = boundsArray;\n\tboundsTexture.image.width = boundsDimension;\n\tboundsTexture.image.height = boundsDimension;\n\tboundsTexture.format = RGBAFormat;\n\tboundsTexture.type = FloatType;\n\tboundsTexture.internalFormat = 'RGBA32F';\n\tboundsTexture.minFilter = NearestFilter;\n\tboundsTexture.magFilter = NearestFilter;\n\tboundsTexture.generateMipmaps = false;\n\tboundsTexture.needsUpdate = true;\n\tboundsTexture.dispose();\n\n\tcontentsTexture.image.data = contentsArray;\n\tcontentsTexture.image.width = contentsDimension;\n\tcontentsTexture.image.height = contentsDimension;\n\tcontentsTexture.format = RGIntegerFormat;\n\tcontentsTexture.type = UnsignedIntType;\n\tcontentsTexture.internalFormat = 'RG32UI';\n\tcontentsTexture.minFilter = NearestFilter;\n\tcontentsTexture.magFilter = NearestFilter;\n\tcontentsTexture.generateMipmaps = false;\n\tcontentsTexture.needsUpdate = true;\n\tcontentsTexture.dispose();\n\n}\n","import { BufferAttribute, BufferGeometry, Vector3, Vector4, Matrix4, Matrix3 } from 'three';\n\nconst _positionVector = /*@__PURE__*/ new Vector3();\nconst _normalVector = /*@__PURE__*/ new Vector3();\nconst _tangentVector = /*@__PURE__*/ new Vector3();\nconst _tangentVector4 = /*@__PURE__*/ new Vector4();\n\nconst _morphVector = /*@__PURE__*/ new Vector3();\nconst _temp = /*@__PURE__*/ new Vector3();\n\nconst _skinIndex = /*@__PURE__*/ new Vector4();\nconst _skinWeight = /*@__PURE__*/ new Vector4();\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\n\n// Confirms that the two provided attributes are compatible\nfunction validateAttributes( attr1, attr2 ) {\n\n\tif ( ! attr1 && ! attr2 ) {\n\n\t\treturn;\n\n\t}\n\n\tconst sameCount = attr1.count === attr2.count;\n\tconst sameNormalized = attr1.normalized === attr2.normalized;\n\tconst sameType = attr1.array.constructor === attr2.array.constructor;\n\tconst sameItemSize = attr1.itemSize === attr2.itemSize;\n\n\tif ( ! sameCount || ! sameNormalized || ! sameType || ! sameItemSize ) {\n\n\t\tthrow new Error();\n\n\t}\n\n}\n\n// Clones the given attribute with a new compatible buffer attribute but no data\nfunction createAttributeClone( attr, countOverride = null ) {\n\n\tconst cons = attr.array.constructor;\n\tconst normalized = attr.normalized;\n\tconst itemSize = attr.itemSize;\n\tconst count = countOverride === null ? attr.count : countOverride;\n\n\treturn new BufferAttribute( new cons( itemSize * count ), itemSize, normalized );\n\n}\n\n// target offset is the number of elements in the target buffer stride to skip before copying the\n// attributes contents in to.\nfunction copyAttributeContents( attr, target, targetOffset = 0 ) {\n\n\tif ( attr.isInterleavedBufferAttribute ) {\n\n\t\tconst itemSize = attr.itemSize;\n\t\tfor ( let i = 0, l = attr.count; i < l; i ++ ) {\n\n\t\t\tconst io = i + targetOffset;\n\t\t\ttarget.setX( io, attr.getX( i ) );\n\t\t\tif ( itemSize >= 2 ) target.setY( io, attr.getY( i ) );\n\t\t\tif ( itemSize >= 3 ) target.setZ( io, attr.getZ( i ) );\n\t\t\tif ( itemSize >= 4 ) target.setW( io, attr.getW( i ) );\n\n\t\t}\n\n\t} else {\n\n\t\tconst array = target.array;\n\t\tconst cons = array.constructor;\n\t\tconst byteOffset = array.BYTES_PER_ELEMENT * attr.itemSize * targetOffset;\n\t\tconst temp = new cons( array.buffer, byteOffset, attr.array.length );\n\t\ttemp.set( attr.array );\n\n\t}\n\n}\n\n// Adds the \"matrix\" multiplied by \"scale\" to \"target\"\nfunction addScaledMatrix( target, matrix, scale ) {\n\n\tconst targetArray = target.elements;\n\tconst matrixArray = matrix.elements;\n\tfor ( let i = 0, l = matrixArray.length; i < l; i ++ ) {\n\n\t\ttargetArray[ i ] += matrixArray[ i ] * scale;\n\n\t}\n\n}\n\n// A version of \"SkinnedMesh.boneTransform\" for normals\nfunction boneNormalTransform( mesh, index, target ) {\n\n\tconst skeleton = mesh.skeleton;\n\tconst geometry = mesh.geometry;\n\tconst bones = skeleton.bones;\n\tconst boneInverses = skeleton.boneInverses;\n\n\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t_matrix.elements.fill( 0 );\n\n\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\tif ( weight !== 0 ) {\n\n\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\t\t\t_boneMatrix.multiplyMatrices( bones[ boneIndex ].matrixWorld, boneInverses[ boneIndex ] );\n\n\t\t\taddScaledMatrix( _matrix, _boneMatrix, weight );\n\n\t\t}\n\n\t}\n\n\t_matrix.multiply( mesh.bindMatrix ).premultiply( mesh.bindMatrixInverse );\n\ttarget.transformDirection( _matrix );\n\n\treturn target;\n\n}\n\n// Applies the morph target data to the target vector\nfunction applyMorphTarget( morphData, morphInfluences, morphTargetsRelative, i, target ) {\n\n\t_morphVector.set( 0, 0, 0 );\n\tfor ( let j = 0, jl = morphData.length; j < jl; j ++ ) {\n\n\t\tconst influence = morphInfluences[ j ];\n\t\tconst morphAttribute = morphData[ j ];\n\n\t\tif ( influence === 0 ) continue;\n\n\t\t_temp.fromBufferAttribute( morphAttribute, i );\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\t_morphVector.addScaledVector( _temp, influence );\n\n\t\t} else {\n\n\t\t\t_morphVector.addScaledVector( _temp.sub( target ), influence );\n\n\t\t}\n\n\t}\n\n\ttarget.add( _morphVector );\n\n}\n\n// Modified version of BufferGeometryUtils.mergeBufferGeometries that ignores morph targets and updates a attributes in place\nfunction mergeBufferGeometries( geometries, options = { useGroups: false, updateIndex: false, skipAttributes: [] }, targetGeometry = new BufferGeometry() ) {\n\n\tconst isIndexed = geometries[ 0 ].index !== null;\n\tconst { useGroups = false, updateIndex = false, skipAttributes = [] } = options;\n\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\n\tconst attributes = {};\n\n\tlet offset = 0;\n\n\ttargetGeometry.clearGroups();\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\tconst geometry = geometries[ i ];\n\t\tlet attributesCount = 0;\n\n\t\t// ensure that all geometries are indexed, or none\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\n\n\t\t\tthrow new Error( 'StaticGeometryGenerator: All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\n\n\t\t}\n\n\t\t// gather attributes, exit early if they're different\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tif ( ! attributesUsed.has( name ) ) {\n\n\t\t\t\tthrow new Error( 'StaticGeometryGenerator: All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\n\n\t\t\t}\n\n\t\t\tif ( attributes[ name ] === undefined ) {\n\n\t\t\t\tattributes[ name ] = [];\n\n\t\t\t}\n\n\t\t\tattributes[ name ].push( geometry.attributes[ name ] );\n\t\t\tattributesCount ++;\n\n\t\t}\n\n\t\t// ensure geometries have the same number of attributes\n\t\tif ( attributesCount !== attributesUsed.size ) {\n\n\t\t\tthrow new Error( 'StaticGeometryGenerator: Make sure all geometries have the same number of attributes.' );\n\n\t\t}\n\n\t\tif ( useGroups ) {\n\n\t\t\tlet count;\n\t\t\tif ( isIndexed ) {\n\n\t\t\t\tcount = geometry.index.count;\n\n\t\t\t} else if ( geometry.attributes.position !== undefined ) {\n\n\t\t\t\tcount = geometry.attributes.position.count;\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'StaticGeometryGenerator: The geometry must have either an index or a position attribute' );\n\n\t\t\t}\n\n\t\t\ttargetGeometry.addGroup( offset, count, i );\n\t\t\toffset += count;\n\n\t\t}\n\n\t}\n\n\t// merge indices\n\tif ( isIndexed ) {\n\n\t\tlet forceUpdateIndex = false;\n\t\tif ( ! targetGeometry.index ) {\n\n\t\t\tlet indexCount = 0;\n\t\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\t\tindexCount += geometries[ i ].index.count;\n\n\t\t\t}\n\n\t\t\ttargetGeometry.setIndex( new BufferAttribute( new Uint32Array( indexCount ), 1, false ) );\n\t\t\tforceUpdateIndex = true;\n\n\t\t}\n\n\t\tif ( updateIndex || forceUpdateIndex ) {\n\n\t\t\tconst targetIndex = targetGeometry.index;\n\t\t\tlet targetOffset = 0;\n\t\t\tlet indexOffset = 0;\n\t\t\tfor ( let i = 0; i < geometries.length; ++ i ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst index = geometry.index;\n\t\t\t\tif ( skipAttributes[ i ] !== true ) {\n\n\t\t\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\n\n\t\t\t\t\t\ttargetIndex.setX( targetOffset, index.getX( j ) + indexOffset );\n\t\t\t\t\t\ttargetOffset ++;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tindexOffset += geometry.attributes.position.count;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// merge attributes\n\tfor ( const name in attributes ) {\n\n\t\tconst attrList = attributes[ name ];\n\t\tif ( ! ( name in targetGeometry.attributes ) ) {\n\n\t\t\tlet count = 0;\n\t\t\tfor ( const key in attrList ) {\n\n\t\t\t\tcount += attrList[ key ].count;\n\n\t\t\t}\n\n\t\t\ttargetGeometry.setAttribute( name, createAttributeClone( attributes[ name ][ 0 ], count ) );\n\n\t\t}\n\n\t\tconst targetAttribute = targetGeometry.attributes[ name ];\n\t\tlet offset = 0;\n\t\tfor ( let i = 0, l = attrList.length; i < l; i ++ ) {\n\n\t\t\tconst attr = attrList[ i ];\n\t\t\tif ( skipAttributes[ i ] !== true ) {\n\n\t\t\t\tcopyAttributeContents( attr, targetAttribute, offset );\n\n\t\t\t}\n\n\t\t\toffset += attr.count;\n\n\t\t}\n\n\t}\n\n\treturn targetGeometry;\n\n}\n\nfunction checkTypedArrayEquality( a, b ) {\n\n\tif ( a === null || b === null ) {\n\n\t\treturn a === b;\n\n\t}\n\n\tif ( a.length !== b.length ) {\n\n\t\treturn false;\n\n\t}\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nfunction invertGeometry( geometry ) {\n\n\tconst { index, attributes } = geometry;\n\tif ( index ) {\n\n\t\tfor ( let i = 0, l = index.count; i < l; i += 3 ) {\n\n\t\t\tconst v0 = index.getX( i );\n\t\t\tconst v2 = index.getX( i + 2 );\n\t\t\tindex.setX( i, v2 );\n\t\t\tindex.setX( i + 2, v0 );\n\n\t\t}\n\n\t} else {\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attr = attributes[ key ];\n\t\t\tconst itemSize = attr.itemSize;\n\t\t\tfor ( let i = 0, l = attr.count; i < l; i += 3 ) {\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tconst v0 = attr.getComponent( i, j );\n\t\t\t\t\tconst v2 = attr.getComponent( i + 2, j );\n\t\t\t\t\tattr.setComponent( i, j, v2 );\n\t\t\t\t\tattr.setComponent( i + 2, j, v0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn geometry;\n\n\n}\n\n// Checks whether the geometry changed between this and last evaluation\nclass GeometryDiff {\n\n\tconstructor( mesh ) {\n\n\t\tthis.matrixWorld = new Matrix4();\n\t\tthis.geometryHash = null;\n\t\tthis.boneMatrices = null;\n\t\tthis.primitiveCount = - 1;\n\t\tthis.mesh = mesh;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.mesh;\n\t\tconst geometry = mesh.geometry;\n\t\tconst skeleton = mesh.skeleton;\n\t\tconst primitiveCount = ( geometry.index ? geometry.index.count : geometry.attributes.position.count ) / 3;\n\t\tthis.matrixWorld.copy( mesh.matrixWorld );\n\t\tthis.geometryHash = geometry.attributes.position.version;\n\t\tthis.primitiveCount = primitiveCount;\n\n\t\tif ( skeleton ) {\n\n\t\t\t// ensure the bone matrix array is updated to the appropriate length\n\t\t\tif ( ! skeleton.boneTexture ) {\n\n\t\t\t\tskeleton.computeBoneTexture();\n\n\t\t\t}\n\n\t\t\tskeleton.update();\n\n\t\t\t// copy data if possible otherwise clone it\n\t\t\tconst boneMatrices = skeleton.boneMatrices;\n\t\t\tif ( ! this.boneMatrices || this.boneMatrices.length !== boneMatrices.length ) {\n\n\t\t\t\tthis.boneMatrices = boneMatrices.slice();\n\n\t\t\t} else {\n\n\t\t\t\tthis.boneMatrices.set( boneMatrices );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boneMatrices = null;\n\n\t\t}\n\n\t}\n\n\tdidChange() {\n\n\t\tconst mesh = this.mesh;\n\t\tconst geometry = mesh.geometry;\n\t\tconst primitiveCount = ( geometry.index ? geometry.index.count : geometry.attributes.position.count ) / 3;\n\t\tconst identical =\n\t\t\tthis.matrixWorld.equals( mesh.matrixWorld ) &&\n\t\t\tthis.geometryHash === geometry.attributes.position.version &&\n\t\t\tcheckTypedArrayEquality( mesh.skeleton && mesh.skeleton.boneMatrices || null, this.boneMatrices ) &&\n\t\t\tthis.primitiveCount === primitiveCount;\n\n\t\treturn ! identical;\n\n\t}\n\n}\n\nexport class StaticGeometryGenerator {\n\n\tconstructor( meshes ) {\n\n\t\tif ( ! Array.isArray( meshes ) ) {\n\n\t\t\tmeshes = [ meshes ];\n\n\t\t}\n\n\t\tconst finalMeshes = [];\n\t\tmeshes.forEach( object => {\n\n\t\t\tobject.traverseVisible( c => {\n\n\t\t\t\tif ( c.isMesh ) {\n\n\t\t\t\t\tfinalMeshes.push( c );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tthis.meshes = finalMeshes;\n\t\tthis.useGroups = true;\n\t\tthis.applyWorldTransforms = true;\n\t\tthis.attributes = [ 'position', 'normal', 'color', 'tangent', 'uv', 'uv2' ];\n\t\tthis._intermediateGeometry = new Array( finalMeshes.length ).fill().map( () => new BufferGeometry() );\n\t\tthis._diffMap = new WeakMap();\n\n\t}\n\n\tgetMaterials() {\n\n\t\tconst materials = [];\n\t\tthis.meshes.forEach( mesh => {\n\n\t\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\t\tmaterials.push( ...mesh.material );\n\n\t\t\t} else {\n\n\t\t\t\tmaterials.push( mesh.material );\n\n\t\t\t}\n\n\t\t} );\n\t\treturn materials;\n\n\t}\n\n\tgenerate( targetGeometry = new BufferGeometry() ) {\n\n\t\t// track which attributes have been updated and which to skip to avoid unnecessary attribute copies\n\t\tlet skipAttributes = [];\n\t\tconst { meshes, useGroups, _intermediateGeometry, _diffMap } = this;\n\t\tfor ( let i = 0, l = meshes.length; i < l; i ++ ) {\n\n\t\t\tconst mesh = meshes[ i ];\n\t\t\tconst geom = _intermediateGeometry[ i ];\n\t\t\tconst diff = _diffMap.get( mesh );\n\t\t\tif ( ! diff || diff.didChange( mesh ) ) {\n\n\t\t\t\tthis._convertToStaticGeometry( mesh, geom );\n\t\t\t\tskipAttributes.push( false );\n\n\t\t\t\tif ( ! diff ) {\n\n\t\t\t\t\t_diffMap.set( mesh, new GeometryDiff( mesh ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdiff.update();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tskipAttributes.push( true );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( _intermediateGeometry.length === 0 ) {\n\n\t\t\t// if there are no geometries then just create a fake empty geometry to provide\n\t\t\ttargetGeometry.setIndex( null );\n\n\t\t\t// remove all geometry\n\t\t\tconst attrs = targetGeometry.attributes;\n\t\t\tfor ( const key in attrs ) {\n\n\t\t\t\ttargetGeometry.deleteAttribute( key );\n\n\t\t\t}\n\n\t\t\t// create dummy attributes\n\t\t\tfor ( const key in this.attributes ) {\n\n\t\t\t\ttargetGeometry.setAttribute( this.attributes[ key ], new BufferAttribute( new Float32Array( 0 ), 4, false ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmergeBufferGeometries( _intermediateGeometry, { useGroups, skipAttributes }, targetGeometry );\n\n\t\t}\n\n\t\tfor ( const key in targetGeometry.attributes ) {\n\n\t\t\ttargetGeometry.attributes[ key ].needsUpdate = true;\n\n\t\t}\n\n\t\treturn targetGeometry;\n\n\t}\n\n\t_convertToStaticGeometry( mesh, targetGeometry = new BufferGeometry() ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tconst applyWorldTransforms = this.applyWorldTransforms;\n\t\tconst includeNormal = this.attributes.includes( 'normal' );\n\t\tconst includeTangent = this.attributes.includes( 'tangent' );\n\t\tconst attributes = geometry.attributes;\n\t\tconst targetAttributes = targetGeometry.attributes;\n\n\t\t// initialize the attributes if they don't exist\n\t\tif ( ! targetGeometry.index && geometry.index ) {\n\n\t\t\ttargetGeometry.index = geometry.index.clone();\n\n\t\t}\n\n\t\tif ( ! targetAttributes.position ) {\n\n\t\t\ttargetGeometry.setAttribute( 'position', createAttributeClone( attributes.position ) );\n\n\t\t}\n\n\t\tif ( includeNormal && ! targetAttributes.normal && attributes.normal ) {\n\n\t\t\ttargetGeometry.setAttribute( 'normal', createAttributeClone( attributes.normal ) );\n\n\t\t}\n\n\t\tif ( includeTangent && ! targetAttributes.tangent && attributes.tangent ) {\n\n\t\t\ttargetGeometry.setAttribute( 'tangent', createAttributeClone( attributes.tangent ) );\n\n\t\t}\n\n\t\t// ensure the attributes are consistent\n\t\tvalidateAttributes( geometry.index, targetGeometry.index );\n\t\tvalidateAttributes( attributes.position, targetAttributes.position );\n\n\t\tif ( includeNormal ) {\n\n\t\t\tvalidateAttributes( attributes.normal, targetAttributes.normal );\n\n\t\t}\n\n\t\tif ( includeTangent ) {\n\n\t\t\tvalidateAttributes( attributes.tangent, targetAttributes.tangent );\n\n\t\t}\n\n\t\t// generate transformed vertex attribute data\n\t\tconst position = attributes.position;\n\t\tconst normal = includeNormal ? attributes.normal : null;\n\t\tconst tangent = includeTangent ? attributes.tangent : null;\n\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\tconst morphNormal = geometry.morphAttributes.normal;\n\t\tconst morphTangent = geometry.morphAttributes.tangent;\n\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\tconst morphInfluences = mesh.morphTargetInfluences;\n\t\tconst normalMatrix = new Matrix3();\n\t\tnormalMatrix.getNormalMatrix( mesh.matrixWorld );\n\n\t\t// copy the index\n\t\tif ( geometry.index ) {\n\n\t\t\ttargetGeometry.index.array.set( geometry.index.array );\n\n\t\t}\n\n\t\t// copy and apply other attributes\n\t\tfor ( let i = 0, l = attributes.position.count; i < l; i ++ ) {\n\n\t\t\t_positionVector.fromBufferAttribute( position, i );\n\t\t\tif ( normal ) {\n\n\t\t\t\t_normalVector.fromBufferAttribute( normal, i );\n\n\t\t\t}\n\n\t\t\tif ( tangent ) {\n\n\t\t\t\t_tangentVector4.fromBufferAttribute( tangent, i );\n\t\t\t\t_tangentVector.fromBufferAttribute( tangent, i );\n\n\t\t\t}\n\n\t\t\t// apply morph target transform\n\t\t\tif ( morphInfluences ) {\n\n\t\t\t\tif ( morphPosition ) {\n\n\t\t\t\t\tapplyMorphTarget( morphPosition, morphInfluences, morphTargetsRelative, i, _positionVector );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormal ) {\n\n\t\t\t\t\tapplyMorphTarget( morphNormal, morphInfluences, morphTargetsRelative, i, _normalVector );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphTangent ) {\n\n\t\t\t\t\tapplyMorphTarget( morphTangent, morphInfluences, morphTargetsRelative, i, _tangentVector );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// apply bone transform\n\t\t\tif ( mesh.isSkinnedMesh ) {\n\n\t\t\t\tmesh.applyBoneTransform( i, _positionVector );\n\t\t\t\tif ( normal ) {\n\n\t\t\t\t\tboneNormalTransform( mesh, i, _normalVector );\n\n\t\t\t\t}\n\n\t\t\t\tif ( tangent ) {\n\n\t\t\t\t\tboneNormalTransform( mesh, i, _tangentVector );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// update the vectors of the attributes\n\t\t\tif ( applyWorldTransforms ) {\n\n\t\t\t\t_positionVector.applyMatrix4( mesh.matrixWorld );\n\n\t\t\t}\n\n\t\t\ttargetAttributes.position.setXYZ( i, _positionVector.x, _positionVector.y, _positionVector.z );\n\n\t\t\tif ( normal ) {\n\n\t\t\t\tif ( applyWorldTransforms ) {\n\n\t\t\t\t\t_normalVector.applyNormalMatrix( normalMatrix );\n\n\t\t\t\t}\n\n\t\t\t\ttargetAttributes.normal.setXYZ( i, _normalVector.x, _normalVector.y, _normalVector.z );\n\n\t\t\t}\n\n\t\t\tif ( tangent ) {\n\n\t\t\t\tif ( applyWorldTransforms ) {\n\n\t\t\t\t\t_tangentVector.transformDirection( mesh.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\ttargetAttributes.tangent.setXYZW( i, _tangentVector.x, _tangentVector.y, _tangentVector.z, _tangentVector4.w );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// copy other attributes over\n\t\tfor ( const i in this.attributes ) {\n\n\t\t\tconst key = this.attributes[ i ];\n\t\t\tif ( key === 'position' || key === 'tangent' || key === 'normal' || ! ( key in attributes ) ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( ! targetAttributes[ key ] ) {\n\n\t\t\t\ttargetGeometry.setAttribute( key, createAttributeClone( attributes[ key ] ) );\n\n\t\t\t}\n\n\t\t\tvalidateAttributes( attributes[ key ], targetAttributes[ key ] );\n\t\t\tcopyAttributeContents( attributes[ key ], targetAttributes[ key ] );\n\n\t\t}\n\n\t\tif ( mesh.matrixWorld.determinant() < 0 ) {\n\n\t\t\tinvertGeometry( targetGeometry );\n\n\t\t}\n\n\t\treturn targetGeometry;\n\n\t}\n\n}\n","export const common_functions = /* glsl */`\n\n// A stack of uint32 indices can can store the indices for\n// a perfectly balanced tree with a depth up to 31. Lower stack\n// depth gets higher performance.\n//\n// However not all trees are balanced. Best value to set this to\n// is the trees max depth.\n#ifndef BVH_STACK_DEPTH\n#define BVH_STACK_DEPTH 60\n#endif\n\n#ifndef INFINITY\n#define INFINITY 1e20\n#endif\n\n// Utilities\nuvec4 uTexelFetch1D( usampler2D tex, uint index ) {\n\n\tuint width = uint( textureSize( tex, 0 ).x );\n\tuvec2 uv;\n\tuv.x = index % width;\n\tuv.y = index / width;\n\n\treturn texelFetch( tex, ivec2( uv ), 0 );\n\n}\n\nivec4 iTexelFetch1D( isampler2D tex, uint index ) {\n\n\tuint width = uint( textureSize( tex, 0 ).x );\n\tuvec2 uv;\n\tuv.x = index % width;\n\tuv.y = index / width;\n\n\treturn texelFetch( tex, ivec2( uv ), 0 );\n\n}\n\nvec4 texelFetch1D( sampler2D tex, uint index ) {\n\n\tuint width = uint( textureSize( tex, 0 ).x );\n\tuvec2 uv;\n\tuv.x = index % width;\n\tuv.y = index / width;\n\n\treturn texelFetch( tex, ivec2( uv ), 0 );\n\n}\n\nvec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {\n\n\treturn\n\t\tbarycoord.x * texelFetch1D( tex, faceIndices.x ) +\n\t\tbarycoord.y * texelFetch1D( tex, faceIndices.y ) +\n\t\tbarycoord.z * texelFetch1D( tex, faceIndices.z );\n\n}\n\nvoid ndcToCameraRay(\n\tvec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,\n\tout vec3 rayOrigin, out vec3 rayDirection\n) {\n\n\t// get camera look direction and near plane for camera clipping\n\tvec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );\n\tvec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );\n\tfloat near = abs( nearVector.z / nearVector.w );\n\n\t// get the camera direction and position from camera matrices\n\tvec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );\n\tdirection /= direction.w;\n\tdirection = cameraWorld * direction - origin;\n\n\t// slide the origin along the ray until it sits at the near clip plane position\n\torigin.xyz += direction.xyz * near / dot( direction, lookDirection );\n\n\trayOrigin = origin.xyz;\n\trayDirection = direction.xyz;\n\n}\n`;\n","// Distance to Point\nexport const bvh_distance_functions = /* glsl */`\n\nfloat dot2( vec3 v ) {\n\n\treturn dot( v, v );\n\n}\n\n// https://www.shadertoy.com/view/ttfGWl\nvec3 closestPointToTriangle( vec3 p, vec3 v0, vec3 v1, vec3 v2, out vec3 barycoord ) {\n\n    vec3 v10 = v1 - v0;\n    vec3 v21 = v2 - v1;\n    vec3 v02 = v0 - v2;\n\n\tvec3 p0 = p - v0;\n\tvec3 p1 = p - v1;\n\tvec3 p2 = p - v2;\n\n    vec3 nor = cross( v10, v02 );\n\n    // method 2, in barycentric space\n    vec3  q = cross( nor, p0 );\n    float d = 1.0 / dot2( nor );\n    float u = d * dot( q, v02 );\n    float v = d * dot( q, v10 );\n    float w = 1.0 - u - v;\n\n\tif( u < 0.0 ) {\n\n\t\tw = clamp( dot( p2, v02 ) / dot2( v02 ), 0.0, 1.0 );\n\t\tu = 0.0;\n\t\tv = 1.0 - w;\n\n\t} else if( v < 0.0 ) {\n\n\t\tu = clamp( dot( p0, v10 ) / dot2( v10 ), 0.0, 1.0 );\n\t\tv = 0.0;\n\t\tw = 1.0 - u;\n\n\t} else if( w < 0.0 ) {\n\n\t\tv = clamp( dot( p1, v21 ) / dot2( v21 ), 0.0, 1.0 );\n\t\tw = 0.0;\n\t\tu = 1.0 - v;\n\n\t}\n\n\tbarycoord = vec3( u, v, w );\n    return u * v1 + v * v2 + w * v0;\n\n}\n\nfloat distanceToTriangles(\n\t// geometry info and triangle range\n\tsampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,\n\n\t// point and cut off range\n\tvec3 point, float closestDistanceSquared,\n\n\t// outputs\n\tinout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord, inout float side, inout vec3 outPoint\n) {\n\n\tbool found = false;\n\tvec3 localBarycoord;\n\tfor ( uint i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\tuvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;\n\t\tvec3 a = texelFetch1D( positionAttr, indices.x ).rgb;\n\t\tvec3 b = texelFetch1D( positionAttr, indices.y ).rgb;\n\t\tvec3 c = texelFetch1D( positionAttr, indices.z ).rgb;\n\n\t\t// get the closest point and barycoord\n\t\tvec3 closestPoint = closestPointToTriangle( point, a, b, c, localBarycoord );\n\t\tvec3 delta = point - closestPoint;\n\t\tfloat sqDist = dot2( delta );\n\t\tif ( sqDist < closestDistanceSquared ) {\n\n\t\t\t// set the output results\n\t\t\tclosestDistanceSquared = sqDist;\n\t\t\tfaceIndices = uvec4( indices.xyz, i );\n\t\t\tfaceNormal = normalize( cross( a - b, b - c ) );\n\t\t\tbarycoord = localBarycoord;\n\t\t\toutPoint = closestPoint;\n\t\t\tside = sign( dot( faceNormal, delta ) );\n\n\t\t}\n\n\t}\n\n\treturn closestDistanceSquared;\n\n}\n\nfloat distanceSqToBounds( vec3 point, vec3 boundsMin, vec3 boundsMax ) {\n\n\tvec3 clampedPoint = clamp( point, boundsMin, boundsMax );\n\tvec3 delta = point - clampedPoint;\n\treturn dot( delta, delta );\n\n}\n\nfloat distanceSqToBVHNodeBoundsPoint( vec3 point, sampler2D bvhBounds, uint currNodeIndex ) {\n\n\tuint cni2 = currNodeIndex * 2u;\n\tvec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;\n\tvec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;\n\treturn distanceSqToBounds( point, boundsMin, boundsMax );\n\n}\n\n// use a macro to hide the fact that we need to expand the struct into separate fields\n#define\\\n\tbvhClosestPointToPoint(\\\n\t\tbvh,\\\n\t\tpoint, maxDistance, faceIndices, faceNormal, barycoord, side, outPoint\\\n\t)\\\n\t_bvhClosestPointToPoint(\\\n\t\tbvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,\\\n\t\tpoint, maxDistance, faceIndices, faceNormal, barycoord, side, outPoint\\\n\t)\n\nfloat _bvhClosestPointToPoint(\n\t// bvh info\n\tsampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,\n\n\t// point to check\n\tvec3 point, float maxDistance,\n\n\t// output variables\n\tinout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,\n\tinout float side, inout vec3 outPoint\n ) {\n\n\t// stack needs to be twice as long as the deepest tree we expect because\n\t// we push both the left and right child onto the stack every traversal\n\tint ptr = 0;\n\tuint stack[ BVH_STACK_DEPTH ];\n\tstack[ 0 ] = 0u;\n\n\tfloat closestDistanceSquared = maxDistance * maxDistance;\n\tbool found = false;\n\twhile ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {\n\n\t\tuint currNodeIndex = stack[ ptr ];\n\t\tptr --;\n\n\t\t// check if we intersect the current bounds\n\t\tfloat boundsHitDistance = distanceSqToBVHNodeBoundsPoint( point, bvh_bvhBounds, currNodeIndex );\n\t\tif ( boundsHitDistance > closestDistanceSquared ) {\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tuvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;\n\t\tbool isLeaf = bool( boundsInfo.x & 0xffff0000u );\n\t\tif ( isLeaf ) {\n\n\t\t\tuint count = boundsInfo.x & 0x0000ffffu;\n\t\t\tuint offset = boundsInfo.y;\n\t\t\tclosestDistanceSquared = distanceToTriangles(\n\t\t\t\tbvh_position, bvh_index, offset, count, point, closestDistanceSquared,\n\n\t\t\t\t// outputs\n\t\t\t\tfaceIndices, faceNormal, barycoord, side, outPoint\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tuint leftIndex = currNodeIndex + 1u;\n\t\t\tuint splitAxis = boundsInfo.x & 0x0000ffffu;\n\t\t\tuint rightIndex = currNodeIndex + boundsInfo.y;\n\t\t\tbool leftToRight = distanceSqToBVHNodeBoundsPoint( point, bvh_bvhBounds, leftIndex ) < distanceSqToBVHNodeBoundsPoint( point, bvh_bvhBounds, rightIndex );//rayDirection[ splitAxis ] >= 0.0;\n\t\t\tuint c1 = leftToRight ? leftIndex : rightIndex;\n\t\t\tuint c2 = leftToRight ? rightIndex : leftIndex;\n\n\t\t\t// set c2 in the stack so we traverse it later. We need to keep track of a pointer in\n\t\t\t// the stack while we traverse. The second pointer added is the one that will be\n\t\t\t// traversed first\n\t\t\tptr ++;\n\t\t\tstack[ ptr ] = c2;\n\t\t\tptr ++;\n\t\t\tstack[ ptr ] = c1;\n\n\t\t}\n\n\t}\n\n\treturn sqrt( closestDistanceSquared );\n\n}\n`;\n","export const bvh_ray_functions = /* glsl */`\n\n#ifndef TRI_INTERSECT_EPSILON\n#define TRI_INTERSECT_EPSILON 1e-5\n#endif\n\n// Raycasting\nbool intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax, out float dist ) {\n\n\t// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/\n\t// https://tavianator.com/2011/ray_box.html\n\tvec3 invDir = 1.0 / rayDirection;\n\n\t// find intersection distances for each plane\n\tvec3 tMinPlane = invDir * ( boundsMin - rayOrigin );\n\tvec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );\n\n\t// get the min and max distances from each intersection\n\tvec3 tMinHit = min( tMaxPlane, tMinPlane );\n\tvec3 tMaxHit = max( tMaxPlane, tMinPlane );\n\n\t// get the furthest hit distance\n\tvec2 t = max( tMinHit.xx, tMinHit.yz );\n\tfloat t0 = max( t.x, t.y );\n\n\t// get the minimum hit distance\n\tt = min( tMaxHit.xx, tMaxHit.yz );\n\tfloat t1 = min( t.x, t.y );\n\n\t// set distance to 0.0 if the ray starts inside the box\n\tdist = max( t0, 0.0 );\n\n\treturn t1 >= dist;\n\n}\n\nbool intersectsTriangle(\n\tvec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,\n\tout vec3 barycoord, out vec3 norm, out float dist, out float side\n) {\n\n\t// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d\n\tvec3 edge1 = b - a;\n\tvec3 edge2 = c - a;\n\tnorm = cross( edge1, edge2 );\n\n\tfloat det = - dot( rayDirection, norm );\n\tfloat invdet = 1.0 / det;\n\n\tvec3 AO = rayOrigin - a;\n\tvec3 DAO = cross( AO, rayDirection );\n\n\tvec4 uvt;\n\tuvt.x = dot( edge2, DAO ) * invdet;\n\tuvt.y = - dot( edge1, DAO ) * invdet;\n\tuvt.z = dot( AO, norm ) * invdet;\n\tuvt.w = 1.0 - uvt.x - uvt.y;\n\n\t// set the hit information\n\tbarycoord = uvt.wxy; // arranged in A, B, C order\n\tdist = uvt.z;\n\tside = sign( det );\n\tnorm = side * normalize( norm );\n\n\t// add an epsilon to avoid misses between triangles\n\tuvt += vec4( TRI_INTERSECT_EPSILON );\n\n\treturn all( greaterThanEqual( uvt, vec4( 0.0 ) ) );\n\n}\n\nbool intersectTriangles(\n\t// geometry info and triangle range\n\tsampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,\n\n\t// ray\n\tvec3 rayOrigin, vec3 rayDirection,\n\n\t// outputs\n\tinout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,\n\tinout float side, inout float dist\n) {\n\n\tbool found = false;\n\tvec3 localBarycoord, localNormal;\n\tfloat localDist, localSide;\n\tfor ( uint i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\tuvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;\n\t\tvec3 a = texelFetch1D( positionAttr, indices.x ).rgb;\n\t\tvec3 b = texelFetch1D( positionAttr, indices.y ).rgb;\n\t\tvec3 c = texelFetch1D( positionAttr, indices.z ).rgb;\n\n\t\tif (\n\t\t\tintersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )\n\t\t\t&& localDist < minDistance\n\t\t) {\n\n\t\t\tfound = true;\n\t\t\tminDistance = localDist;\n\n\t\t\tfaceIndices = uvec4( indices.xyz, i );\n\t\t\tfaceNormal = localNormal;\n\n\t\t\tside = localSide;\n\t\t\tbarycoord = localBarycoord;\n\t\t\tdist = localDist;\n\n\t\t}\n\n\t}\n\n\treturn found;\n\n}\n\nbool intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, sampler2D bvhBounds, uint currNodeIndex, out float dist ) {\n\n\tuint cni2 = currNodeIndex * 2u;\n\tvec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;\n\tvec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;\n\treturn intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax, dist );\n\n}\n\n// use a macro to hide the fact that we need to expand the struct into separate fields\n#define\\\n\tbvhIntersectFirstHit(\\\n\t\tbvh,\\\n\t\trayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist\\\n\t)\\\n\t_bvhIntersectFirstHit(\\\n\t\tbvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,\\\n\t\trayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist\\\n\t)\n\nbool _bvhIntersectFirstHit(\n\t// bvh info\n\tsampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,\n\n\t// ray\n\tvec3 rayOrigin, vec3 rayDirection,\n\n\t// output variables split into separate variables due to output precision\n\tinout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,\n\tinout float side, inout float dist\n) {\n\n\t// stack needs to be twice as long as the deepest tree we expect because\n\t// we push both the left and right child onto the stack every traversal\n\tint ptr = 0;\n\tuint stack[ BVH_STACK_DEPTH ];\n\tstack[ 0 ] = 0u;\n\n\tfloat triangleDistance = INFINITY;\n\tbool found = false;\n\twhile ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {\n\n\t\tuint currNodeIndex = stack[ ptr ];\n\t\tptr --;\n\n\t\t// check if we intersect the current bounds\n\t\tfloat boundsHitDistance;\n\t\tif (\n\t\t\t! intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh_bvhBounds, currNodeIndex, boundsHitDistance )\n\t\t\t|| boundsHitDistance > triangleDistance\n\t\t) {\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tuvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;\n\t\tbool isLeaf = bool( boundsInfo.x & 0xffff0000u );\n\n\t\tif ( isLeaf ) {\n\n\t\t\tuint count = boundsInfo.x & 0x0000ffffu;\n\t\t\tuint offset = boundsInfo.y;\n\n\t\t\tfound = intersectTriangles(\n\t\t\t\tbvh_position, bvh_index, offset, count,\n\t\t\t\trayOrigin, rayDirection, triangleDistance,\n\t\t\t\tfaceIndices, faceNormal, barycoord, side, dist\n\t\t\t) || found;\n\n\t\t} else {\n\n\t\t\tuint leftIndex = currNodeIndex + 1u;\n\t\t\tuint splitAxis = boundsInfo.x & 0x0000ffffu;\n\t\t\tuint rightIndex = currNodeIndex + boundsInfo.y;\n\n\t\t\tbool leftToRight = rayDirection[ splitAxis ] >= 0.0;\n\t\t\tuint c1 = leftToRight ? leftIndex : rightIndex;\n\t\t\tuint c2 = leftToRight ? rightIndex : leftIndex;\n\n\t\t\t// set c2 in the stack so we traverse it later. We need to keep track of a pointer in\n\t\t\t// the stack while we traverse. The second pointer added is the one that will be\n\t\t\t// traversed first\n\t\t\tptr ++;\n\t\t\tstack[ ptr ] = c2;\n\n\t\t\tptr ++;\n\t\t\tstack[ ptr ] = c1;\n\n\t\t}\n\n\t}\n\n\treturn found;\n\n}\n`;\n","// Note that a struct cannot be used for the hit record including faceIndices, faceNormal, barycoord,\n// side, and dist because on some mobile GPUS (such as Adreno) numbers are afforded less precision specifically\n// when in a struct leading to inaccurate hit results. See KhronosGroup/WebGL#3351 for more details.\nexport const bvh_struct_definitions = /* glsl */`\nstruct BVH {\n\n\tusampler2D index;\n\tsampler2D position;\n\n\tsampler2D bvhBounds;\n\tusampler2D bvhContents;\n\n};\n`;\n","export * from './core/BVH.js';\nexport * from './core/MeshBVH.js';\nexport * from './core/LineBVH.js';\nexport * from './core/PointsBVH.js';\nexport * from './objects/BVHHelper.js';\nexport { CENTER, AVERAGE, SAH, NOT_INTERSECTED, INTERSECTED, CONTAINED } from './core/Constants.js';\nexport { getBVHExtremes, estimateMemoryInBytes, getJSONStructure, validateBounds } from './debug/Debug.js';\nexport * from './utils/ExtensionUtilities.js';\nexport { getTriangleHitPointInfo } from './utils/TriangleUtilities.js';\nexport * from './math/ExtendedTriangle.js';\nexport * from './math/OrientedBox.js';\nexport * from './webgl/MeshBVHUniformStruct.js';\nexport * from './webgl/VertexAttributeTexture.js';\nexport * from './utils/StaticGeometryGenerator.js';\nexport * as BVHShaderGLSL from './webgl/BVHShaderGLSL.js';\n\n// backwards compatibility\nimport * as BVHShaderGLSL from './webgl/BVHShaderGLSL.js';\nexport const shaderStructs = BVHShaderGLSL.bvh_struct_definitions;\nexport const shaderDistanceFunction = BVHShaderGLSL.bvh_distance_functions;\nexport const shaderIntersectFunction = `\n\t${ BVHShaderGLSL.common_functions }\n\t${ BVHShaderGLSL.bvh_ray_functions }\n`;\n","import { BufferAttribute } from 'three';\r\n\r\n// target offset is the number of elements in the target buffer stride to skip before copying the\r\n// attributes contents in to.\r\nexport function copyAttributeContents( attr, target, targetOffset = 0 ) {\r\n\r\n\tif ( attr.isInterleavedBufferAttribute ) {\r\n\r\n\t\tconst itemSize = attr.itemSize;\r\n\t\tfor ( let i = 0, l = attr.count; i < l; i ++ ) {\r\n\r\n\t\t\tconst io = i + targetOffset;\r\n\t\t\ttarget.setX( io, attr.getX( i ) );\r\n\t\t\tif ( itemSize >= 2 ) target.setY( io, attr.getY( i ) );\r\n\t\t\tif ( itemSize >= 3 ) target.setZ( io, attr.getZ( i ) );\r\n\t\t\tif ( itemSize >= 4 ) target.setW( io, attr.getW( i ) );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tconst array = target.array;\r\n\t\tconst cons = array.constructor;\r\n\t\tconst byteOffset = array.BYTES_PER_ELEMENT * attr.itemSize * targetOffset;\r\n\t\tconst temp = new cons( array.buffer, byteOffset, attr.array.length );\r\n\t\ttemp.set( attr.array );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Clones the given attribute with a new compatible buffer attribute but no data\r\nexport function createAttributeClone( attr, countOverride = null ) {\r\n\r\n\tconst cons = attr.array.constructor;\r\n\tconst normalized = attr.normalized;\r\n\tconst itemSize = attr.itemSize;\r\n\tconst count = countOverride === null ? attr.count : countOverride;\r\n\r\n\treturn new BufferAttribute( new cons( itemSize * count ), itemSize, normalized );\r\n\r\n}\r\n\r\n// Confirms that the two provided attributes are compatible. Returns false if they are not.\r\nexport function validateAttributes( attr1, attr2 ) {\r\n\r\n\tif ( ! attr1 && ! attr2 ) {\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tif ( Boolean( attr1 ) !== Boolean( attr2 ) ) {\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tconst sameCount = attr1.count === attr2.count;\r\n\tconst sameNormalized = attr1.normalized === attr2.normalized;\r\n\tconst sameType = attr1.array.constructor === attr2.array.constructor;\r\n\tconst sameItemSize = attr1.itemSize === attr2.itemSize;\r\n\r\n\tif ( ! sameCount || ! sameNormalized || ! sameType || ! sameItemSize ) {\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\treturn true;\r\n\r\n}\r\n","import { BufferAttribute, BufferGeometry } from 'three';\r\nimport { copyAttributeContents, createAttributeClone } from './BufferAttributeUtils.js';\r\n\r\nfunction validateMergeability( geometries ) {\r\n\r\n\tconst isIndexed = geometries[ 0 ].index !== null;\r\n\tconst attributesUsed = new Set( Object.keys( geometries[ 0 ].attributes ) );\r\n\tif ( ! geometries[ 0 ].getAttribute( 'position' ) ) {\r\n\r\n\t\tthrow new Error( 'StaticGeometryGenerator: position attribute is required.' );\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < geometries.length; ++ i ) {\r\n\r\n\t\tconst geometry = geometries[ i ];\r\n\t\tlet attributesCount = 0;\r\n\r\n\t\t// ensure that all geometries are indexed, or none\r\n\t\tif ( isIndexed !== ( geometry.index !== null ) ) {\r\n\r\n\t\t\tthrow new Error( 'StaticGeometryGenerator: All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.' );\r\n\r\n\t\t}\r\n\r\n\t\t// gather attributes, exit early if they're different\r\n\t\tfor ( const name in geometry.attributes ) {\r\n\r\n\t\t\tif ( ! attributesUsed.has( name ) ) {\r\n\r\n\t\t\t\tthrow new Error( 'StaticGeometryGenerator: All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tattributesCount ++;\r\n\r\n\t\t}\r\n\r\n\t\t// ensure geometries have the same number of attributes\r\n\t\tif ( attributesCount !== attributesUsed.size ) {\r\n\r\n\t\t\tthrow new Error( 'StaticGeometryGenerator: All geometries must have the same number of attributes.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getTotalIndexCount( geometries ) {\r\n\r\n\tlet result = 0;\r\n\tfor ( let i = 0, l = geometries.length; i < l; i ++ ) {\r\n\r\n\t\tresult += geometries[ i ].getIndex().count;\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\nfunction getTotalAttributeCount( geometries ) {\r\n\r\n\tlet result = 0;\r\n\tfor ( let i = 0, l = geometries.length; i < l; i ++ ) {\r\n\r\n\t\tresult += geometries[ i ].getAttribute( 'position' ).count;\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\nfunction trimMismatchedAttributes( target, indexCount, attrCount ) {\r\n\r\n\tif ( target.index && target.index.count !== indexCount ) {\r\n\r\n\t\ttarget.setIndex( null );\r\n\r\n\t}\r\n\r\n\tconst attributes = target.attributes;\r\n\tfor ( const key in attributes ) {\r\n\r\n\t\tconst attr = attributes[ key ];\r\n\t\tif ( attr.count !== attrCount ) {\r\n\r\n\t\t\ttarget.deleteAttribute( key );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Modified version of BufferGeometryUtils.mergeBufferGeometries that ignores morph targets and updates a attributes in place\r\nexport function mergeGeometries( geometries, options = {}, targetGeometry = new BufferGeometry() ) {\r\n\r\n\tconst {\r\n\t\tuseGroups = false,\r\n\t\tforceUpdate = false,\r\n\t\tskipAssigningAttributes = [],\r\n\t\toverwriteIndex = true,\r\n\t} = options;\r\n\r\n\t// check if we can merge these geometries\r\n\tvalidateMergeability( geometries );\r\n\r\n\tconst isIndexed = geometries[ 0 ].index !== null;\r\n\tconst totalIndexCount = isIndexed ? getTotalIndexCount( geometries ) : - 1;\r\n\tconst totalAttributeCount = getTotalAttributeCount( geometries );\r\n\ttrimMismatchedAttributes( targetGeometry, totalIndexCount, totalAttributeCount );\r\n\r\n\t// set up groups\r\n\tif ( useGroups ) {\r\n\r\n\t\tlet offset = 0;\r\n\t\tfor ( let i = 0, l = geometries.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst geometry = geometries[ i ];\r\n\r\n\t\t\tlet primitiveCount;\r\n\t\t\tif ( isIndexed ) {\r\n\r\n\t\t\t\tprimitiveCount = geometry.getIndex().count;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tprimitiveCount = geometry.getAttribute( 'position' ).count;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttargetGeometry.addGroup( offset, primitiveCount, i );\r\n\t\t\toffset += primitiveCount;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate the final geometry\r\n\t// skip the assigning any attributes for items in the above array\r\n\tif ( isIndexed ) {\r\n\r\n\t\t// set up the index if it doesn't exist\r\n\t\tlet forceUpdateIndex = false;\r\n\t\tif ( ! targetGeometry.index ) {\r\n\r\n\t\t\ttargetGeometry.setIndex( new BufferAttribute( new Uint32Array( totalIndexCount ), 1, false ) );\r\n\t\t\tforceUpdateIndex = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( forceUpdateIndex || overwriteIndex ) {\r\n\r\n\t\t\t// copy the index data to the target geometry\r\n\t\t\tlet targetOffset = 0;\r\n\t\t\tlet indexOffset = 0;\r\n\t\t\tconst targetIndex = targetGeometry.getIndex();\r\n\t\t\tfor ( let i = 0, l = geometries.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst geometry = geometries[ i ];\r\n\t\t\t\tconst index = geometry.getIndex();\r\n\t\t\t\tconst skip = ! forceUpdate && ! forceUpdateIndex && skipAssigningAttributes[ i ];\r\n\t\t\t\tif ( ! skip ) {\r\n\r\n\t\t\t\t\tfor ( let j = 0; j < index.count; ++ j ) {\r\n\r\n\t\t\t\t\t\ttargetIndex.setX( targetOffset + j, index.getX( j ) + indexOffset );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetOffset += index.count;\r\n\t\t\t\tindexOffset += geometry.getAttribute( 'position' ).count;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// copy all the attribute data over\r\n\tconst attributes = Object.keys( geometries[ 0 ].attributes );\r\n\tfor ( let i = 0, l = attributes.length; i < l; i ++ ) {\r\n\r\n\t\tlet forceUpdateAttr = false;\r\n\t\tconst key = attributes[ i ];\r\n\t\tif ( ! targetGeometry.getAttribute( key ) ) {\r\n\r\n\t\t\tconst firstAttr = geometries[ 0 ].getAttribute( key );\r\n\t\t\ttargetGeometry.setAttribute( key, createAttributeClone( firstAttr, totalAttributeCount ) );\r\n\t\t\tforceUpdateAttr = true;\r\n\r\n\t\t}\r\n\r\n\t\tlet offset = 0;\r\n\t\tconst targetAttribute = targetGeometry.getAttribute( key );\r\n\t\tfor ( let g = 0, l = geometries.length; g < l; g ++ ) {\r\n\r\n\t\t\tconst geometry = geometries[ g ];\r\n\t\t\tconst skip = ! forceUpdate && ! forceUpdateAttr && skipAssigningAttributes[ g ];\r\n\t\t\tconst attr = geometry.getAttribute( key );\r\n \t\t\tif ( ! skip ) {\r\n\r\n\t\t\t\tif ( key === 'color' && targetAttribute.itemSize !== attr.itemSize ) {\r\n\r\n\t\t\t\t\t// make sure the color attribute is aligned with itemSize 3 to 4\r\n\t\t\t\t\tfor ( let index = offset, l = attr.count; index < l; index ++ ) {\r\n\r\n\t\t\t\t\t\tattr.setXYZW( index, targetAttribute.getX( index ), targetAttribute.getY( index ), targetAttribute.getZ( index ), 1.0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcopyAttributeContents( attr, targetAttribute, offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset += attr.count;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { BufferAttribute } from 'three';\r\n\r\nexport function updateMaterialIndexAttribute( geometry, materials, allMaterials ) {\r\n\r\n\tconst indexAttr = geometry.index;\r\n\tconst posAttr = geometry.attributes.position;\r\n\tconst vertCount = posAttr.count;\r\n\tconst totalCount = indexAttr ? indexAttr.count : vertCount;\r\n\tlet groups = geometry.groups;\r\n\tif ( groups.length === 0 ) {\r\n\r\n\t\tgroups = [ { count: totalCount, start: 0, materialIndex: 0 } ];\r\n\r\n\t}\r\n\r\n\tlet materialIndexAttribute = geometry.getAttribute( 'materialIndex' );\r\n\tif ( ! materialIndexAttribute || materialIndexAttribute.count !== vertCount ) {\r\n\r\n\t\t// use an array with the minimum precision required to store all material id references.\r\n\t\tlet array;\r\n\t\tif ( allMaterials.length <= 255 ) {\r\n\r\n\t\t\tarray = new Uint8Array( vertCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = new Uint16Array( vertCount );\r\n\r\n\t\t}\r\n\r\n\t\tmaterialIndexAttribute = new BufferAttribute( array, 1, false );\r\n\t\tgeometry.deleteAttribute( 'materialIndex' );\r\n\t\tgeometry.setAttribute( 'materialIndex', materialIndexAttribute );\r\n\r\n\t}\r\n\r\n\tconst materialArray = materialIndexAttribute.array;\r\n\tfor ( let i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\tconst group = groups[ i ];\r\n\t\tconst start = group.start;\r\n\t\tconst count = group.count;\r\n\t\tconst endCount = Math.min( count, totalCount - start );\r\n\r\n\t\tconst mat = Array.isArray( materials ) ? materials[ group.materialIndex ] : materials;\r\n\t\tconst materialIndex = allMaterials.indexOf( mat );\r\n\r\n\t\tfor ( let j = 0; j < endCount; j ++ ) {\r\n\r\n\t\t\tlet index = start + j;\r\n\t\t\tif ( indexAttr ) {\r\n\r\n\t\t\t\tindex = indexAttr.getX( index );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialArray[ index ] = materialIndex;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function setCommonAttributes( geometry, attributes ) {\r\n\r\n\tif ( ! geometry.index ) {\r\n\r\n\t\t// TODO: compute a typed array\r\n\t\tconst indexCount = geometry.attributes.position.count;\r\n\t\tconst array = new Array( indexCount );\r\n\t\tfor ( let i = 0; i < indexCount; i ++ ) {\r\n\r\n\t\t\tarray[ i ] = i;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.setIndex( array );\r\n\r\n\t}\r\n\r\n\tif ( ! geometry.attributes.normal && ( attributes && attributes.includes( 'normal' ) ) ) {\r\n\r\n\t\tgeometry.computeVertexNormals();\r\n\r\n\t}\r\n\r\n\tif ( ! geometry.attributes.uv && ( attributes && attributes.includes( 'uv' ) ) ) {\r\n\r\n\t\tconst vertCount = geometry.attributes.position.count;\r\n\t\tgeometry.setAttribute( 'uv', new BufferAttribute( new Float32Array( vertCount * 2 ), 2, false ) );\r\n\r\n\t}\r\n\r\n\tif ( ! geometry.attributes.uv2 && ( attributes && attributes.includes( 'uv2' ) ) ) {\r\n\r\n\t\tconst vertCount = geometry.attributes.position.count;\r\n\t\tgeometry.setAttribute( 'uv2', new BufferAttribute( new Float32Array( vertCount * 2 ), 2, false ) );\r\n\r\n\t}\r\n\r\n\tif ( ! geometry.attributes.tangent && ( attributes && attributes.includes( 'tangent' ) ) ) {\r\n\r\n\t\t// compute tangents requires a uv and normal buffer\r\n\t\tif ( geometry.attributes.uv && geometry.attributes.normal ) {\r\n\r\n\t\t\tgeometry.computeTangents();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst vertCount = geometry.attributes.position.count;\r\n\t\t\tgeometry.setAttribute( 'tangent', new BufferAttribute( new Float32Array( vertCount * 4 ), 4, false ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( ! geometry.attributes.color && ( attributes && attributes.includes( 'color' ) ) ) {\r\n\r\n\t\tconst vertCount = geometry.attributes.position.count;\r\n\t\tconst array = new Float32Array( vertCount * 4 );\r\n\t\tarray.fill( 1.0 );\r\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( array, 4 ) );\r\n\r\n\t}\r\n\r\n}\r\n","// https://www.geeksforgeeks.org/how-to-create-hash-from-string-in-javascript/\r\n// https://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript\r\nexport function bufferToHash( buffer ) {\r\n\r\n\tlet hash = 0;\r\n\r\n\tif ( buffer.byteLength !== 0 ) {\r\n\r\n\t\tconst uintArray = new Uint8Array( buffer );\r\n\t\tfor ( let i = 0; i < buffer.byteLength; i ++ ) {\r\n\r\n\t\t\tconst byte = uintArray[ i ];\r\n\t\t\thash = ( ( hash << 5 ) - hash ) + byte;\r\n\t\t\thash |= 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn hash;\r\n\r\n}\r\n","import { Matrix4 } from 'three';\r\nimport { bufferToHash } from '../../utils/bufferToHash.js';\r\n\r\nfunction getGeometryHash( geometry ) {\r\n\r\n\tlet hash = geometry.uuid;\r\n\tconst attributes = Object.values( geometry.attributes );\r\n\tif ( geometry.index ) {\r\n\r\n\t\tattributes.push( geometry.index );\r\n\t\thash += `index|${ geometry.index.version }`;\r\n\r\n\t}\r\n\r\n\tconst keys = Object.keys( attributes ).sort();\r\n\tfor ( const key of keys ) {\r\n\r\n\t\tconst attr = attributes[ key ];\r\n\t\thash += `${ key }_${ attr.version }|`;\r\n\r\n\t}\r\n\r\n\treturn hash;\r\n\r\n}\r\n\r\nfunction getSkeletonHash( mesh ) {\r\n\r\n\tconst skeleton = mesh.skeleton;\r\n\tif ( skeleton ) {\r\n\r\n\t\tif ( ! skeleton.boneTexture ) {\r\n\r\n\t\t\tskeleton.computeBoneTexture();\r\n\r\n\t\t}\r\n\r\n\t\t// we can't use the texture version here because it will change even\r\n\t\t// when the bones haven't\r\n\t\tconst dataHash = bufferToHash( skeleton.boneTexture.image.data.buffer );\r\n\t\treturn `${ dataHash }_${ skeleton.boneTexture.uuid }`;\r\n\r\n\t} else {\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Checks whether the geometry changed between this and last evaluation\r\nexport class MeshDiff {\r\n\r\n\tconstructor( mesh = null ) {\r\n\r\n\t\tthis.matrixWorld = new Matrix4();\r\n\t\tthis.geometryHash = null;\r\n\t\tthis.skeletonHash = null;\r\n\t\tthis.primitiveCount = - 1;\r\n\r\n\t\tif ( mesh !== null ) {\r\n\r\n\t\t\tthis.updateFrom( mesh );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdateFrom( mesh ) {\r\n\r\n\t\tconst geometry = mesh.geometry;\r\n\t\tconst primitiveCount = ( geometry.index ? geometry.index.count : geometry.attributes.position.count ) / 3;\r\n\t\tthis.matrixWorld.copy( mesh.matrixWorld );\r\n\t\tthis.geometryHash = getGeometryHash( geometry );\r\n\t\tthis.primitiveCount = primitiveCount;\r\n\t\tthis.skeletonHash = getSkeletonHash( mesh );\r\n\r\n\t}\r\n\r\n\tdidChange( mesh ) {\r\n\r\n\t\tconst geometry = mesh.geometry;\r\n\t\tconst primitiveCount = ( geometry.index ? geometry.index.count : geometry.attributes.position.count ) / 3;\r\n\r\n\t\tconst identical =\r\n\t\t\tthis.matrixWorld.equals( mesh.matrixWorld ) &&\r\n\t\t\tthis.geometryHash === getGeometryHash( geometry ) &&\r\n\t\t\tthis.skeletonHash === getSkeletonHash( mesh ) &&\r\n\t\t\tthis.primitiveCount === primitiveCount;\r\n\r\n\t\treturn ! identical;\r\n\r\n\t}\r\n\r\n}\r\n","import { BufferGeometry, Matrix3, Matrix4, Vector3, Vector4 } from 'three';\r\nimport { copyAttributeContents, createAttributeClone, validateAttributes } from './BufferAttributeUtils.js';\r\n\r\nconst _positionVector = /*@__PURE__*/ new Vector3();\r\nconst _normalVector = /*@__PURE__*/ new Vector3();\r\nconst _tangentVector = /*@__PURE__*/ new Vector3();\r\nconst _tangentVector4 = /*@__PURE__*/ new Vector4();\r\n\r\nconst _morphVector = /*@__PURE__*/ new Vector3();\r\nconst _temp = /*@__PURE__*/ new Vector3();\r\n\r\nconst _skinIndex = /*@__PURE__*/ new Vector4();\r\nconst _skinWeight = /*@__PURE__*/ new Vector4();\r\nconst _matrix = /*@__PURE__*/ new Matrix4();\r\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\r\n\r\n// A version of \"SkinnedMesh.boneTransform\" for normals\r\nfunction boneNormalTransform( mesh, index, target ) {\r\n\r\n\tconst skeleton = mesh.skeleton;\r\n\tconst geometry = mesh.geometry;\r\n\tconst bones = skeleton.bones;\r\n\tconst boneInverses = skeleton.boneInverses;\r\n\r\n\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\r\n\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\r\n\r\n\t_matrix.elements.fill( 0 );\r\n\r\n\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\tconst weight = _skinWeight.getComponent( i );\r\n\r\n\t\tif ( weight !== 0 ) {\r\n\r\n\t\t\tconst boneIndex = _skinIndex.getComponent( i );\r\n\t\t\t_boneMatrix.multiplyMatrices( bones[ boneIndex ].matrixWorld, boneInverses[ boneIndex ] );\r\n\r\n\t\t\taddScaledMatrix( _matrix, _boneMatrix, weight );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t_matrix.multiply( mesh.bindMatrix ).premultiply( mesh.bindMatrixInverse );\r\n\ttarget.transformDirection( _matrix );\r\n\r\n\treturn target;\r\n\r\n}\r\n\r\n// Applies the morph target data to the target vector\r\nfunction applyMorphTarget( morphData, morphInfluences, morphTargetsRelative, i, target ) {\r\n\r\n\t_morphVector.set( 0, 0, 0 );\r\n\tfor ( let j = 0, jl = morphData.length; j < jl; j ++ ) {\r\n\r\n\t\tconst influence = morphInfluences[ j ];\r\n\t\tconst morphAttribute = morphData[ j ];\r\n\r\n\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t_temp.fromBufferAttribute( morphAttribute, i );\r\n\r\n\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t_morphVector.addScaledVector( _temp, influence );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_morphVector.addScaledVector( _temp.sub( target ), influence );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ttarget.add( _morphVector );\r\n\r\n}\r\n\r\n// Adds the \"matrix\" multiplied by \"scale\" to \"target\"\r\nfunction addScaledMatrix( target, matrix, scale ) {\r\n\r\n\tconst targetArray = target.elements;\r\n\tconst matrixArray = matrix.elements;\r\n\tfor ( let i = 0, l = matrixArray.length; i < l; i ++ ) {\r\n\r\n\t\ttargetArray[ i ] += matrixArray[ i ] * scale;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// inverts the geometry in place\r\nfunction invertGeometry( geometry ) {\r\n\r\n\tconst { index, attributes } = geometry;\r\n\tif ( index ) {\r\n\r\n\t\tfor ( let i = 0, l = index.count; i < l; i += 3 ) {\r\n\r\n\t\t\tconst v0 = index.getX( i );\r\n\t\t\tconst v2 = index.getX( i + 2 );\r\n\t\t\tindex.setX( i, v2 );\r\n\t\t\tindex.setX( i + 2, v0 );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\tconst attr = attributes[ key ];\r\n\t\t\tconst itemSize = attr.itemSize;\r\n\t\t\tfor ( let i = 0, l = attr.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tconst v0 = attr.getComponent( i, j );\r\n\t\t\t\t\tconst v2 = attr.getComponent( i + 2, j );\r\n\t\t\t\t\tattr.setComponent( i, j, v2 );\r\n\t\t\t\t\tattr.setComponent( i + 2, j, v0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n}\r\n\r\nexport function convertToStaticGeometry( mesh, options = {}, targetGeometry = new BufferGeometry() ) {\r\n\r\n\toptions = {\r\n\t\tapplyWorldTransforms: true,\r\n\t\tattributes: [],\r\n\t\t...options\r\n\t};\r\n\r\n\tconst geometry = mesh.geometry;\r\n\tconst applyWorldTransforms = options.applyWorldTransforms;\r\n\tconst includeNormal = options.attributes.includes( 'normal' );\r\n\tconst includeTangent = options.attributes.includes( 'tangent' );\r\n\tconst attributes = geometry.attributes;\r\n\tconst targetAttributes = targetGeometry.attributes;\r\n\r\n\t// strip any unused and unneeded attributes\r\n\tfor ( const key in targetGeometry.attributes ) {\r\n\r\n\t\tif ( ! options.attributes.includes( key ) || ! ( key in geometry.attributes ) ) {\r\n\r\n\t\t\ttargetGeometry.deleteAttribute( key );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// initialize the attributes if they don't exist\r\n\tif ( ! targetGeometry.index && geometry.index ) {\r\n\r\n\t\ttargetGeometry.index = geometry.index.clone();\r\n\r\n\t}\r\n\r\n\tif ( ! targetAttributes.position ) {\r\n\r\n\t\ttargetGeometry.setAttribute( 'position', createAttributeClone( attributes.position ) );\r\n\r\n\t}\r\n\r\n\tif ( includeNormal && ! targetAttributes.normal && attributes.normal ) {\r\n\r\n\t\ttargetGeometry.setAttribute( 'normal', createAttributeClone( attributes.normal ) );\r\n\r\n\t}\r\n\r\n\tif ( includeTangent && ! targetAttributes.tangent && attributes.tangent ) {\r\n\r\n\t\ttargetGeometry.setAttribute( 'tangent', createAttributeClone( attributes.tangent ) );\r\n\r\n\t}\r\n\r\n\t// ensure the attributes are consistent\r\n\tvalidateAttributes( geometry.index, targetGeometry.index );\r\n\tvalidateAttributes( attributes.position, targetAttributes.position );\r\n\r\n\tif ( includeNormal ) {\r\n\r\n\t\tvalidateAttributes( attributes.normal, targetAttributes.normal );\r\n\r\n\t}\r\n\r\n\tif ( includeTangent ) {\r\n\r\n\t\tvalidateAttributes( attributes.tangent, targetAttributes.tangent );\r\n\r\n\t}\r\n\r\n\t// generate transformed vertex attribute data\r\n\tconst position = attributes.position;\r\n\tconst normal = includeNormal ? attributes.normal : null;\r\n\tconst tangent = includeTangent ? attributes.tangent : null;\r\n\tconst morphPosition = geometry.morphAttributes.position;\r\n\tconst morphNormal = geometry.morphAttributes.normal;\r\n\tconst morphTangent = geometry.morphAttributes.tangent;\r\n\tconst morphTargetsRelative = geometry.morphTargetsRelative;\r\n\tconst morphInfluences = mesh.morphTargetInfluences;\r\n\tconst normalMatrix = new Matrix3();\r\n\tnormalMatrix.getNormalMatrix( mesh.matrixWorld );\r\n\r\n\t// copy the index\r\n\tif ( geometry.index ) {\r\n\r\n\t\ttargetGeometry.index.array.set( geometry.index.array );\r\n\r\n\t}\r\n\r\n\t// copy and apply other attributes\r\n\tfor ( let i = 0, l = attributes.position.count; i < l; i ++ ) {\r\n\r\n\t\t_positionVector.fromBufferAttribute( position, i );\r\n\t\tif ( normal ) {\r\n\r\n\t\t\t_normalVector.fromBufferAttribute( normal, i );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tangent ) {\r\n\r\n\t\t\t_tangentVector4.fromBufferAttribute( tangent, i );\r\n\t\t\t_tangentVector.fromBufferAttribute( tangent, i );\r\n\r\n\t\t}\r\n\r\n\t\t// apply morph target transform\r\n\t\tif ( morphInfluences ) {\r\n\r\n\t\t\tif ( morphPosition ) {\r\n\r\n\t\t\t\tapplyMorphTarget( morphPosition, morphInfluences, morphTargetsRelative, i, _positionVector );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( morphNormal ) {\r\n\r\n\t\t\t\tapplyMorphTarget( morphNormal, morphInfluences, morphTargetsRelative, i, _normalVector );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( morphTangent ) {\r\n\r\n\t\t\t\tapplyMorphTarget( morphTangent, morphInfluences, morphTargetsRelative, i, _tangentVector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// apply bone transform\r\n\t\tif ( mesh.isSkinnedMesh ) {\r\n\r\n\t\t\tmesh.applyBoneTransform( i, _positionVector );\r\n\t\t\tif ( normal ) {\r\n\r\n\t\t\t\tboneNormalTransform( mesh, i, _normalVector );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( tangent ) {\r\n\r\n\t\t\t\tboneNormalTransform( mesh, i, _tangentVector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// update the vectors of the attributes\r\n\t\tif ( applyWorldTransforms ) {\r\n\r\n\t\t\t_positionVector.applyMatrix4( mesh.matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\ttargetAttributes.position.setXYZ( i, _positionVector.x, _positionVector.y, _positionVector.z );\r\n\r\n\t\tif ( normal ) {\r\n\r\n\t\t\tif ( applyWorldTransforms ) {\r\n\r\n\t\t\t\t_normalVector.applyNormalMatrix( normalMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttargetAttributes.normal.setXYZ( i, _normalVector.x, _normalVector.y, _normalVector.z );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tangent ) {\r\n\r\n\t\t\tif ( applyWorldTransforms ) {\r\n\r\n\t\t\t\t_tangentVector.transformDirection( mesh.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttargetAttributes.tangent.setXYZW( i, _tangentVector.x, _tangentVector.y, _tangentVector.z, _tangentVector4.w );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// copy other attributes over\r\n\tfor ( const i in options.attributes ) {\r\n\r\n\t\tconst key = options.attributes[ i ];\r\n\t\tif ( key === 'position' || key === 'tangent' || key === 'normal' || ! ( key in attributes ) ) {\r\n\r\n\t\t\tcontinue;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! targetAttributes[ key ] ) {\r\n\r\n\t\t\ttargetGeometry.setAttribute( key, createAttributeClone( attributes[ key ] ) );\r\n\r\n\t\t}\r\n\r\n\t\tvalidateAttributes( attributes[ key ], targetAttributes[ key ] );\r\n\t\tcopyAttributeContents( attributes[ key ], targetAttributes[ key ] );\r\n\r\n\t}\r\n\r\n\tif ( mesh.matrixWorld.determinant() < 0 ) {\r\n\r\n\t\tinvertGeometry( targetGeometry );\r\n\r\n\t}\r\n\r\n\treturn targetGeometry;\r\n\r\n}\r\n","import { BufferGeometry } from 'three';\r\nimport { MeshDiff } from './MeshDiff.js';\r\nimport { convertToStaticGeometry } from './convertToStaticGeometry.js';\r\nimport { validateAttributes } from './BufferAttributeUtils.js';\r\n\r\nexport class BakedGeometry extends BufferGeometry {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\t\tthis.version = 0;\r\n\t\tthis.hash = null;\r\n\t\tthis._diff = new MeshDiff();\r\n\r\n\t}\r\n\r\n\t// returns whether the passed mesh is compatible with this baked geometry\r\n\t// such that it can be updated without resizing attributes\r\n\tisCompatible( mesh, attributes ) {\r\n\r\n\t\tconst geometry = mesh.geometry;\r\n\t\tfor ( let i = 0; i < attributes.length; i ++ ) {\r\n\r\n\t\t\tconst key = attributes[ i ];\r\n\t\t\tconst attr1 = geometry.attributes[ key ];\r\n\t\t\tconst attr2 = this.attributes[ key ];\r\n\t\t\tif ( attr1 && ! validateAttributes( attr1, attr2 ) ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tupdateFrom( mesh, options ) {\r\n\r\n\t\tconst diff = this._diff;\r\n\t\tif ( diff.didChange( mesh ) ) {\r\n\r\n\t\t\tconvertToStaticGeometry( mesh, options, this );\r\n\t\t\tdiff.updateFrom( mesh );\r\n\t\t\tthis.version ++;\r\n\t\t\tthis.hash = `${ this.uuid }_${ this.version }`;\r\n\t\t\treturn true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { BufferAttribute, BufferGeometry, Mesh, MeshBasicMaterial } from 'three';\r\nimport { mergeGeometries } from './mergeGeometries.js';\r\nimport { setCommonAttributes } from './GeometryPreparationUtils.js';\r\nimport { BakedGeometry } from './BakedGeometry.js';\r\n\r\nexport const NO_CHANGE = 0;\r\nexport const GEOMETRY_ADJUSTED = 1;\r\nexport const GEOMETRY_REBUILT = 2;\r\n\r\n// iterate over only the meshes in the provided objects\r\nfunction flatTraverseMeshes( objects, cb ) {\r\n\r\n\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\tconst object = objects[ i ];\r\n\t\tobject.traverseVisible( o => {\r\n\r\n\t\t\tif ( o.isMesh ) {\r\n\r\n\t\t\t\tcb( o );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\n// return the set of materials used by the provided meshes\r\nfunction getMaterials( meshes ) {\r\n\r\n\tconst materials = [];\r\n\tfor ( let i = 0, l = meshes.length; i < l; i ++ ) {\r\n\r\n\t\tconst mesh = meshes[ i ];\r\n\t\tif ( Array.isArray( mesh.material ) ) {\r\n\r\n\t\t\tmaterials.push( ...mesh.material );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterials.push( mesh.material );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn materials;\r\n\r\n}\r\n\r\nfunction mergeGeometryList( geometries, target, options ) {\r\n\r\n\t// If we have no geometry to merge then provide an empty geometry.\r\n\tif ( geometries.length === 0 ) {\r\n\r\n\t\t// if there are no geometries then just create a fake empty geometry to provide\r\n\t\ttarget.setIndex( null );\r\n\r\n\t\t// remove all geometry\r\n\t\tconst attrs = target.attributes;\r\n\t\tfor ( const key in attrs ) {\r\n\r\n\t\t\ttarget.deleteAttribute( key );\r\n\r\n\t\t}\r\n\r\n\t\t// create dummy attributes\r\n\t\tfor ( const key in options.attributes ) {\r\n\r\n\t\t\ttarget.setAttribute( options.attributes[ key ], new BufferAttribute( new Float32Array( 0 ), 4, false ) );\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tmergeGeometries( geometries, options, target );\r\n\r\n\t}\r\n\r\n\t// Mark all attributes as needing an update\r\n\tfor ( const key in target.attributes ) {\r\n\r\n\t\ttarget.attributes[ key ].needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport class StaticGeometryGenerator {\r\n\r\n\tconstructor( objects ) {\r\n\r\n\t\tthis.objects = null;\r\n\t\tthis.useGroups = true;\r\n\t\tthis.applyWorldTransforms = true;\r\n\t\tthis.generateMissingAttributes = true;\r\n\t\tthis.overwriteIndex = true;\r\n\t\tthis.attributes = [ 'position', 'normal', 'color', 'tangent', 'uv', 'uv2' ];\r\n\t\tthis._intermediateGeometry = new Map();\r\n\t\tthis._geometryMergeSets = new WeakMap();\r\n\t\tthis._mergeOrder = [];\r\n\t\tthis._dummyMesh = null;\r\n\r\n\t\tthis.setObjects( objects || [] );\r\n\r\n\t}\r\n\r\n\t_getDummyMesh() {\r\n\r\n\t\t// return a consistent dummy mesh\r\n\t\tif ( ! this._dummyMesh ) {\r\n\r\n\t\t\tconst dummyMaterial = new MeshBasicMaterial();\r\n\t\t\tconst emptyGeometry = new BufferGeometry();\r\n\t\t\temptyGeometry.setAttribute( 'position', new BufferAttribute( new Float32Array( 9 ), 3 ) );\r\n\t\t\tthis._dummyMesh = new Mesh( emptyGeometry, dummyMaterial );\r\n\r\n\t\t}\r\n\r\n\t\treturn this._dummyMesh;\r\n\r\n\t}\r\n\r\n\t_getMeshes() {\r\n\r\n\t\t// iterate over only the meshes in the provided objects\r\n\t\tconst meshes = [];\r\n\t\tflatTraverseMeshes( this.objects, mesh => {\r\n\r\n\t\t\tmeshes.push( mesh );\r\n\r\n\t\t} );\r\n\r\n\t\t// Sort the geometry so it's in a reliable order\r\n\t\tmeshes.sort( ( a, b ) => {\r\n\r\n\t\t\tif ( a.uuid > b.uuid ) return 1;\r\n\t\t\tif ( a.uuid < b.uuid ) return - 1;\r\n\t\t\treturn 0;\r\n\r\n\t\t} );\r\n\r\n\t\tif ( meshes.length === 0 ) {\r\n\r\n\t\t\tmeshes.push( this._getDummyMesh() );\r\n\r\n\t\t}\r\n\r\n\t\treturn meshes;\r\n\r\n\t}\r\n\r\n\t_updateIntermediateGeometries() {\r\n\r\n\t\tconst { _intermediateGeometry } = this;\r\n\r\n\t\tconst meshes = this._getMeshes();\r\n\t\tconst unusedMeshKeys = new Set( _intermediateGeometry.keys() );\r\n\t\tconst convertOptions = {\r\n\t\t\tattributes: this.attributes,\r\n\t\t\tapplyWorldTransforms: this.applyWorldTransforms,\r\n\t\t};\r\n\r\n\t\tfor ( let i = 0, l = meshes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst mesh = meshes[ i ];\r\n\t\t\tconst meshKey = mesh.uuid;\r\n\t\t\tunusedMeshKeys.delete( meshKey );\r\n\r\n\t\t\t// initialize the intermediate geometry\r\n\t\t\t// if the mesh and source geometry have changed in such a way that they are no longer\r\n\t\t\t// compatible then regenerate the baked geometry from scratch\r\n\t\t\tlet geom = _intermediateGeometry.get( meshKey );\r\n\t\t\tif ( ! geom || ! geom.isCompatible( mesh, this.attributes ) ) {\r\n\r\n\t\t\t\tif ( geom ) {\r\n\r\n\t\t\t\t\tgeom.dispose();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeom = new BakedGeometry();\r\n\t\t\t\t_intermediateGeometry.set( meshKey, geom );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// transform the geometry into the intermediate buffer geometry, saving whether\r\n\t\t\t// or not it changed.\r\n\t\t\tif ( geom.updateFrom( mesh, convertOptions ) ) {\r\n\r\n\t\t\t\t// TODO: provide option for only generating the set of attributes that are present\r\n\t\t\t\t// and are in the attributes array\r\n\t\t\t\tif ( this.generateMissingAttributes ) {\r\n\r\n\t\t\t\t\tsetCommonAttributes( geom, this.attributes );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tunusedMeshKeys.forEach( key => {\r\n\r\n\t\t\t_intermediateGeometry.delete( key );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tsetObjects( objects ) {\r\n\r\n\t\tif ( Array.isArray( objects ) ) {\r\n\r\n\t\t\tthis.objects = [ ...objects ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.objects = [ objects ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgenerate( targetGeometry = new BufferGeometry() ) {\r\n\r\n\t\t// track which attributes have been updated and which to skip to avoid unnecessary attribute copies\r\n\t\tconst { useGroups, overwriteIndex, _intermediateGeometry, _geometryMergeSets } = this;\r\n\r\n\t\tconst meshes = this._getMeshes();\r\n\t\tconst skipAssigningAttributes = [];\r\n\t\tconst mergeGeometry = [];\r\n\t\tconst previousMergeInfo = _geometryMergeSets.get( targetGeometry ) || [];\r\n\r\n\t\t// update all the intermediate static geometry representations\r\n\t\tthis._updateIntermediateGeometries();\r\n\r\n\t\t// get the list of geometries to merge\r\n\t\tlet forceUpdate = false;\r\n\t\tif ( meshes.length !== previousMergeInfo.length ) {\r\n\r\n\t\t\tforceUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0, l = meshes.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst mesh = meshes[ i ];\r\n\t\t\tconst geom = _intermediateGeometry.get( mesh.uuid );\r\n\t\t\tmergeGeometry.push( geom );\r\n\r\n\t\t\tconst info = previousMergeInfo[ i ];\r\n\t\t\tif ( ! info || info.uuid !== geom.uuid ) {\r\n\r\n\t\t\t\tskipAssigningAttributes.push( false );\r\n\t\t\t\tforceUpdate = true;\r\n\r\n\t\t\t} else if ( info.version !== geom.version ) {\r\n\r\n\t\t\t\tskipAssigningAttributes.push( false );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tskipAssigningAttributes.push( true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// If we have no geometry to merge then provide an empty geometry.\r\n\t\tmergeGeometryList( mergeGeometry, targetGeometry, { useGroups, forceUpdate, skipAssigningAttributes, overwriteIndex } );\r\n\r\n\t\t// force update means the attribute buffer lengths have changed\r\n\t\tif ( forceUpdate ) {\r\n\r\n\t\t\ttargetGeometry.dispose();\r\n\r\n\t\t}\r\n\r\n\t\t_geometryMergeSets.set( targetGeometry, mergeGeometry.map( g => ( {\r\n\t\t\tversion: g.version,\r\n\t\t\tuuid: g.uuid,\r\n\t\t} ) ) );\r\n\r\n\t\tlet changeType = NO_CHANGE;\r\n\t\tif ( forceUpdate ) changeType = GEOMETRY_REBUILT;\r\n\t\telse if ( skipAssigningAttributes.includes( false ) ) changeType = GEOMETRY_ADJUSTED;\r\n\r\n\t\treturn {\r\n\t\t\tchangeType,\r\n\t\t\tmaterials: getMaterials( meshes ),\r\n\t\t\tgeometry: targetGeometry,\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n","import { BufferGeometry } from 'three';\r\nimport { MeshBVH, SAH } from 'three-mesh-bvh';\r\nimport { StaticGeometryGenerator, NO_CHANGE, GEOMETRY_ADJUSTED, GEOMETRY_REBUILT } from './utils/StaticGeometryGenerator.js';\r\nimport { updateMaterialIndexAttribute } from './utils/GeometryPreparationUtils.js';\r\n\r\n// collect the textures from the materials\r\nfunction getTextures( materials ) {\r\n\r\n\tconst textureSet = new Set();\r\n\tfor ( let i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\tconst material = materials[ i ];\r\n\t\tfor ( const key in material ) {\r\n\r\n\t\t\tconst value = material[ key ];\r\n\t\t\tif ( value && value.isTexture ) {\r\n\r\n\t\t\t\ttextureSet.add( value );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn Array.from( textureSet );\r\n\r\n}\r\n\r\n// collect the lights in the scene\r\nfunction getLights( objects ) {\r\n\r\n\tconst lights = [];\r\n\tconst iesSet = new Set();\r\n\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\tobjects[ i ].traverse( c => {\r\n\r\n\t\t\tif ( c.visible ) {\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tc.isRectAreaLight ||\r\n\t\t\t\t\tc.isSpotLight ||\r\n\t\t\t\t\tc.isPointLight ||\r\n\t\t\t\t\tc.isDirectionalLight\r\n\t\t\t\t) {\r\n\r\n\t\t\t\t\tlights.push( c );\r\n\r\n\t\t\t\t\tif ( c.iesMap ) {\r\n\r\n\t\t\t\t\t\tiesSet.add( c.iesMap );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tconst iesTextures = Array.from( iesSet ).sort( ( a, b ) => {\r\n\r\n\t\tif ( a.uuid < b.uuid ) return 1;\r\n\t\tif ( a.uuid > b.uuid ) return - 1;\r\n\t\treturn 0;\r\n\r\n\t} );\r\n\r\n\treturn { lights, iesTextures };\r\n\r\n}\r\n\r\nexport class PathTracingSceneGenerator {\r\n\r\n\tget initialized() {\r\n\r\n\t\treturn Boolean( this.bvh );\r\n\r\n\t}\r\n\r\n\tconstructor( objects ) {\r\n\r\n\t\t// options\r\n\t\tthis.bvhOptions = {};\r\n\t\tthis.attributes = [ 'position', 'normal', 'tangent', 'color', 'uv', 'uv2' ];\r\n\t\tthis.generateBVH = true;\r\n\r\n\t\t// state\r\n\t\tthis.bvh = null;\r\n\t\tthis.geometry = new BufferGeometry();\r\n\t\tthis.staticGeometryGenerator = new StaticGeometryGenerator( objects );\r\n\t\tthis._bvhWorker = null;\r\n\t\tthis._pendingGenerate = null;\r\n\t\tthis._buildAsync = false;\r\n\t\tthis._materialUuids = null;\r\n\r\n\t}\r\n\r\n\tsetObjects( objects ) {\r\n\r\n\t\tthis.staticGeometryGenerator.setObjects( objects );\r\n\r\n\t}\r\n\r\n\tsetBVHWorker( bvhWorker ) {\r\n\r\n\t\tthis._bvhWorker = bvhWorker;\r\n\r\n\t}\r\n\r\n\tasync generateAsync( onProgress = null ) {\r\n\r\n\t\tif ( ! this._bvhWorker ) {\r\n\r\n\t\t\tthrow new Error( 'PathTracingSceneGenerator: \"setBVHWorker\" must be called before \"generateAsync\" can be called.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.bvh instanceof Promise ) {\r\n\r\n\t\t\t// if a bvh is already being generated we can wait for that to finish\r\n\t\t\t// and build another with the latest data while sharing the results.\r\n\t\t\tif ( ! this._pendingGenerate ) {\r\n\r\n\t\t\t\tthis._pendingGenerate = new Promise( async () => {\r\n\r\n\t\t\t\t\tawait this.bvh;\r\n\t\t\t\t\tthis._pendingGenerate = null;\r\n\r\n\t\t\t\t\t// TODO: support multiple callbacks queued?\r\n\t\t\t\t\treturn this.generateAsync( onProgress );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this._pendingGenerate;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._buildAsync = true;\r\n\t\t\tconst result = this.generate( onProgress );\r\n\t\t\tthis._buildAsync = false;\r\n\r\n\t\t\tresult.bvh = this.bvh = await result.bvh;\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgenerate( onProgress = null ) {\r\n\r\n\t\tconst { staticGeometryGenerator, geometry, attributes } = this;\r\n\t\tconst objects = staticGeometryGenerator.objects;\r\n\t\tstaticGeometryGenerator.attributes = attributes;\r\n\r\n\t\t// update the skeleton animations in case WebGLRenderer is not running\r\n\t\t// to update it.\r\n\t\tobjects.forEach( o => {\r\n\r\n\t\t\to.traverse( c => {\r\n\r\n\t\t\t\tif ( c.isSkinnedMesh && c.skeleton ) {\r\n\r\n\t\t\t\t\tc.skeleton.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t\t// generate the geometry\r\n\t\tconst result = staticGeometryGenerator.generate( geometry );\r\n\t\tconst materials = result.materials;\r\n\t\tlet needsMaterialIndexUpdate = result.changeType !== NO_CHANGE || this._materialUuids === null || this._materialUuids.length !== length;\r\n\t\tif ( ! needsMaterialIndexUpdate ) {\r\n\r\n\t\t\tfor ( let i = 0, length = materials.length; i < length; i ++ ) {\r\n\r\n\t\t\t\tconst material = materials[ i ];\r\n\t\t\t\tif ( material.uuid !== this._materialUuids[ i ] ) {\r\n\r\n\t\t\t\t\tneedsMaterialIndexUpdate = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst textures = getTextures( materials );\r\n\t\tconst { lights, iesTextures } = getLights( objects );\r\n\t\tif ( needsMaterialIndexUpdate ) {\r\n\r\n\t\t\tupdateMaterialIndexAttribute( geometry, materials, materials );\r\n\t\t\tthis._materialUuids = materials.map( material => material.uuid );\r\n\r\n\t\t}\r\n\r\n\t\t// only generate a new bvh if the objects used have changed\r\n\t\tif ( this.generateBVH ) {\r\n\r\n\t\t\tif ( this.bvh instanceof Promise ) {\r\n\r\n\t\t\t\tthrow new Error( 'PathTracingSceneGenerator: BVH is already building asynchronously.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( result.changeType === GEOMETRY_REBUILT ) {\r\n\r\n\t\t\t\tconst bvhOptions = {\r\n\t\t\t\t\tstrategy: SAH,\r\n\t\t\t\t\tmaxLeafTris: 1,\r\n\t\t\t\t\tindirect: true,\r\n\t\t\t\t\tonProgress,\r\n\t\t\t\t\t...this.bvhOptions,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif ( this._buildAsync ) {\r\n\r\n\t\t\t\t\tthis.bvh = this._bvhWorker.generate( geometry, bvhOptions );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.bvh = new MeshBVH( geometry, bvhOptions );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( result.changeType === GEOMETRY_ADJUSTED ) {\r\n\r\n\t\t\t\tthis.bvh.refit();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tbvhChanged: result.changeType !== NO_CHANGE,\r\n\t\t\tbvh: this.bvh,\r\n\t\t\tneedsMaterialIndexUpdate,\r\n\t\t\tlights,\r\n\t\t\tiesTextures,\r\n\t\t\tgeometry,\r\n\t\t\tmaterials,\r\n\t\t\ttextures,\r\n\t\t\tobjects,\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class DynamicPathTracingSceneGenerator extends PathTracingSceneGenerator {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\t\tconsole.warn( 'DynamicPathTracingSceneGenerator has been deprecated and renamed to \"PathTracingSceneGenerator\".' );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class PathTracingSceneWorker extends PathTracingSceneGenerator {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\t\tconsole.warn( 'PathTracingSceneWorker has been deprecated and renamed to \"PathTracingSceneGenerator\".' );\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial } from 'three';\r\n\r\nexport class MaterialBase extends ShaderMaterial {\r\n\r\n\tset needsUpdate( v ) {\r\n\r\n\t\tsuper.needsUpdate = true;\r\n\t\tthis.dispatchEvent( {\r\n\r\n\t\t\ttype: 'recompilation',\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tconstructor( shader ) {\r\n\r\n\t\tsuper( shader );\r\n\r\n\t\tfor ( const key in this.uniforms ) {\r\n\r\n\t\t\tObject.defineProperty( this, key, {\r\n\r\n\t\t\t\tget() {\r\n\r\n\t\t\t\t\treturn this.uniforms[ key ].value;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tset( v ) {\r\n\r\n\t\t\t\t\tthis.uniforms[ key ].value = v;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// sets the given named define value and sets \"needsUpdate\" to true if it's different\r\n\tsetDefine( name, value = undefined ) {\r\n\r\n\t\tif ( value === undefined || value === null ) {\r\n\r\n\t\t\tif ( name in this.defines ) {\r\n\r\n\t\t\t\tdelete this.defines[ name ];\r\n\t\t\t\tthis.needsUpdate = true;\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( this.defines[ name ] !== value ) {\r\n\r\n\t\t\t\tthis.defines[ name ] = value;\r\n\t\t\t\tthis.needsUpdate = true;\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n}\r\n","import { NoBlending } from 'three';\r\nimport { MaterialBase } from '../MaterialBase.js';\r\n\r\nexport class BlendMaterial extends MaterialBase {\r\n\r\n\tconstructor( parameters ) {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tblending: NoBlending,\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\ttarget1: { value: null },\r\n\t\t\t\ttarget2: { value: null },\r\n\t\t\t\topacity: { value: 1.0 },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\t\tuniform float opacity;\r\n\r\n\t\t\t\tuniform sampler2D target1;\r\n\t\t\t\tuniform sampler2D target2;\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvec4 color1 = texture2D( target1, vUv );\r\n\t\t\t\t\tvec4 color2 = texture2D( target2, vUv );\r\n\r\n\t\t\t\t\tfloat invOpacity = 1.0 - opacity;\r\n\t\t\t\t\tfloat totalAlpha = color1.a * invOpacity + color2.a * opacity;\r\n\r\n\t\t\t\t\tif ( color1.a != 0.0 || color2.a != 0.0 ) {\r\n\r\n\t\t\t\t\t\tgl_FragColor.rgb = color1.rgb * ( invOpacity * color1.a / totalAlpha ) + color2.rgb * ( opacity * color2.a / totalAlpha );\r\n\t\t\t\t\t\tgl_FragColor.a = totalAlpha;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tgl_FragColor = vec4( 0.0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}`\r\n\r\n\t\t} );\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n}\r\n","// References\r\n// - https://jcgt.org/published/0009/04/01/\r\n// - Code from https://www.shadertoy.com/view/WtGyDm\r\n\r\n// functions to generate multi-dimensions variables of the same functions\r\n// to support 1, 2, 3, and 4 dimensional sobol sampling.\r\nfunction generateSobolFunctionVariants( dim = 1 ) {\r\n\r\n\tlet type = 'uint';\r\n\tif ( dim > 1 ) {\r\n\r\n\t\ttype = 'uvec' + dim;\r\n\r\n\t}\r\n\r\n\treturn /* glsl */`\r\n\t\t${ type } sobolReverseBits( ${ type } x ) {\r\n\r\n\t\t\tx = ( ( ( x & 0xaaaaaaaau ) >> 1 ) | ( ( x & 0x55555555u ) << 1 ) );\r\n\t\t\tx = ( ( ( x & 0xccccccccu ) >> 2 ) | ( ( x & 0x33333333u ) << 2 ) );\r\n\t\t\tx = ( ( ( x & 0xf0f0f0f0u ) >> 4 ) | ( ( x & 0x0f0f0f0fu ) << 4 ) );\r\n\t\t\tx = ( ( ( x & 0xff00ff00u ) >> 8 ) | ( ( x & 0x00ff00ffu ) << 8 ) );\r\n\t\t\treturn ( ( x >> 16 ) | ( x << 16 ) );\r\n\r\n\t\t}\r\n\r\n\t\t${ type } sobolHashCombine( uint seed, ${ type } v ) {\r\n\r\n\t\t\treturn seed ^ ( v + ${ type }( ( seed << 6 ) + ( seed >> 2 ) ) );\r\n\r\n\t\t}\r\n\r\n\t\t${ type } sobolLaineKarrasPermutation( ${ type } x, ${ type } seed ) {\r\n\r\n\t\t\tx += seed;\r\n\t\t\tx ^= x * 0x6c50b47cu;\r\n\t\t\tx ^= x * 0xb82f1e52u;\r\n\t\t\tx ^= x * 0xc7afe638u;\r\n\t\t\tx ^= x * 0x8d22f6e6u;\r\n\t\t\treturn x;\r\n\r\n\t\t}\r\n\r\n\t\t${ type } nestedUniformScrambleBase2( ${ type } x, ${ type } seed ) {\r\n\r\n\t\t\tx = sobolLaineKarrasPermutation( x, seed );\r\n\t\t\tx = sobolReverseBits( x );\r\n\t\t\treturn x;\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nfunction generateSobolSampleFunctions( dim = 1 ) {\r\n\r\n\tlet utype = 'uint';\r\n\tlet vtype = 'float';\r\n\tlet num = '';\r\n\tlet components = '.r';\r\n\tlet combineValues = '1u';\r\n\tif ( dim > 1 ) {\r\n\r\n\t\tutype = 'uvec' + dim;\r\n\t\tvtype = 'vec' + dim;\r\n\t\tnum = dim + '';\r\n\t\tif ( dim === 2 ) {\r\n\r\n\t\t\tcomponents = '.rg';\r\n\t\t\tcombineValues = 'uvec2( 1u, 2u )';\r\n\r\n\t\t} else if ( dim === 3 ) {\r\n\r\n\t\t\tcomponents = '.rgb';\r\n\t\t\tcombineValues = 'uvec3( 1u, 2u, 3u )';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcomponents = '';\r\n\t\t\tcombineValues = 'uvec4( 1u, 2u, 3u, 4u )';\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn /* glsl */`\r\n\r\n\t\t${ vtype } sobol${ num }( int effect ) {\r\n\r\n\t\t\tuint seed = sobolGetSeed( sobolBounceIndex, uint( effect ) );\r\n\t\t\tuint index = sobolPathIndex;\r\n\r\n\t\t\tuint shuffle_seed = sobolHashCombine( seed, 0u );\r\n\t\t\tuint shuffled_index = nestedUniformScrambleBase2( sobolReverseBits( index ), shuffle_seed );\r\n\t\t\t${ vtype } sobol_pt = sobolGetTexturePoint( shuffled_index )${ components };\r\n\t\t\t${ utype } result = ${ utype }( sobol_pt * 16777216.0 );\r\n\r\n\t\t\t${ utype } seed2 = sobolHashCombine( seed, ${ combineValues } );\r\n\t\t\tresult = nestedUniformScrambleBase2( result, seed2 );\r\n\r\n\t\t\treturn SOBOL_FACTOR * ${ vtype }( result >> 8 );\r\n\r\n\t\t}\r\n\t`;\r\n\r\n}\r\n\r\nexport const sobol_common = /* glsl */`\r\n\r\n\t// Utils\r\n\tconst float SOBOL_FACTOR = 1.0 / 16777216.0;\r\n\tconst uint SOBOL_MAX_POINTS = 256u * 256u;\r\n\r\n\t${ generateSobolFunctionVariants( 1 ) }\r\n\t${ generateSobolFunctionVariants( 2 ) }\r\n\t${ generateSobolFunctionVariants( 3 ) }\r\n\t${ generateSobolFunctionVariants( 4 ) }\r\n\r\n\tuint sobolHash( uint x ) {\r\n\r\n\t\t// finalizer from murmurhash3\r\n\t\tx ^= x >> 16;\r\n\t\tx *= 0x85ebca6bu;\r\n\t\tx ^= x >> 13;\r\n\t\tx *= 0xc2b2ae35u;\r\n\t\tx ^= x >> 16;\r\n\t\treturn x;\r\n\r\n\t}\r\n\r\n`;\r\n\r\nexport const sobol_point_generation = /* glsl */`\r\n\r\n\tconst uint SOBOL_DIRECTIONS_1[ 32 ] = uint[ 32 ](\r\n\t\t0x80000000u, 0xc0000000u, 0xa0000000u, 0xf0000000u,\r\n\t\t0x88000000u, 0xcc000000u, 0xaa000000u, 0xff000000u,\r\n\t\t0x80800000u, 0xc0c00000u, 0xa0a00000u, 0xf0f00000u,\r\n\t\t0x88880000u, 0xcccc0000u, 0xaaaa0000u, 0xffff0000u,\r\n\t\t0x80008000u, 0xc000c000u, 0xa000a000u, 0xf000f000u,\r\n\t\t0x88008800u, 0xcc00cc00u, 0xaa00aa00u, 0xff00ff00u,\r\n\t\t0x80808080u, 0xc0c0c0c0u, 0xa0a0a0a0u, 0xf0f0f0f0u,\r\n\t\t0x88888888u, 0xccccccccu, 0xaaaaaaaau, 0xffffffffu\r\n\t);\r\n\r\n\tconst uint SOBOL_DIRECTIONS_2[ 32 ] = uint[ 32 ](\r\n\t\t0x80000000u, 0xc0000000u, 0x60000000u, 0x90000000u,\r\n\t\t0xe8000000u, 0x5c000000u, 0x8e000000u, 0xc5000000u,\r\n\t\t0x68800000u, 0x9cc00000u, 0xee600000u, 0x55900000u,\r\n\t\t0x80680000u, 0xc09c0000u, 0x60ee0000u, 0x90550000u,\r\n\t\t0xe8808000u, 0x5cc0c000u, 0x8e606000u, 0xc5909000u,\r\n\t\t0x6868e800u, 0x9c9c5c00u, 0xeeee8e00u, 0x5555c500u,\r\n\t\t0x8000e880u, 0xc0005cc0u, 0x60008e60u, 0x9000c590u,\r\n\t\t0xe8006868u, 0x5c009c9cu, 0x8e00eeeeu, 0xc5005555u\r\n\t);\r\n\r\n\tconst uint SOBOL_DIRECTIONS_3[ 32 ] = uint[ 32 ](\r\n\t\t0x80000000u, 0xc0000000u, 0x20000000u, 0x50000000u,\r\n\t\t0xf8000000u, 0x74000000u, 0xa2000000u, 0x93000000u,\r\n\t\t0xd8800000u, 0x25400000u, 0x59e00000u, 0xe6d00000u,\r\n\t\t0x78080000u, 0xb40c0000u, 0x82020000u, 0xc3050000u,\r\n\t\t0x208f8000u, 0x51474000u, 0xfbea2000u, 0x75d93000u,\r\n\t\t0xa0858800u, 0x914e5400u, 0xdbe79e00u, 0x25db6d00u,\r\n\t\t0x58800080u, 0xe54000c0u, 0x79e00020u, 0xb6d00050u,\r\n\t\t0x800800f8u, 0xc00c0074u, 0x200200a2u, 0x50050093u\r\n\t);\r\n\r\n\tconst uint SOBOL_DIRECTIONS_4[ 32 ] = uint[ 32 ](\r\n\t\t0x80000000u, 0x40000000u, 0x20000000u, 0xb0000000u,\r\n\t\t0xf8000000u, 0xdc000000u, 0x7a000000u, 0x9d000000u,\r\n\t\t0x5a800000u, 0x2fc00000u, 0xa1600000u, 0xf0b00000u,\r\n\t\t0xda880000u, 0x6fc40000u, 0x81620000u, 0x40bb0000u,\r\n\t\t0x22878000u, 0xb3c9c000u, 0xfb65a000u, 0xddb2d000u,\r\n\t\t0x78022800u, 0x9c0b3c00u, 0x5a0fb600u, 0x2d0ddb00u,\r\n\t\t0xa2878080u, 0xf3c9c040u, 0xdb65a020u, 0x6db2d0b0u,\r\n\t\t0x800228f8u, 0x400b3cdcu, 0x200fb67au, 0xb00ddb9du\r\n\t);\r\n\r\n\tuint getMaskedSobol( uint index, uint directions[ 32 ] ) {\r\n\r\n\t\tuint X = 0u;\r\n\t\tfor ( int bit = 0; bit < 32; bit ++ ) {\r\n\r\n\t\t\tuint mask = ( index >> bit ) & 1u;\r\n\t\t\tX ^= mask * directions[ bit ];\r\n\r\n\t\t}\r\n\t\treturn X;\r\n\r\n\t}\r\n\r\n\tvec4 generateSobolPoint( uint index ) {\r\n\r\n\t\tif ( index >= SOBOL_MAX_POINTS ) {\r\n\r\n\t\t\treturn vec4( 0.0 );\r\n\r\n\t\t}\r\n\r\n\t\t// NOTE: this sobol \"direction\" is also available but we can't write out 5 components\r\n\t\t// uint x = index & 0x00ffffffu;\r\n\t\tuint x = sobolReverseBits( getMaskedSobol( index, SOBOL_DIRECTIONS_1 ) ) & 0x00ffffffu;\r\n\t\tuint y = sobolReverseBits( getMaskedSobol( index, SOBOL_DIRECTIONS_2 ) ) & 0x00ffffffu;\r\n\t\tuint z = sobolReverseBits( getMaskedSobol( index, SOBOL_DIRECTIONS_3 ) ) & 0x00ffffffu;\r\n\t\tuint w = sobolReverseBits( getMaskedSobol( index, SOBOL_DIRECTIONS_4 ) ) & 0x00ffffffu;\r\n\r\n\t\treturn vec4( x, y, z, w ) * SOBOL_FACTOR;\r\n\r\n\t}\r\n\r\n`;\r\n\r\nexport const sobol_functions = /* glsl */`\r\n\r\n\t// Seeds\r\n\tuniform sampler2D sobolTexture;\r\n\tuint sobolPixelIndex = 0u;\r\n\tuint sobolPathIndex = 0u;\r\n\tuint sobolBounceIndex = 0u;\r\n\r\n\tuint sobolGetSeed( uint bounce, uint effect ) {\r\n\r\n\t\treturn sobolHash(\r\n\t\t\tsobolHashCombine(\r\n\t\t\t\tsobolHashCombine(\r\n\t\t\t\t\tsobolHash( bounce ),\r\n\t\t\t\t\tsobolPixelIndex\r\n\t\t\t\t),\r\n\t\t\t\teffect\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tvec4 sobolGetTexturePoint( uint index ) {\r\n\r\n\t\tif ( index >= SOBOL_MAX_POINTS ) {\r\n\r\n\t\t\tindex = index % SOBOL_MAX_POINTS;\r\n\r\n\t\t}\r\n\r\n\t\tuvec2 dim = uvec2( textureSize( sobolTexture, 0 ).xy );\r\n\t\tuint y = index / dim.x;\r\n\t\tuint x = index - y * dim.x;\r\n\t\tvec2 uv = vec2( x, y ) / vec2( dim );\r\n\t\treturn texture( sobolTexture, uv );\r\n\r\n\t}\r\n\r\n\t${ generateSobolSampleFunctions( 1 ) }\r\n\t${ generateSobolSampleFunctions( 2 ) }\r\n\t${ generateSobolSampleFunctions( 3 ) }\r\n\t${ generateSobolSampleFunctions( 4 ) }\r\n\r\n`;\r\n","import { FloatType, NearestFilter, NoBlending, RGBAFormat, Vector2, WebGLRenderTarget } from 'three';\r\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\r\nimport { MaterialBase } from '../materials/MaterialBase.js';\r\nimport { sobol_common, sobol_point_generation } from '../shader/rand/sobol.glsl.js';\r\n\r\nclass SobolNumbersMaterial extends MaterialBase {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tblending: NoBlending,\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tresolution: { value: new Vector2() },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\t}\r\n\t\t\t`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\t\t${ sobol_common }\r\n\t\t\t\t${ sobol_point_generation }\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform vec2 resolution;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tuint index = uint( gl_FragCoord.y ) * uint( resolution.x ) + uint( gl_FragCoord.x );\r\n\t\t\t\t\tgl_FragColor = generateSobolPoint( index );\r\n\r\n\t\t\t\t}\r\n\t\t\t`,\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class SobolNumberMapGenerator {\r\n\r\n\tgenerate( renderer, dimensions = 256 ) {\r\n\r\n\t\tconst target = new WebGLRenderTarget( dimensions, dimensions, {\r\n\r\n\t\t\ttype: FloatType,\r\n\t\t\tformat: RGBAFormat,\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tgenerateMipmaps: false,\r\n\r\n\t\t} );\r\n\r\n\t\tconst ogTarget = renderer.getRenderTarget();\r\n\t\trenderer.setRenderTarget( target );\r\n\r\n\t\tconst quad = new FullScreenQuad( new SobolNumbersMaterial() );\r\n\t\tquad.material.resolution.set( dimensions, dimensions );\r\n\t\tquad.render( renderer );\r\n\r\n\t\trenderer.setRenderTarget( ogTarget );\r\n\t\tquad.dispose();\r\n\r\n\t\treturn target;\r\n\r\n\t}\r\n\r\n}\r\n","import { PerspectiveCamera } from 'three';\r\n\r\nexport class PhysicalCamera extends PerspectiveCamera {\r\n\r\n\tset bokehSize( size ) {\r\n\r\n\t\tthis.fStop = this.getFocalLength() / size;\r\n\r\n\t}\r\n\r\n\tget bokehSize() {\r\n\r\n\t\treturn this.getFocalLength() / this.fStop;\r\n\r\n\t}\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\t\tthis.fStop = 1.4;\r\n\t\tthis.apertureBlades = 0;\r\n\t\tthis.apertureRotation = 0;\r\n\t\tthis.focusDistance = 25;\r\n\t\tthis.anamorphicRatio = 1;\r\n\r\n\t}\r\n\r\n\tcopy( source, recursive ) {\r\n\r\n\t\tsuper.copy( source, recursive );\r\n\r\n\t\tthis.fStop = source.fStop;\r\n\t\tthis.apertureBlades = source.apertureBlades;\r\n\t\tthis.apertureRotation = source.apertureRotation;\r\n\t\tthis.focusDistance = source.focusDistance;\r\n\t\tthis.anamorphicRatio = source.anamorphicRatio;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n","import { PhysicalCamera } from '../objects/PhysicalCamera.js';\r\nexport class PhysicalCameraUniform {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.bokehSize = 0;\r\n\t\tthis.apertureBlades = 0;\r\n\t\tthis.apertureRotation = 0;\r\n\t\tthis.focusDistance = 10;\r\n\t\tthis.anamorphicRatio = 1;\r\n\r\n\t}\r\n\r\n\tupdateFrom( camera ) {\r\n\r\n\t\tif ( camera instanceof PhysicalCamera ) {\r\n\r\n\t\t\tthis.bokehSize = camera.bokehSize;\r\n\t\t\tthis.apertureBlades = camera.apertureBlades;\r\n\t\t\tthis.apertureRotation = camera.apertureRotation;\r\n\t\t\tthis.focusDistance = camera.focusDistance;\r\n\t\t\tthis.anamorphicRatio = camera.anamorphicRatio;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.bokehSize = 0;\r\n\t\t\tthis.apertureRotation = 0;\r\n\t\t\tthis.apertureBlades = 0;\r\n\t\t\tthis.focusDistance = 10;\r\n\t\t\tthis.anamorphicRatio = 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { DataUtils } from 'three';\r\n\r\n\r\nexport function toHalfFloatArray( f32Array ) {\r\n\r\n\tconst f16Array = new Uint16Array( f32Array.length );\r\n\tfor ( let i = 0, n = f32Array.length; i < n; ++ i ) {\r\n\r\n\t\tf16Array[ i ] = DataUtils.toHalfFloat( f32Array[ i ] );\r\n\r\n\t}\r\n\r\n\treturn f16Array;\r\n\r\n}\r\n","import { DataTexture, RedFormat, LinearFilter, DataUtils, HalfFloatType, Source, RepeatWrapping, RGBAFormat, FloatType, ClampToEdgeWrapping } from 'three';\r\nimport { toHalfFloatArray } from '../utils/TextureUtils.js';\r\n\r\nfunction binarySearchFindClosestIndexOf( array, targetValue, offset = 0, count = array.length ) {\r\n\r\n\tlet lower = offset;\r\n\tlet upper = offset + count - 1;\r\n\r\n\twhile ( lower < upper ) {\r\n\r\n\t\tconst mid = ( lower + upper ) >> 1;\r\n\r\n\t\tif ( array[ mid ] < targetValue ) {\n\r\n\t\t\tlower = mid + 1;\r\n\n\t\t} else {\n\r\n\t\t\tupper = mid;\r\n\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn lower - offset;\r\n\r\n}\r\n\r\nfunction colorToLuminance( r, g, b ) {\n\r\n\t// https://en.wikipedia.org/wiki/Relative_luminance\r\n\treturn 0.2126 * r + 0.7152 * g + 0.0722 * b;\r\n\n}\r\n\r\n// ensures the data is all floating point values and flipY is false\r\nfunction preprocessEnvMap( envMap, targetType = HalfFloatType ) {\r\n\r\n\tconst map = envMap.clone();\r\n\tmap.source = new Source( { ...map.image } );\r\n\tconst { width, height, data } = map.image;\r\n\r\n\t// [FIX 1] Calculate stride dynamically (3 for RGB, 4 for RGBA) to prevent data corruption\r\n\tconst originalStride = Math.floor( data.length / ( width * height ) );\r\n\r\n\t// Force copy and sanitization\r\n\tlet newData;\r\n\tconst targetStride = originalStride;\r\n\r\n\tif ( targetType === HalfFloatType ) {\n\r\n\t\tnewData = new Uint16Array( data.length );\r\n\n\t} else {\n\r\n\t\tnewData = new Float32Array( data.length );\r\n\n\t}\r\n\r\n\tlet maxIntValue;\r\n\tif ( data instanceof Int8Array || data instanceof Int16Array || data instanceof Int32Array || data instanceof Uint8Array || data instanceof Uint16Array || data instanceof Uint32Array ) {\n\r\n\t\tmaxIntValue = 2 ** ( 8 * data.BYTES_PER_ELEMENT ) - 1;\r\n\n\t} else {\n\r\n\t\tmaxIntValue = 1;\r\n\n\t}\r\n\r\n\t// [FIX 2] HalfFloat Max Value. Clamp sun to this instead of 0.\r\n\tconst MAX_HALF_FLOAT = 65504.0;\r\n\r\n\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\r\n\r\n\t\tlet v = data[ i ];\r\n\t\tif ( map.type === HalfFloatType ) {\n\r\n\t\t\tv = DataUtils.fromHalfFloat( data[ i ] );\r\n\n\t\t}\r\n\r\n\t\tif ( map.type !== FloatType && map.type !== HalfFloatType ) {\n\r\n\t\t\tv /= maxIntValue;\r\n\n\t\t}\r\n\r\n\t\t// [FIX 2] Robust Sanitization: If Infinity (Sun), clamp to max value. Do not set to 0.\r\n\t\tif ( ! Number.isFinite( v ) ) {\n\r\n\t\t\tif ( v > 0 ) v = MAX_HALF_FLOAT;\r\n\t\t\telse v = 0.0;\r\n\n\t\t} else if ( v < 0 ) {\n\r\n\t\t\tv = 0.0;\r\n\n\t\t}\r\n\r\n\t\tif ( targetType === HalfFloatType ) {\n\r\n\t\t\tnewData[ i ] = DataUtils.toHalfFloat( v );\r\n\n\t\t} else {\n\r\n\t\t\tnewData[ i ] = v;\r\n\n\t\t}\r\n\r\n\t}\r\n\r\n\tmap.image.data = newData;\r\n\tmap.type = targetType;\r\n\r\n\t// remove any y flipping for cdf computation\r\n\tif ( map.flipY ) {\r\n\r\n\t\tconst ogData = newData;\r\n\t\tnewData = newData.slice();\r\n\t\tfor ( let y = 0; y < height; y ++ ) {\r\n\r\n\t\t\tfor ( let x = 0; x < width; x ++ ) {\r\n\r\n\t\t\t\tconst newY = height - y - 1;\r\n\t\t\t\t// [FIX 3] Use calculated stride for flipping logic\r\n\t\t\t\tconst ogIndex = targetStride * ( y * width + x );\r\n\t\t\t\tconst newIndex = targetStride * ( newY * width + x );\r\n\r\n\t\t\t\tfor ( let c = 0; c < targetStride; c ++ ) {\n\r\n\t\t\t\t\tnewData[ newIndex + c ] = ogData[ ogIndex + c ];\r\n\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmap.flipY = false;\r\n\t\tmap.image.data = newData;\r\n\r\n\t}\r\n\r\n\treturn map;\r\n\r\n}\r\n\r\nexport class EquirectHdrInfoUniform {\r\n\r\n\tconstructor() {\r\n\r\n\t\tconst blackTex = new DataTexture( toHalfFloatArray( new Float32Array( [ 0, 0, 0, 0 ] ) ), 1, 1 );\r\n\t\tblackTex.type = HalfFloatType;\r\n\t\tblackTex.format = RGBAFormat;\r\n\t\tblackTex.minFilter = LinearFilter;\r\n\t\tblackTex.magFilter = LinearFilter;\r\n\t\tblackTex.wrapS = RepeatWrapping;\r\n\t\tblackTex.wrapT = RepeatWrapping;\r\n\t\tblackTex.generateMipmaps = false;\r\n\t\tblackTex.needsUpdate = true;\r\n\r\n\t\tconst marginalWeights = new DataTexture( toHalfFloatArray( new Float32Array( [ 0, 1 ] ) ), 1, 2 );\r\n\t\tmarginalWeights.type = HalfFloatType;\r\n\t\tmarginalWeights.format = RedFormat;\r\n\t\tmarginalWeights.minFilter = LinearFilter;\r\n\t\tmarginalWeights.magFilter = LinearFilter;\r\n\t\tmarginalWeights.generateMipmaps = false;\r\n\t\tmarginalWeights.needsUpdate = true;\r\n\r\n\t\tconst conditionalWeights = new DataTexture( toHalfFloatArray( new Float32Array( [ 0, 0, 1, 1 ] ) ), 2, 2 );\r\n\t\tconditionalWeights.type = HalfFloatType;\r\n\t\tconditionalWeights.format = RedFormat;\r\n\t\tconditionalWeights.minFilter = LinearFilter;\r\n\t\tconditionalWeights.magFilter = LinearFilter;\r\n\t\tconditionalWeights.generateMipmaps = false;\r\n\t\tconditionalWeights.needsUpdate = true;\r\n\r\n\t\tthis.map = blackTex;\r\n\t\tthis.marginalWeights = marginalWeights;\r\n\t\tthis.conditionalWeights = conditionalWeights;\r\n\t\tthis.totalSum = 0;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.marginalWeights.dispose();\r\n\t\tthis.conditionalWeights.dispose();\r\n\t\tthis.map.dispose();\r\n\r\n\t}\r\n\r\n\tupdateFrom( hdr ) {\r\n\r\n\t\tconst map = preprocessEnvMap( hdr );\r\n\t\tmap.wrapS = RepeatWrapping;\r\n\t\tmap.wrapT = ClampToEdgeWrapping;\r\n\r\n\t\tconst { width, height, data } = map.image;\r\n\r\n\t\tif ( ! width || ! height || ! data ) {\n\r\n\t\t\tconsole.error( 'EquirectHdrInfoUniform: Invalid texture data', map.image );\r\n\t\t\treturn;\r\n\n\t\t}\r\n\r\n\t\t// [FIX 1] Calculate Stride dynamically here as well\r\n\t\tconst stride = Math.floor( data.length / ( width * height ) );\r\n\r\n\t\tconst pdfConditional = new Float32Array( width * height );\r\n\t\tconst cdfConditional = new Float32Array( width * height );\r\n\r\n\t\tconst pdfMarginal = new Float32Array( height );\r\n\t\tconst cdfMarginal = new Float32Array( height );\r\n\r\n\t\tlet totalSumValue = 0.0;\r\n\t\tlet cumulativeWeightMarginal = 0.0;\r\n\t\tfor ( let y = 0; y < height; y ++ ) {\r\n\r\n\t\t\tlet cumulativeRowWeight = 0.0;\r\n\t\t\tfor ( let x = 0; x < width; x ++ ) {\r\n\r\n\t\t\t\tconst i = y * width + x;\r\n\r\n\t\t\t\t// [FIX 1] Use stride here instead of hardcoded 4\r\n\t\t\t\tlet r = DataUtils.fromHalfFloat( data[ stride * i + 0 ] );\r\n\t\t\t\tlet g = DataUtils.fromHalfFloat( data[ stride * i + 1 ] );\r\n\t\t\t\tlet b = DataUtils.fromHalfFloat( data[ stride * i + 2 ] );\r\n\r\n\t\t\t\t// Redundant safety check (already handled in preprocess, but good for safety)\r\n\t\t\t\tif ( ! Number.isFinite( r ) || r < 0 ) {\n\n\t\t\t\t\tr = 0;\n\n\t\t\t\t}\n\r\n\t\t\t\tif ( ! Number.isFinite( g ) || g < 0 ) {\n\n\t\t\t\t\tg = 0;\n\n\t\t\t\t}\n\r\n\t\t\t\tif ( ! Number.isFinite( b ) || b < 0 ) {\n\n\t\t\t\t\tb = 0;\n\n\t\t\t\t}\r\n\r\n\t\t\t\tlet weight = colorToLuminance( r, g, b );\r\n\t\t\t\tif ( ! Number.isFinite( weight ) || weight < 0 ) weight = 0;\r\n\t\t\t\tcumulativeRowWeight += weight;\r\n\t\t\t\ttotalSumValue += weight;\r\n\r\n\t\t\t\tpdfConditional[ i ] = weight;\r\n\t\t\t\tcdfConditional[ i ] = cumulativeRowWeight;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cumulativeRowWeight !== 0 ) {\n\r\n\t\t\t\tfor ( let i = y * width, l = y * width + width; i < l; i ++ ) {\n\r\n\t\t\t\t\tpdfConditional[ i ] /= cumulativeRowWeight;\r\n\t\t\t\t\tcdfConditional[ i ] /= cumulativeRowWeight;\r\n\n\t\t\t\t}\r\n\n\t\t\t}\r\n\r\n\t\t\tcumulativeWeightMarginal += cumulativeRowWeight;\r\n\r\n\t\t\tpdfMarginal[ y ] = cumulativeRowWeight;\r\n\t\t\tcdfMarginal[ y ] = cumulativeWeightMarginal;\r\n\r\n\t\t}\r\n\r\n\t\tif ( cumulativeWeightMarginal !== 0 ) {\n\r\n\t\t\tfor ( let i = 0, l = pdfMarginal.length; i < l; i ++ ) {\n\r\n\t\t\t\tpdfMarginal[ i ] /= cumulativeWeightMarginal;\r\n\t\t\t\tcdfMarginal[ i ] /= cumulativeWeightMarginal;\r\n\n\t\t\t}\r\n\n\t\t}\r\n\r\n\t\tconst marginalDataArray = new Uint16Array( height );\r\n\t\tconst conditionalDataArray = new Uint16Array( width * height );\r\n\r\n\t\tfor ( let i = 0; i < height; i ++ ) {\n\r\n\t\t\tconst dist = ( i + 1 ) / height;\r\n\t\t\tconst row = binarySearchFindClosestIndexOf( cdfMarginal, dist );\r\n\t\t\tmarginalDataArray[ i ] = DataUtils.toHalfFloat( ( row + 0.5 ) / height );\r\n\n\t\t}\r\n\r\n\t\tfor ( let y = 0; y < height; y ++ ) {\n\r\n\t\t\tfor ( let x = 0; x < width; x ++ ) {\n\r\n\t\t\t\tconst i = y * width + x;\r\n\t\t\t\tconst dist = ( x + 1 ) / width;\r\n\t\t\t\tconst col = binarySearchFindClosestIndexOf( cdfConditional, dist, y * width, width );\r\n\t\t\t\tconditionalDataArray[ i ] = DataUtils.toHalfFloat( ( col + 0.5 ) / width );\r\n\n\t\t\t}\r\n\n\t\t}\r\n\r\n\t\tthis.dispose();\r\n\r\n\t\tconst { marginalWeights, conditionalWeights } = this;\r\n\t\tmarginalWeights.image = { width: height, height: 1, data: marginalDataArray };\r\n\t\tmarginalWeights.needsUpdate = true;\r\n\r\n\t\tconditionalWeights.image = { width, height, data: conditionalDataArray };\r\n\t\tconditionalWeights.needsUpdate = true;\r\n\r\n\t\tthis.totalSum = Number.isFinite( totalSumValue ) ? totalSumValue : 0;\r\n\r\n\t\tif ( this.totalSum === 0 ) {\n\r\n\t\t\tconsole.warn( 'EquirectHdrInfoUniform: totalSum is 0. The environment map appears to be black or empty.', { width, height } );\r\n\n\t\t}\r\n\r\n\t\tthis.map = map;\r\n\r\n\t}\r\n\r\n}\r\n","import { DataTexture, RGBAFormat, ClampToEdgeWrapping, FloatType, Vector3, Quaternion, Matrix4, NearestFilter } from 'three';\r\nimport { bufferToHash } from '../utils/bufferToHash.js';\r\n\r\nconst LIGHT_PIXELS = 6;\r\nconst RECT_AREA_LIGHT = 0;\r\nconst CIRC_AREA_LIGHT = 1;\r\nconst SPOT_LIGHT = 2;\r\nconst DIR_LIGHT = 3;\r\nconst POINT_LIGHT = 4;\r\n\r\nconst u = new Vector3();\r\nconst v = new Vector3();\r\nconst m = new Matrix4();\r\nconst worldQuaternion = new Quaternion();\r\nconst eye = new Vector3();\r\nconst target = new Vector3();\r\nconst up = new Vector3( 0, 1, 0 );\r\nexport class LightsInfoUniformStruct {\r\n\r\n\tconstructor() {\r\n\r\n\t\tconst tex = new DataTexture( new Float32Array( 4 ), 1, 1 );\r\n\t\ttex.format = RGBAFormat;\r\n\t\ttex.type = FloatType;\r\n\t\ttex.wrapS = ClampToEdgeWrapping;\r\n\t\ttex.wrapT = ClampToEdgeWrapping;\r\n\t\ttex.generateMipmaps = false;\r\n\t\ttex.minFilter = NearestFilter;\r\n\t\ttex.magFilter = NearestFilter;\r\n\r\n\t\tthis.tex = tex;\r\n\t\tthis.count = 0;\r\n\r\n\t}\r\n\r\n\tupdateFrom( lights, iesTextures = [] ) {\r\n\r\n\t\tconst tex = this.tex;\r\n\t\tconst pixelCount = Math.max( lights.length * LIGHT_PIXELS, 1 );\r\n\t\tconst dimension = Math.ceil( Math.sqrt( pixelCount ) );\r\n\r\n\t\tif ( tex.image.width !== dimension ) {\r\n\r\n\t\t\ttex.dispose();\r\n\r\n\t\t\ttex.image.data = new Float32Array( dimension * dimension * 4 );\r\n\t\t\ttex.image.width = dimension;\r\n\t\t\ttex.image.height = dimension;\r\n\r\n\t\t}\r\n\r\n\t\tconst floatArray = tex.image.data;\r\n\r\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst l = lights[ i ];\r\n\r\n\t\t\tconst baseIndex = i * LIGHT_PIXELS * 4;\r\n\t\t\tlet index = 0;\r\n\r\n\t\t\t// initialize to 0\r\n\t\t\tfor ( let p = 0; p < LIGHT_PIXELS * 4; p ++ ) {\r\n\r\n\t\t\t\tfloatArray[ baseIndex + p ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// sample 1\r\n\t\t    // position\r\n\t\t\tl.getWorldPosition( v );\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.x;\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.y;\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.z;\r\n\r\n\t\t\t// type\r\n\t\t\tlet type = RECT_AREA_LIGHT;\r\n\t\t\tif ( l.isRectAreaLight && l.isCircular ) {\r\n\r\n\t\t\t\ttype = CIRC_AREA_LIGHT;\r\n\r\n\t\t\t} else if ( l.isSpotLight ) {\r\n\r\n\t\t\t\ttype = SPOT_LIGHT;\r\n\r\n\t\t\t} else if ( l.isDirectionalLight ) {\r\n\r\n\t\t\t\ttype = DIR_LIGHT;\r\n\r\n\t\t\t} else if ( l.isPointLight ) {\r\n\r\n\t\t\t\ttype = POINT_LIGHT;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = type;\r\n\r\n\t\t\t// sample 2\r\n\t\t\t// color\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.color.r;\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.color.g;\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.color.b;\r\n\r\n\t\t\t// intensity\r\n\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.intensity;\r\n\r\n\t\t\tl.getWorldQuaternion( worldQuaternion );\r\n\r\n\t\t\tif ( l.isRectAreaLight ) {\r\n\r\n\t\t\t\t// sample 3\r\n\t\t\t\t// u vector\r\n\t\t\t\tu.set( l.width, 0, 0 ).applyQuaternion( worldQuaternion );\r\n\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.x;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.y;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.z;\r\n\t\t\t\tindex ++;\r\n\r\n\t\t\t\t// sample 4\r\n\t\t\t\t// v vector\r\n\t\t\t\tv.set( 0, l.height, 0 ).applyQuaternion( worldQuaternion );\r\n\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.x;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.y;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.z;\r\n\r\n\t\t\t\t// area\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.cross( v ).length() * ( l.isCircular ? ( Math.PI / 4.0 ) : 1.0 );\r\n\r\n\t\t\t} else if ( l.isSpotLight ) {\r\n\r\n\t\t\t\tconst radius = l.radius || 0;\r\n\t\t\t\teye.setFromMatrixPosition( l.matrixWorld );\r\n\t\t\t\ttarget.setFromMatrixPosition( l.target.matrixWorld );\r\n\t\t\t\tm.lookAt( eye, target, up );\r\n\t\t\t\tworldQuaternion.setFromRotationMatrix( m );\r\n\r\n\t\t\t\t// sample 3\r\n\t\t\t\t// u vector\r\n\t\t\t\tu.set( 1, 0, 0 ).applyQuaternion( worldQuaternion );\r\n\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.x;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.y;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = u.z;\r\n\t\t\t\tindex ++;\r\n\r\n\t\t\t\t// sample 4\r\n\t\t\t\t// v vector\r\n\t\t\t\tv.set( 0, 1, 0 ).applyQuaternion( worldQuaternion );\r\n\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.x;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.y;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = v.z;\r\n\r\n\t\t\t\t// area\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = Math.PI * radius * radius;\r\n\r\n\t\t\t\t// sample 5\r\n\t\t\t\t// radius\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = radius;\r\n\r\n\t\t\t\t// decay\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.decay;\r\n\r\n\t\t\t\t// distance\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.distance;\r\n\r\n\t\t\t\t// coneCos\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = Math.cos( l.angle );\r\n\r\n\t\t\t\t// sample 6\r\n\t\t\t\t// penumbraCos\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = Math.cos( l.angle * ( 1 - l.penumbra ) );\r\n\r\n\t\t\t\t// iesProfile\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.iesMap ? iesTextures.indexOf( l.iesMap ) : - 1;\r\n\r\n\t\t\t} else if ( l.isPointLight ) {\r\n\r\n\t\t\t\tconst worldPosition = u.setFromMatrixPosition( l.matrixWorld );\r\n\r\n\t\t\t\t// sample 3\r\n\t\t\t\t// u vector\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = worldPosition.x;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = worldPosition.y;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = worldPosition.z;\r\n\t\t\t\tindex ++;\r\n\r\n\t\t\t\t// sample 4\r\n\t\t\t\tindex += 4;\r\n\r\n\t\t\t\t// sample 5\r\n\t\t\t\tindex += 1;\r\n\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.decay;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = l.distance;\r\n\r\n\t\t\t} else if ( l.isDirectionalLight ) {\r\n\r\n\t\t\t\tconst worldPosition = u.setFromMatrixPosition( l.matrixWorld );\r\n\t\t\t\tconst targetPosition = v.setFromMatrixPosition( l.target.matrixWorld );\r\n\t\t\t\ttarget.subVectors( worldPosition, targetPosition ).normalize();\r\n\r\n\t\t\t\t// sample 3\r\n\t\t\t\t// u vector\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = target.x;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = target.y;\r\n\t\t\t\tfloatArray[ baseIndex + ( index ++ ) ] = target.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.count = lights.length;\r\n\r\n\t\tconst hash = bufferToHash( floatArray.buffer );\r\n\t\tif ( this.hash !== hash ) {\r\n\r\n\t\t\tthis.hash = hash;\r\n\t\t\ttex.needsUpdate = true;\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n}\r\n","import { DataArrayTexture, FloatType, RGBAFormat } from 'three';\r\nimport { FloatVertexAttributeTexture } from 'three-mesh-bvh';\r\n\r\nfunction copyArrayToArray( fromArray, fromStride, toArray, toStride, offset ) {\r\n\r\n\tif ( fromStride > toStride ) {\r\n\r\n\t\tthrow new Error();\r\n\r\n\t}\r\n\r\n\t// scale non-float values to their normalized range\r\n\tconst count = fromArray.length / fromStride;\r\n\tconst bpe = fromArray.constructor.BYTES_PER_ELEMENT * 8;\r\n\tlet maxValue = 1.0;\r\n\tswitch ( fromArray.constructor ) {\r\n\r\n\tcase Uint8Array:\r\n\tcase Uint16Array:\r\n\tcase Uint32Array:\r\n\t\tmaxValue = 2 ** bpe - 1;\r\n\t\tbreak;\r\n\r\n\tcase Int8Array:\r\n\tcase Int16Array:\r\n\tcase Int32Array:\r\n\t\tmaxValue = 2 ** ( bpe - 1 ) - 1;\r\n\t\tbreak;\r\n\r\n\t}\r\n\r\n\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\tconst i4 = 4 * i;\r\n\t\tconst is = fromStride * i;\r\n\t\tfor ( let j = 0; j < toStride; j ++ ) {\r\n\r\n\t\t\ttoArray[ offset + i4 + j ] = fromStride >= j + 1 ? fromArray[ is + j ] / maxValue : 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class FloatAttributeTextureArray extends DataArrayTexture {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\t\tthis._textures = [];\r\n\t\tthis.type = FloatType;\r\n\t\tthis.format = RGBAFormat;\r\n\t\tthis.internalFormat = 'RGBA32F';\r\n\r\n\t}\r\n\r\n\tupdateAttribute( index, attr ) {\r\n\r\n\t\t// update the texture\r\n\t\tconst tex = this._textures[ index ];\r\n\t\ttex.updateFrom( attr );\r\n\r\n\t\t// ensure compatibility\r\n\t\tconst baseImage = tex.image;\r\n\t\tconst image = this.image;\r\n\t\tif ( baseImage.width !== image.width || baseImage.height !== image.height ) {\r\n\r\n\t\t\tthrow new Error( 'FloatAttributeTextureArray: Attribute must be the same dimensions when updating single layer.' );\r\n\r\n\t\t}\r\n\r\n\t\t// update the image\r\n\t\tconst { width, height, data } = image;\r\n\t\tconst length = width * height * 4;\r\n\t\tconst offset = length * index;\r\n\t\tlet itemSize = attr.itemSize;\r\n\t\tif ( itemSize === 3 ) {\r\n\r\n\t\t\titemSize = 4;\r\n\r\n\t\t}\r\n\r\n\t\t// copy the data\r\n\t\tcopyArrayToArray( tex.image.data, itemSize, data, 4, offset );\r\n\r\n\t\tthis.dispose();\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tsetAttributes( attrs ) {\r\n\r\n\t\t// ensure the attribute count\r\n\t\tconst itemCount = attrs[ 0 ].count;\r\n\t\tconst attrsLength = attrs.length;\r\n\t\tfor ( let i = 0, l = attrsLength; i < l; i ++ ) {\r\n\r\n\t\t\tif ( attrs[ i ].count !== itemCount ) {\r\n\r\n\t\t\t\tthrow new Error( 'FloatAttributeTextureArray: All attributes must have the same item count.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// initialize all textures\r\n\t\tconst textures = this._textures;\r\n\t\twhile ( textures.length < attrsLength ) {\r\n\r\n\t\t\tconst tex = new FloatVertexAttributeTexture();\r\n\t\t\ttextures.push( tex );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( textures.length > attrsLength ) {\r\n\r\n\t\t\ttextures.pop();\r\n\r\n\t\t}\r\n\r\n\t\t// update all textures\r\n\t\tfor ( let i = 0, l = attrsLength; i < l; i ++ ) {\r\n\r\n\t\t\ttextures[ i ].updateFrom( attrs[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// determine if we need to create a new array\r\n\t\tconst baseTexture = textures[ 0 ];\r\n\t\tconst baseImage = baseTexture.image;\r\n\t\tconst image = this.image;\r\n\r\n\t\tif ( baseImage.width !== image.width || baseImage.height !== image.height || baseImage.depth !== attrsLength ) {\r\n\r\n\t\t\timage.width = baseImage.width;\r\n\t\t\timage.height = baseImage.height;\r\n\t\t\timage.depth = attrsLength;\r\n\t\t\timage.data = new Float32Array( image.width * image.height * image.depth * 4 );\r\n\r\n\t\t}\r\n\r\n\t\t// copy the other texture data into the data array texture\r\n\t\tconst { data, width, height } = image;\r\n\t\tfor ( let i = 0, l = attrsLength; i < l; i ++ ) {\r\n\r\n\t\t\tconst tex = textures[ i ];\r\n\t\t\tconst length = width * height * 4;\r\n\t\t\tconst offset = length * i;\r\n\r\n\t\t\tlet itemSize = attrs[ i ].itemSize;\r\n\t\t\tif ( itemSize === 3 ) {\r\n\r\n\t\t\t\titemSize = 4;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcopyArrayToArray( tex.image.data, itemSize, data, 4, offset );\r\n\r\n\t\t}\r\n\r\n\t\t// reset the texture\r\n\t\tthis.dispose();\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\r\n}\r\n","import { FloatAttributeTextureArray } from './FloatAttributeTextureArray.js';\r\n\r\nexport class AttributesTextureArray extends FloatAttributeTextureArray {\r\n\r\n\tupdateNormalAttribute( attr ) {\r\n\r\n\t\tthis.updateAttribute( 0, attr );\r\n\r\n\t}\r\n\r\n\tupdateTangentAttribute( attr ) {\r\n\r\n\t\tthis.updateAttribute( 1, attr );\r\n\r\n\t}\r\n\r\n\tupdateUvAttribute( attr ) {\r\n\r\n\t\tthis.updateAttribute( 2, attr );\r\n\r\n\t}\r\n\r\n\tupdateColorAttribute( attr ) {\r\n\r\n\t\tthis.updateAttribute( 3, attr );\r\n\r\n\t}\r\n\r\n\tupdateFrom( normal, tangent, uv, color ) {\r\n\r\n\t\tthis.setAttributes( [ normal, tangent, uv, color ] );\r\n\r\n\t}\r\n\r\n}\r\n","function uuidSort( a, b ) {\r\n\r\n\tif ( a.uuid < b.uuid ) return 1;\r\n\tif ( a.uuid > b.uuid ) return - 1;\r\n\treturn 0;\r\n\r\n}\r\n\r\n// we must hash the texture to determine uniqueness using the encoding, as well, because the\r\n// when rendering each texture to the texture array they must have a consistent color space.\r\nexport function getTextureHash( t ) {\r\n\r\n\treturn `${ t.source.uuid }:${ t.colorSpace }`;\r\n\r\n}\r\n\r\n// reduce the set of textures to just those with a unique source while retaining\r\n// the order of the textures.\r\nfunction reduceTexturesToUniqueSources( textures ) {\r\n\r\n\tconst sourceSet = new Set();\r\n\tconst result = [];\r\n\tfor ( let i = 0, l = textures.length; i < l; i ++ ) {\r\n\r\n\t\tconst tex = textures[ i ];\r\n\t\tconst hash = getTextureHash( tex );\r\n\t\tif ( ! sourceSet.has( hash ) ) {\r\n\r\n\t\t\tsourceSet.add( hash );\r\n\t\t\tresult.push( tex );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\nexport function getIesTextures( lights ) {\r\n\r\n\tconst textures = lights.map( l => l.iesMap || null ).filter( t => t );\r\n\tconst textureSet = new Set( textures );\r\n\treturn Array.from( textureSet ).sort( uuidSort );\r\n\r\n}\r\n\r\nexport function getTextures( materials ) {\r\n\r\n\tconst textureSet = new Set();\r\n\tfor ( let i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\tconst material = materials[ i ];\r\n\t\tfor ( const key in material ) {\r\n\r\n\t\t\tconst value = material[ key ];\r\n\t\t\tif ( value && value.isTexture ) {\r\n\r\n\t\t\t\ttextureSet.add( value );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst textureArray = Array.from( textureSet );\r\n\treturn reduceTexturesToUniqueSources( textureArray ).sort( uuidSort );\r\n\r\n}\r\n\r\nexport function getLights( scene ) {\r\n\r\n\tconst lights = [];\r\n\tscene.traverse( c => {\r\n\r\n\t\tif ( c.visible ) {\r\n\r\n\t\t\tif (\r\n\t\t\t\tc.isRectAreaLight ||\r\n\t\t\t\tc.isSpotLight ||\r\n\t\t\t\tc.isPointLight ||\r\n\t\t\t\tc.isDirectionalLight\r\n\t\t\t) {\r\n\r\n\t\t\t\tlights.push( c );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n\treturn lights.sort( uuidSort );\r\n\r\n}\r\n","import { DataTexture, RGBAFormat, ClampToEdgeWrapping, FloatType, FrontSide, BackSide, DoubleSide, NearestFilter } from 'three';\r\nimport { getTextureHash } from '../core/utils/sceneUpdateUtils.js';\r\nimport { bufferToHash } from '../utils/bufferToHash.js';\r\n\r\nexport const MATERIAL_PIXELS = 47;\r\nconst MATERIAL_STRIDE = MATERIAL_PIXELS * 4;\r\n\r\nclass MaterialFeatures {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis._features = {};\r\n\r\n\t}\r\n\r\n\tisUsed( feature ) {\r\n\r\n\t\treturn feature in this._features;\r\n\r\n\t}\r\n\r\n\tsetUsed( feature, used = true ) {\r\n\r\n\t\tif ( used === false ) {\r\n\r\n\t\t\tdelete this._features[ feature ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._features[ feature ] = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treset() {\r\n\r\n\t\tthis._features = {};\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class MaterialsTexture extends DataTexture {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper( new Float32Array( 4 ), 1, 1 );\r\n\r\n\t\tthis.format = RGBAFormat;\r\n\t\tthis.type = FloatType;\r\n\t\tthis.wrapS = ClampToEdgeWrapping;\r\n\t\tthis.wrapT = ClampToEdgeWrapping;\r\n\t\tthis.minFilter = NearestFilter;\r\n\t\tthis.magFilter = NearestFilter;\r\n\t\tthis.generateMipmaps = false;\r\n\t\tthis.features = new MaterialFeatures();\r\n\r\n\t}\r\n\r\n\tupdateFrom( materials, textures ) {\r\n\r\n\t\tfunction getTexture( material, key, def = - 1 ) {\r\n\r\n\t\t\tif ( key in material && material[ key ] ) {\r\n\r\n\t\t\t\tconst hash = getTextureHash( material[ key ] );\r\n\t\t\t\treturn textureLookUp[ hash ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn def;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction getField( material, key, def ) {\r\n\r\n\t\t\treturn key in material ? material[ key ] : def;\r\n\r\n\t\t}\r\n\r\n\t\tfunction writeTextureMatrixToArray( material, textureKey, array, offset ) {\r\n\r\n\t\t\tconst texture = material[ textureKey ] && material[ textureKey ].isTexture ? material[ textureKey ] : null;\r\n\r\n\t\t\t// check if texture exists\r\n\t\t\tif ( texture ) {\r\n\r\n\t\t\t\tif ( texture.matrixAutoUpdate ) {\r\n\r\n\t\t\t\t\ttexture.updateMatrix();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst elements = texture.matrix.elements;\r\n\r\n\t\t\t\tlet i = 0;\r\n\r\n\t\t\t\t// first row\r\n\t\t\t\tarray[ offset + i ++ ] = elements[ 0 ];\r\n\t\t\t\tarray[ offset + i ++ ] = elements[ 3 ];\r\n\t\t\t\tarray[ offset + i ++ ] = elements[ 6 ];\r\n\t\t\t\ti ++;\r\n\r\n\t\t\t\t// second row\r\n\t\t\t\tarray[ offset + i ++ ] = elements[ 1 ];\r\n\t\t\t\tarray[ offset + i ++ ] = elements[ 4 ];\r\n\t\t\t\tarray[ offset + i ++ ] = elements[ 7 ];\r\n\t\t\t\ti ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn 8;\r\n\r\n\t\t}\r\n\r\n\t\tlet index = 0;\r\n\t\tconst pixelCount = materials.length * MATERIAL_PIXELS;\r\n\t\tconst dimension = Math.ceil( Math.sqrt( pixelCount ) ) || 1;\r\n\t\tconst { image, features } = this;\r\n\r\n\t\t// index the list of textures based on shareable source\r\n\t\tconst textureLookUp = {};\r\n\t\tfor ( let i = 0, l = textures.length; i < l; i ++ ) {\r\n\r\n\t\t\ttextureLookUp[ getTextureHash( textures[ i ] ) ] = i;\r\n\r\n\t\t}\r\n\r\n\t\tif ( image.width !== dimension ) {\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t\timage.data = new Float32Array( dimension * dimension * 4 );\r\n\t\t\timage.width = dimension;\r\n\t\t\timage.height = dimension;\r\n\r\n\t\t}\r\n\r\n\t\tconst floatArray = image.data;\r\n\r\n\t\t// on some devices (Google Pixel 6) the \"floatBitsToInt\" function does not work correctly so we\r\n\t\t// can't encode texture ids that way.\r\n\t\t// const intArray = new Int32Array( floatArray.buffer );\r\n\r\n\t\tfeatures.reset();\r\n\t\tfor ( let i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst m = materials[ i ];\r\n\r\n\t\t\tif ( m.isFogVolumeMaterial ) {\r\n\r\n\t\t\t\tfeatures.setUsed( 'FOG' );\r\n\r\n\t\t\t\tfor ( let j = 0; j < MATERIAL_STRIDE; j ++ ) {\r\n\r\n\t\t\t\t\tfloatArray[ index + j ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// sample 0 .rgb\r\n\t\t\t\tfloatArray[ index + 0 * 4 + 0 ] = m.color.r;\r\n\t\t\t\tfloatArray[ index + 0 * 4 + 1 ] = m.color.g;\r\n\t\t\t\tfloatArray[ index + 0 * 4 + 2 ] = m.color.b;\r\n\r\n\t\t\t\t// sample 2 .a\r\n\t\t\t\tfloatArray[ index + 2 * 4 + 3 ] = getField( m, 'emissiveIntensity', 0.0 );\r\n\r\n\t\t\t\t// sample 3 .rgb\r\n\t\t\t\tfloatArray[ index + 3 * 4 + 0 ] = m.emissive.r;\r\n\t\t\t\tfloatArray[ index + 3 * 4 + 1 ] = m.emissive.g;\r\n\t\t\t\tfloatArray[ index + 3 * 4 + 2 ] = m.emissive.b;\r\n\r\n\t\t\t\t// sample 13 .g\r\n\t\t\t\t// reusing opacity field\r\n\t\t\t\tfloatArray[ index + 13 * 4 + 1 ] = m.density;\r\n\r\n\t\t\t\t// side\r\n\t\t\t\tfloatArray[ index + 13 * 4 + 3 ] = 0.0;\r\n\r\n\t\t\t\t// sample 14 .b\r\n\t\t\t\tfloatArray[ index + 14 * 4 + 2 ] = 1 << 2;\r\n\r\n\t\t\t\tindex += MATERIAL_STRIDE;\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// sample 0\r\n\t\t\t// color\r\n\t\t\tfloatArray[ index ++ ] = m.color.r;\r\n\t\t\tfloatArray[ index ++ ] = m.color.g;\r\n\t\t\tfloatArray[ index ++ ] = m.color.b;\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'map' );\r\n\r\n\t\t\t// sample 1\r\n\t\t\t// metalness & roughness\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'metalness', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'metalnessMap' );\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'roughness', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'roughnessMap' );\r\n\r\n\t\t\t// sample 2\r\n\t\t\t// transmission & emissiveIntensity\r\n\t\t\t// three.js assumes a default f0 of 0.04 if no ior is provided which equates to an ior of 1.5\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'ior', 1.5 );\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'transmission', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'transmissionMap' );\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'emissiveIntensity', 0.0 );\r\n\r\n\t\t\t// sample 3\r\n\t\t\t// emission\r\n\t\t\tif ( 'emissive' in m ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = m.emissive.r;\r\n\t\t\t\tfloatArray[ index ++ ] = m.emissive.g;\r\n\t\t\t\tfloatArray[ index ++ ] = m.emissive.b;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = 0.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 0.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 0.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'emissiveMap' );\r\n\r\n\t\t\t// sample 4\r\n\t\t\t// normals\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'normalMap' );\r\n\t\t\tif ( 'normalScale' in m ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = m.normalScale.x;\r\n\t\t\t\tfloatArray[ index ++ ] = m.normalScale.y;\r\n\r\n \t\t\t} else {\r\n\r\n \t\t\t\tfloatArray[ index ++ ] = 1;\r\n \t\t\t\tfloatArray[ index ++ ] = 1;\r\n\r\n \t\t\t}\r\n\r\n\t\t\t// clearcoat\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'clearcoat', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'clearcoatMap' ); // sample 5\r\n\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'clearcoatRoughness', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'clearcoatRoughnessMap' );\r\n\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'clearcoatNormalMap' );\r\n\r\n\t\t\t// sample 6\r\n\t\t\tif ( 'clearcoatNormalScale' in m ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = m.clearcoatNormalScale.x;\r\n\t\t\t\tfloatArray[ index ++ ] = m.clearcoatNormalScale.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = 1;\r\n\t\t\t\tfloatArray[ index ++ ] = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tindex ++;\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'sheen', 0.0 );\r\n\r\n\t\t\t// sample 7\r\n\t\t\t// sheen\r\n\t\t\tif ( 'sheenColor' in m ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = m.sheenColor.r;\r\n\t\t\t\tfloatArray[ index ++ ] = m.sheenColor.g;\r\n\t\t\t\tfloatArray[ index ++ ] = m.sheenColor.b;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = 0.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 0.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 0.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'sheenColorMap' );\r\n\r\n\t\t\t// sample 8\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'sheenRoughness', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'sheenRoughnessMap' );\r\n\r\n\t\t\t// iridescence\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'iridescenceMap' );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'iridescenceThicknessMap' );\r\n\r\n\t\t\t// sample 9\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'iridescence', 0.0 );\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'iridescenceIOR', 1.3 );\r\n\r\n\t\t\tconst iridescenceThicknessRange = getField( m, 'iridescenceThicknessRange', [ 100, 400 ] );\r\n\t\t\tfloatArray[ index ++ ] = iridescenceThicknessRange[ 0 ];\r\n\t\t\tfloatArray[ index ++ ] = iridescenceThicknessRange[ 1 ];\r\n\r\n\t\t\t// sample 10\r\n\t\t\t// specular color\r\n\t\t\tif ( 'specularColor' in m ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = m.specularColor.r;\r\n\t\t\t\tfloatArray[ index ++ ] = m.specularColor.g;\r\n\t\t\t\tfloatArray[ index ++ ] = m.specularColor.b;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = 1.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 1.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 1.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'specularColorMap' );\r\n\r\n\t\t\t// sample 11\r\n\t\t\t// specular intensity\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'specularIntensity', 1.0 );\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'specularIntensityMap' );\r\n\r\n\t\t\t// isThinFilm\r\n\t\t\tconst isThinFilm = getField( m, 'thickness', 0.0 ) === 0.0 && getField( m, 'attenuationDistance', Infinity ) === Infinity;\r\n\t\t\tfloatArray[ index ++ ] = Number( isThinFilm );\r\n\t\t\tindex ++;\r\n\r\n\t\t\t// sample 12\r\n\t\t\tif ( 'attenuationColor' in m ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = m.attenuationColor.r;\r\n\t\t\t\tfloatArray[ index ++ ] = m.attenuationColor.g;\r\n\t\t\t\tfloatArray[ index ++ ] = m.attenuationColor.b;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = 1.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 1.0;\r\n\t\t\t\tfloatArray[ index ++ ] = 1.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfloatArray[ index ++ ] = getField( m, 'attenuationDistance', Infinity );\r\n\r\n\t\t\t// sample 13\r\n\t\t\t// alphaMap\r\n\t\t\tfloatArray[ index ++ ] = getTexture( m, 'alphaMap' );\r\n\r\n\t\t\t// side & matte\r\n\t\t\tfloatArray[ index ++ ] = m.opacity;\r\n\t\t\tfloatArray[ index ++ ] = m.alphaTest;\r\n\t\t\tif ( ! isThinFilm && m.transmission > 0.0 ) {\r\n\r\n\t\t\t\tfloatArray[ index ++ ] = 0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( m.side ) {\r\n\r\n\t\t\t\tcase FrontSide:\r\n\t\t\t\t\tfloatArray[ index ++ ] = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase BackSide:\r\n\t\t\t\t\tfloatArray[ index ++ ] = - 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase DoubleSide:\r\n\t\t\t\t\tfloatArray[ index ++ ] = 0;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// sample 14\r\n\t\t\tfloatArray[ index ++ ] = Number( getField( m, 'matte', false ) ); // matte\r\n\t\t\tfloatArray[ index ++ ] = Number( getField( m, 'castShadow', true ) ); // shadow\r\n\t\t\tfloatArray[ index ++ ] = Number( m.vertexColors ) | ( Number( m.flatShading ) << 1 ) | ( Number( getField( m, 'fogVolume', false ) ) << 2 ) | ( Number( getField( m, 'shadowReflectionCatcher', false ) ) << 3 ); // vertexColors, flatShading, fogVolume, shadowReflectionCatcher\r\n\t\t\tfloatArray[ index ++ ] = Number( m.transparent ); // transparent\r\n\r\n\t\t\t// map transform 15\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'map', floatArray, index );\r\n\r\n\t\t\t// metalnessMap transform 17\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'metalnessMap', floatArray, index );\r\n\r\n\t\t\t// roughnessMap transform 19\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'roughnessMap', floatArray, index );\r\n\r\n\t\t\t// transmissionMap transform 21\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'transmissionMap', floatArray, index );\r\n\r\n\t\t\t// emissiveMap transform 22\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'emissiveMap', floatArray, index );\r\n\r\n\t\t\t// normalMap transform 25\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'normalMap', floatArray, index );\r\n\r\n\t\t\t// clearcoatMap transform 27\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'clearcoatMap', floatArray, index );\r\n\r\n\t\t\t// clearcoatNormalMap transform 29\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'clearcoatNormalMap', floatArray, index );\r\n\r\n\t\t\t// clearcoatRoughnessMap transform 31\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'clearcoatRoughnessMap', floatArray, index );\r\n\r\n\t\t\t// sheenColorMap transform 33\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'sheenColorMap', floatArray, index );\r\n\r\n\t\t\t// sheenRoughnessMap transform 35\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'sheenRoughnessMap', floatArray, index );\r\n\r\n\t\t\t// iridescenceMap transform 37\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'iridescenceMap', floatArray, index );\r\n\r\n\t\t\t// iridescenceThicknessMap transform 39\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'iridescenceThicknessMap', floatArray, index );\r\n\r\n\t\t\t// specularColorMap transform 41\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'specularColorMap', floatArray, index );\r\n\r\n\t\t\t// specularIntensityMap transform 43\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'specularIntensityMap', floatArray, index );\r\n\r\n\t\t\t// alphaMap transform 45\r\n\t\t\tindex += writeTextureMatrixToArray( m, 'alphaMap', floatArray, index );\r\n\r\n\t\t}\r\n\r\n\t\t// check if the contents have changed\r\n\t\tconst hash = bufferToHash( floatArray.buffer );\r\n\t\tif ( this.hash !== hash ) {\r\n\r\n\t\t\tthis.hash = hash;\r\n\t\t\tthis.needsUpdate = true;\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n}\r\n","import {\r\n\tWebGLArrayRenderTarget,\r\n\tRGBAFormat,\r\n\tHalfFloatType,\r\n\tColor,\r\n\tRepeatWrapping,\r\n\tLinearFilter,\r\n\tNoToneMapping,\r\n\tShaderMaterial,\r\n} from 'three';\r\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\r\n\r\nconst prevColor = new Color();\r\nfunction getTextureHash( texture ) {\r\n\r\n\treturn texture ? `${ texture.uuid }:${ texture.version }` : null;\r\n\r\n}\r\n\r\nfunction assignOptions( target, options ) {\r\n\r\n\tfor ( const key in options ) {\r\n\r\n\t\tif ( key in target ) {\r\n\r\n\t\t\ttarget[ key ] = options[ key ];\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class RenderTarget2DArray extends WebGLArrayRenderTarget {\r\n\r\n\tconstructor( width, height, options ) {\r\n\r\n\t\tconst textureOptions = {\r\n\t\t\tformat: RGBAFormat,\r\n\t\t\ttype: HalfFloatType,\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\twrapS: RepeatWrapping,\r\n\t\t\twrapT: RepeatWrapping,\r\n\t\t\tgenerateMipmaps: false,\r\n\t\t\t...options,\r\n\t\t};\r\n\r\n\t\tsuper( width, height, 1, textureOptions );\r\n\r\n\t\t// manually assign the options because passing options into the\r\n\t\t// constructor does not work\r\n\t\tassignOptions( this.texture, textureOptions );\r\n\r\n\t\tthis.texture.setTextures = ( ...args ) => {\r\n\r\n\t\t\tthis.setTextures( ...args );\r\n\r\n\t\t};\r\n\r\n\t\tthis.hashes = [ null ];\r\n\r\n\t\tconst fsQuad = new FullScreenQuad( new CopyMaterial() );\r\n\t\tthis.fsQuad = fsQuad;\r\n\r\n\t}\r\n\r\n\tsetTextures( renderer, textures, width = this.width, height = this.height ) {\r\n\r\n\t\t// save previous renderer state\r\n\t\tconst prevRenderTarget = renderer.getRenderTarget();\r\n\t\tconst prevToneMapping = renderer.toneMapping;\r\n\t\tconst prevAlpha = renderer.getClearAlpha();\r\n\t\trenderer.getClearColor( prevColor );\r\n\r\n\t\t// resize the render target and ensure we don't have an empty texture\r\n\t\t// render target depth must be >= 1 to avoid unbound texture error on android devices\r\n\t\tconst depth = textures.length || 1;\r\n\t\tif ( width !== this.width || height !== this.height || this.depth !== depth ) {\r\n\r\n\t\t\tthis.setSize( width, height, depth );\r\n\t\t\tthis.hashes = new Array( depth ).fill( null );\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setClearColor( 0, 0 );\r\n\t\trenderer.toneMapping = NoToneMapping;\r\n\r\n\t\t// render each texture into each layer of the target\r\n\t\tconst fsQuad = this.fsQuad;\r\n\t\tconst hashes = this.hashes;\r\n\t\tlet updated = false;\r\n\t\tfor ( let i = 0, l = depth; i < l; i ++ ) {\r\n\r\n\t\t\tconst texture = textures[ i ];\r\n\t\t\tconst hash = getTextureHash( texture );\r\n\t\t\tif ( texture && ( hashes[ i ] !== hash || texture.isWebGLRenderTarget ) ) {\r\n\r\n\t\t\t\t// revert to default texture transform before rendering\r\n\t\t\t\ttexture.matrixAutoUpdate = false;\r\n\t\t\t\ttexture.matrix.identity();\r\n\r\n\t\t\t\tfsQuad.material.map = texture;\r\n\r\n\t\t\t\trenderer.setRenderTarget( this, i );\r\n\t\t\t\tfsQuad.render( renderer );\r\n\r\n\t\t\t\t// restore custom texture transform\r\n\t\t\t\ttexture.updateMatrix();\r\n\t\t\t\ttexture.matrixAutoUpdate = true;\r\n\r\n\t\t\t\t// ensure textures are not updated unnecessarily\r\n\t\t\t\thashes[ i ] = hash;\r\n\t\t\t\tupdated = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// reset the renderer\r\n\t\tfsQuad.material.map = null;\r\n\t\trenderer.setClearColor( prevColor, prevAlpha );\r\n\t\trenderer.setRenderTarget( prevRenderTarget );\r\n\t\trenderer.toneMapping = prevToneMapping;\r\n\r\n\t\treturn updated;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tsuper.dispose();\r\n\t\tthis.fsQuad.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\r\nclass CopyMaterial extends ShaderMaterial {\r\n\r\n\tget map() {\r\n\r\n\t\treturn this.uniforms.map.value;\r\n\r\n\t}\r\n\tset map( v ) {\r\n\r\n\t\tthis.uniforms.map.value = v;\r\n\r\n\t}\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper( {\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tmap: { value: null },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\t}\r\n\t\t\t`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\t\t\t\tuniform sampler2D map;\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tgl_FragColor = texture2D( map, vUv );\r\n\r\n\t\t\t\t}\r\n\t\t\t`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n","// Stratified Sampling based on implementation from hoverinc pathtracer\r\n// - https://github.com/hoverinc/ray-tracing-renderer\r\n// - http://www.pbr-book.org/3ed-2018/Sampling_and_Reconstruction/Stratified_Sampling.html\r\n\r\nexport function shuffle( arr, random = Math.random() ) {\r\n\r\n\tfor ( let i = arr.length - 1; i > 0; i -- ) {\r\n\r\n\t  const j = Math.floor( random() * ( i + 1 ) );\r\n\t  const x = arr[ i ];\r\n\t  arr[ i ] = arr[ j ];\r\n\t  arr[ j ] = x;\r\n\r\n\t}\r\n\r\n\treturn arr;\r\n\r\n}\r\n\r\n// strataCount : The number of bins per dimension\r\n// dimensions  : The number of dimensions to generate stratified values for\r\nexport class StratifiedSampler {\r\n\r\n\tconstructor( strataCount, dimensions, random = Math.random ) {\r\n\r\n\t\tconst l = strataCount ** dimensions;\r\n\t\tconst strata = new Uint16Array( l );\r\n\t\tlet index = l;\r\n\r\n\t\t// each integer represents a statum bin\r\n\t\tfor ( let i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tstrata[ i ] = i;\r\n\r\n\t\t}\r\n\r\n\t\tthis.samples = new Float32Array( dimensions );\r\n\r\n\t\tthis.strataCount = strataCount;\r\n\r\n\t\tthis.reset = function () {\r\n\r\n\t\t\tfor ( let i = 0; i < l; i ++ ) {\r\n\r\n\t\t\t\tstrata[ i ] = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tindex = 0;\r\n\r\n\t\t};\r\n\r\n\t\tthis.reshuffle = function () {\r\n\r\n\t\t\tindex = 0;\r\n\r\n\t\t};\r\n\r\n\t\tthis.next = function () {\r\n\r\n\t\t\tconst { samples } = this;\r\n\r\n\t\t\tif ( index >= strata.length ) {\r\n\r\n\t\t\t\tshuffle( strata, random );\r\n\t\t\t\tthis.reshuffle();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet stratum = strata[ index ++ ];\r\n\r\n\t\t\tfor ( let i = 0; i < dimensions; i ++ ) {\r\n\r\n\t\t\t\tsamples[ i ] = ( stratum % strataCount + random() ) / strataCount;\r\n\t\t\t\tstratum = Math.floor( stratum / strataCount );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn samples;\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n","// Stratified Sampling based on implementation from hoverinc pathtracer\r\n// - https://github.com/hoverinc/ray-tracing-renderer\r\n// - http://www.pbr-book.org/3ed-2018/Sampling_and_Reconstruction/Stratified_Sampling.html\r\n\r\nimport { StratifiedSampler } from './StratifiedSampler.js';\r\n\r\n// Stratified set of data with each tuple stratified separately and combined\r\nexport class StratifiedSamplerCombined {\r\n\r\n\tconstructor( strataCount, listOfDimensions, random = Math.random ) {\r\n\r\n\t\tlet totalDim = 0;\r\n\t\tfor ( const dim of listOfDimensions ) {\r\n\r\n\t\t\ttotalDim += dim;\r\n\r\n\t\t}\r\n\r\n\t\tconst combined = new Float32Array( totalDim );\r\n\t\tconst strataObjs = [];\r\n\t\tlet offset = 0;\r\n\t\tfor ( const dim of listOfDimensions ) {\r\n\r\n\t\t\tconst sampler = new StratifiedSampler( strataCount, dim, random );\r\n\t\t\tsampler.samples = new Float32Array( combined.buffer, offset, sampler.samples.length );\r\n\t\t\toffset += sampler.samples.length * 4;\r\n\t\t\tstrataObjs.push( sampler );\r\n\r\n\t\t}\r\n\r\n\t\tthis.samples = combined;\r\n\r\n\t\tthis.strataCount = strataCount;\r\n\r\n\t\tthis.next = function () {\r\n\r\n\t\t\tfor ( const strata of strataObjs ) {\r\n\r\n\t\t\t\tstrata.next();\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn combined;\r\n\r\n\t\t};\r\n\r\n\t\tthis.reshuffle = function () {\r\n\r\n\t\t\tfor ( const strata of strataObjs ) {\r\n\r\n\t\t\t\tstrata.reshuffle();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.reset = function () {\r\n\r\n\t\t\tfor ( const strata of strataObjs ) {\r\n\r\n\t\t\t\tstrata.reset();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n","import { DataTexture, FloatType, NearestFilter, RGBAFormat } from 'three';\r\nimport { StratifiedSamplerCombined } from './stratified/StratifiedSamplerCombined.js';\r\n\r\n// https://stackoverflow.com/questions/424292/seedable-javascript-random-number-generator\r\nclass RandomGenerator {\r\n\r\n\tconstructor( seed = 0 ) {\r\n\r\n\t\t// LCG using GCC's constants\r\n\t\tthis.m = 0x80000000; // 2**31;\r\n\t\tthis.a = 1103515245;\r\n\t\tthis.c = 12345;\r\n\r\n\t\tthis.seed = seed;\r\n\r\n\t}\r\n\r\n\tnextInt() {\r\n\r\n\t\tthis.seed = ( this.a * this.seed + this.c ) % this.m;\r\n\t\treturn this.seed;\r\n\r\n\t}\r\n\r\n\tnextFloat() {\r\n\r\n\t\t// returns in range [0,1]\r\n\t\treturn this.nextInt() / ( this.m - 1 );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class StratifiedSamplesTexture extends DataTexture {\r\n\r\n\tconstructor( count = 1, depth = 1, strata = 8 ) {\r\n\r\n\t\tsuper( new Float32Array( 1 ), 1, 1, RGBAFormat, FloatType );\r\n\t\tthis.minFilter = NearestFilter;\r\n\t\tthis.magFilter = NearestFilter;\r\n\r\n\t\tthis.strata = strata;\r\n\t\tthis.sampler = null;\r\n\t\tthis.generator = new RandomGenerator();\r\n\t\tthis.stableNoise = false;\r\n\t\tthis.random = () => {\r\n\r\n\t\t\tif ( this.stableNoise ) {\r\n\r\n\t\t\t\treturn this.generator.nextFloat();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn Math.random();\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tthis.init( count, depth, strata );\r\n\r\n\t}\r\n\r\n\tinit( count = this.image.height, depth = this.image.width, strata = this.strata ) {\r\n\r\n\t\tconst { image } = this;\r\n\t\tif ( image.width === depth && image.height === count && this.sampler !== null ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst dimensions = new Array( count * depth ).fill( 4 );\r\n\t\tconst sampler = new StratifiedSamplerCombined( strata, dimensions, this.random );\r\n\r\n\t\timage.width = depth;\r\n\t\timage.height = count;\r\n\t\timage.data = sampler.samples;\r\n\r\n\t\tthis.sampler = sampler;\r\n\r\n\t\tthis.dispose();\r\n\t\tthis.next();\r\n\r\n\t}\r\n\r\n\tnext() {\r\n\r\n\t\tthis.sampler.next();\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\treset() {\r\n\r\n\t\tthis.sampler.reset();\r\n\t\tthis.generator.seed = 0;\r\n\r\n\t}\r\n\r\n}\r\n","export function shuffleArray( array, random = Math.random ) {\r\n\r\n\tfor ( let i = array.length - 1; i > 0; i -- ) {\r\n\r\n\t\tconst replaceIndex = ~ ~ ( ( random() - 1e-6 ) * i );\r\n\t\tconst tmp = array[ i ];\r\n\t\tarray[ i ] = array[ replaceIndex ];\r\n\t\tarray[ replaceIndex ] = tmp;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function fillWithOnes( array, count ) {\r\n\r\n\tarray.fill( 0 );\r\n\r\n\tfor ( let i = 0; i < count; i ++ ) {\r\n\r\n\t\tarray[ i ] = 1;\r\n\r\n\t}\r\n\r\n}\r\n","export class BlueNoiseSamples {\r\n\r\n\tconstructor( size ) {\r\n\r\n\t\tthis.count = 0;\r\n\t\tthis.size = - 1;\r\n\t\tthis.sigma = - 1;\r\n\t\tthis.radius = - 1;\r\n\t\tthis.lookupTable = null;\r\n\t\tthis.score = null;\r\n\t\tthis.binaryPattern = null;\r\n\r\n\t\tthis.resize( size );\r\n\t\tthis.setSigma( 1.5 );\r\n\r\n\t}\r\n\r\n\tfindVoid() {\r\n\r\n\t\tconst { score, binaryPattern } = this;\r\n\r\n\t\tlet currValue = Infinity;\r\n\t\tlet currIndex = - 1;\r\n\t\tfor ( let i = 0, l = binaryPattern.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( binaryPattern[ i ] !== 0 ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst pScore = score[ i ];\r\n\t\t\tif ( pScore < currValue ) {\r\n\r\n\t\t\t\tcurrValue = pScore;\r\n\t\t\t\tcurrIndex = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn currIndex;\r\n\r\n\t}\r\n\r\n\tfindCluster() {\r\n\r\n\t\tconst { score, binaryPattern } = this;\r\n\r\n\t\tlet currValue = - Infinity;\r\n\t\tlet currIndex = - 1;\r\n\t\tfor ( let i = 0, l = binaryPattern.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( binaryPattern[ i ] !== 1 ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst pScore = score[ i ];\r\n\t\t\tif ( pScore > currValue ) {\r\n\r\n\t\t\t\tcurrValue = pScore;\r\n\t\t\t\tcurrIndex = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn currIndex;\r\n\r\n\t}\r\n\r\n\tsetSigma( sigma ) {\r\n\r\n\t\tif ( sigma === this.sigma ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// generate a radius in which the score will be updated under the\r\n\t\t// assumption that e^-10 is insignificant enough to be the border at\r\n\t\t// which we drop off.\r\n\t\tconst radius = ~ ~ ( Math.sqrt( 10 * 2 * ( sigma ** 2 ) ) + 1 );\r\n\t\tconst lookupWidth = 2 * radius + 1;\r\n\t\tconst lookupTable = new Float32Array( lookupWidth * lookupWidth );\r\n\t\tconst sigma2 = sigma * sigma;\r\n\t\tfor ( let x = - radius; x <= radius; x ++ ) {\r\n\r\n\t\t\tfor ( let y = - radius; y <= radius; y ++ ) {\r\n\r\n\t\t\t\tconst index = ( radius + y ) * lookupWidth + x + radius;\r\n\t\t\t\tconst dist2 = x * x + y * y;\r\n\t\t\t\tlookupTable[ index ] = Math.E ** ( - dist2 / ( 2 * sigma2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.lookupTable = lookupTable;\r\n\t\tthis.sigma = sigma;\r\n\t\tthis.radius = radius;\r\n\r\n\t}\r\n\r\n\tresize( size ) {\r\n\r\n\t\tif ( this.size !== size ) {\r\n\r\n\t\t\tthis.size = size;\r\n\t\t\tthis.score = new Float32Array( size * size );\r\n\t\t\tthis.binaryPattern = new Uint8Array( size * size );\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tinvert() {\r\n\r\n\t\tconst { binaryPattern, score, size } = this;\r\n\r\n\t\tscore.fill( 0 );\r\n\r\n\t\tfor ( let i = 0, l = binaryPattern.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( binaryPattern[ i ] === 0 ) {\r\n\r\n\t\t\t\tconst y = ~ ~ ( i / size );\r\n\t\t\t\tconst x = i - y * size;\r\n\t\t\t\tthis.updateScore( x, y, 1 );\r\n\t\t\t\tbinaryPattern[ i ] = 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinaryPattern[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdateScore( x, y, multiplier ) {\r\n\r\n\t\t// TODO: Is there a way to keep track of the highest and lowest scores here to avoid have to search over\r\n\t\t// everything in the buffer?\r\n\t\tconst { size, score, lookupTable } = this;\r\n\r\n\t\t// const sigma2 = sigma * sigma;\r\n\t\t// const radius = Math.floor( size / 2 );\r\n\t\tconst radius = this.radius;\r\n\t\tconst lookupWidth = 2 * radius + 1;\r\n\t\tfor ( let px = - radius; px <= radius; px ++ ) {\r\n\r\n\t\t\tfor ( let py = - radius; py <= radius; py ++ ) {\r\n\r\n\t\t\t\t// const dist2 = px * px + py * py;\r\n\t\t\t\t// const value = Math.E ** ( - dist2 / ( 2 * sigma2 ) );\r\n\r\n\t\t\t\tconst lookupIndex = ( radius + py ) * lookupWidth + px + radius;\r\n\t\t\t\tconst value = lookupTable[ lookupIndex ];\r\n\r\n\t\t\t\tlet sx = ( x + px );\r\n\t\t\t\tsx = sx < 0 ? size + sx : sx % size;\r\n\r\n\t\t\t\tlet sy = ( y + py );\r\n\t\t\t\tsy = sy < 0 ? size + sy : sy % size;\r\n\r\n\t\t\t\tconst sindex = sy * size + sx;\r\n\t\t\t\tscore[ sindex ] += multiplier * value;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\taddPointIndex( index ) {\r\n\r\n\t\tthis.binaryPattern[ index ] = 1;\r\n\r\n\t\tconst size = this.size;\r\n\t\tconst y = ~ ~ ( index / size );\r\n\t\tconst x = index - y * size;\r\n\t\tthis.updateScore( x, y, 1 );\r\n\t\tthis.count ++;\r\n\r\n\t}\r\n\r\n\tremovePointIndex( index ) {\r\n\r\n\t\tthis.binaryPattern[ index ] = 0;\r\n\r\n\t\tconst size = this.size;\r\n\t\tconst y = ~ ~ ( index / size );\r\n\t\tconst x = index - y * size;\r\n\t\tthis.updateScore( x, y, - 1 );\r\n\t\tthis.count --;\r\n\r\n\t}\r\n\r\n\tcopy( source ) {\r\n\r\n\t\tthis.resize( source.size );\r\n\t\tthis.score.set( source.score );\r\n\t\tthis.binaryPattern.set( source.binaryPattern );\r\n\t\tthis.setSigma( source.sigma );\r\n\t\tthis.count = source.count;\r\n\r\n\t}\r\n\r\n}\r\n","import { shuffleArray, fillWithOnes } from './utils.js';\r\nimport { BlueNoiseSamples } from './BlueNoiseSamples.js';\r\n\r\nexport class BlueNoiseGenerator {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.random = Math.random;\r\n\t\tthis.sigma = 1.5;\r\n\t\tthis.size = 64;\r\n\t\tthis.majorityPointsRatio = 0.1;\r\n\r\n\t\tthis.samples = new BlueNoiseSamples( 1 );\r\n\t\tthis.savedSamples = new BlueNoiseSamples( 1 );\r\n\r\n\t}\r\n\r\n\tgenerate() {\r\n\r\n\t\t// http://cv.ulichney.com/papers/1993-void-cluster.pdf\r\n\r\n\t\tconst {\r\n\t\t\tsamples,\r\n\t\t\tsavedSamples,\r\n\t\t\tsigma,\r\n\t\t\tmajorityPointsRatio,\r\n\t\t\tsize,\r\n\t\t} = this;\r\n\r\n\t\tsamples.resize( size );\r\n\t\tsamples.setSigma( sigma );\r\n\r\n\t\t// 1. Randomly place the minority points.\r\n\t\tconst pointCount = Math.floor( size * size * majorityPointsRatio );\r\n\t\tconst initialSamples = samples.binaryPattern;\r\n\r\n\t\tfillWithOnes( initialSamples, pointCount );\r\n\t\tshuffleArray( initialSamples, this.random );\r\n\r\n\t\tfor ( let i = 0, l = initialSamples.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( initialSamples[ i ] === 1 ) {\r\n\r\n\t\t\t\tsamples.addPointIndex( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// 2. Remove minority point that is in densest cluster and place it in the largest void.\r\n\t\twhile ( true ) {\r\n\r\n\t\t\tconst clusterIndex = samples.findCluster();\r\n\t\t\tsamples.removePointIndex( clusterIndex );\r\n\r\n\t\t\tconst voidIndex = samples.findVoid();\r\n\t\t\tif ( clusterIndex === voidIndex ) {\r\n\r\n\t\t\t\tsamples.addPointIndex( clusterIndex );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsamples.addPointIndex( voidIndex );\r\n\r\n\t\t}\r\n\r\n\t\t// 3. PHASE I: Assign a rank to each progressively less dense cluster point and put it\r\n\t\t// in the dither array.\r\n\t\tconst ditherArray = new Uint32Array( size * size );\r\n\t\tsavedSamples.copy( samples );\r\n\r\n\t\tlet rank;\r\n\t\trank = samples.count - 1;\r\n\t\twhile ( rank >= 0 ) {\r\n\r\n\t\t\tconst clusterIndex = samples.findCluster();\r\n\t\t\tsamples.removePointIndex( clusterIndex );\r\n\r\n\t\t\tditherArray[ clusterIndex ] = rank;\r\n\t\t\trank --;\r\n\r\n\t\t}\r\n\r\n\t\t// 4. PHASE II: Do the same thing for the largest voids up to half of the total pixels using\r\n\t\t// the initial binary pattern.\r\n\t\tconst totalSize = size * size;\r\n\t\trank = savedSamples.count;\r\n\t\twhile ( rank < totalSize / 2 ) {\r\n\r\n\t\t\tconst voidIndex = savedSamples.findVoid();\r\n\t\t\tsavedSamples.addPointIndex( voidIndex );\r\n\t\t\tditherArray[ voidIndex ] = rank;\r\n\t\t\trank ++;\r\n\r\n\t\t}\r\n\r\n\t\t// 5. PHASE III: Invert the pattern and finish out by assigning a rank to the remaining\r\n\t\t// and iteratively removing them.\r\n\t\tsavedSamples.invert();\r\n\r\n\t\twhile ( rank < totalSize ) {\r\n\r\n\t\t\tconst clusterIndex = savedSamples.findCluster();\r\n\t\t\tsavedSamples.removePointIndex( clusterIndex );\r\n\t\t\tditherArray[ clusterIndex ] = rank;\r\n\t\t\trank ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn { data: ditherArray, maxValue: totalSize };\r\n\r\n\t}\r\n\r\n}\r\n","import { DataTexture, FloatType, NearestFilter, RGBAFormat, RGFormat, RedFormat } from 'three';\r\nimport { BlueNoiseGenerator } from './blueNoise/BlueNoiseGenerator.js';\r\n\r\nfunction getStride( channels ) {\r\n\r\n\tif ( channels >= 3 ) {\r\n\r\n\t\treturn 4;\r\n\r\n\t} else {\r\n\r\n\t\treturn channels;\r\n\r\n\t}\r\n\r\n}\r\n\r\nfunction getFormat( channels ) {\r\n\r\n\tswitch ( channels ) {\r\n\r\n\tcase 1:\r\n\t\treturn RedFormat;\r\n\tcase 2:\r\n\t\treturn RGFormat;\r\n\tdefault:\r\n\t\treturn RGBAFormat;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class BlueNoiseTexture extends DataTexture {\r\n\r\n\tconstructor( size = 64, channels = 1 ) {\r\n\r\n\t\tsuper( new Float32Array( 4 ), 1, 1, RGBAFormat, FloatType );\r\n\t\tthis.minFilter = NearestFilter;\r\n\t\tthis.magFilter = NearestFilter;\r\n\r\n\t\tthis.size = size;\r\n\t\tthis.channels = channels;\r\n\t\tthis.update();\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tconst channels = this.channels;\r\n\t\tconst size = this.size;\r\n\t\tconst generator = new BlueNoiseGenerator();\r\n\t\tgenerator.channels = channels;\r\n\t\tgenerator.size = size;\r\n\r\n\t\tconst stride = getStride( channels );\r\n\t\tconst format = getFormat( stride );\r\n\t\tif ( this.image.width !== size || format !== this.format ) {\r\n\r\n\t\t\tthis.image.width = size;\r\n\t\t\tthis.image.height = size;\r\n\t\t\tthis.image.data = new Float32Array( ( size ** 2 ) * stride );\r\n\t\t\tthis.format = format;\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tconst data = this.image.data;\r\n\t\tfor ( let i = 0, l = channels; i < l; i ++ ) {\r\n\r\n\t\t\tconst result = generator.generate();\r\n\t\t\tconst bin = result.data;\r\n\t\t\tconst maxValue = result.maxValue;\r\n\r\n\t\t\tfor ( let j = 0, l2 = bin.length; j < l2; j ++ ) {\r\n\r\n\t\t\t\tconst value = bin[ j ] / maxValue;\r\n\t\t\t\tdata[ j * stride + i ] = value;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n","export const camera_struct = /* glsl */`\r\n\r\n\tstruct PhysicalCamera {\r\n\r\n\t\tfloat focusDistance;\r\n\t\tfloat anamorphicRatio;\r\n\t\tfloat bokehSize;\r\n\t\tint apertureBlades;\r\n\t\tfloat apertureRotation;\r\n\r\n\t};\r\n\r\n`;\r\n","export const equirect_struct = /* glsl */`\r\n\r\n\tstruct EquirectHdrInfo {\r\n\r\n\t\tsampler2D marginalWeights;\r\n\t\tsampler2D conditionalWeights;\r\n\t\tsampler2D map;\r\n\r\n\t\tfloat totalSum;\r\n\r\n\t};\r\n\r\n`;\r\n","export const lights_struct = /* glsl */`\r\n\r\n\t#define RECT_AREA_LIGHT_TYPE 0\r\n\t#define CIRC_AREA_LIGHT_TYPE 1\r\n\t#define SPOT_LIGHT_TYPE 2\r\n\t#define DIR_LIGHT_TYPE 3\r\n\t#define POINT_LIGHT_TYPE 4\r\n\r\n\tstruct LightsInfo {\r\n\r\n\t\tsampler2D tex;\r\n\t\tuint count;\r\n\r\n\t};\r\n\r\n\tstruct Light {\r\n\r\n\t\tvec3 position;\r\n\t\tint type;\r\n\r\n\t\tvec3 color;\r\n\t\tfloat intensity;\r\n\r\n\t\tvec3 u;\r\n\t\tvec3 v;\r\n\t\tfloat area;\r\n\r\n\t\t// spot light fields\r\n\t\tfloat radius;\r\n\t\tfloat near;\r\n\t\tfloat decay;\r\n\t\tfloat distance;\r\n\t\tfloat coneCos;\r\n\t\tfloat penumbraCos;\r\n\t\tint iesProfile;\r\n\r\n\t};\r\n\r\n\tLight readLightInfo( sampler2D tex, uint index ) {\r\n\r\n\t\tuint i = index * 6u;\r\n\r\n\t\tvec4 s0 = texelFetch1D( tex, i + 0u );\r\n\t\tvec4 s1 = texelFetch1D( tex, i + 1u );\r\n\t\tvec4 s2 = texelFetch1D( tex, i + 2u );\r\n\t\tvec4 s3 = texelFetch1D( tex, i + 3u );\r\n\r\n\t\tLight l;\r\n\t\tl.position = s0.rgb;\r\n\t\tl.type = int( round( s0.a ) );\r\n\r\n\t\tl.color = s1.rgb;\r\n\t\tl.intensity = s1.a;\r\n\r\n\t\tl.u = s2.rgb;\r\n\t\tl.v = s3.rgb;\r\n\t\tl.area = s3.a;\r\n\r\n\t\tif ( l.type == SPOT_LIGHT_TYPE || l.type == POINT_LIGHT_TYPE ) {\r\n\r\n\t\t\tvec4 s4 = texelFetch1D( tex, i + 4u );\r\n\t\t\tvec4 s5 = texelFetch1D( tex, i + 5u );\r\n\t\t\tl.radius = s4.r;\r\n\t\t\tl.decay = s4.g;\r\n\t\t\tl.distance = s4.b;\r\n\t\t\tl.coneCos = s4.a;\r\n\r\n\t\t\tl.penumbraCos = s5.r;\r\n\t\t\tl.iesProfile = int( round( s5.g ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl.radius = 0.0;\r\n\t\t\tl.decay = 0.0;\r\n\t\t\tl.distance = 0.0;\r\n\r\n\t\t\tl.coneCos = 0.0;\r\n\t\t\tl.penumbraCos = 0.0;\r\n\t\t\tl.iesProfile = - 1;\r\n\r\n\t\t}\r\n\r\n\t\treturn l;\r\n\r\n\t}\r\n\r\n`;\r\n","export const material_struct = /* glsl */ `\r\n\r\n\tstruct Material {\r\n\r\n\t\tvec3 color;\r\n\t\tint map;\r\n\r\n\t\tfloat metalness;\r\n\t\tint metalnessMap;\r\n\r\n\t\tfloat roughness;\r\n\t\tint roughnessMap;\r\n\r\n\t\tfloat ior;\r\n\t\tfloat transmission;\r\n\t\tint transmissionMap;\r\n\r\n\t\tfloat emissiveIntensity;\r\n\t\tvec3 emissive;\r\n\t\tint emissiveMap;\r\n\r\n\t\tint normalMap;\r\n\t\tvec2 normalScale;\r\n\r\n\t\tfloat clearcoat;\r\n\t\tint clearcoatMap;\r\n\t\tint clearcoatNormalMap;\r\n\t\tvec2 clearcoatNormalScale;\r\n\t\tfloat clearcoatRoughness;\r\n\t\tint clearcoatRoughnessMap;\r\n\r\n\t\tint iridescenceMap;\r\n\t\tint iridescenceThicknessMap;\r\n\t\tfloat iridescence;\r\n\t\tfloat iridescenceIor;\r\n\t\tfloat iridescenceThicknessMinimum;\r\n\t\tfloat iridescenceThicknessMaximum;\r\n\r\n\t\tvec3 specularColor;\r\n\t\tint specularColorMap;\r\n\r\n\t\tfloat specularIntensity;\r\n\t\tint specularIntensityMap;\r\n\t\tbool thinFilm;\r\n\r\n\t\tvec3 attenuationColor;\r\n\t\tfloat attenuationDistance;\r\n\r\n\t\tint alphaMap;\r\n\r\n\t\tbool castShadow;\r\n\t\tfloat opacity;\r\n\t\tfloat alphaTest;\r\n\r\n\t\tfloat side;\r\n\t\tbool matte;\r\n\t\tbool shadowReflectionCatcher;\r\n\r\n\t\tfloat sheen;\r\n\t\tvec3 sheenColor;\r\n\t\tint sheenColorMap;\r\n\t\tfloat sheenRoughness;\r\n\t\tint sheenRoughnessMap;\r\n\r\n\t\tbool vertexColors;\r\n\t\tbool flatShading;\r\n\t\tbool transparent;\r\n\t\tbool fogVolume;\r\n\r\n\t\tmat3 mapTransform;\r\n\t\tmat3 metalnessMapTransform;\r\n\t\tmat3 roughnessMapTransform;\r\n\t\tmat3 transmissionMapTransform;\r\n\t\tmat3 emissiveMapTransform;\r\n\t\tmat3 normalMapTransform;\r\n\t\tmat3 clearcoatMapTransform;\r\n\t\tmat3 clearcoatNormalMapTransform;\r\n\t\tmat3 clearcoatRoughnessMapTransform;\r\n\t\tmat3 sheenColorMapTransform;\r\n\t\tmat3 sheenRoughnessMapTransform;\r\n\t\tmat3 iridescenceMapTransform;\r\n\t\tmat3 iridescenceThicknessMapTransform;\r\n\t\tmat3 specularColorMapTransform;\r\n\t\tmat3 specularIntensityMapTransform;\r\n\t\tmat3 alphaMapTransform;\r\n\r\n\t};\r\n\r\n\tmat3 readTextureTransform( sampler2D tex, uint index ) {\r\n\r\n\t\tmat3 textureTransform;\r\n\r\n\t\tvec4 row1 = texelFetch1D( tex, index );\r\n\t\tvec4 row2 = texelFetch1D( tex, index + 1u );\r\n\r\n\t\ttextureTransform[0] = vec3(row1.r, row2.r, 0.0);\r\n\t\ttextureTransform[1] = vec3(row1.g, row2.g, 0.0);\r\n\t\ttextureTransform[2] = vec3(row1.b, row2.b, 1.0);\r\n\r\n\t\treturn textureTransform;\r\n\r\n\t}\r\n\r\n\tMaterial readMaterialInfo( sampler2D tex, uint index ) {\r\n\r\n\t\tuint i = index * uint( MATERIAL_PIXELS );\r\n\r\n\t\tvec4 s0 = texelFetch1D( tex, i + 0u );\r\n\t\tvec4 s1 = texelFetch1D( tex, i + 1u );\r\n\t\tvec4 s2 = texelFetch1D( tex, i + 2u );\r\n\t\tvec4 s3 = texelFetch1D( tex, i + 3u );\r\n\t\tvec4 s4 = texelFetch1D( tex, i + 4u );\r\n\t\tvec4 s5 = texelFetch1D( tex, i + 5u );\r\n\t\tvec4 s6 = texelFetch1D( tex, i + 6u );\r\n\t\tvec4 s7 = texelFetch1D( tex, i + 7u );\r\n\t\tvec4 s8 = texelFetch1D( tex, i + 8u );\r\n\t\tvec4 s9 = texelFetch1D( tex, i + 9u );\r\n\t\tvec4 s10 = texelFetch1D( tex, i + 10u );\r\n\t\tvec4 s11 = texelFetch1D( tex, i + 11u );\r\n\t\tvec4 s12 = texelFetch1D( tex, i + 12u );\r\n\t\tvec4 s13 = texelFetch1D( tex, i + 13u );\r\n\t\tvec4 s14 = texelFetch1D( tex, i + 14u );\r\n\r\n\t\tMaterial m;\r\n\t\tm.color = s0.rgb;\r\n\t\tm.map = int( round( s0.a ) );\r\n\r\n\t\tm.metalness = s1.r;\r\n\t\tm.metalnessMap = int( round( s1.g ) );\r\n\t\tm.roughness = s1.b;\r\n\t\tm.roughnessMap = int( round( s1.a ) );\r\n\r\n\t\tm.ior = s2.r;\r\n\t\tm.transmission = s2.g;\r\n\t\tm.transmissionMap = int( round( s2.b ) );\r\n\t\tm.emissiveIntensity = s2.a;\r\n\r\n\t\tm.emissive = s3.rgb;\r\n\t\tm.emissiveMap = int( round( s3.a ) );\r\n\r\n\t\tm.normalMap = int( round( s4.r ) );\r\n\t\tm.normalScale = s4.gb;\r\n\r\n\t\tm.clearcoat = s4.a;\r\n\t\tm.clearcoatMap = int( round( s5.r ) );\r\n\t\tm.clearcoatRoughness = s5.g;\r\n\t\tm.clearcoatRoughnessMap = int( round( s5.b ) );\r\n\t\tm.clearcoatNormalMap = int( round( s5.a ) );\r\n\t\tm.clearcoatNormalScale = s6.rg;\r\n\r\n\t\tm.sheen = s6.a;\r\n\t\tm.sheenColor = s7.rgb;\r\n\t\tm.sheenColorMap = int( round( s7.a ) );\r\n\t\tm.sheenRoughness = s8.r;\r\n\t\tm.sheenRoughnessMap = int( round( s8.g ) );\r\n\r\n\t\tm.iridescenceMap = int( round( s8.b ) );\r\n\t\tm.iridescenceThicknessMap = int( round( s8.a ) );\r\n\t\tm.iridescence = s9.r;\r\n\t\tm.iridescenceIor = s9.g;\r\n\t\tm.iridescenceThicknessMinimum = s9.b;\r\n\t\tm.iridescenceThicknessMaximum = s9.a;\r\n\r\n\t\tm.specularColor = s10.rgb;\r\n\t\tm.specularColorMap = int( round( s10.a ) );\r\n\r\n\t\tm.specularIntensity = s11.r;\r\n\t\tm.specularIntensityMap = int( round( s11.g ) );\r\n\t\tm.thinFilm = bool( s11.b );\r\n\r\n\t\tm.attenuationColor = s12.rgb;\r\n\t\tm.attenuationDistance = s12.a;\r\n\r\n\t\tm.alphaMap = int( round( s13.r ) );\r\n\r\n\t\tm.opacity = s13.g;\r\n\t\tm.alphaTest = s13.b;\r\n\t\tm.side = s13.a;\r\n\r\n\t\tm.matte = bool( s14.r );\r\n\t\tm.castShadow = bool( s14.g );\r\n\t\tm.vertexColors = bool( int( s14.b ) & 1 );\r\n\t\tm.flatShading = bool( int( s14.b ) & 2 );\r\n\t\tm.fogVolume = bool( int( s14.b ) & 4 );\r\n\t\tm.shadowReflectionCatcher = bool( int( s14.b ) & 8 );\r\n\t\tm.transparent = bool( s14.a );\r\n\r\n\t\tuint firstTextureTransformIdx = i + 15u;\r\n\r\n\t\t// mat3( 1.0 ) is an identity matrix\r\n\t\tm.mapTransform = m.map == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx );\r\n\t\tm.metalnessMapTransform = m.metalnessMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 2u );\r\n\t\tm.roughnessMapTransform = m.roughnessMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 4u );\r\n\t\tm.transmissionMapTransform = m.transmissionMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 6u );\r\n\t\tm.emissiveMapTransform = m.emissiveMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 8u );\r\n\t\tm.normalMapTransform = m.normalMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 10u );\r\n\t\tm.clearcoatMapTransform = m.clearcoatMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 12u );\r\n\t\tm.clearcoatNormalMapTransform = m.clearcoatNormalMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 14u );\r\n\t\tm.clearcoatRoughnessMapTransform = m.clearcoatRoughnessMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 16u );\r\n\t\tm.sheenColorMapTransform = m.sheenColorMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 18u );\r\n\t\tm.sheenRoughnessMapTransform = m.sheenRoughnessMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 20u );\r\n\t\tm.iridescenceMapTransform = m.iridescenceMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 22u );\r\n\t\tm.iridescenceThicknessMapTransform = m.iridescenceThicknessMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 24u );\r\n\t\tm.specularColorMapTransform = m.specularColorMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 26u );\r\n\t\tm.specularIntensityMapTransform = m.specularIntensityMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 28u );\r\n\t\tm.alphaMapTransform = m.alphaMap == - 1 ? mat3( 1.0 ) : readTextureTransform( tex, firstTextureTransformIdx + 30u );\r\n\r\n\t\treturn m;\r\n\r\n\t}\r\n\r\n`;\r\n","export const surface_record_struct = /* glsl */`\r\n\r\n\tstruct SurfaceRecord {\r\n\r\n\t\t// surface type\r\n\t\tbool volumeParticle;\r\n\r\n\t\t// geometry\r\n\t\tvec3 faceNormal;\r\n\t\tbool frontFace;\r\n\t\tvec3 normal;\r\n\t\tmat3 normalBasis;\r\n\t\tmat3 normalInvBasis;\r\n\r\n\t\t// cached properties\r\n\t\tfloat eta;\r\n\t\tfloat f0;\r\n\r\n\t\t// material\r\n\t\tfloat roughness;\r\n\t\tfloat filteredRoughness;\r\n\t\tfloat metalness;\r\n\t\tvec3 color;\r\n\t\tvec3 emission;\r\n\r\n\t\t// transmission\r\n\t\tfloat ior;\r\n\t\tfloat transmission;\r\n\t\tbool thinFilm;\r\n\t\tvec3 attenuationColor;\r\n\t\tfloat attenuationDistance;\r\n\r\n\t\t// clearcoat\r\n\t\tvec3 clearcoatNormal;\r\n\t\tmat3 clearcoatBasis;\r\n\t\tmat3 clearcoatInvBasis;\r\n\t\tfloat clearcoat;\r\n\t\tfloat clearcoatRoughness;\r\n\t\tfloat filteredClearcoatRoughness;\r\n\r\n\t\t// sheen\r\n\t\tfloat sheen;\r\n\t\tvec3 sheenColor;\r\n\t\tfloat sheenRoughness;\r\n\r\n\t\t// iridescence\r\n\t\tfloat iridescence;\r\n\t\tfloat iridescenceIor;\r\n\t\tfloat iridescenceThickness;\r\n\r\n\t\t// specular\r\n\t\tvec3 specularColor;\r\n\t\tfloat specularIntensity;\r\n\t};\r\n\r\n\tstruct ScatterRecord {\r\n\t\tfloat specularPdf;\r\n\t\tfloat pdf;\r\n\t\tvec3 direction;\r\n\t\tvec3 color;\r\n\t};\r\n\r\n`;\r\n","export const equirect_functions = /* glsl */`\r\n\r\n\t// samples the the given environment map in the given direction\r\n\tvec3 sampleEquirectColor( sampler2D envMap, vec3 direction ) {\r\n\r\n\t\treturn texture2D( envMap, equirectDirectionToUv( direction ) ).rgb;\r\n\r\n\t}\r\n\r\n\t// gets the pdf of the given direction to sample\r\n\tfloat equirectDirectionPdf( vec3 direction ) {\r\n\r\n\t\tvec2 uv = equirectDirectionToUv( direction );\r\n\t\tfloat theta = uv.y * PI;\r\n\t\tfloat sinTheta = sin( theta );\r\n\t\tif ( sinTheta == 0.0 ) {\r\n\r\n\t\t\treturn 0.0;\r\n\r\n\t\t}\r\n\r\n\t\treturn 1.0 / ( 2.0 * PI * PI * sinTheta );\r\n\r\n\t}\r\n\r\n\t// samples the color given env map with CDF and returns the pdf of the direction\r\n\tfloat sampleEquirect( vec3 direction, inout vec3 color ) {\r\n\r\n\t\tfloat totalSum = envMapInfo.totalSum;\r\n\t\tif ( totalSum == 0.0 ) {\r\n\r\n\t\t\tcolor = vec3( 0.0 );\r\n\t\t\treturn 1.0;\r\n\r\n\t\t}\r\n\r\n\t\tvec2 uv = equirectDirectionToUv( direction );\r\n\t\tcolor = texture2D( envMapInfo.map, uv ).rgb;\r\n\r\n\t\tfloat lum = luminance( color );\r\n\t\tivec2 resolution = textureSize( envMapInfo.map, 0 );\r\n\t\tfloat pdf = lum / totalSum;\r\n\r\n\t\treturn float( resolution.x * resolution.y ) * pdf * equirectDirectionPdf( direction );\r\n\r\n\t}\r\n\r\n\t// samples a direction of the envmap with color and retrieves pdf\r\n\tfloat sampleEquirectProbability( vec2 r, inout vec3 color, inout vec3 direction ) {\r\n\r\n\t\t// sample env map cdf\r\n\t\tfloat v = texture2D( envMapInfo.marginalWeights, vec2( r.x, 0.0 ) ).x;\r\n\t\tfloat u = texture2D( envMapInfo.conditionalWeights, vec2( r.y, v ) ).x;\r\n\t\tvec2 uv = vec2( u, v );\r\n\r\n\t\tvec3 derivedDirection = equirectUvToDirection( uv );\r\n\t\tdirection = derivedDirection;\r\n\t\tcolor = texture2D( envMapInfo.map, uv ).rgb;\r\n\r\n\t\tfloat totalSum = envMapInfo.totalSum;\r\n\t\tfloat lum = luminance( color );\r\n\t\tivec2 resolution = textureSize( envMapInfo.map, 0 );\r\n\t\tfloat pdf = lum / totalSum;\r\n\r\n\t\treturn float( resolution.x * resolution.y ) * pdf * equirectDirectionPdf( direction );\r\n\r\n\t}\r\n`;\r\n","export const light_sampling_functions = /* glsl */`\r\n\r\n\tfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\r\n\r\n\t\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\r\n\r\n\t}\r\n\r\n\tfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\r\n\r\n\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\r\n\t\t// page 32, equation 26: E[window1]\r\n\t\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), EPSILON );\r\n\r\n\t\tif ( cutoffDistance > 0.0 ) {\r\n\r\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn distanceFalloff;\r\n\r\n\t}\r\n\r\n\tfloat getPhotometricAttenuation( sampler2DArray iesProfiles, int iesProfile, vec3 posToLight, vec3 lightDir, vec3 u, vec3 v ) {\r\n\r\n\t\tfloat cosTheta = dot( posToLight, lightDir );\r\n\t\tfloat angle = acos( cosTheta ) / PI;\r\n\r\n\t\treturn texture2D( iesProfiles, vec3( angle, 0.0, iesProfile ) ).r;\r\n\r\n\t}\r\n\r\n\tstruct LightRecord {\r\n\r\n\t\tfloat dist;\r\n\t\tvec3 direction;\r\n\t\tfloat pdf;\r\n\t\tvec3 emission;\r\n\t\tint type;\r\n\r\n\t};\r\n\r\n\tbool intersectLightAtIndex( sampler2D lights, vec3 rayOrigin, vec3 rayDirection, uint l, inout LightRecord lightRec ) {\r\n\r\n\t\tbool didHit = false;\r\n\t\tLight light = readLightInfo( lights, l );\r\n\r\n\t\tvec3 u = light.u;\r\n\t\tvec3 v = light.v;\r\n\r\n\t\t// check for backface\r\n\t\tvec3 normal = normalize( cross( u, v ) );\r\n\t\tif ( dot( normal, rayDirection ) > 0.0 ) {\r\n\r\n\t\t\tu *= 1.0 / dot( u, u );\r\n\t\t\tv *= 1.0 / dot( v, v );\r\n\r\n\t\t\tfloat dist;\r\n\r\n\t\t\t// MIS / light intersection is not supported for punctual lights.\r\n\t\t\tif(\r\n\t\t\t\t( light.type == RECT_AREA_LIGHT_TYPE && intersectsRectangle( light.position, normal, u, v, rayOrigin, rayDirection, dist ) ) ||\r\n\t\t\t\t( light.type == CIRC_AREA_LIGHT_TYPE && intersectsCircle( light.position, normal, u, v, rayOrigin, rayDirection, dist ) )\r\n\t\t\t) {\r\n\r\n\t\t\t\tfloat cosTheta = dot( rayDirection, normal );\r\n\t\t\t\tdidHit = true;\r\n\t\t\t\tlightRec.dist = dist;\r\n\t\t\t\tlightRec.pdf = ( dist * dist ) / ( light.area * cosTheta );\r\n\t\t\t\tlightRec.emission = light.color * light.intensity;\r\n\t\t\t\tlightRec.direction = rayDirection;\r\n\t\t\t\tlightRec.type = light.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn didHit;\r\n\r\n\t}\r\n\r\n\tLightRecord randomAreaLightSample( Light light, vec3 rayOrigin, vec2 ruv ) {\r\n\r\n\t\tvec3 randomPos;\r\n\t\tif( light.type == RECT_AREA_LIGHT_TYPE ) {\r\n\r\n\t\t\t// rectangular area light\r\n\t\t\trandomPos = light.position + light.u * ( ruv.x - 0.5 ) + light.v * ( ruv.y - 0.5 );\r\n\r\n\t\t} else if( light.type == CIRC_AREA_LIGHT_TYPE ) {\r\n\r\n\t\t\t// circular area light\r\n\t\t\tfloat r = 0.5 * sqrt( ruv.x );\r\n\t\t\tfloat theta = ruv.y * 2.0 * PI;\r\n\t\t\tfloat x = r * cos( theta );\r\n\t\t\tfloat y = r * sin( theta );\r\n\r\n\t\t\trandomPos = light.position + light.u * x + light.v * y;\r\n\r\n\t\t}\r\n\r\n\t\tvec3 toLight = randomPos - rayOrigin;\r\n\t\tfloat lightDistSq = dot( toLight, toLight );\r\n\t\tfloat dist = sqrt( lightDistSq );\r\n\t\tvec3 direction = toLight / dist;\r\n\t\tvec3 lightNormal = normalize( cross( light.u, light.v ) );\r\n\r\n\t\tLightRecord lightRec;\r\n\t\tlightRec.type = light.type;\r\n\t\tlightRec.emission = light.color * light.intensity;\r\n\t\tlightRec.dist = dist;\r\n\t\tlightRec.direction = direction;\r\n\r\n\t\tlightRec.pdf = lightDistSq / max( light.area * abs( dot( direction, lightNormal ) ), 1e-6 );\r\n\r\n\t\treturn lightRec;\r\n\r\n\t}\r\n\r\n\tLightRecord randomSpotLightSample( Light light, sampler2DArray iesProfiles, vec3 rayOrigin, vec2 ruv ) {\r\n\r\n\t\tfloat radius = light.radius * sqrt( ruv.x );\r\n\t\tfloat theta = ruv.y * 2.0 * PI;\r\n\t\tfloat x = radius * cos( theta );\r\n\t\tfloat y = radius * sin( theta );\r\n\r\n\t\tvec3 u = light.u;\r\n\t\tvec3 v = light.v;\r\n\t\tvec3 normal = normalize( cross( u, v ) );\r\n\r\n\t\tfloat angle = acos( light.coneCos );\r\n\t\tfloat angleTan = tan( angle );\r\n\t\tfloat startDistance = light.radius / max( angleTan, EPSILON );\r\n\r\n\t\tvec3 randomPos = light.position - normal * startDistance + u * x + v * y;\r\n\t\tvec3 toLight = randomPos - rayOrigin;\r\n\t\tfloat lightDistSq = dot( toLight, toLight );\r\n\t\tfloat dist = sqrt( lightDistSq );\r\n\r\n\t\tvec3 direction = toLight / max( dist, EPSILON );\r\n\t\tfloat cosTheta = dot( direction, normal );\r\n\r\n\t\tfloat spotAttenuation = light.iesProfile != - 1 ?\r\n\t\t\tgetPhotometricAttenuation( iesProfiles, light.iesProfile, direction, normal, u, v ) :\r\n\t\t\tgetSpotAttenuation( light.coneCos, light.penumbraCos, cosTheta );\r\n\r\n\t\tfloat distanceAttenuation = getDistanceAttenuation( dist, light.distance, light.decay );\r\n\t\tLightRecord lightRec;\r\n\t\tlightRec.type = light.type;\r\n\t\tlightRec.dist = dist;\r\n\t\tlightRec.direction = direction;\r\n\t\tlightRec.emission = light.color * light.intensity * distanceAttenuation * spotAttenuation;\r\n\t\tlightRec.pdf = 1.0;\r\n\r\n\t\treturn lightRec;\r\n\r\n\t}\r\n\r\n\tLightRecord randomLightSample( sampler2D lights, sampler2DArray iesProfiles, uint lightCount, vec3 rayOrigin, vec3 ruv ) {\r\n\r\n\t\tLightRecord result;\r\n\r\n\t\t// pick a random light\r\n\t\tuint l = uint( ruv.x * float( lightCount ) );\r\n\t\tLight light = readLightInfo( lights, l );\r\n\r\n\t\tif ( light.type == SPOT_LIGHT_TYPE ) {\r\n\r\n\t\t\tresult = randomSpotLightSample( light, iesProfiles, rayOrigin, ruv.yz );\r\n\r\n\t\t} else if ( light.type == POINT_LIGHT_TYPE ) {\r\n\r\n\t\t\tvec3 lightRay = light.u - rayOrigin;\r\n\t\t\tfloat lightDist = length( lightRay );\r\n\t\t\tfloat cutoffDistance = light.distance;\r\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDist, light.decay ), 0.01 );\r\n\t\t\tif ( cutoffDistance > 0.0 ) {\r\n\r\n\t\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDist / cutoffDistance ) ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tLightRecord rec;\r\n\t\t\trec.direction = normalize( lightRay );\r\n\t\t\trec.dist = length( lightRay );\r\n\t\t\trec.pdf = 1.0;\r\n\t\t\trec.emission = light.color * light.intensity * distanceFalloff;\r\n\t\t\trec.type = light.type;\r\n\t\t\tresult = rec;\r\n\r\n\t\t} else if ( light.type == DIR_LIGHT_TYPE ) {\r\n\r\n\t\t\tLightRecord rec;\r\n\t\t\trec.dist = 1e10;\r\n\t\t\trec.direction = light.u;\r\n\t\t\trec.pdf = 1.0;\r\n\t\t\trec.emission = light.color * light.intensity;\r\n\t\t\trec.type = light.type;\r\n\r\n\t\t\tresult = rec;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// sample the light\r\n\t\t\tresult = randomAreaLightSample( light, rayOrigin, ruv.yz );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n`;\r\n","export const shape_sampling_functions = /* glsl */`\r\n\r\n\tvec3 sampleHemisphere( vec3 n, vec2 uv ) {\r\n\r\n\t\t// https://www.rorydriscoll.com/2009/01/07/better-sampling/\r\n\t\t// https://graphics.pixar.com/library/OrthonormalB/paper.pdf\r\n\t\tfloat sign = n.z == 0.0 ? 1.0 : sign( n.z );\r\n\t\tfloat a = - 1.0 / ( sign + n.z );\r\n\t\tfloat b = n.x * n.y * a;\r\n\t\tvec3 b1 = vec3( 1.0 + sign * n.x * n.x * a, sign * b, - sign * n.x );\r\n\t\tvec3 b2 = vec3( b, sign + n.y * n.y * a, - n.y );\r\n\r\n\t\tfloat r = sqrt( uv.x );\r\n\t\tfloat theta = 2.0 * PI * uv.y;\r\n\t\tfloat x = r * cos( theta );\r\n\t\tfloat y = r * sin( theta );\r\n\t\treturn x * b1 + y * b2 + sqrt( 1.0 - uv.x ) * n;\r\n\r\n\t}\r\n\r\n\tvec2 sampleTriangle( vec2 a, vec2 b, vec2 c, vec2 r ) {\r\n\r\n\t\t// get the edges of the triangle and the diagonal across the\r\n\t\t// center of the parallelogram\r\n\t\tvec2 e1 = a - b;\r\n\t\tvec2 e2 = c - b;\r\n\t\tvec2 diag = normalize( e1 + e2 );\r\n\r\n\t\t// pick the point in the parallelogram\r\n\t\tif ( r.x + r.y > 1.0 ) {\r\n\r\n\t\t\tr = vec2( 1.0 ) - r;\r\n\r\n\t\t}\r\n\r\n\t\treturn e1 * r.x + e2 * r.y;\r\n\r\n\t}\r\n\r\n\tvec2 sampleCircle( vec2 uv ) {\r\n\r\n\t\tfloat angle = 2.0 * PI * uv.x;\r\n\t\tfloat radius = sqrt( uv.y );\r\n\t\treturn vec2( cos( angle ), sin( angle ) ) * radius;\r\n\r\n\t}\r\n\r\n\tvec3 sampleSphere( vec2 uv ) {\r\n\r\n\t\tfloat u = ( uv.x - 0.5 ) * 2.0;\r\n\t\tfloat t = uv.y * PI * 2.0;\r\n\t\tfloat f = sqrt( 1.0 - u * u );\r\n\r\n\t\treturn vec3( f * cos( t ), f * sin( t ), u );\r\n\r\n\t}\r\n\r\n\tvec2 sampleRegularPolygon( int sides, vec3 uvw ) {\r\n\r\n\t\tsides = max( sides, 3 );\r\n\r\n\t\tvec3 r = uvw;\r\n\t\tfloat anglePerSegment = 2.0 * PI / float( sides );\r\n\t\tfloat segment = floor( float( sides ) * r.x );\r\n\r\n\t\tfloat angle1 = anglePerSegment * segment;\r\n\t\tfloat angle2 = angle1 + anglePerSegment;\r\n\t\tvec2 a = vec2( sin( angle1 ), cos( angle1 ) );\r\n\t\tvec2 b = vec2( 0.0, 0.0 );\r\n\t\tvec2 c = vec2( sin( angle2 ), cos( angle2 ) );\r\n\r\n\t\treturn sampleTriangle( a, b, c, r.yz );\r\n\r\n\t}\r\n\r\n\t// samples an aperture shape with the given number of sides. 0 means circle\r\n\tvec2 sampleAperture( int blades, vec3 uvw ) {\r\n\r\n\t\treturn blades == 0 ?\r\n\t\t\tsampleCircle( uvw.xy ) :\r\n\t\t\tsampleRegularPolygon( blades, uvw );\r\n\r\n\t}\r\n\r\n\r\n`;\r\n","export const fresnel_functions = /* glsl */`\r\n\r\n\tbool totalInternalReflection( float cosTheta, float eta ) {\r\n\r\n\t\tfloat sinTheta = sqrt( 1.0 - cosTheta * cosTheta );\r\n\t\treturn eta * sinTheta > 1.0;\r\n\r\n\t}\r\n\r\n\t// https://google.github.io/filament/Filament.md.html#materialsystem/diffusebrdf\r\n\tfloat schlickFresnel( float cosine, float f0 ) {\r\n\r\n\t\treturn f0 + ( 1.0 - f0 ) * pow( 1.0 - cosine, 5.0 );\r\n\r\n\t}\r\n\r\n\tvec3 schlickFresnel( float cosine, vec3 f0 ) {\r\n\r\n\t\treturn f0 + ( 1.0 - f0 ) * pow( 1.0 - cosine, 5.0 );\r\n\r\n\t}\r\n\r\n\tvec3 schlickFresnel( float cosine, vec3 f0, vec3 f90 ) {\r\n\r\n\t\treturn f0 + ( f90 - f0 ) * pow( 1.0 - cosine, 5.0 );\r\n\r\n\t}\r\n\r\n\tfloat dielectricFresnel( float cosThetaI, float eta ) {\r\n\r\n\t\t// https://schuttejoe.github.io/post/disneybsdf/\r\n\t\tfloat ni = eta;\r\n\t\tfloat nt = 1.0;\r\n\r\n\t\t// Check for total internal reflection\r\n\t\tfloat sinThetaISq = 1.0f - cosThetaI * cosThetaI;\r\n\t\tfloat sinThetaTSq = eta * eta * sinThetaISq;\r\n\t\tif( sinThetaTSq >= 1.0 ) {\r\n\r\n\t\t\treturn 1.0;\r\n\r\n\t\t}\r\n\r\n\t\tfloat sinThetaT = sqrt( sinThetaTSq );\r\n\r\n\t\tfloat cosThetaT = sqrt( max( 0.0, 1.0f - sinThetaT * sinThetaT ) );\r\n\t\tfloat rParallel = ( ( nt * cosThetaI ) - ( ni * cosThetaT ) ) / ( ( nt * cosThetaI ) + ( ni * cosThetaT ) );\r\n\t\tfloat rPerpendicular = ( ( ni * cosThetaI ) - ( nt * cosThetaT ) ) / ( ( ni * cosThetaI ) + ( nt * cosThetaT ) );\r\n\t\treturn ( rParallel * rParallel + rPerpendicular * rPerpendicular ) / 2.0;\r\n\r\n\t}\r\n\r\n\t// https://raytracing.github.io/books/RayTracingInOneWeekend.html#dielectrics/schlickapproximation\r\n\tfloat iorRatioToF0( float eta ) {\r\n\r\n\t\treturn pow( ( 1.0 - eta ) / ( 1.0 + eta ), 2.0 );\r\n\r\n\t}\r\n\r\n\tvec3 evaluateFresnel( float cosTheta, float eta, vec3 f0, vec3 f90 ) {\r\n\r\n\t\tif ( totalInternalReflection( cosTheta, eta ) ) {\r\n\r\n\t\t\treturn f90;\r\n\r\n\t\t}\r\n\r\n\t\treturn schlickFresnel( cosTheta, f0, f90 );\r\n\r\n\t}\r\n\r\n\t// TODO: disney fresnel was removed and replaced with this fresnel function to better align with\r\n\t// the glTF but is causing blown out pixels. Should be revisited\r\n\t// float evaluateFresnelWeight( float cosTheta, float eta, float f0 ) {\r\n\r\n\t// \tif ( totalInternalReflection( cosTheta, eta ) ) {\r\n\r\n\t// \t\treturn 1.0;\r\n\r\n\t// \t}\r\n\r\n\t// \treturn schlickFresnel( cosTheta, f0 );\r\n\r\n\t// }\r\n\r\n\t// https://schuttejoe.github.io/post/disneybsdf/\r\n\tfloat disneyFresnel( vec3 wo, vec3 wi, vec3 wh, float f0, float eta, float metalness ) {\r\n\r\n\t\tfloat dotHV = dot( wo, wh );\r\n\t\tif ( totalInternalReflection( dotHV, eta ) ) {\r\n\r\n\t\t\treturn 1.0;\r\n\r\n\t\t}\r\n\r\n\t\tfloat dotHL = dot( wi, wh );\r\n\t\tfloat dielectricFresnel = dielectricFresnel( abs( dotHV ), eta );\r\n\t\tfloat metallicFresnel = schlickFresnel( dotHL, f0 );\r\n\r\n\t\treturn mix( dielectricFresnel, metallicFresnel, metalness );\r\n\r\n\t}\r\n\r\n`;\r\n","export const math_functions = /* glsl */`\r\n\r\n\t// Fast arccos approximation used to remove banding artifacts caused by numerical errors in acos.\r\n\t// This is a cubic Lagrange interpolating polynomial for x = [-1, -1/2, 0, 1/2, 1].\r\n\t// For more information see: https://github.com/gkjohnson/three-gpu-pathtracer/pull/171#issuecomment-1152275248\r\n\tfloat acosApprox( float x ) {\r\n\r\n\t\tx = clamp( x, -1.0, 1.0 );\r\n\t\treturn ( - 0.69813170079773212 * x * x - 0.87266462599716477 ) * x + 1.5707963267948966;\r\n\r\n\t}\r\n\r\n\t// An acos with input values bound to the range [-1, 1].\r\n\tfloat acosSafe( float x ) {\r\n\r\n\t\treturn acos( clamp( x, -1.0, 1.0 ) );\r\n\r\n\t}\r\n\r\n\tfloat saturateCos( float val ) {\r\n\r\n\t\treturn clamp( val, 0.001, 1.0 );\r\n\r\n\t}\r\n\r\n\tfloat square( float t ) {\r\n\r\n\t\treturn t * t;\r\n\r\n\t}\r\n\r\n\tvec2 square( vec2 t ) {\r\n\r\n\t\treturn t * t;\r\n\r\n\t}\r\n\r\n\tvec3 square( vec3 t ) {\r\n\r\n\t\treturn t * t;\r\n\r\n\t}\r\n\r\n\tvec4 square( vec4 t ) {\r\n\r\n\t\treturn t * t;\r\n\r\n\t}\r\n\r\n\tvec2 rotateVector( vec2 v, float t ) {\r\n\r\n\t\tfloat ac = cos( t );\r\n\t\tfloat as = sin( t );\r\n\t\treturn vec2(\r\n\t\t\tv.x * ac - v.y * as,\r\n\t\t\tv.x * as + v.y * ac\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t// forms a basis with the normal vector as Z\r\n\tmat3 getBasisFromNormal( vec3 normal ) {\r\n\r\n\t\tvec3 other;\r\n\t\tif ( abs( normal.x ) > 0.5 ) {\r\n\r\n\t\t\tother = vec3( 0.0, 1.0, 0.0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tother = vec3( 1.0, 0.0, 0.0 );\r\n\r\n\t\t}\r\n\r\n\t\tvec3 ortho = normalize( cross( normal, other ) );\r\n\t\tvec3 ortho2 = normalize( cross( normal, ortho ) );\r\n\t\treturn mat3( ortho2, ortho, normal );\r\n\r\n\t}\r\n\r\n`;\r\n","export const shape_intersection_functions = /* glsl */`\r\n\r\n\t// Finds the point where the ray intersects the plane defined by u and v and checks if this point\r\n\t// falls in the bounds of the rectangle on that same plane.\r\n\t// Plane intersection: https://lousodrome.net/blog/light/2020/07/03/intersection-of-a-ray-and-a-plane/\r\n\tbool intersectsRectangle( vec3 center, vec3 normal, vec3 u, vec3 v, vec3 rayOrigin, vec3 rayDirection, inout float dist ) {\r\n\r\n\t\tfloat t = dot( center - rayOrigin, normal ) / dot( rayDirection, normal );\r\n\r\n\t\tif ( t > EPSILON ) {\r\n\r\n\t\t\tvec3 p = rayOrigin + rayDirection * t;\r\n\t\t\tvec3 vi = p - center;\r\n\r\n\t\t\t// check if p falls inside the rectangle\r\n\t\t\tfloat a1 = dot( u, vi );\r\n\t\t\tif ( abs( a1 ) <= 0.5 ) {\r\n\r\n\t\t\t\tfloat a2 = dot( v, vi );\r\n\t\t\t\tif ( abs( a2 ) <= 0.5 ) {\r\n\r\n\t\t\t\t\tdist = t;\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\t// Finds the point where the ray intersects the plane defined by u and v and checks if this point\r\n\t// falls in the bounds of the circle on that same plane. See above URL for a description of the plane intersection algorithm.\r\n\tbool intersectsCircle( vec3 position, vec3 normal, vec3 u, vec3 v, vec3 rayOrigin, vec3 rayDirection, inout float dist ) {\r\n\r\n\t\tfloat t = dot( position - rayOrigin, normal ) / dot( rayDirection, normal );\r\n\r\n\t\tif ( t > EPSILON ) {\r\n\r\n\t\t\tvec3 hit = rayOrigin + rayDirection * t;\r\n\t\t\tvec3 vi = hit - position;\r\n\r\n\t\t\tfloat a1 = dot( u, vi );\r\n\t\t\tfloat a2 = dot( v, vi );\r\n\r\n\t\t\tif( length( vec2( a1, a2 ) ) <= 0.5 ) {\r\n\r\n\t\t\t\tdist = t;\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n`;\r\n","\r\nexport const texture_sample_functions = /*glsl */`\r\n\r\n\t// add texel fetch functions for texture arrays\r\n\tvec4 texelFetch1D( sampler2DArray tex, int layer, uint index ) {\r\n\r\n\t\tuint width = uint( textureSize( tex, 0 ).x );\r\n\t\tuvec2 uv;\r\n\t\tuv.x = index % width;\r\n\t\tuv.y = index / width;\r\n\r\n\t\treturn texelFetch( tex, ivec3( uv, layer ), 0 );\r\n\r\n\t}\r\n\r\n\tvec4 textureSampleBarycoord( sampler2DArray tex, int layer, vec3 barycoord, uvec3 faceIndices ) {\r\n\r\n\t\treturn\r\n\t\t\tbarycoord.x * texelFetch1D( tex, layer, faceIndices.x ) +\r\n\t\t\tbarycoord.y * texelFetch1D( tex, layer, faceIndices.y ) +\r\n\t\t\tbarycoord.z * texelFetch1D( tex, layer, faceIndices.z );\r\n\r\n\t}\r\n\r\n`;\r\n","export const util_functions = /* glsl */`\r\n\r\n\t// TODO: possibly this should be renamed something related to material or path tracing logic\r\n\r\n\t#ifndef RAY_OFFSET\r\n\t#define RAY_OFFSET 1e-4\r\n\t#endif\r\n\r\n\t// adjust the hit point by the surface normal by a factor of some offset and the\r\n\t// maximum component-wise value of the current point to accommodate floating point\r\n\t// error as values increase.\r\n\tvec3 stepRayOrigin( vec3 rayOrigin, vec3 rayDirection, vec3 offset, float dist ) {\r\n\r\n\t\tvec3 point = rayOrigin + rayDirection * dist;\r\n\t\tvec3 absPoint = abs( point );\r\n\t\tfloat maxPoint = max( absPoint.x, max( absPoint.y, absPoint.z ) );\r\n\t\treturn point + offset * ( maxPoint + 1.0 ) * RAY_OFFSET;\r\n\r\n\t}\r\n\r\n\t// https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_volume/README.md#attenuation\r\n\tvec3 transmissionAttenuation( float dist, vec3 attColor, float attDist ) {\r\n\r\n\t\tvec3 ot = - log( attColor ) / attDist;\r\n\t\treturn exp( - ot * dist );\r\n\r\n\t}\r\n\r\n\tvec3 getHalfVector( vec3 wi, vec3 wo, float eta ) {\r\n\r\n\t\t// get the half vector - assuming if the light incident vector is on the other side\r\n\t\t// of the that it's transmissive.\r\n\t\tvec3 h;\r\n\t\tif ( wi.z > 0.0 ) {\r\n\r\n\t\t\th = normalize( wi + wo );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Scale by the ior ratio to retrieve the appropriate half vector\r\n\t\t\t// From Section 2.2 on computing the transmission half vector:\r\n\t\t\t// https://blog.selfshadow.com/publications/s2015-shading-course/burley/s2015_pbs_disney_bsdf_notes.pdf\r\n\t\t\th = normalize( wi + wo * eta );\r\n\r\n\t\t}\r\n\r\n\t\th *= sign( h.z );\r\n\t\treturn h;\r\n\r\n\t}\r\n\r\n\tvec3 getHalfVector( vec3 a, vec3 b ) {\r\n\r\n\t\treturn normalize( a + b );\r\n\r\n\t}\r\n\r\n\t// The discrepancy between interpolated surface normal and geometry normal can cause issues when a ray\r\n\t// is cast that is on the top side of the geometry normal plane but below the surface normal plane. If\r\n\t// we find a ray like that we ignore it to avoid artifacts.\r\n\t// This function returns if the direction is on the same side of both planes.\r\n\tbool isDirectionValid( vec3 direction, vec3 surfaceNormal, vec3 geometryNormal ) {\r\n\r\n\t\tbool aboveSurfaceNormal = dot( direction, surfaceNormal ) > 0.0;\r\n\t\tbool aboveGeometryNormal = dot( direction, geometryNormal ) > 0.0;\r\n\t\treturn aboveSurfaceNormal == aboveGeometryNormal;\r\n\r\n\t}\r\n\r\n\t// ray sampling x and z are swapped to align with expected background view\r\n\tvec2 equirectDirectionToUv( vec3 direction ) {\r\n\r\n\t\t// from Spherical.setFromCartesianCoords\r\n\t\tvec2 uv = vec2( atan( direction.z, direction.x ), acos( direction.y ) );\r\n\t\tuv /= vec2( 2.0 * PI, PI );\r\n\r\n\t\t// apply adjustments to get values in range [0, 1] and y right side up\r\n\t\tuv.x += 0.5;\r\n\t\tuv.y = 1.0 - uv.y;\r\n\t\treturn uv;\r\n\r\n\t}\r\n\r\n\tvec3 equirectUvToDirection( vec2 uv ) {\r\n\r\n\t\t// undo above adjustments\r\n\t\tuv.x -= 0.5;\r\n\t\tuv.y = 1.0 - uv.y;\r\n\r\n\t\t// from Vector3.setFromSphericalCoords\r\n\t\tfloat theta = uv.x * 2.0 * PI;\r\n\t\tfloat phi = uv.y * PI;\r\n\r\n\t\tfloat sinPhi = sin( phi );\r\n\r\n\t\treturn vec3( sinPhi * cos( theta ), cos( phi ), sinPhi * sin( theta ) );\r\n\r\n\t}\r\n\r\n\t// power heuristic for multiple importance sampling\r\n\tfloat misHeuristic( float a, float b ) {\r\n\r\n\t\tfloat aa = a * a;\r\n\t\tfloat bb = b * b;\r\n\t\treturn aa / ( aa + bb );\r\n\r\n\t}\r\n\r\n\t// tentFilter from Peter Shirley's 'Realistic Ray Tracing (2nd Edition)' book, pg. 60\r\n\t// erichlof/THREE.js-PathTracing-Renderer/\r\n\tfloat tentFilter( float x ) {\r\n\r\n\t\treturn x < 0.5 ? sqrt( 2.0 * x ) - 1.0 : 1.0 - sqrt( 2.0 - ( 2.0 * x ) );\r\n\r\n\t}\r\n`;\r\n","export const pcg_functions = /* glsl */`\r\n\r\n\t// https://www.shadertoy.com/view/wltcRS\r\n\tuvec4 WHITE_NOISE_SEED;\r\n\r\n\tvoid rng_initialize( vec2 p, int frame ) {\r\n\r\n\t\t// white noise seed\r\n\t\tWHITE_NOISE_SEED = uvec4( p, uint( frame ), uint( p.x ) + uint( p.y ) );\r\n\r\n\t}\r\n\r\n\t// https://www.pcg-random.org/\r\n\tvoid pcg4d( inout uvec4 v ) {\r\n\r\n\t\tv = v * 1664525u + 1013904223u;\r\n\t\tv.x += v.y * v.w;\r\n\t\tv.y += v.z * v.x;\r\n\t\tv.z += v.x * v.y;\r\n\t\tv.w += v.y * v.z;\r\n\t\tv = v ^ ( v >> 16u );\r\n\t\tv.x += v.y*v.w;\r\n\t\tv.y += v.z*v.x;\r\n\t\tv.z += v.x*v.y;\r\n\t\tv.w += v.y*v.z;\r\n\r\n\t}\r\n\r\n\t// returns [ 0, 1 ]\r\n\tfloat pcgRand() {\r\n\r\n\t\tpcg4d( WHITE_NOISE_SEED );\r\n\t\treturn float( WHITE_NOISE_SEED.x ) / float( 0xffffffffu );\r\n\r\n\t}\r\n\r\n\tvec2 pcgRand2() {\r\n\r\n\t\tpcg4d( WHITE_NOISE_SEED );\r\n\t\treturn vec2( WHITE_NOISE_SEED.xy ) / float(0xffffffffu);\r\n\r\n\t}\r\n\r\n\tvec3 pcgRand3() {\r\n\r\n\t\tpcg4d( WHITE_NOISE_SEED );\r\n\t\treturn vec3( WHITE_NOISE_SEED.xyz ) / float( 0xffffffffu );\r\n\r\n\t}\r\n\r\n\tvec4 pcgRand4() {\r\n\r\n\t\tpcg4d( WHITE_NOISE_SEED );\r\n\t\treturn vec4( WHITE_NOISE_SEED ) / float( 0xffffffffu );\r\n\r\n\t}\r\n`;\r\n","export const stratified_functions = /* glsl */`\r\n\r\n\tuniform sampler2D stratifiedTexture;\r\n\tuniform sampler2D stratifiedOffsetTexture;\r\n\r\n\tuint sobolPixelIndex = 0u;\r\n\tuint sobolPathIndex = 0u;\r\n\tuint sobolBounceIndex = 0u;\r\n\tvec4 pixelSeed = vec4( 0 );\r\n\r\n\tvec4 rand4( int v ) {\r\n\r\n\t\tivec2 uv = ivec2( v, sobolBounceIndex );\r\n\t\tvec4 stratifiedSample = texelFetch( stratifiedTexture, uv, 0 );\r\n\t\treturn fract( stratifiedSample + pixelSeed.r ); // blue noise + stratified samples\r\n\r\n\t}\r\n\r\n\tvec3 rand3( int v ) {\r\n\r\n\t\treturn rand4( v ).xyz;\r\n\r\n\t}\r\n\r\n\tvec2 rand2( int v ) {\r\n\r\n\t\treturn rand4( v ).xy;\r\n\r\n\t}\r\n\r\n\tfloat rand( int v ) {\r\n\r\n\t\treturn rand4( v ).x;\r\n\r\n\t}\r\n\r\n\tvoid rng_initialize( vec2 screenCoord, int frame ) {\r\n\r\n\t\t// tile the small noise texture across the entire screen\r\n\t\tivec2 noiseSize = ivec2( textureSize( stratifiedOffsetTexture, 0 ) );\r\n\t\tivec2 pixel = ivec2( screenCoord.xy ) % noiseSize;\r\n\t\tvec2 pixelWidth = 1.0 / vec2( noiseSize );\r\n\t\tvec2 uv = vec2( pixel ) * pixelWidth + pixelWidth * 0.5;\r\n\r\n\t\t// note that using \"texelFetch\" here seems to break Android for some reason\r\n\t\tpixelSeed = texture( stratifiedOffsetTexture, uv );\r\n\r\n\t}\r\n\r\n`;\r\n","/*\r\nwi     : incident vector or light vector (pointing toward the light)\r\nwo     : outgoing vector or view vector (pointing towards the camera)\r\nwh     : computed half vector from wo and wi\r\nEval   : Get the color and pdf for a direction\r\nSample : Get the direction, color, and pdf for a sample\r\neta    : Greek character used to denote the \"ratio of ior\"\r\nf0     : Amount of light reflected when looking at a surface head on - \"fresnel 0\"\r\nf90    : Amount of light reflected at grazing angles\r\n*/\r\n\r\nexport const bsdf_functions = /* glsl */`\r\n\r\n\t// diffuse\r\n\tfloat diffuseEval( vec3 wo, vec3 wi, vec3 wh, SurfaceRecord surf, inout vec3 color ) {\r\n\r\n\t\t// https://schuttejoe.github.io/post/disneybsdf/\r\n\t\tfloat fl = schlickFresnel( wi.z, 0.0 );\r\n\t\tfloat fv = schlickFresnel( wo.z, 0.0 );\r\n\r\n\t\tfloat metalFactor = ( 1.0 - surf.metalness );\r\n\t\tfloat transFactor = ( 1.0 - surf.transmission );\r\n\t\tfloat rr = 0.5 + 2.0 * surf.roughness * fl * fl;\r\n\t\tfloat retro = rr * ( fl + fv + fl * fv * ( rr - 1.0f ) );\r\n\t\tfloat lambert = ( 1.0f - 0.5f * fl ) * ( 1.0f - 0.5f * fv );\r\n\r\n\t\t// TODO: subsurface approx?\r\n\r\n\t\t// float F = evaluateFresnelWeight( dot( wo, wh ), surf.eta, surf.f0 );\r\n\t\tfloat F = disneyFresnel( wo, wi, wh, surf.f0, surf.eta, surf.metalness );\r\n\t\tcolor = ( 1.0 - F ) * transFactor * metalFactor * wi.z * surf.color * ( retro + lambert ) / PI;\r\n\r\n\t\treturn wi.z / PI;\r\n\r\n\t}\r\n\r\n\tvec3 diffuseDirection( vec3 wo, SurfaceRecord surf ) {\r\n\r\n\t\tvec3 lightDirection = sampleSphere( rand2( 11 ) );\r\n\t\tlightDirection.z += 1.0;\r\n\t\tlightDirection = normalize( lightDirection );\r\n\r\n\t\treturn lightDirection;\r\n\r\n\t}\r\n\r\n\t// specular\r\n\tfloat specularEval( vec3 wo, vec3 wi, vec3 wh, SurfaceRecord surf, inout vec3 color ) {\r\n\r\n\t\t// if roughness is set to 0 then D === NaN which results in black pixels\r\n\t\tfloat metalness = surf.metalness;\r\n\t\tfloat roughness = surf.filteredRoughness;\r\n\r\n\t\tfloat eta = surf.eta;\r\n\t\tfloat f0 = surf.f0;\r\n\r\n\t\tvec3 f0Color = mix( f0 * surf.specularColor * surf.specularIntensity, surf.color, surf.metalness );\r\n\t\tvec3 f90Color = vec3( mix( surf.specularIntensity, 1.0, surf.metalness ) );\r\n\t\tvec3 F = evaluateFresnel( dot( wo, wh ), eta, f0Color, f90Color );\r\n\r\n\t\tvec3 iridescenceF = evalIridescence( 1.0, surf.iridescenceIor, dot( wi, wh ), surf.iridescenceThickness, f0Color );\r\n\t\tF = mix( F, iridescenceF,  surf.iridescence );\r\n\r\n\t\t// PDF\r\n\t\t// See 14.1.1 Microfacet BxDFs in https://www.pbr-book.org/\r\n\t\tfloat incidentTheta = acos( wo.z );\r\n\t\tfloat G = ggxShadowMaskG2( wi, wo, roughness );\r\n\t\tfloat D = ggxDistribution( wh, roughness );\r\n\t\tfloat G1 = ggxShadowMaskG1( incidentTheta, roughness );\r\n\t\tfloat denomZ = max( abs( wo.z ), 1e-7 );\r\n\t\tfloat ggxPdf = D * G1 * max( 0.0, abs( dot( wo, wh ) ) ) / denomZ;\r\n\r\n\t\tcolor = wi.z * F * G * D / max( 4.0 * abs( wi.z * wo.z ), 1e-7 );\r\n\t\treturn ggxPdf / max( 4.0 * abs( dot( wo, wh ) ), 1e-7 );\r\n\r\n\t}\r\n\r\n\tvec3 specularDirection( vec3 wo, SurfaceRecord surf ) {\r\n\r\n\t\t// sample ggx vndf distribution which gives a new normal\r\n\t\tfloat roughness = surf.filteredRoughness;\r\n\t\tvec3 halfVector = ggxDirection(\r\n\t\t\two,\r\n\t\t\tvec2( roughness ),\r\n\t\t\trand2( 12 )\r\n\t\t);\r\n\r\n\t\t// apply to new ray by reflecting off the new normal\r\n\t\treturn - reflect( wo, halfVector );\r\n\r\n\t}\r\n\r\n\r\n\t// transmission\r\n\t/*\r\n\tfloat transmissionEval( vec3 wo, vec3 wi, vec3 wh, SurfaceRecord surf, inout vec3 color ) {\r\n\r\n\t\t// See section 4.2 in https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.pdf\r\n\r\n\t\tfloat filteredRoughness = surf.filteredRoughness;\r\n\t\tfloat eta = surf.eta;\r\n\t\tbool frontFace = surf.frontFace;\r\n\t\tbool thinFilm = surf.thinFilm;\r\n\r\n\t\tcolor = surf.transmission * surf.color;\r\n\r\n\t\tfloat denom = pow( eta * dot( wi, wh ) + dot( wo, wh ), 2.0 );\r\n\t\treturn ggxPDF( wo, wh, filteredRoughness ) / max( denom, 1e-7 );\r\n\r\n\t}\r\n\r\n\tvec3 transmissionDirection( vec3 wo, SurfaceRecord surf ) {\r\n\r\n\t\tfloat filteredRoughness = surf.filteredRoughness;\r\n\t\tfloat eta = surf.eta;\r\n\t\tbool frontFace = surf.frontFace;\r\n\r\n\t\t// sample ggx vndf distribution which gives a new normal\r\n\t\tvec3 halfVector = ggxDirection(\r\n\t\t\two,\r\n\t\t\tvec2( filteredRoughness ),\r\n\t\t\trand2( 13 )\r\n\t\t);\r\n\r\n\t\tvec3 lightDirection = refract( normalize( - wo ), halfVector, eta );\r\n\t\tif ( surf.thinFilm ) {\r\n\r\n\t\t\tlightDirection = - refract( normalize( - lightDirection ), - vec3( 0.0, 0.0, 1.0 ), 1.0 / eta );\r\n\r\n\t\t}\r\n\r\n\t\treturn normalize( lightDirection );\r\n\r\n\t}\r\n\t*/\r\n\r\n\t// TODO: This is just using a basic cosine-weighted specular distribution with an\r\n\t// incorrect PDF value at the moment. Update it to correctly use a GGX distribution\r\n\tfloat transmissionEval( vec3 wo, vec3 wi, vec3 wh, SurfaceRecord surf, inout vec3 color ) {\r\n\r\n\t\tcolor = surf.transmission * surf.color;\r\n\r\n\t\t// PDF\r\n\t\t// float F = evaluateFresnelWeight( dot( wo, wh ), surf.eta, surf.f0 );\r\n\t\t// float F = disneyFresnel( wo, wi, wh, surf.f0, surf.eta, surf.metalness );\r\n\t\t// if ( F >= 1.0 ) {\r\n\r\n\t\t// \treturn 0.0;\r\n\r\n\t\t// }\r\n\r\n\t\t// return 1.0 / ( 1.0 - F );\r\n\r\n\t\t// reverted to previous to transmission. The above was causing black pixels\r\n\t\tfloat eta = surf.eta;\r\n\t\tfloat f0 = surf.f0;\r\n\t\tfloat cosTheta = min( wo.z, 1.0 );\r\n\t\tfloat sinTheta = sqrt( 1.0 - cosTheta * cosTheta );\r\n\t\tfloat reflectance = schlickFresnel( cosTheta, f0 );\r\n\t\tbool cannotRefract = eta * sinTheta > 1.0;\r\n\t\tif ( cannotRefract ) {\r\n\r\n\t\t\treturn 0.0;\r\n\r\n\t\t}\r\n\r\n\t\treturn 1.0 / ( 1.0 - reflectance );\r\n\r\n\t}\r\n\r\n\tvec3 transmissionDirection( vec3 wo, SurfaceRecord surf ) {\r\n\r\n\t\tfloat roughness = surf.filteredRoughness;\r\n\t\tfloat eta = surf.eta;\r\n\t\tvec3 halfVector = normalize( vec3( 0.0, 0.0, 1.0 ) + sampleSphere( rand2( 13 ) ) * roughness );\r\n\t\tvec3 lightDirection = refract( normalize( - wo ), halfVector, eta );\r\n\r\n\t\tif ( surf.thinFilm ) {\r\n\r\n\t\t\tlightDirection = - refract( normalize( - lightDirection ), - vec3( 0.0, 0.0, 1.0 ), 1.0 / eta );\r\n\r\n\t\t}\r\n\t\treturn normalize( lightDirection );\r\n\r\n\t}\r\n\r\n\t// clearcoat\r\n\tfloat clearcoatEval( vec3 wo, vec3 wi, vec3 wh, SurfaceRecord surf, inout vec3 color ) {\r\n\r\n\t\tfloat ior = 1.5;\r\n\t\tfloat f0 = iorRatioToF0( ior );\r\n\t\tbool frontFace = surf.frontFace;\r\n\t\tfloat roughness = surf.filteredClearcoatRoughness;\r\n\r\n\t\tfloat eta = frontFace ? 1.0 / ior : ior;\r\n\t\tfloat G = ggxShadowMaskG2( wi, wo, roughness );\r\n\t\tfloat D = ggxDistribution( wh, roughness );\r\n\t\tfloat F = schlickFresnel( dot( wi, wh ), f0 );\r\n\r\n\t\tfloat fClearcoat = F * D * G / ( 4.0 * abs( wi.z * wo.z ) );\r\n\t\tcolor = color * ( 1.0 - surf.clearcoat * F ) + fClearcoat * surf.clearcoat * wi.z;\r\n\r\n\t\t// PDF\r\n\t\t// See equation (27) in http://jcgt.org/published/0003/02/03/\r\n\t\treturn ggxPDF( wo, wh, roughness ) / ( 4.0 * dot( wi, wh ) );\r\n\r\n\t}\r\n\r\n\tvec3 clearcoatDirection( vec3 wo, SurfaceRecord surf ) {\r\n\r\n\t\t// sample ggx vndf distribution which gives a new normal\r\n\t\tfloat roughness = surf.filteredClearcoatRoughness;\r\n\t\tvec3 halfVector = ggxDirection(\r\n\t\t\two,\r\n\t\t\tvec2( roughness ),\r\n\t\t\trand2( 14 )\r\n\t\t);\r\n\r\n\t\t// apply to new ray by reflecting off the new normal\r\n\t\treturn - reflect( wo, halfVector );\r\n\r\n\t}\r\n\r\n\t// sheen\r\n\tvec3 sheenColor( vec3 wo, vec3 wi, vec3 wh, SurfaceRecord surf ) {\r\n\r\n\t\tfloat cosThetaO = saturateCos( wo.z );\r\n\t\tfloat cosThetaI = saturateCos( wi.z );\r\n\t\tfloat cosThetaH = wh.z;\r\n\r\n\t\tfloat D = velvetD( cosThetaH, surf.sheenRoughness );\r\n\t\tfloat G = velvetG( cosThetaO, cosThetaI, surf.sheenRoughness );\r\n\r\n\t\t// See equation (1) in http://www.aconty.com/pdf/s2017_pbs_imageworks_sheen.pdf\r\n\t\tvec3 color = surf.sheenColor;\r\n\t\tcolor *= D * G / ( 4.0 * abs( cosThetaO * cosThetaI ) );\r\n\t\tcolor *= wi.z;\r\n\r\n\t\treturn color;\r\n\r\n\t}\r\n\r\n\t// bsdf\r\n\tvoid getLobeWeights(\r\n\t\tvec3 wo, vec3 wi, vec3 wh, vec3 clearcoatWo, SurfaceRecord surf,\r\n\t\tinout float diffuseWeight, inout float specularWeight, inout float transmissionWeight, inout float clearcoatWeight\r\n\t) {\r\n\r\n\t\tfloat metalness = surf.metalness;\r\n\t\tfloat transmission = surf.transmission;\r\n\t\t// float fEstimate = evaluateFresnelWeight( dot( wo, wh ), surf.eta, surf.f0 );\r\n\t\tfloat fEstimate = disneyFresnel( wo, wi, wh, surf.f0, surf.eta, surf.metalness );\r\n\r\n\t\tfloat transSpecularProb = mix( max( 0.25, fEstimate ), 1.0, metalness );\r\n\t\tfloat diffSpecularProb = 0.5 + 0.5 * metalness;\r\n\r\n\t\tdiffuseWeight = ( 1.0 - transmission ) * ( 1.0 - diffSpecularProb );\r\n\t\tspecularWeight = transmission * transSpecularProb + ( 1.0 - transmission ) * diffSpecularProb;\r\n\t\ttransmissionWeight = transmission * ( 1.0 - transSpecularProb );\r\n\t\tclearcoatWeight = surf.clearcoat * schlickFresnel( clearcoatWo.z, 0.04 );\r\n\r\n\t\tfloat totalWeight = diffuseWeight + specularWeight + transmissionWeight + clearcoatWeight;\r\n\t\tdiffuseWeight /= totalWeight;\r\n\t\tspecularWeight /= totalWeight;\r\n\t\ttransmissionWeight /= totalWeight;\r\n\t\tclearcoatWeight /= totalWeight;\r\n\t}\r\n\r\n\tfloat bsdfEval(\r\n\t\tvec3 wo, vec3 clearcoatWo, vec3 wi, vec3 clearcoatWi, SurfaceRecord surf,\r\n\t\tfloat diffuseWeight, float specularWeight, float transmissionWeight, float clearcoatWeight, inout float specularPdf, inout vec3 color\r\n\t) {\r\n\r\n\t\tfloat metalness = surf.metalness;\r\n\t\tfloat transmission = surf.transmission;\r\n\r\n\t\tfloat spdf = 0.0;\r\n\t\tfloat dpdf = 0.0;\r\n\t\tfloat tpdf = 0.0;\r\n\t\tfloat cpdf = 0.0;\r\n\t\tcolor = vec3( 0.0 );\r\n\r\n\t\tvec3 halfVector = getHalfVector( wi, wo, surf.eta );\r\n\r\n\t\t// diffuse\r\n\t\tif ( diffuseWeight > 0.0 && wi.z > 0.0 ) {\r\n\r\n\t\t\tdpdf = diffuseEval( wo, wi, halfVector, surf, color );\r\n\t\t\tcolor *= 1.0 - surf.transmission;\r\n\r\n\t\t}\r\n\r\n\t\t// ggx specular\r\n\t\tif ( specularWeight > 0.0 && wi.z > 0.0 ) {\r\n\r\n\t\t\tvec3 outColor;\r\n\t\t\tspdf = specularEval( wo, wi, getHalfVector( wi, wo ), surf, outColor );\r\n\t\t\tcolor += outColor;\r\n\r\n\t\t}\r\n\r\n\t\t// transmission\r\n\t\tif ( transmissionWeight > 0.0 && wi.z < 0.0 ) {\r\n\r\n\t\t\ttpdf = transmissionEval( wo, wi, halfVector, surf, color );\r\n\r\n\t\t}\r\n\r\n\t\t// sheen\r\n\t\tcolor *= mix( 1.0, sheenAlbedoScaling( wo, wi, surf ), surf.sheen );\r\n\t\tcolor += sheenColor( wo, wi, halfVector, surf ) * surf.sheen;\r\n\r\n\t\t// clearcoat\r\n\t\tif ( clearcoatWi.z >= 0.0 && clearcoatWeight > 0.0 ) {\r\n\r\n\t\t\tvec3 clearcoatHalfVector = getHalfVector( clearcoatWo, clearcoatWi );\r\n\t\t\tcpdf = clearcoatEval( clearcoatWo, clearcoatWi, clearcoatHalfVector, surf, color );\r\n\r\n\t\t}\r\n\r\n\t\tfloat pdf =\r\n\t\t\tdpdf * diffuseWeight\r\n\t\t\t+ spdf * specularWeight\r\n\t\t\t+ tpdf * transmissionWeight\r\n\t\t\t+ cpdf * clearcoatWeight;\r\n\r\n\t\t// retrieve specular rays for the shadows flag\r\n\t\tspecularPdf = spdf * specularWeight + cpdf * clearcoatWeight;\r\n\r\n\t\treturn pdf;\r\n\r\n\t}\r\n\r\n\tfloat bsdfResult( vec3 worldWo, vec3 worldWi, SurfaceRecord surf, inout vec3 color ) {\r\n\r\n\t\tif ( surf.volumeParticle ) {\r\n\r\n\t\t\tcolor = surf.color / ( 4.0 * PI );\r\n\t\t\treturn 1.0 / ( 4.0 * PI );\r\n\r\n\t\t}\r\n\r\n\t\tvec3 wo = normalize( surf.normalInvBasis * worldWo );\r\n\t\tvec3 wi = normalize( surf.normalInvBasis * worldWi );\r\n\r\n\t\tvec3 clearcoatWo = normalize( surf.clearcoatInvBasis * worldWo );\r\n\t\tvec3 clearcoatWi = normalize( surf.clearcoatInvBasis * worldWi );\r\n\r\n\t\tvec3 wh = getHalfVector( wo, wi, surf.eta );\r\n\t\tfloat diffuseWeight;\r\n\t\tfloat specularWeight;\r\n\t\tfloat transmissionWeight;\r\n\t\tfloat clearcoatWeight;\r\n\t\tgetLobeWeights( wo, wi, wh, clearcoatWo, surf, diffuseWeight, specularWeight, transmissionWeight, clearcoatWeight );\r\n\r\n\t\tfloat specularPdf;\r\n\t\treturn bsdfEval( wo, clearcoatWo, wi, clearcoatWi, surf, diffuseWeight, specularWeight, transmissionWeight, clearcoatWeight, specularPdf, color );\r\n\r\n\t}\r\n\r\n\tScatterRecord bsdfSample( vec3 worldWo, SurfaceRecord surf ) {\r\n\r\n\t\tif ( surf.volumeParticle ) {\r\n\r\n\t\t\tScatterRecord sampleRec;\r\n\t\t\tsampleRec.specularPdf = 0.0;\r\n\t\t\tsampleRec.pdf = 1.0 / ( 4.0 * PI );\r\n\t\t\tsampleRec.direction = sampleSphere( rand2( 16 ) );\r\n\t\t\tsampleRec.color = surf.color / ( 4.0 * PI );\r\n\t\t\treturn sampleRec;\r\n\r\n\t\t}\r\n\r\n\t\tvec3 wo = normalize( surf.normalInvBasis * worldWo );\r\n\t\tvec3 clearcoatWo = normalize( surf.clearcoatInvBasis * worldWo );\r\n\t\tmat3 normalBasis = surf.normalBasis;\r\n\t\tmat3 invBasis = surf.normalInvBasis;\r\n\t\tmat3 clearcoatNormalBasis = surf.clearcoatBasis;\r\n\t\tmat3 clearcoatInvBasis = surf.clearcoatInvBasis;\r\n\r\n\t\tfloat diffuseWeight;\r\n\t\tfloat specularWeight;\r\n\t\tfloat transmissionWeight;\r\n\t\tfloat clearcoatWeight;\r\n\t\t// using normal and basically-reflected ray since we don't have proper half vector here\r\n\t\tgetLobeWeights( wo, wo, vec3( 0, 0, 1 ), clearcoatWo, surf, diffuseWeight, specularWeight, transmissionWeight, clearcoatWeight );\r\n\r\n\t\tfloat pdf[4];\r\n\t\tpdf[0] = diffuseWeight;\r\n\t\tpdf[1] = specularWeight;\r\n\t\tpdf[2] = transmissionWeight;\r\n\t\tpdf[3] = clearcoatWeight;\r\n\r\n\t\tfloat cdf[4];\r\n\t\tcdf[0] = pdf[0];\r\n\t\tcdf[1] = pdf[1] + cdf[0];\r\n\t\tcdf[2] = pdf[2] + cdf[1];\r\n\t\tcdf[3] = pdf[3] + cdf[2];\r\n\r\n\t\tif( cdf[3] != 0.0 ) {\r\n\r\n\t\t\tfloat invMaxCdf = 1.0 / cdf[3];\r\n\t\t\tcdf[0] *= invMaxCdf;\r\n\t\t\tcdf[1] *= invMaxCdf;\r\n\t\t\tcdf[2] *= invMaxCdf;\r\n\t\t\tcdf[3] *= invMaxCdf;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcdf[0] = 1.0;\r\n\t\t\tcdf[1] = 0.0;\r\n\t\t\tcdf[2] = 0.0;\r\n\t\t\tcdf[3] = 0.0;\r\n\r\n\t\t}\r\n\r\n\t\tvec3 wi;\r\n\t\tvec3 clearcoatWi;\r\n\r\n\t\tfloat r = rand( 15 );\r\n\t\tif ( r <= cdf[0] ) { // diffuse\r\n\r\n\t\t\twi = diffuseDirection( wo, surf );\r\n\t\t\tclearcoatWi = normalize( clearcoatInvBasis * normalize( normalBasis * wi ) );\r\n\r\n\t\t} else if ( r <= cdf[1] ) { // specular\r\n\r\n\t\t\twi = specularDirection( wo, surf );\r\n\t\t\tclearcoatWi = normalize( clearcoatInvBasis * normalize( normalBasis * wi ) );\r\n\r\n\t\t} else if ( r <= cdf[2] ) { // transmission / refraction\r\n\r\n\t\t\twi = transmissionDirection( wo, surf );\r\n\t\t\tclearcoatWi = normalize( clearcoatInvBasis * normalize( normalBasis * wi ) );\r\n\r\n\t\t} else if ( r <= cdf[3] ) { // clearcoat\r\n\r\n\t\t\tclearcoatWi = clearcoatDirection( clearcoatWo, surf );\r\n\t\t\twi = normalize( invBasis * normalize( clearcoatNormalBasis * clearcoatWi ) );\r\n\r\n\t\t}\r\n\r\n\t\tScatterRecord result;\r\n\t\tresult.pdf = bsdfEval( wo, clearcoatWo, wi, clearcoatWi, surf, diffuseWeight, specularWeight, transmissionWeight, clearcoatWeight, result.specularPdf, result.color );\r\n\t\tresult.direction = normalize( surf.normalBasis * wi );\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n`;\r\n","export const fog_functions = /* glsl */`\r\n\r\n\t// returns the hit distance given the material density\r\n\tfloat intersectFogVolume( Material material, float u ) {\r\n\r\n\t\t// https://raytracing.github.io/books/RayTracingTheNextWeek.html#volumes/constantdensitymediums\r\n\t\treturn material.opacity == 0.0 ? INFINITY : ( - 1.0 / material.opacity ) * log( u );\r\n\r\n\t}\r\n\r\n\tScatterRecord sampleFogVolume( SurfaceRecord surf, vec2 uv ) {\r\n\r\n\t\tScatterRecord sampleRec;\r\n\t\tsampleRec.specularPdf = 0.0;\r\n\t\tsampleRec.pdf = 1.0 / ( 2.0 * PI );\r\n\t\tsampleRec.direction = sampleSphere( uv );\r\n\t\tsampleRec.color = surf.color;\r\n\t\treturn sampleRec;\r\n\r\n\t}\r\n\r\n`;\r\n","export const ggx_functions = /* glsl */`\r\n\r\n\t// The GGX functions provide sampling and distribution information for normals as output so\r\n\t// in order to get probability of scatter direction the half vector must be computed and provided.\r\n\t// [0] https://www.cs.cornell.edu/~srm/publications/EGSR07-btdf.pdf\r\n\t// [1] https://hal.archives-ouvertes.fr/hal-01509746/document\r\n\t// [2] http://jcgt.org/published/0007/04/01/\r\n\t// [4] http://jcgt.org/published/0003/02/03/\r\n\r\n\t// trowbridge-reitz === GGX === GTR\r\n\r\n\tvec3 ggxDirection( vec3 incidentDir, vec2 roughness, vec2 uv ) {\r\n\r\n\t\t// TODO: try GGXVNDF implementation from reference [2], here. Needs to update ggxDistribution\r\n\t\t// function below, as well\r\n\r\n\t\t// Implementation from reference [1]\r\n\t\t// stretch view\r\n\t\tvec3 V = normalize( vec3( roughness * incidentDir.xy, incidentDir.z ) );\r\n\r\n\t\t// orthonormal basis\r\n\t\tvec3 T1 = ( V.z < 0.9999 ) ? normalize( cross( V, vec3( 0.0, 0.0, 1.0 ) ) ) : vec3( 1.0, 0.0, 0.0 );\r\n\t\tvec3 T2 = cross( T1, V );\r\n\r\n\t\t// sample point with polar coordinates (r, phi)\r\n\t\tfloat a = 1.0 / ( 1.0 + V.z );\r\n\t\tfloat r = sqrt( uv.x );\r\n\t\tfloat phi = ( uv.y < a ) ? uv.y / a * PI : PI + ( uv.y - a ) / ( 1.0 - a ) * PI;\r\n\t\tfloat P1 = r * cos( phi );\r\n\t\tfloat P2 = r * sin( phi ) * ( ( uv.y < a ) ? 1.0 : V.z );\r\n\r\n\t\t// compute normal\r\n\t\tvec3 N = P1 * T1 + P2 * T2 + V * sqrt( max( 0.0, 1.0 - P1 * P1 - P2 * P2 ) );\r\n\r\n\t\t// unstretch\r\n\t\tN = normalize( vec3( roughness * N.xy, max( 0.0, N.z ) ) );\r\n\r\n\t\treturn N;\r\n\r\n\t}\r\n\r\n\t// Below are PDF and related functions for use in a Monte Carlo path tracer\r\n\t// as specified in Appendix B of the following paper\r\n\t// See equation (34) from reference [0]\r\n\tfloat ggxLamda( float theta, float roughness ) {\r\n\r\n\t\tfloat tanTheta = tan( theta );\r\n\t\tfloat tanTheta2 = tanTheta * tanTheta;\r\n\t\tfloat alpha2 = roughness * roughness;\r\n\r\n\t\tfloat numerator = - 1.0 + sqrt( 1.0 + alpha2 * tanTheta2 );\r\n\t\treturn numerator / 2.0;\r\n\r\n\t}\r\n\r\n\t// See equation (34) from reference [0]\r\n\tfloat ggxShadowMaskG1( float theta, float roughness ) {\r\n\r\n\t\treturn 1.0 / ( 1.0 + ggxLamda( theta, roughness ) );\r\n\r\n\t}\r\n\r\n\t// See equation (125) from reference [4]\r\n\tfloat ggxShadowMaskG2( vec3 wi, vec3 wo, float roughness ) {\r\n\r\n\t\tfloat incidentTheta = acos( wi.z );\r\n\t\tfloat scatterTheta = acos( wo.z );\r\n\t\treturn 1.0 / ( 1.0 + ggxLamda( incidentTheta, roughness ) + ggxLamda( scatterTheta, roughness ) );\r\n\r\n\t}\r\n\r\n\t// See equation (33) from reference [0]\r\n\tfloat ggxDistribution( vec3 halfVector, float roughness ) {\r\n\r\n\t\tfloat a2 = roughness * roughness;\r\n\t\ta2 = max( EPSILON, a2 );\r\n\t\tfloat cosTheta = halfVector.z;\r\n\t\tfloat cosTheta4 = pow( cosTheta, 4.0 );\r\n\r\n\t\tif ( cosTheta == 0.0 ) return 0.0;\r\n\r\n\t\tfloat theta = acosSafe( halfVector.z );\r\n\t\tfloat tanTheta = tan( theta );\r\n\t\tfloat tanTheta2 = pow( tanTheta, 2.0 );\r\n\r\n\t\tfloat denom = PI * cosTheta4 * pow( a2 + tanTheta2, 2.0 );\r\n\t\treturn ( a2 / denom );\r\n\r\n\t}\r\n\r\n\t// See equation (3) from reference [2]\r\n\tfloat ggxPDF( vec3 wi, vec3 halfVector, float roughness ) {\r\n\r\n\t\tfloat incidentTheta = acos( wi.z );\r\n\t\tfloat D = ggxDistribution( halfVector, roughness );\r\n\t\tfloat G1 = ggxShadowMaskG1( incidentTheta, roughness );\r\n\r\n\t\treturn D * G1 * max( 0.0, dot( wi, halfVector ) ) / max( abs( wi.z ), 1e-7 );\r\n\r\n\t}\r\n\r\n`;\r\n","export const iridescence_functions = /* glsl */`\r\n\r\n\t// XYZ to sRGB color space\r\n\tconst mat3 XYZ_TO_REC709 = mat3(\r\n\t\t3.2404542, -0.9692660,  0.0556434,\r\n\t\t-1.5371385,  1.8760108, -0.2040259,\r\n\t\t-0.4985314,  0.0415560,  1.0572252\r\n\t);\r\n\r\n\tvec3 fresnel0ToIor( vec3 fresnel0 ) {\r\n\r\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\r\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\r\n\r\n\t}\r\n\r\n\t// Conversion FO/IOR\r\n\tvec3 iorToFresnel0( vec3 transmittedIor, float incidentIor ) {\r\n\r\n\t\treturn square( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\r\n\r\n\t}\r\n\r\n\t// ior is a value between 1.0 and 3.0. 1.0 is air interface\r\n\tfloat iorToFresnel0( float transmittedIor, float incidentIor ) {\r\n\r\n\t\treturn square( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ) );\r\n\r\n\t}\r\n\r\n\t// Fresnel equations for dielectric/dielectric interfaces. See https://belcour.github.io/blog/research/2017/05/01/brdf-thin-film.html\r\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\r\n\r\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\r\n\r\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\r\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\r\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\r\n\r\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - square( phase ) * var );\r\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * square( phase ) );\r\n\t\txyz /= 1.0685e-7;\r\n\r\n\t\tvec3 srgb = XYZ_TO_REC709 * xyz;\r\n\t\treturn srgb;\r\n\r\n\t}\r\n\r\n\t// See Section 4. Analytic Spectral Integration, A Practical Extension to Microfacet Theory for the Modeling of Varying Iridescence, https://hal.archives-ouvertes.fr/hal-01518344/document\r\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\r\n\r\n\t\tvec3 I;\r\n\r\n\t\t// Force iridescenceIor -> outsideIOR when thinFilmThickness -> 0.0\r\n\t\tfloat iridescenceIor = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\r\n\r\n\t\t// Evaluate the cosTheta on the base layer (Snell law)\r\n\t\tfloat sinTheta2Sq = square( outsideIOR / iridescenceIor ) * ( 1.0 - square( cosTheta1 ) );\r\n\r\n\t\t// Handle TIR:\r\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\r\n\t\tif ( cosTheta2Sq < 0.0 ) {\r\n\r\n\t\t\treturn vec3( 1.0 );\r\n\r\n\t\t}\r\n\r\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\r\n\r\n\t\t// First interface\r\n\t\tfloat R0 = iorToFresnel0( iridescenceIor, outsideIOR );\r\n\t\tfloat R12 = schlickFresnel( cosTheta1, R0 );\r\n\t\tfloat R21 = R12;\r\n\t\tfloat T121 = 1.0 - R12;\r\n\t\tfloat phi12 = 0.0;\r\n\t\tif ( iridescenceIor < outsideIOR ) {\r\n\r\n\t\t\tphi12 = PI;\r\n\r\n\t\t}\r\n\r\n\t\tfloat phi21 = PI - phi12;\r\n\r\n\t\t// Second interface\r\n\t\tvec3 baseIOR = fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) ); // guard against 1.0\r\n\t\tvec3 R1 = iorToFresnel0( baseIOR, iridescenceIor );\r\n\t\tvec3 R23 = schlickFresnel( cosTheta2, R1 );\r\n\t\tvec3 phi23 = vec3( 0.0 );\r\n\t\tif ( baseIOR[0] < iridescenceIor ) {\r\n\r\n\t\t\tphi23[ 0 ] = PI;\r\n\r\n\t\t}\r\n\r\n\t\tif ( baseIOR[1] < iridescenceIor ) {\r\n\r\n\t\t\tphi23[ 1 ] = PI;\r\n\r\n\t\t}\r\n\r\n\t\tif ( baseIOR[2] < iridescenceIor ) {\r\n\r\n\t\t\tphi23[ 2 ] = PI;\r\n\r\n\t\t}\r\n\r\n\t\t// Phase shift\r\n\t\tfloat OPD = 2.0 * iridescenceIor * thinFilmThickness * cosTheta2;\r\n\t\tvec3 phi = vec3( phi21 ) + phi23;\r\n\r\n\t\t// Compound terms\r\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\r\n\t\tvec3 r123 = sqrt( R123 );\r\n\t\tvec3 Rs = square( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\r\n\r\n\t\t// Reflectance term for m = 0 (DC term amplitude)\r\n\t\tvec3 C0 = R12 + Rs;\r\n\t\tI = C0;\r\n\r\n\t\t// Reflectance term for m > 0 (pairs of diracs)\r\n\t\tvec3 Cm = Rs - T121;\r\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\r\n\r\n\t\t\tCm *= r123;\r\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\r\n\t\t\tI += Cm * Sm;\r\n\r\n\t\t}\r\n\r\n\t\t// Since out of gamut colors might be produced, negative color values are clamped to 0.\r\n\t\treturn max( I, vec3( 0.0 ) );\r\n\r\n\t}\r\n\r\n`;\r\n","export const sheen_functions = /* glsl */`\r\n\r\n\t// See equation (2) in http://www.aconty.com/pdf/s2017_pbs_imageworks_sheen.pdf\r\n\tfloat velvetD( float cosThetaH, float roughness ) {\r\n\r\n\t\tfloat alpha = max( roughness, 0.07 );\r\n\t\talpha = alpha * alpha;\r\n\r\n\t\tfloat invAlpha = 1.0 / alpha;\r\n\r\n\t\tfloat sqrCosThetaH = cosThetaH * cosThetaH;\r\n\t\tfloat sinThetaH = max( 1.0 - sqrCosThetaH, 0.001 );\r\n\r\n\t\treturn ( 2.0 + invAlpha ) * pow( sinThetaH, 0.5 * invAlpha ) / ( 2.0 * PI );\r\n\r\n\t}\r\n\r\n\tfloat velvetParamsInterpolate( int i, float oneMinusAlphaSquared ) {\r\n\r\n\t\tconst float p0[5] = float[5]( 25.3245, 3.32435, 0.16801, -1.27393, -4.85967 );\r\n\t\tconst float p1[5] = float[5]( 21.5473, 3.82987, 0.19823, -1.97760, -4.32054 );\r\n\r\n\t\treturn mix( p1[i], p0[i], oneMinusAlphaSquared );\r\n\r\n\t}\r\n\r\n\tfloat velvetL( float x, float alpha ) {\r\n\r\n\t\tfloat oneMinusAlpha = 1.0 - alpha;\r\n\t\tfloat oneMinusAlphaSquared = oneMinusAlpha * oneMinusAlpha;\r\n\r\n\t\tfloat a = velvetParamsInterpolate( 0, oneMinusAlphaSquared );\r\n\t\tfloat b = velvetParamsInterpolate( 1, oneMinusAlphaSquared );\r\n\t\tfloat c = velvetParamsInterpolate( 2, oneMinusAlphaSquared );\r\n\t\tfloat d = velvetParamsInterpolate( 3, oneMinusAlphaSquared );\r\n\t\tfloat e = velvetParamsInterpolate( 4, oneMinusAlphaSquared );\r\n\r\n\t\treturn a / ( 1.0 + b * pow( abs( x ), c ) ) + d * x + e;\r\n\r\n\t}\r\n\r\n\t// See equation (3) in http://www.aconty.com/pdf/s2017_pbs_imageworks_sheen.pdf\r\n\tfloat velvetLambda( float cosTheta, float alpha ) {\r\n\r\n\t\treturn abs( cosTheta ) < 0.5 ? exp( velvetL( cosTheta, alpha ) ) : exp( 2.0 * velvetL( 0.5, alpha ) - velvetL( 1.0 - cosTheta, alpha ) );\r\n\r\n\t}\r\n\r\n\t// See Section 3, Shadowing Term, in http://www.aconty.com/pdf/s2017_pbs_imageworks_sheen.pdf\r\n\tfloat velvetG( float cosThetaO, float cosThetaI, float roughness ) {\r\n\r\n\t\tfloat alpha = max( roughness, 0.07 );\r\n\t\talpha = alpha * alpha;\r\n\r\n\t\treturn 1.0 / ( 1.0 + velvetLambda( cosThetaO, alpha ) + velvetLambda( cosThetaI, alpha ) );\r\n\r\n\t}\r\n\r\n\tfloat directionalAlbedoSheen( float cosTheta, float alpha ) {\r\n\r\n\t\tcosTheta = saturate( cosTheta );\r\n\r\n\t\tfloat c = 1.0 - cosTheta;\r\n\t\tfloat c3 = c * c * c;\r\n\r\n\t\treturn 0.65584461 * c3 + 1.0 / ( 4.16526551 + exp( -7.97291361 * sqrt( alpha ) + 6.33516894 ) );\r\n\r\n\t}\r\n\r\n\tfloat sheenAlbedoScaling( vec3 wo, vec3 wi, SurfaceRecord surf ) {\r\n\r\n\t\tfloat alpha = max( surf.sheenRoughness, 0.07 );\r\n\t\talpha = alpha * alpha;\r\n\r\n\t\tfloat maxSheenColor = max( max( surf.sheenColor.r, surf.sheenColor.g ), surf.sheenColor.b );\r\n\r\n\t\tfloat eWo = directionalAlbedoSheen( saturateCos( wo.z ), alpha );\r\n\t\tfloat eWi = directionalAlbedoSheen( saturateCos( wi.z ), alpha );\r\n\r\n\t\treturn min( 1.0 - maxSheenColor * eWo, 1.0 - maxSheenColor * eWi );\r\n\r\n\t}\r\n\r\n\t// See Section 5, Layering, in http://www.aconty.com/pdf/s2017_pbs_imageworks_sheen.pdf\r\n\tfloat sheenAlbedoScaling( vec3 wo, SurfaceRecord surf ) {\r\n\r\n\t\tfloat alpha = max( surf.sheenRoughness, 0.07 );\r\n\t\talpha = alpha * alpha;\r\n\r\n\t\tfloat maxSheenColor = max( max( surf.sheenColor.r, surf.sheenColor.g ), surf.sheenColor.b );\r\n\r\n\t\tfloat eWo = directionalAlbedoSheen( saturateCos( wo.z ), alpha );\r\n\r\n\t\treturn 1.0 - maxSheenColor * eWo;\r\n\r\n\t}\r\n\r\n`;\r\n","export const inside_fog_volume_function = /* glsl */`\r\n\r\n#ifndef FOG_CHECK_ITERATIONS\r\n#define FOG_CHECK_ITERATIONS 30\r\n#endif\r\n\r\n// returns whether the given material is a fog material or not\r\nbool isMaterialFogVolume( sampler2D materials, uint materialIndex ) {\r\n\r\n\tuint i = materialIndex * uint( MATERIAL_PIXELS );\r\n\tvec4 s14 = texelFetch1D( materials, i + 14u );\r\n\treturn bool( int( s14.b ) & 4 );\r\n\r\n}\r\n\r\n// returns true if we're within the first fog volume we hit\r\nbool bvhIntersectFogVolumeHit(\r\n\tvec3 rayOrigin, vec3 rayDirection,\r\n\tusampler2D materialIndexAttribute, sampler2D materials,\r\n\tinout Material material\r\n) {\r\n\r\n\tmaterial.fogVolume = false;\r\n\r\n\tfor ( int i = 0; i < FOG_CHECK_ITERATIONS; i ++ ) {\r\n\r\n\t\t// find nearest hit\r\n\t\tuvec4 faceIndices = uvec4( 0u );\r\n\t\tvec3 faceNormal = vec3( 0.0, 0.0, 1.0 );\r\n\t\tvec3 barycoord = vec3( 0.0 );\r\n\t\tfloat side = 1.0;\r\n\t\tfloat dist = 0.0;\r\n\t\tbool hit = bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );\r\n\t\tif ( hit ) {\r\n\r\n\t\t\t// if it's a fog volume return whether we hit the front or back face\r\n\t\t\tuint materialIndex = uTexelFetch1D( materialIndexAttribute, faceIndices.x ).r;\r\n\t\t\tif ( isMaterialFogVolume( materials, materialIndex ) ) {\r\n\r\n\t\t\t\tmaterial = readMaterialInfo( materials, materialIndex );\r\n\t\t\t\treturn side == - 1.0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// move the ray forward\r\n\t\t\t\trayOrigin = stepRayOrigin( rayOrigin, rayDirection, - faceNormal, dist );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\n`;\r\n","export const ray_any_hit_function = /* glsl */`\r\n\r\n\tbool bvhIntersectAnyHit(\r\n\t\tvec3 rayOrigin, vec3 rayDirection,\r\n\r\n\t\t// output variables\r\n\t\tinout float side, inout float dist\r\n\t) {\r\n\r\n\t\tuvec4 faceIndices;\r\n\t\tvec3 faceNormal;\r\n\t\tvec3 barycoord;\r\n\r\n\t\t// stack needs to be twice as long as the deepest tree we expect because\r\n\t\t// we push both the left and right child onto the stack every traversal\r\n\t\tint ptr = 0;\r\n\t\tuint stack[ 60 ];\r\n\t\tstack[ 0 ] = 0u;\r\n\r\n\t\tfloat triangleDistance = 1e20;\r\n\t\twhile ( ptr > - 1 && ptr < 60 ) {\r\n\r\n\t\t\tuint currNodeIndex = stack[ ptr ];\r\n\t\t\tptr --;\r\n\r\n\t\t\t// check if we intersect the current bounds\r\n\t\t\tfloat boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );\r\n\t\t\tif ( boundsHitDistance == INFINITY ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;\r\n\t\t\tbool isLeaf = bool( boundsInfo.x & 0xffff0000u );\r\n\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tuint count = boundsInfo.x & 0x0000ffffu;\r\n\t\t\t\tuint offset = boundsInfo.y;\r\n\r\n\t\t\t\tbool found = intersectTriangles(\r\n\t\t\t\t\tbvh, rayOrigin, rayDirection, offset, count, triangleDistance,\r\n\t\t\t\t\tfaceIndices, faceNormal, barycoord, side, dist\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( found ) {\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tuint leftIndex = currNodeIndex + 1u;\r\n\t\t\t\tuint splitAxis = boundsInfo.x & 0x0000ffffu;\r\n\t\t\t\tuint rightIndex = boundsInfo.y;\r\n\r\n\t\t\t\t// set c2 in the stack so we traverse it later. We need to keep track of a pointer in\r\n\t\t\t\t// the stack while we traverse. The second pointer added is the one that will be\r\n\t\t\t\t// traversed first\r\n\t\t\t\tptr ++;\r\n\t\t\t\tstack[ ptr ] = leftIndex;\r\n\r\n\t\t\t\tptr ++;\r\n\t\t\t\tstack[ ptr ] = rightIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n`;\r\n","export const attenuate_hit_function = /* glsl */`\r\n\r\n\t// step through multiple surface hits and accumulate color attenuation based on transmissive surfaces\r\n\t// returns true if a solid surface was hit\r\n\tbool attenuateHit(\r\n\t\tRenderState state,\r\n\t\tRay ray, float rayDist,\r\n\t\tout vec3 color\r\n\t) {\r\n\r\n\t\t// store the original bounce index so we can reset it after\r\n\t\tuint originalBounceIndex = sobolBounceIndex;\r\n\r\n\t\tint traversals = state.traversals;\r\n\t\tint transmissiveTraversals = state.transmissiveTraversals;\r\n\t\tbool isShadowRay = state.isShadowRay;\r\n\t\tMaterial fogMaterial = state.fogMaterial;\r\n\r\n\t\tvec3 startPoint = ray.origin;\r\n\r\n\t\t// hit results\r\n\t\tSurfaceHit surfaceHit;\r\n\r\n\t\tcolor = vec3( 1.0 );\r\n\r\n\t\tbool result = true;\r\n\t\tfor ( int i = 0; i < traversals; i ++ ) {\r\n\r\n\t\t\tsobolBounceIndex ++;\r\n\r\n\t\t\tint hitType = traceScene( ray, fogMaterial, surfaceHit );\r\n\r\n\t\t\tif ( hitType == FOG_HIT ) {\r\n\r\n\t\t\t\tresult = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t} else if ( hitType == SURFACE_HIT ) {\r\n\r\n\t\t\t\tfloat totalDist = distance( startPoint, ray.origin + ray.direction * surfaceHit.dist );\r\n\t\t\t\tif ( totalDist > rayDist ) {\r\n\r\n\t\t\t\t\tresult = false;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// TODO: attenuate the contribution based on the PDF of the resulting ray including refraction values\r\n\t\t\t\t// Should be able to work using the material BSDF functions which will take into account specularity, etc.\r\n\t\t\t\t// TODO: should we account for emissive surfaces here?\r\n\r\n\t\t\t\tuint materialIndex = uTexelFetch1D( materialIndexAttribute, surfaceHit.faceIndices.x ).r;\r\n\t\t\t\tMaterial material = readMaterialInfo( materials, materialIndex );\r\n\r\n\t\t\t\t// adjust the ray to the new surface\r\n\t\t\t\tbool isEntering = surfaceHit.side == 1.0;\r\n\t\t\t\tray.origin = stepRayOrigin( ray.origin, ray.direction, - surfaceHit.faceNormal, surfaceHit.dist );\r\n\r\n\t\t\t\t#if FEATURE_FOG\r\n\r\n\t\t\t\tif ( material.fogVolume ) {\r\n\r\n\t\t\t\t\tfogMaterial = material;\r\n\t\t\t\t\tfogMaterial.fogVolume = surfaceHit.side == 1.0;\r\n\t\t\t\t\ti -= sign( transmissiveTraversals );\r\n\t\t\t\t\ttransmissiveTraversals --;\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t#endif\r\n\r\n\t\t\t\tif ( ! material.castShadow && isShadowRay ) {\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvec2 uv = textureSampleBarycoord( attributesArray, ATTR_UV, surfaceHit.barycoord, surfaceHit.faceIndices.xyz ).xy;\r\n\t\t\t\tvec4 vertexColor = textureSampleBarycoord( attributesArray, ATTR_COLOR, surfaceHit.barycoord, surfaceHit.faceIndices.xyz );\r\n\r\n\t\t\t\t// albedo\r\n\t\t\t\tvec4 albedo = vec4( material.color, material.opacity );\r\n\t\t\t\tif ( material.map != - 1 ) {\r\n\r\n\t\t\t\t\tvec3 uvPrime = material.mapTransform * vec3( uv, 1 );\r\n\t\t\t\t\talbedo *= texture2D( textures, vec3( uvPrime.xy, material.map ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( material.vertexColors ) {\r\n\r\n\t\t\t\t\talbedo *= vertexColor;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// alphaMap\r\n\t\t\t\tif ( material.alphaMap != - 1 ) {\r\n\r\n\t\t\t\t\tvec3 uvPrime = material.alphaMapTransform * vec3( uv, 1 );\r\n\t\t\t\t\talbedo.a *= texture2D( textures, vec3( uvPrime.xy, material.alphaMap ) ).x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// transmission\r\n\t\t\t\tfloat transmission = material.transmission;\r\n\t\t\t\tif ( material.transmissionMap != - 1 ) {\r\n\r\n\t\t\t\t\tvec3 uvPrime = material.transmissionMapTransform * vec3( uv, 1 );\r\n\t\t\t\t\ttransmission *= texture2D( textures, vec3( uvPrime.xy, material.transmissionMap ) ).r;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// metalness\r\n\t\t\t\tfloat metalness = material.metalness;\r\n\t\t\t\tif ( material.metalnessMap != - 1 ) {\r\n\r\n\t\t\t\t\tvec3 uvPrime = material.metalnessMapTransform * vec3( uv, 1 );\r\n\t\t\t\t\tmetalness *= texture2D( textures, vec3( uvPrime.xy, material.metalnessMap ) ).b;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfloat alphaTest = material.alphaTest;\r\n\t\t\t\tbool useAlphaTest = alphaTest != 0.0;\r\n\t\t\t\tfloat transmissionFactor = ( 1.0 - metalness ) * transmission;\r\n\t\t\t\tif (\r\n\t\t\t\t\ttransmissionFactor < rand( 9 ) && ! (\r\n\t\t\t\t\t\t// material sidedness\r\n\t\t\t\t\t\tmaterial.side != 0.0 && surfaceHit.side == material.side\r\n\r\n\t\t\t\t\t\t// alpha test\r\n\t\t\t\t\t\t|| useAlphaTest && albedo.a < alphaTest\r\n\r\n\t\t\t\t\t\t// opacity\r\n\t\t\t\t\t\t|| material.transparent && ! useAlphaTest && albedo.a < rand( 10 )\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( surfaceHit.side == 1.0 && isEntering ) {\r\n\r\n\t\t\t\t\t// only attenuate by surface color on the way in\r\n\t\t\t\t\tcolor *= mix( vec3( 1.0 ), albedo.rgb, transmissionFactor );\r\n\r\n\t\t\t\t} else if ( surfaceHit.side == - 1.0 ) {\r\n\r\n\t\t\t\t\t// attenuate by medium once we hit the opposite side of the model\r\n\t\t\t\t\tcolor *= transmissionAttenuation( surfaceHit.dist, material.attenuationColor, material.attenuationDistance );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbool isTransmissiveRay = dot( ray.direction, surfaceHit.faceNormal * surfaceHit.side ) < 0.0;\r\n\t\t\t\tif ( ( isTransmissiveRay || isEntering ) && transmissiveTraversals > 0 ) {\r\n\r\n\t\t\t\t\ti -= sign( transmissiveTraversals );\r\n\t\t\t\t\ttransmissiveTraversals --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// reset the bounce index\r\n\t\tsobolBounceIndex = originalBounceIndex;\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n`;\r\n","export const camera_util_functions = /* glsl */`\r\n\r\n\tvec3 ndcToRayOrigin( vec2 coord ) {\r\n\r\n\t\tvec4 rayOrigin4 = cameraWorldMatrix * invProjectionMatrix * vec4( coord, - 1.0, 1.0 );\r\n\t\treturn rayOrigin4.xyz / rayOrigin4.w;\r\n\t}\r\n\r\n\tRay getCameraRay() {\r\n\r\n\t\tvec2 ssd = vec2( 1.0 ) / resolution;\r\n\r\n\t\t// Jitter the camera ray by finding a uv coordinate at a random sample\r\n\t\t// around this pixel's UV coordinate for AA\r\n\t\tvec2 ruv = rand2( 0 );\r\n\t\tvec2 jitteredUv = vUv + vec2( tentFilter( ruv.x ) * ssd.x, tentFilter( ruv.y ) * ssd.y );\r\n\t\tRay ray;\r\n\r\n\t\t#if CAMERA_TYPE == 2\r\n\r\n\t\t\t// Equirectangular projection\r\n\t\t\tvec4 rayDirection4 = vec4( equirectUvToDirection( jitteredUv ), 0.0 );\r\n\t\t\tvec4 rayOrigin4 = vec4( 0.0, 0.0, 0.0, 1.0 );\r\n\r\n\t\t\trayDirection4 = cameraWorldMatrix * rayDirection4;\r\n\t\t\trayOrigin4 = cameraWorldMatrix * rayOrigin4;\r\n\r\n\t\t\tray.direction = normalize( rayDirection4.xyz );\r\n\t\t\tray.origin = rayOrigin4.xyz / rayOrigin4.w;\r\n\r\n\t\t#else\r\n\r\n\t\t\t// get [- 1, 1] normalized device coordinates\r\n\t\t\tvec2 ndc = 2.0 * jitteredUv - vec2( 1.0 );\r\n\t\t\tray.origin = ndcToRayOrigin( ndc );\r\n\r\n\t\t\t#if CAMERA_TYPE == 1\r\n\r\n\t\t\t\t// Orthographic projection\r\n\t\t\t\tray.direction = ( cameraWorldMatrix * vec4( 0.0, 0.0, - 1.0, 0.0 ) ).xyz;\r\n\t\t\t\tray.direction = normalize( ray.direction );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\t// Perspective projection\r\n\t\t\t\tray.direction = normalize( mat3( cameraWorldMatrix ) * ( invProjectionMatrix * vec4( ndc, 0.0, 1.0 ) ).xyz );\r\n\r\n\t\t\t#endif\r\n\r\n\t\t#endif\r\n\r\n\t\t#if FEATURE_DOF\r\n\t\t{\r\n\r\n\t\t\t// depth of field\r\n\t\t\tvec3 focalPoint = ray.origin + normalize( ray.direction ) * physicalCamera.focusDistance;\r\n\r\n\t\t\t// get the aperture sample\r\n\t\t\t// if blades === 0 then we assume a circle\r\n\t\t\tvec3 shapeUVW= rand3( 1 );\r\n\t\t\tint blades = physicalCamera.apertureBlades;\r\n\t\t\tfloat anamorphicRatio = physicalCamera.anamorphicRatio;\r\n\t\t\tvec2 apertureSample = sampleAperture( blades, shapeUVW );\r\n\t\t\tapertureSample *= physicalCamera.bokehSize * 0.5 * 1e-3;\r\n\r\n\t\t\t// rotate the aperture shape\r\n\t\t\tapertureSample =\r\n\t\t\t\trotateVector( apertureSample, physicalCamera.apertureRotation ) *\r\n\t\t\t\tsaturate( vec2( anamorphicRatio, 1.0 / anamorphicRatio ) );\r\n\r\n\t\t\t// create the new ray\r\n\t\t\tray.origin += ( cameraWorldMatrix * vec4( apertureSample, 0.0, 0.0 ) ).xyz;\r\n\t\t\tray.direction = focalPoint - ray.origin;\r\n\t\t\t// avoid division by zero in normalize when origin equals focal point\r\n\t\t\tfloat dirLen = length( ray.direction );\r\n\t\t\tif ( dirLen < 1e-6 ) {\r\n\t\t\t\tray.direction = ( cameraWorldMatrix * vec4( 0.0, 0.0, - 1.0, 0.0 ) ).xyz;\r\n\t\t\t\tray.direction = normalize( ray.direction );\r\n\t\t\t} else {\r\n\t\t\t\tray.direction /= dirLen;\r\n\t\t\t}\r\n\t\t}\r\n\t\t#endif\r\n\r\n\t\t#if FEATURE_DOF == 0\r\n\t\tray.direction = normalize( ray.direction );\r\n\t\t#endif\r\n\r\n\t\treturn ray;\r\n\r\n\t}\r\n\r\n`;\r\n","export const direct_light_contribution_function = /*glsl*/`\r\n\r\n\tvec3 directLightContribution( vec3 worldWo, SurfaceRecord surf, RenderState state, vec3 rayOrigin ) {\r\n\r\n\t\tvec3 result = vec3( 0.0 );\r\n\r\n\t\t// uniformly pick a light or environment map\r\n\t\tif( lightsDenom != 0.0 && rand( 5 ) < float( lights.count ) / lightsDenom ) {\r\n\r\n\t\t\t// sample a light or environment\r\n\t\t\tLightRecord lightRec = randomLightSample( lights.tex, iesProfiles, lights.count, rayOrigin, rand3( 6 ) );\r\n\r\n\t\t\tbool isSampleBelowSurface = ! surf.volumeParticle && dot( surf.faceNormal, lightRec.direction ) < 0.0;\r\n\t\t\tif ( isSampleBelowSurface ) {\r\n\r\n\t\t\t\tlightRec.pdf = 0.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// check if a ray could even reach the light area\r\n\t\t\tRay lightRay;\r\n\t\t\tlightRay.origin = rayOrigin;\r\n\t\t\tlightRay.direction = lightRec.direction;\r\n\t\t\tvec3 attenuatedColor;\r\n\t\t\tif (\r\n\t\t\t\tlightRec.pdf > 0.0 &&\r\n\t\t\t\tisDirectionValid( lightRec.direction, surf.normal, surf.faceNormal ) &&\r\n\t\t\t\t! attenuateHit( state, lightRay, lightRec.dist, attenuatedColor )\r\n\t\t\t) {\r\n\r\n\t\t\t\t// get the material pdf\r\n\t\t\t\tvec3 sampleColor;\r\n\t\t\t\tfloat lightMaterialPdf = bsdfResult( worldWo, lightRec.direction, surf, sampleColor );\r\n\t\t\t\tbool isValidSampleColor = all( greaterThanEqual( sampleColor, vec3( 0.0 ) ) );\r\n\t\t\t\tif ( lightMaterialPdf > 0.0 && isValidSampleColor ) {\r\n\r\n\t\t\t\t\t// weight the direct light contribution\r\n\t\t\t\t\tfloat lightPdf = lightRec.pdf / lightsDenom;\r\n\t\t\t\t\tfloat misWeight = lightRec.type == SPOT_LIGHT_TYPE || lightRec.type == DIR_LIGHT_TYPE || lightRec.type == POINT_LIGHT_TYPE ? 1.0 : misHeuristic( lightPdf, lightMaterialPdf );\r\n\t\t\t\t\tresult = attenuatedColor * lightRec.emission * state.throughputColor * sampleColor * misWeight / lightPdf;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( envMapInfo.totalSum != 0.0 && environmentIntensity != 0.0 ) {\r\n\r\n\t\t\t// find a sample in the environment map to include in the contribution\r\n\t\t\tvec3 envColor, envDirection;\r\n\t\t\tfloat envPdf = sampleEquirectProbability( rand2( 7 ), envColor, envDirection );\r\n\t\t\tenvDirection = invEnvRotation3x3 * envDirection;\r\n\r\n\t\t\t// this env sampling is not set up for transmissive sampling and yields overly bright\r\n\t\t\t// results so we ignore the sample in this case.\r\n\t\t\t// TODO: this should be improved but how? The env samples could traverse a few layers?\r\n\t\t\tbool isSampleBelowSurface = ! surf.volumeParticle && dot( surf.faceNormal, envDirection ) < 0.0;\r\n\t\t\tif ( isSampleBelowSurface ) {\r\n\r\n\t\t\t\tenvPdf = 0.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// check if a ray could even reach the surface\r\n\t\t\tRay envRay;\r\n\t\t\tenvRay.origin = rayOrigin;\r\n\t\t\tenvRay.direction = envDirection;\r\n\t\t\tvec3 attenuatedColor;\r\n\t\t\tif (\r\n\t\t\t\tenvPdf > 0.0 &&\r\n\t\t\t\tisDirectionValid( envDirection, surf.normal, surf.faceNormal ) &&\r\n\t\t\t\t! attenuateHit( state, envRay, INFINITY, attenuatedColor )\r\n\t\t\t) {\r\n\r\n\t\t\t\t// get the material pdf\r\n\t\t\t\tvec3 sampleColor;\r\n\t\t\t\tfloat envMaterialPdf = bsdfResult( worldWo, envDirection, surf, sampleColor );\r\n\t\t\t\tbool isValidSampleColor = all( greaterThanEqual( sampleColor, vec3( 0.0 ) ) );\r\n\t\t\t\tif ( envMaterialPdf > 0.0 && isValidSampleColor ) {\r\n\r\n\t\t\t\t\t// weight the direct light contribution\r\n\t\t\t\t\tenvPdf /= lightsDenom;\r\n\t\t\t\t\tfloat misWeight = misHeuristic( envPdf, envMaterialPdf );\r\n\t\t\t\t\tresult = attenuatedColor * environmentIntensity * applyEnvSaturation( envColor ) * state.throughputColor * sampleColor * misWeight / envPdf;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Function changed to have a single return statement to potentially help with crashes on Mac OS.\r\n\t\t// See issue #470\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n`;\r\n","\r\nexport const get_surface_record_function = /* glsl */`\r\n\r\n\t#define SKIP_SURFACE 0\r\n\t#define HIT_SURFACE 1\r\n\tint getSurfaceRecord(\r\n\t\tMaterial material, SurfaceHit surfaceHit, sampler2DArray attributesArray,\r\n\t\tfloat accumulatedRoughness,\r\n\t\tinout SurfaceRecord surf\r\n\t) {\r\n\r\n\t\tif ( material.fogVolume ) {\r\n\r\n\t\t\tvec3 normal = vec3( 0, 0, 1 );\r\n\r\n\t\t\tSurfaceRecord fogSurface;\r\n\t\t\tfogSurface.volumeParticle = true;\r\n\t\t\tfogSurface.color = material.color;\r\n\t\t\tfogSurface.emission = material.emissiveIntensity * material.emissive;\r\n\t\t\tfogSurface.normal = normal;\r\n\t\t\tfogSurface.faceNormal = normal;\r\n\t\t\tfogSurface.clearcoatNormal = normal;\r\n\r\n\t\t\tsurf = fogSurface;\r\n\t\t\treturn HIT_SURFACE;\r\n\r\n\t\t}\r\n\r\n\t\t// uv coord for textures\r\n\t\tvec2 uv = textureSampleBarycoord( attributesArray, ATTR_UV, surfaceHit.barycoord, surfaceHit.faceIndices.xyz ).xy;\r\n\t\tvec4 vertexColor = textureSampleBarycoord( attributesArray, ATTR_COLOR, surfaceHit.barycoord, surfaceHit.faceIndices.xyz );\r\n\r\n\t\t// albedo\r\n\t\tvec4 albedo = vec4( material.color, material.opacity );\r\n\t\tif ( material.map != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.mapTransform * vec3( uv, 1 );\r\n\t\t\talbedo *= texture2D( textures, vec3( uvPrime.xy, material.map ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.vertexColors ) {\r\n\r\n\t\t\talbedo *= vertexColor;\r\n\r\n\t\t}\r\n\r\n\t\t// alphaMap\r\n\t\tif ( material.alphaMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.alphaMapTransform * vec3( uv, 1 );\r\n\t\t\talbedo.a *= texture2D( textures, vec3( uvPrime.xy, material.alphaMap ) ).x;\r\n\r\n\t\t}\r\n\r\n\t\t// Hit flag: SKIP_SURFACE = continue ray (transparent); HIT_SURFACE = shade. Solid ground uses hit-flag + alpha\r\n\t\t// (alpha test or stochastic alpha for PNG transparency) + transmission (refraction/tint in attenuateHit).\r\n\t\t// Possibly skip if transparent, alpha test enabled, or wrong material side (single sided).\r\n\t\t// - alpha test disabled when === 0; stochastic alpha: material.transparent && albedo.a < rand(3).\r\n\t\t// - material sidedness: allow light through back side but still shade front; skip wrong side on first ray.\r\n\t\tfloat alphaTest = material.alphaTest;\r\n\t\tbool useAlphaTest = alphaTest != 0.0;\r\n\t\tif (\r\n\t\t\t// material sidedness\r\n\t\t\tmaterial.side != 0.0 && surfaceHit.side != material.side\r\n\r\n\t\t\t// alpha test\r\n\t\t\t|| useAlphaTest && albedo.a < alphaTest\r\n\r\n\t\t\t// opacity\r\n\t\t\t|| material.transparent && ! useAlphaTest && albedo.a < rand( 3 )\r\n\t\t) {\r\n\r\n\t\t\treturn SKIP_SURFACE;\r\n\r\n\t\t}\r\n\r\n\t\t// fetch the interpolated smooth normal\r\n\t\tvec3 normal = normalize( textureSampleBarycoord(\r\n\t\t\tattributesArray,\r\n\t\t\tATTR_NORMAL,\r\n\t\t\tsurfaceHit.barycoord,\r\n\t\t\tsurfaceHit.faceIndices.xyz\r\n\t\t).xyz );\r\n\r\n\t\t// roughness\r\n\t\tfloat roughness = material.roughness;\r\n\t\tif ( material.roughnessMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.roughnessMapTransform * vec3( uv, 1 );\r\n\t\t\troughness *= texture2D( textures, vec3( uvPrime.xy, material.roughnessMap ) ).g;\r\n\r\n\t\t}\r\n\r\n\t\t// metalness\r\n\t\tfloat metalness = material.metalness;\r\n\t\tif ( material.metalnessMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.metalnessMapTransform * vec3( uv, 1 );\r\n\t\t\tmetalness *= texture2D( textures, vec3( uvPrime.xy, material.metalnessMap ) ).b;\r\n\r\n\t\t}\r\n\r\n\t\t// emission\r\n\t\tvec3 emission = material.emissiveIntensity * material.emissive;\r\n\t\tif ( material.emissiveMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.emissiveMapTransform * vec3( uv, 1 );\r\n\t\t\temission *= texture2D( textures, vec3( uvPrime.xy, material.emissiveMap ) ).xyz;\r\n\r\n\t\t}\r\n\r\n\t\t// transmission\r\n\t\tfloat transmission = material.transmission;\r\n\t\tif ( material.transmissionMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.transmissionMapTransform * vec3( uv, 1 );\r\n\t\t\ttransmission *= texture2D( textures, vec3( uvPrime.xy, material.transmissionMap ) ).r;\r\n\r\n\t\t}\r\n\r\n\t\t// normal\r\n\t\tif ( material.flatShading ) {\r\n\r\n\t\t\t// if we're rendering a flat shaded object then use the face normals - the face normal\r\n\t\t\t// is provided based on the side the ray hits the mesh so flip it to align with the\r\n\t\t\t// interpolated vertex normals.\r\n\t\t\tnormal = surfaceHit.faceNormal * surfaceHit.side;\r\n\r\n\t\t}\r\n\r\n\t\tvec3 baseNormal = normal;\r\n\t\tif ( material.normalMap != - 1 ) {\r\n\r\n\t\t\tvec4 tangentSample = textureSampleBarycoord(\r\n\t\t\t\tattributesArray,\r\n\t\t\t\tATTR_TANGENT,\r\n\t\t\t\tsurfaceHit.barycoord,\r\n\t\t\t\tsurfaceHit.faceIndices.xyz\r\n\t\t\t);\r\n\r\n\t\t\t// some provided tangents can be malformed (0, 0, 0) causing the normal to be degenerate\r\n\t\t\t// resulting in NaNs and slow path tracing.\r\n\t\t\tif ( length( tangentSample.xyz ) > 0.0 ) {\r\n\r\n\t\t\t\tvec3 tangent = normalize( tangentSample.xyz );\r\n\t\t\t\tvec3 bitangent = normalize( cross( normal, tangent ) * tangentSample.w );\r\n\t\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\r\n\r\n\t\t\t\tvec3 uvPrime = material.normalMapTransform * vec3( uv, 1 );\r\n\t\t\t\tvec3 texNormal = texture2D( textures, vec3( uvPrime.xy, material.normalMap ) ).xyz * 2.0 - 1.0;\r\n\t\t\t\ttexNormal.xy *= material.normalScale;\r\n\t\t\t\tnormal = vTBN * texNormal;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tnormal *= surfaceHit.side;\r\n\r\n\t\t// clearcoat\r\n\t\tfloat clearcoat = material.clearcoat;\r\n\t\tif ( material.clearcoatMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.clearcoatMapTransform * vec3( uv, 1 );\r\n\t\t\tclearcoat *= texture2D( textures, vec3( uvPrime.xy, material.clearcoatMap ) ).r;\r\n\r\n\t\t}\r\n\r\n\t\t// clearcoatRoughness\r\n\t\tfloat clearcoatRoughness = material.clearcoatRoughness;\r\n\t\tif ( material.clearcoatRoughnessMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.clearcoatRoughnessMapTransform * vec3( uv, 1 );\r\n\t\t\tclearcoatRoughness *= texture2D( textures, vec3( uvPrime.xy, material.clearcoatRoughnessMap ) ).g;\r\n\r\n\t\t}\r\n\r\n\t\t// clearcoatNormal\r\n\t\tvec3 clearcoatNormal = baseNormal;\r\n\t\tif ( material.clearcoatNormalMap != - 1 ) {\r\n\r\n\t\t\tvec4 tangentSample = textureSampleBarycoord(\r\n\t\t\t\tattributesArray,\r\n\t\t\t\tATTR_TANGENT,\r\n\t\t\t\tsurfaceHit.barycoord,\r\n\t\t\t\tsurfaceHit.faceIndices.xyz\r\n\t\t\t);\r\n\r\n\t\t\t// some provided tangents can be malformed (0, 0, 0) causing the normal to be degenerate\r\n\t\t\t// resulting in NaNs and slow path tracing.\r\n\t\t\tif ( length( tangentSample.xyz ) > 0.0 ) {\r\n\r\n\t\t\t\tvec3 tangent = normalize( tangentSample.xyz );\r\n\t\t\t\tvec3 bitangent = normalize( cross( clearcoatNormal, tangent ) * tangentSample.w );\r\n\t\t\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\r\n\r\n\t\t\t\tvec3 uvPrime = material.clearcoatNormalMapTransform * vec3( uv, 1 );\r\n\t\t\t\tvec3 texNormal = texture2D( textures, vec3( uvPrime.xy, material.clearcoatNormalMap ) ).xyz * 2.0 - 1.0;\r\n\t\t\t\ttexNormal.xy *= material.clearcoatNormalScale;\r\n\t\t\t\tclearcoatNormal = vTBN * texNormal;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tclearcoatNormal *= surfaceHit.side;\r\n\r\n\t\t// sheenColor\r\n\t\tvec3 sheenColor = material.sheenColor;\r\n\t\tif ( material.sheenColorMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.sheenColorMapTransform * vec3( uv, 1 );\r\n\t\t\tsheenColor *= texture2D( textures, vec3( uvPrime.xy, material.sheenColorMap ) ).rgb;\r\n\r\n\t\t}\r\n\r\n\t\t// sheenRoughness\r\n\t\tfloat sheenRoughness = material.sheenRoughness;\r\n\t\tif ( material.sheenRoughnessMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.sheenRoughnessMapTransform * vec3( uv, 1 );\r\n\t\t\tsheenRoughness *= texture2D( textures, vec3( uvPrime.xy, material.sheenRoughnessMap ) ).a;\r\n\r\n\t\t}\r\n\r\n\t\t// iridescence\r\n\t\tfloat iridescence = material.iridescence;\r\n\t\tif ( material.iridescenceMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.iridescenceMapTransform * vec3( uv, 1 );\r\n\t\t\tiridescence *= texture2D( textures, vec3( uvPrime.xy, material.iridescenceMap ) ).r;\r\n\r\n\t\t}\r\n\r\n\t\t// iridescence thickness\r\n\t\tfloat iridescenceThickness = material.iridescenceThicknessMaximum;\r\n\t\tif ( material.iridescenceThicknessMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.iridescenceThicknessMapTransform * vec3( uv, 1 );\r\n\t\t\tfloat iridescenceThicknessSampled = texture2D( textures, vec3( uvPrime.xy, material.iridescenceThicknessMap ) ).g;\r\n\t\t\tiridescenceThickness = mix( material.iridescenceThicknessMinimum, material.iridescenceThicknessMaximum, iridescenceThicknessSampled );\r\n\r\n\t\t}\r\n\r\n\t\tiridescence = iridescenceThickness == 0.0 ? 0.0 : iridescence;\r\n\r\n\t\t// specular color\r\n\t\tvec3 specularColor = material.specularColor;\r\n\t\tif ( material.specularColorMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.specularColorMapTransform * vec3( uv, 1 );\r\n\t\t\tspecularColor *= texture2D( textures, vec3( uvPrime.xy, material.specularColorMap ) ).rgb;\r\n\r\n\t\t}\r\n\r\n\t\t// specular intensity\r\n\t\tfloat specularIntensity = material.specularIntensity;\r\n\t\tif ( material.specularIntensityMap != - 1 ) {\r\n\r\n\t\t\tvec3 uvPrime = material.specularIntensityMapTransform * vec3( uv, 1 );\r\n\t\t\tspecularIntensity *= texture2D( textures, vec3( uvPrime.xy, material.specularIntensityMap ) ).a;\r\n\r\n\t\t}\r\n\r\n\t\tsurf.volumeParticle = false;\r\n\r\n\t\tsurf.faceNormal = surfaceHit.faceNormal;\r\n\t\tsurf.normal = normal;\r\n\r\n\t\tsurf.metalness = metalness;\r\n\t\tsurf.color = albedo.rgb;\r\n\t\tsurf.emission = emission;\r\n\r\n\t\tsurf.ior = material.ior;\r\n\t\tsurf.transmission = transmission;\r\n\t\tsurf.thinFilm = material.thinFilm;\r\n\t\tsurf.attenuationColor = material.attenuationColor;\r\n\t\tsurf.attenuationDistance = material.attenuationDistance;\r\n\r\n\t\tsurf.clearcoatNormal = clearcoatNormal;\r\n\t\tsurf.clearcoat = clearcoat;\r\n\r\n\t\tsurf.sheen = material.sheen;\r\n\t\tsurf.sheenColor = sheenColor;\r\n\r\n\t\tsurf.iridescence = iridescence;\r\n\t\tsurf.iridescenceIor = material.iridescenceIor;\r\n\t\tsurf.iridescenceThickness = iridescenceThickness;\r\n\r\n\t\tsurf.specularColor = specularColor;\r\n\t\tsurf.specularIntensity = specularIntensity;\r\n\r\n\t\t// apply perceptual roughness factor from gltf. sheen perceptual roughness is\r\n\t\t// applied by its brdf function\r\n\t\t// https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#microfacet-surfaces\r\n\t\tsurf.roughness = roughness * roughness;\r\n\t\tsurf.clearcoatRoughness = clearcoatRoughness * clearcoatRoughness;\r\n\t\tsurf.sheenRoughness = sheenRoughness;\r\n\r\n\t\t// frontFace is used to determine transmissive properties and PDF. If no transmission is used\r\n\t\t// then we can just always assume this is a front face.\r\n\t\tsurf.frontFace = surfaceHit.side == 1.0 || transmission == 0.0;\r\n\t\tsurf.eta = material.thinFilm || surf.frontFace ? 1.0 / material.ior : material.ior;\r\n\t\tsurf.f0 = iorRatioToF0( surf.eta );\r\n\r\n\t\t// Compute the filtered roughness value to use during specular reflection computations.\r\n\t\t// The accumulated roughness value is scaled by a user setting and a \"magic value\" of 5.0.\r\n\t\t// If we're exiting something transmissive then scale the factor down significantly so we can retain\r\n\t\t// sharp internal reflections\r\n\t\tsurf.filteredRoughness = applyFilteredGlossy( surf.roughness, accumulatedRoughness );\r\n\t\tsurf.filteredClearcoatRoughness = applyFilteredGlossy( surf.clearcoatRoughness, accumulatedRoughness );\r\n\r\n\t\t// get the normal frames\r\n\t\tsurf.normalBasis = getBasisFromNormal( surf.normal );\r\n\t\tsurf.normalInvBasis = inverse( surf.normalBasis );\r\n\r\n\t\tsurf.clearcoatBasis = getBasisFromNormal( surf.clearcoatNormal );\r\n\t\tsurf.clearcoatInvBasis = inverse( surf.clearcoatBasis );\r\n\r\n\t\treturn HIT_SURFACE;\r\n\r\n\t}\r\n`;\r\n","export const render_structs = /* glsl */`\r\n\r\n\tstruct Ray {\r\n\r\n\t\tvec3 origin;\r\n\t\tvec3 direction;\r\n\r\n\t};\r\n\r\n\tstruct SurfaceHit {\r\n\r\n\t\tuvec4 faceIndices;\r\n\t\tvec3 barycoord;\r\n\t\tvec3 faceNormal;\r\n\t\tfloat side;\r\n\t\tfloat dist;\r\n\r\n\t};\r\n\r\n\tstruct RenderState {\r\n\r\n\t\tbool firstRay;\r\n\t\tbool transmissiveRay;\r\n\t\tbool isShadowRay;\r\n\t\tfloat accumulatedRoughness;\r\n\t\tint transmissiveTraversals;\r\n\t\tint traversals;\r\n\t\tuint depth;\r\n\t\tvec3 throughputColor;\r\n\t\tMaterial fogMaterial;\r\n\r\n\t};\r\n\r\n\tRenderState initRenderState() {\r\n\r\n\t\tRenderState result;\r\n\t\tresult.firstRay = true;\r\n\t\tresult.transmissiveRay = true;\r\n\t\tresult.isShadowRay = false;\r\n\t\tresult.accumulatedRoughness = 0.0;\r\n\t\tresult.transmissiveTraversals = 0;\r\n\t\tresult.traversals = 0;\r\n\t\tresult.throughputColor = vec3( 1.0 );\r\n\t\tresult.depth = 0u;\r\n\t\tresult.fogMaterial.fogVolume = false;\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n`;\r\n","export const trace_scene_function = /* glsl */`\r\n\r\n\t#define NO_HIT 0\r\n\t#define SURFACE_HIT 1\r\n\t#define LIGHT_HIT 2\r\n\t#define FOG_HIT 3\r\n\r\n\t// Passing the global variable 'lights' into this function caused shader program errors.\r\n\t// So global variables like 'lights' and 'bvh' were moved out of the function parameters.\r\n\t// For more information, refer to: https://github.com/gkjohnson/three-gpu-pathtracer/pull/457\r\n\tint traceScene(\r\n\t\tRay ray, Material fogMaterial, inout SurfaceHit surfaceHit\r\n\t) {\r\n\r\n\t\tint result = NO_HIT;\r\n\t\tbool hit = bvhIntersectFirstHit( bvh, ray.origin, ray.direction, surfaceHit.faceIndices, surfaceHit.faceNormal, surfaceHit.barycoord, surfaceHit.side, surfaceHit.dist );\r\n\r\n\t\t#if FEATURE_FOG\r\n\r\n\t\tif ( fogMaterial.fogVolume ) {\r\n\r\n\t\t\t// offset the distance so we don't run into issues with particles on the same surface\r\n\t\t\t// as other objects\r\n\t\t\tfloat particleDist = intersectFogVolume( fogMaterial, rand( 1 ) );\r\n\t\t\tif ( particleDist + RAY_OFFSET < surfaceHit.dist ) {\r\n\r\n\t\t\t\tsurfaceHit.side = 1.0;\r\n\t\t\t\tsurfaceHit.faceNormal = normalize( - ray.direction );\r\n\t\t\t\tsurfaceHit.dist = particleDist;\r\n\t\t\t\treturn FOG_HIT;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t#endif\r\n\r\n\t\tif ( hit ) {\r\n\r\n\t\t\tresult = SURFACE_HIT;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n`;\r\n","import { ClampToEdgeWrapping, HalfFloatType, Matrix4, Vector2 } from 'three';\r\nimport { MaterialBase } from '../MaterialBase.js';\r\nimport {\r\n\tMeshBVHUniformStruct, UIntVertexAttributeTexture,\r\n\tBVHShaderGLSL,\r\n} from 'three-mesh-bvh';\r\n\r\n// uniforms\r\nimport { PhysicalCameraUniform } from '../../uniforms/PhysicalCameraUniform.js';\r\nimport { EquirectHdrInfoUniform } from '../../uniforms/EquirectHdrInfoUniform.js';\r\nimport { LightsInfoUniformStruct } from '../../uniforms/LightsInfoUniformStruct.js';\r\nimport { AttributesTextureArray } from '../../uniforms/AttributesTextureArray.js';\r\nimport { MaterialsTexture, MATERIAL_PIXELS } from '../../uniforms/MaterialsTexture.js';\r\nimport { RenderTarget2DArray } from '../../uniforms/RenderTarget2DArray.js';\r\nimport { StratifiedSamplesTexture } from '../../uniforms/StratifiedSamplesTexture.js';\r\nimport { BlueNoiseTexture } from '../../textures/BlueNoiseTexture.js';\r\n\r\n// general glsl\r\nimport * as StructsGLSL from '../../shader/structs/index.js';\r\nimport * as SamplingGLSL from '../../shader/sampling/index.js';\r\nimport * as CommonGLSL from '../../shader/common/index.js';\r\nimport * as RandomGLSL from '../../shader/rand/index.js';\r\nimport * as BSDFGLSL from '../../shader/bsdf/index.js';\r\nimport * as PTBVHGLSL from '../../shader/bvh/index.js';\r\n\r\n// path tracer glsl\r\nimport * as RenderGLSL from './glsl/index.js';\r\n\r\nexport class PhysicalPathTracingMaterial extends MaterialBase {\r\n\r\n\tonBeforeRender() {\r\n\r\n\t\tthis.setDefine( 'FEATURE_DOF', this.physicalCamera.bokehSize === 0 ? 0 : 1 );\r\n\t\tthis.setDefine( 'FEATURE_BACKGROUND_MAP', this.backgroundMap ? 1 : 0 );\r\n\t\tthis.setDefine( 'FEATURE_FOG', this.materials.features.isUsed( 'FOG' ) ? 1 : 0 );\r\n\r\n\t}\r\n\r\n\tconstructor( parameters ) {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\ttransparent: true,\r\n\t\t\tdepthWrite: false,\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tFEATURE_MIS: 1,\r\n\t\t\t\tFEATURE_RUSSIAN_ROULETTE: 1,\r\n\t\t\t\t// Match common runtime values to avoid recompilation on first render\r\n\t\t\t\tFEATURE_DOF: 0,\r\n\t\t\t\tFEATURE_BACKGROUND_MAP: 0,\r\n\t\t\t\tFEATURE_FOG: 0,\r\n\r\n\t\t\t\t// 0 = PCG\r\n\t\t\t\t// 1 = Sobol\r\n\t\t\t\t// 2 = Stratified List\r\n\t\t\t\tRANDOM_TYPE: 2,\r\n\r\n\t\t\t\t// 0 = Perspective\r\n\t\t\t\t// 1 = Orthographic\r\n\t\t\t\t// 2 = Equirectangular\r\n\t\t\t\tCAMERA_TYPE: 0,\r\n\r\n\t\t\t\tDEBUG_MODE: 0,\r\n\r\n\t\t\t\tATTR_NORMAL: 0,\r\n\t\t\t\tATTR_TANGENT: 1,\r\n\t\t\t\tATTR_UV: 2,\r\n\t\t\t\tATTR_COLOR: 3,\r\n\t\t\t\tMATERIAL_PIXELS: MATERIAL_PIXELS,\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\t// path trace uniforms\r\n\t\t\t\tresolution: { value: new Vector2() },\r\n\t\t\t\topacity: { value: 1 },\r\n\t\t\t\tbounces: { value: 10 },\r\n\t\t\t\ttransmissiveBounces: { value: 10 },\r\n\t\t\t\tfilterGlossyFactor: { value: 0 },\r\n\r\n\t\t\t\t// camera uniforms\r\n\t\t\t\tphysicalCamera: { value: new PhysicalCameraUniform() },\r\n\t\t\t\tcameraWorldMatrix: { value: new Matrix4() },\r\n\t\t\t\tinvProjectionMatrix: { value: new Matrix4() },\r\n\r\n\t\t\t\t// scene uniforms\r\n\t\t\t\tbvh: { value: new MeshBVHUniformStruct() },\r\n\t\t\t\tattributesArray: { value: new AttributesTextureArray() },\r\n\t\t\t\tmaterialIndexAttribute: { value: new UIntVertexAttributeTexture() },\r\n\t\t\t\tmaterials: { value: new MaterialsTexture() },\r\n\t\t\t\ttextures: { value: new RenderTarget2DArray().texture },\r\n\r\n\t\t\t\t// light uniforms\r\n\t\t\t\tlights: { value: new LightsInfoUniformStruct() },\r\n\t\t\t\tiesProfiles: {\r\n\t\t\t\t\tvalue: new RenderTarget2DArray( 360, 180, {\r\n\t\t\t\t\t\ttype: HalfFloatType,\r\n\t\t\t\t\t\twrapS: ClampToEdgeWrapping,\r\n\t\t\t\t\t\twrapT: ClampToEdgeWrapping,\r\n\t\t\t\t\t} ).texture\r\n\t\t\t\t},\r\n\t\t\t\tenvironmentIntensity: { value: 1.0 },\r\n\t\t\t\tenvironmentRotation: { value: new Matrix4() },\r\n\t\t\t\tenvironmentSaturation: { value: 1.0 },\r\n\t\t\t\tenvMapInfo: { value: new EquirectHdrInfoUniform() },\r\n\r\n\t\t\t\t// background uniforms\r\n\t\t\t\tbackgroundBlur: { value: 0.0 },\r\n\t\t\t\tbackgroundMap: { value: null },\r\n\t\t\t\tbackgroundAlpha: { value: 1.0 },\r\n\t\t\t\tbackgroundIntensity: { value: 1.0 },\r\n\t\t\t\tbackgroundRotation: { value: new Matrix4() },\r\n\t\t\t\tshadowCatcherReflectionIntensity: { value: 1.0 },\r\n\r\n\t\t\t\t// randomness uniforms\r\n\t\t\t\tseed: { value: 0 },\r\n\t\t\t\tsobolTexture: { value: null },\r\n\t\t\t\tstratifiedTexture: { value: new StratifiedSamplesTexture() },\r\n\t\t\t\tstratifiedOffsetTexture: { value: new BlueNoiseTexture( 64, 1 ) },\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvec4 mvPosition = vec4( position, 1.0 );\r\n\t\t\t\t\tmvPosition = modelViewMatrix * mvPosition;\r\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\t\t\t\t#define RAY_OFFSET 1e-4\r\n\t\t\t\t#define INFINITY 1e20\r\n\r\n\t\t\t\tprecision highp isampler2D;\r\n\t\t\t\tprecision highp usampler2D;\r\n\t\t\t\tprecision highp sampler2DArray;\r\n\t\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\r\n\t\t\t\t#include <common>\r\n\r\n\t\t\t\t// bvh intersection\r\n\t\t\t\t${BVHShaderGLSL.common_functions}\r\n\t\t\t\t${BVHShaderGLSL.bvh_struct_definitions}\r\n\t\t\t\t${BVHShaderGLSL.bvh_ray_functions}\r\n\r\n\t\t\t\t// uniform structs\r\n\t\t\t\t${StructsGLSL.camera_struct}\r\n\t\t\t\t${StructsGLSL.lights_struct}\r\n\t\t\t\t${StructsGLSL.equirect_struct}\r\n\t\t\t\t${StructsGLSL.material_struct}\r\n\t\t\t\t${StructsGLSL.surface_record_struct}\r\n\r\n\t\t\t\t// random\r\n\t\t\t\t#if RANDOM_TYPE == 2 \t// Stratified List\r\n\r\n\t\t\t\t\t${RandomGLSL.stratified_functions}\r\n\r\n\t\t\t\t#elif RANDOM_TYPE == 1 \t// Sobol\r\n\r\n\t\t\t\t\t${RandomGLSL.pcg_functions}\r\n\t\t\t\t\t${RandomGLSL.sobol_common}\r\n\t\t\t\t\t${RandomGLSL.sobol_functions}\r\n\r\n\t\t\t\t\t#define rand(v) sobol(v)\r\n\t\t\t\t\t#define rand2(v) sobol2(v)\r\n\t\t\t\t\t#define rand3(v) sobol3(v)\r\n\t\t\t\t\t#define rand4(v) sobol4(v)\r\n\r\n\t\t\t\t#else \t\t\t\t\t// PCG\r\n\r\n\t\t\t\t${RandomGLSL.pcg_functions}\r\n\r\n\t\t\t\t\t// Using the sobol functions seems to break the the compiler on MacOS\r\n\t\t\t\t\t// - specifically the \"sobolReverseBits\" function.\r\n\t\t\t\t\tuint sobolPixelIndex = 0u;\r\n\t\t\t\t\tuint sobolPathIndex = 0u;\r\n\t\t\t\t\tuint sobolBounceIndex = 0u;\r\n\r\n\t\t\t\t\t#define rand(v) pcgRand()\r\n\t\t\t\t\t#define rand2(v) pcgRand2()\r\n\t\t\t\t\t#define rand3(v) pcgRand3()\r\n\t\t\t\t\t#define rand4(v) pcgRand4()\r\n\r\n\t\t\t\t#endif\r\n\r\n\t\t\t\t// common\r\n\t\t\t\t${CommonGLSL.texture_sample_functions}\r\n\t\t\t\t${CommonGLSL.fresnel_functions}\r\n\t\t\t\t${CommonGLSL.util_functions}\r\n\t\t\t\t${CommonGLSL.math_functions}\r\n\t\t\t\t${CommonGLSL.shape_intersection_functions}\r\n\r\n\t\t\t\t// environment\r\n\t\t\t\tuniform EquirectHdrInfo envMapInfo;\r\n\t\t\t\tuniform mat4 environmentRotation;\r\n\t\t\t\tuniform float environmentIntensity;\r\n\t\t\t\tuniform float environmentSaturation;\r\n\r\n\t\t\t\tvec3 applyEnvSaturation( vec3 c ) {\r\n\r\n\t\t\t\t\tfloat g = dot( c, vec3( 0.2126, 0.7152, 0.0722 ) );\r\n\t\t\t\t\treturn mix( vec3( g ), c, environmentSaturation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// lighting\r\n\t\t\t\tuniform sampler2DArray iesProfiles;\r\n\t\t\t\tuniform LightsInfo lights;\r\n\r\n\t\t\t\t// background\r\n\t\t\t\tuniform float backgroundBlur;\r\n\t\t\t\tuniform float backgroundAlpha;\r\n\t\t\t\tuniform float shadowCatcherReflectionIntensity;\r\n\t\t\t\t#if FEATURE_BACKGROUND_MAP\r\n\r\n\t\t\t\tuniform sampler2D backgroundMap;\r\n\t\t\t\tuniform mat4 backgroundRotation;\r\n\t\t\t\tuniform float backgroundIntensity;\r\n\r\n\t\t\t\t#endif\r\n\r\n\t\t\t\t// camera\r\n\t\t\t\tuniform mat4 cameraWorldMatrix;\r\n\t\t\t\tuniform mat4 invProjectionMatrix;\r\n\t\t\t\t#if FEATURE_DOF\r\n\r\n\t\t\t\tuniform PhysicalCamera physicalCamera;\r\n\r\n\t\t\t\t#endif\r\n\r\n\t\t\t\t// geometry\r\n\t\t\t\tuniform sampler2DArray attributesArray;\r\n\t\t\t\tuniform usampler2D materialIndexAttribute;\r\n\t\t\t\tuniform sampler2D materials;\r\n\t\t\t\tuniform sampler2DArray textures;\r\n\t\t\t\tuniform BVH bvh;\r\n\r\n\t\t\t\t// path tracer\r\n\t\t\t\tuniform int bounces;\r\n\t\t\t\tuniform int transmissiveBounces;\r\n\t\t\t\tuniform float filterGlossyFactor;\r\n\t\t\t\tuniform int seed;\r\n\r\n\t\t\t\t// image\r\n\t\t\t\tuniform vec2 resolution;\r\n\t\t\t\tuniform float opacity;\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\t// globals\r\n\t\t\t\tmat3 envRotation3x3;\r\n\t\t\t\tmat3 invEnvRotation3x3;\r\n\t\t\t\tfloat lightsDenom;\r\n\r\n\t\t\t\t// sampling\r\n\t\t\t\t${SamplingGLSL.shape_sampling_functions}\r\n\t\t\t\t${SamplingGLSL.equirect_functions}\r\n\t\t\t\t${SamplingGLSL.light_sampling_functions}\r\n\r\n\t\t\t\t${PTBVHGLSL.inside_fog_volume_function}\r\n\t\t\t\t${BSDFGLSL.ggx_functions}\r\n\t\t\t\t${BSDFGLSL.sheen_functions}\r\n\t\t\t\t${BSDFGLSL.iridescence_functions}\r\n\t\t\t\t${BSDFGLSL.fog_functions}\r\n\t\t\t\t${BSDFGLSL.bsdf_functions}\r\n\r\n\t\t\t\tfloat applyFilteredGlossy( float roughness, float accumulatedRoughness ) {\r\n\r\n\t\t\t\t\treturn clamp(\r\n\t\t\t\t\t\tmax(\r\n\t\t\t\t\t\t\troughness,\r\n\t\t\t\t\t\t\taccumulatedRoughness * filterGlossyFactor * 5.0 ),\r\n\t\t\t\t\t\t0.0,\r\n\t\t\t\t\t\t1.0\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvec3 sampleBackground( vec3 direction, vec2 uv ) {\r\n\r\n\t\t\t\t\tvec3 sampleDir = sampleHemisphere( direction, uv ) * 0.5 * backgroundBlur;\r\n\r\n\t\t\t\t\t#if FEATURE_BACKGROUND_MAP\r\n\r\n\t\t\t\t\tsampleDir = normalize( mat3( backgroundRotation ) * direction + sampleDir );\r\n\t\t\t\t\treturn applyEnvSaturation( backgroundIntensity * sampleEquirectColor( backgroundMap, sampleDir ) );\r\n\r\n\t\t\t\t\t#else\r\n\r\n\t\t\t\t\tsampleDir = normalize( envRotation3x3 * direction + sampleDir );\r\n\t\t\t\t\treturn applyEnvSaturation( environmentIntensity * sampleEquirectColor( envMapInfo.map, sampleDir ) );\r\n\r\n\t\t\t\t\t#endif\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t${RenderGLSL.render_structs}\r\n\t\t\t\t${RenderGLSL.camera_util_functions}\r\n\t\t\t\t${RenderGLSL.trace_scene_function}\r\n\t\t\t\t${RenderGLSL.attenuate_hit_function}\r\n\t\t\t\t${RenderGLSL.direct_light_contribution_function}\r\n\t\t\t\t${RenderGLSL.get_surface_record_function}\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\t// init\r\n\t\t\t\t\trng_initialize( gl_FragCoord.xy, seed );\r\n\t\t\t\t\tsobolPixelIndex = ( uint( gl_FragCoord.x ) << 16 ) | uint( gl_FragCoord.y );\r\n\t\t\t\t\tsobolPathIndex = uint( seed );\r\n\r\n\t\t\t\t\t// get camera ray\r\n\t\t\t\t\tRay ray = getCameraRay();\r\n\r\n\t\t\t\t\t// inverse environment rotation\r\n\t\t\t\t\tenvRotation3x3 = mat3( environmentRotation );\r\n\t\t\t\t\tinvEnvRotation3x3 = inverse( envRotation3x3 );\r\n\t\t\t\t\tlightsDenom =\r\n\t\t\t\t\t\t( environmentIntensity == 0.0 || envMapInfo.totalSum == 0.0 ) && lights.count != 0u ?\r\n\t\t\t\t\t\t\tfloat( lights.count ) :\r\n\t\t\t\t\t\t\tfloat( lights.count + 1u );\r\n\r\n\t\t\t\t\t// final color\r\n\t\t\t\t\tgl_FragColor = vec4( 0, 0, 0, 1 );\r\n\r\n\t\t\t\t\t// surface results\r\n\t\t\t\t\tSurfaceHit surfaceHit;\r\n\t\t\t\t\tScatterRecord scatterRec;\r\n\r\n\t\t\t\t\t// path tracing state\r\n\t\t\t\t\tRenderState state = initRenderState();\r\n\t\t\t\t\tstate.transmissiveTraversals = transmissiveBounces;\r\n\t\t\t\t\t#if FEATURE_FOG\r\n\r\n\t\t\t\t\tstate.fogMaterial.fogVolume = bvhIntersectFogVolumeHit(\r\n\t\t\t\t\t\tray.origin, - ray.direction,\r\n\t\t\t\t\t\tmaterialIndexAttribute, materials,\r\n\t\t\t\t\t\tstate.fogMaterial\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t#endif\r\n\r\n\t\t\t\t\tfor ( int i = 0; i < bounces; i ++ ) {\r\n\r\n\t\t\t\t\t\tsobolBounceIndex ++;\r\n\r\n\t\t\t\t\t\tstate.depth ++;\r\n\t\t\t\t\t\tstate.traversals = bounces - i;\r\n\t\t\t\t\t\tstate.firstRay = i == 0 && state.transmissiveTraversals == transmissiveBounces;\r\n\r\n\t\t\t\t\t\tint hitType = traceScene( ray, state.fogMaterial, surfaceHit );\r\n\r\n\t\t\t\t\t\t// check if we intersect any lights and accumulate the light contribution\r\n\t\t\t\t\t\t// TODO: we can add support for light surface rendering in the else condition if we\r\n\t\t\t\t\t\t// add the ability to toggle visibility of the the light\r\n\t\t\t\t\t\tif ( ! state.firstRay && ! state.transmissiveRay ) {\r\n\r\n\t\t\t\t\t\t\tLightRecord lightRec;\r\n\t\t\t\t\t\t\tfloat lightDist = hitType == NO_HIT ? INFINITY : surfaceHit.dist;\r\n\t\t\t\t\t\t\tfor ( uint i = 0u; i < lights.count; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tintersectLightAtIndex( lights.tex, ray.origin, ray.direction, i, lightRec ) &&\r\n\t\t\t\t\t\t\t\t\tlightRec.dist < lightDist\r\n\t\t\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\t\t\t#if FEATURE_MIS\r\n\r\n\t\t\t\t\t\t\t\t\t// weight the contribution\r\n\t\t\t\t\t\t\t\t\t// NOTE: Only area lights are supported for forward sampling and can be hit\r\n\t\t\t\t\t\t\t\t\tfloat misWeight = misHeuristic( scatterRec.pdf, lightRec.pdf / lightsDenom );\r\n\t\t\t\t\t\t\t\t\tgl_FragColor.rgb += lightRec.emission * state.throughputColor * misWeight;\r\n\r\n\t\t\t\t\t\t\t\t\t#else\r\n\r\n\t\t\t\t\t\t\t\t\tgl_FragColor.rgb += lightRec.emission * state.throughputColor;\r\n\r\n\t\t\t\t\t\t\t\t\t#endif\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( hitType == NO_HIT ) {\r\n\r\n\t\t\t\t\t\t\tif ( state.firstRay || state.transmissiveRay ) {\r\n\r\n\t\t\t\t\t\t\t\tgl_FragColor.rgb += sampleBackground( ray.direction, rand2( 2 ) ) * state.throughputColor;\r\n\t\t\t\t\t\t\t\tgl_FragColor.a = backgroundAlpha;\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t#if FEATURE_MIS\r\n\r\n\t\t\t\t\t\t\t\t// get the PDF of the hit envmap point\r\n\t\t\t\t\t\t\t\tvec3 envColor;\r\n\t\t\t\t\t\t\t\tfloat envPdf = sampleEquirect( envRotation3x3 * ray.direction, envColor );\r\n\t\t\t\t\t\t\t\tenvPdf /= lightsDenom;\r\n\r\n\t\t\t\t\t\t\t\t// and weight the contribution\r\n\t\t\t\t\t\t\t\tfloat misWeight = misHeuristic( scatterRec.pdf, envPdf );\r\n\t\t\t\t\t\t\t\tgl_FragColor.rgb += environmentIntensity * applyEnvSaturation( envColor ) * state.throughputColor * misWeight;\r\n\r\n\t\t\t\t\t\t\t\t#else\r\n\r\n\t\t\t\t\t\t\t\tgl_FragColor.rgb +=\r\n\t\t\t\t\t\t\t\t\tenvironmentIntensity *\r\n\t\t\t\t\t\t\t\t\tapplyEnvSaturation( sampleEquirectColor( envMapInfo.map, envRotation3x3 * ray.direction ) ) *\r\n\t\t\t\t\t\t\t\t\tstate.throughputColor;\r\n\r\n\t\t\t\t\t\t\t\t#endif\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tuint materialIndex = uTexelFetch1D( materialIndexAttribute, surfaceHit.faceIndices.x ).r;\r\n\t\t\t\t\t\tMaterial material = readMaterialInfo( materials, materialIndex );\r\n\r\n\t\t\t\t\t\t#if FEATURE_FOG\r\n\r\n\t\t\t\t\t\tif ( hitType == FOG_HIT ) {\r\n\r\n\t\t\t\t\t\t\tmaterial = state.fogMaterial;\r\n\t\t\t\t\t\t\tstate.accumulatedRoughness += 0.2;\r\n\r\n\t\t\t\t\t\t} else if ( material.fogVolume ) {\r\n\r\n\t\t\t\t\t\t\tstate.fogMaterial = material;\r\n\t\t\t\t\t\t\tstate.fogMaterial.fogVolume = surfaceHit.side == 1.0;\r\n\r\n\t\t\t\t\t\t\tray.origin = stepRayOrigin( ray.origin, ray.direction, - surfaceHit.faceNormal, surfaceHit.dist );\r\n\r\n\t\t\t\t\t\t\ti -= sign( state.transmissiveTraversals );\r\n\t\t\t\t\t\t\tstate.transmissiveTraversals -= sign( state.transmissiveTraversals );\r\n\t\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t#endif\r\n\r\n\t\t\t\t\t\t// early out if this is a matte material\r\n\t\t\t\t\t\tif ( material.matte && state.firstRay ) {\r\n\r\n\t\t\t\t\t\t\tgl_FragColor = vec4( 0.0 );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// if we've determined that this is a shadow ray and we've hit an item with no shadow casting\r\n\t\t\t\t\t\t// then skip it\r\n\t\t\t\t\t\tif ( ! material.castShadow && state.isShadowRay ) {\r\n\r\n\t\t\t\t\t\t\tray.origin = stepRayOrigin( ray.origin, ray.direction, - surfaceHit.faceNormal, surfaceHit.dist );\r\n\t\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tSurfaceRecord surf;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tgetSurfaceRecord(\r\n\t\t\t\t\t\t\t\tmaterial, surfaceHit, attributesArray, state.accumulatedRoughness,\r\n\t\t\t\t\t\t\t\tsurf\r\n\t\t\t\t\t\t\t) == SKIP_SURFACE\r\n\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\t// only allow a limited number of transparency discards otherwise we could\r\n\t\t\t\t\t\t\t// crash the context with too long a loop.\r\n\t\t\t\t\t\t\ti -= sign( state.transmissiveTraversals );\r\n\t\t\t\t\t\t\tstate.transmissiveTraversals -= sign( state.transmissiveTraversals );\r\n\r\n\t\t\t\t\t\t\tray.origin = stepRayOrigin( ray.origin, ray.direction, - surfaceHit.faceNormal, surfaceHit.dist );\r\n\t\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// shadow/reflection catcher: Production Grade V2\r\n\t\t\t\t\t\t// Solves wavering ripples (stable Fresnel), double ghosting (transmission mask), black circle (screen-blend alpha)\r\n\t\t\t\t\t\tif ( material.shadowReflectionCatcher && state.firstRay ) {\r\n\r\n\t\t\t\t\t\t\tvec3 hitPoint = stepRayOrigin( ray.origin, ray.direction, surf.faceNormal, surfaceHit.dist );\r\n\r\n\t\t\t\t\t\t\t// --- 1. STABLE FRESNEL MASK (prevents \"waver\" ripples) ---\r\n\t\t\t\t\t\t\t// Use perfect reflection vector so the mask does not jitter with roughness\r\n\t\t\t\t\t\t\tvec3 perfectReflDir = reflect( ray.direction, surf.faceNormal );\r\n\t\t\t\t\t\t\tvec3 stableHalfVector = normalize( - ray.direction + perfectReflDir );\r\n\t\t\t\t\t\t\tfloat stableDotVH = saturate( dot( - ray.direction, stableHalfVector ) );\r\n\t\t\t\t\t\t\tvec3 f0 = mix( vec3( surf.f0 * surf.specularIntensity ), surf.color, surf.metalness );\r\n\t\t\t\t\t\t\tvec3 transmissionMask = vec3( 1.0 ) - schlickFresnel( stableDotVH, f0 );\r\n\r\n\t\t\t\t\t\t\t// --- 2. REFLECTION TRACING (roughness-aware ray) ---\r\n\t\t\t\t\t\t\tScatterRecord catcherScatter = bsdfSample( - ray.direction, surf );\r\n\t\t\t\t\t\t\tvec3 reflectionWeight = vec3( 0.0 );\r\n\t\t\t\t\t\t\tif ( catcherScatter.pdf > 0.0 ) {\r\n\t\t\t\t\t\t\t\treflectionWeight = catcherScatter.color / catcherScatter.pdf;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ( any( isnan( reflectionWeight ) ) || any( isinf( reflectionWeight ) ) ) {\r\n\t\t\t\t\t\t\t\treflectionWeight = vec3( 0.0 );\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvec3 reflDir = catcherScatter.direction;\r\n\t\t\t\t\t\t\tif ( dot( reflDir, surf.faceNormal ) < 0.0 ) {\r\n\t\t\t\t\t\t\t\treflDir = reflect( ray.direction, surf.faceNormal );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tRay reflRay;\r\n\t\t\t\t\t\t\treflRay.origin = stepRayOrigin( hitPoint, reflDir, surf.faceNormal, 0.0 );\r\n\t\t\t\t\t\t\treflRay.direction = reflDir;\r\n\r\n\t\t\t\t\t\t\tSurfaceHit reflHit;\r\n\t\t\t\t\t\t\tint reflHitType = traceScene( reflRay, state.fogMaterial, reflHit );\r\n\t\t\t\t\t\t\tvec3 reflectionColor = vec3( 0.0 );\r\n\r\n\t\t\t\t\t\t\tif ( reflHitType == SURFACE_HIT ) {\r\n\t\t\t\t\t\t\t\tuint reflMatIndex = uTexelFetch1D( materialIndexAttribute, reflHit.faceIndices.x ).r;\r\n\t\t\t\t\t\t\t\tMaterial reflMat = readMaterialInfo( materials, reflMatIndex );\r\n\t\t\t\t\t\t\t\tSurfaceRecord reflSurf;\r\n\t\t\t\t\t\t\t\tif ( getSurfaceRecord( reflMat, reflHit, attributesArray, 0.0, reflSurf ) != SKIP_SURFACE ) {\r\n\t\t\t\t\t\t\t\t\tvec3 reflHitPoint = stepRayOrigin( reflRay.origin, reflRay.direction, reflSurf.faceNormal, reflHit.dist );\r\n\t\t\t\t\t\t\t\t\treflectionColor = reflSurf.emission + directLightContribution( - reflDir, reflSurf, state, reflHitPoint );\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// --- 3. SHADOW TRACING ---\r\n\t\t\t\t\t\t\tfloat shadowFactor = 0.0;\r\n\t\t\t\t\t\t\tstate.isShadowRay = true;\r\n\t\t\t\t\t\t\tif ( lightsDenom != 0.0 && rand( 9 ) < float( lights.count ) / lightsDenom ) {\r\n\t\t\t\t\t\t\t\tLightRecord lightRec = randomLightSample( lights.tex, iesProfiles, lights.count, hitPoint, rand3( 10 ) );\r\n\t\t\t\t\t\t\t\tif ( dot( surf.faceNormal, lightRec.direction ) >= 0.0 && lightRec.pdf > 0.0 ) {\r\n\t\t\t\t\t\t\t\t\tRay lightRay;\r\n\t\t\t\t\t\t\t\t\tlightRay.origin = hitPoint;\r\n\t\t\t\t\t\t\t\t\tlightRay.direction = lightRec.direction;\r\n\t\t\t\t\t\t\t\t\tvec3 att;\r\n\t\t\t\t\t\t\t\t\tif ( attenuateHit( state, lightRay, lightRec.dist, att ) ) shadowFactor = 1.0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if ( envMapInfo.totalSum != 0.0 && environmentIntensity != 0.0 ) {\r\n\t\t\t\t\t\t\t\tvec3 envColor, envDirection;\r\n\t\t\t\t\t\t\t\tfloat envPdf = sampleEquirectProbability( rand2( 11 ), envColor, envDirection );\r\n\t\t\t\t\t\t\t\tenvDirection = invEnvRotation3x3 * envDirection;\r\n\t\t\t\t\t\t\t\tif ( dot( surf.faceNormal, envDirection ) >= 0.0 && envPdf > 0.0 ) {\r\n\t\t\t\t\t\t\t\t\tRay envRay;\r\n\t\t\t\t\t\t\t\t\tenvRay.origin = hitPoint;\r\n\t\t\t\t\t\t\t\t\tenvRay.direction = envDirection;\r\n\t\t\t\t\t\t\t\t\tvec3 att;\r\n\t\t\t\t\t\t\t\t\tif ( attenuateHit( state, envRay, INFINITY, att ) ) shadowFactor = 1.0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstate.isShadowRay = false;\r\n\r\n\t\t\t\t\t\t\t// --- 4. COMPOSITING (transmission masking: reflection hides shadow/background) ---\r\n\t\t\t\t\t\t\tvec3 backColor = sampleBackground( ray.direction, rand2( 2 ) );\r\n\t\t\t\t\t\t\tvec3 shadowedBackground = backColor * ( 1.0 - shadowFactor );\r\n\t\t\t\t\t\t\tvec3 finalReflection = reflectionColor * reflectionWeight * shadowCatcherReflectionIntensity;\r\n\t\t\t\t\t\t\tgl_FragColor.rgb = shadowedBackground * transmissionMask + finalReflection;\r\n\r\n\t\t\t\t\t\t\t// --- 5. ALPHA (screen blend to avoid black circle) ---\r\n\t\t\t\t\t\t\tfloat reflectionLuma = dot( finalReflection, vec3( 0.2126, 0.7152, 0.0722 ) );\r\n\t\t\t\t\t\t\tfloat reflAlpha = saturate( reflectionLuma * 1.5 );\r\n\t\t\t\t\t\t\tfloat shadowAlpha = shadowFactor * opacity;\r\n\t\t\t\t\t\t\tshadowAlpha *= ( 1.0 - reflAlpha );\r\n\t\t\t\t\t\t\tfloat combinedAlpha = 1.0 - ( 1.0 - shadowAlpha ) * ( 1.0 - reflAlpha );\r\n\t\t\t\t\t\t\tgl_FragColor.a = max( backgroundAlpha, combinedAlpha );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tscatterRec = bsdfSample( - ray.direction, surf );\r\n\t\t\t\t\t\tstate.isShadowRay = scatterRec.specularPdf < rand( 4 );\r\n\r\n\t\t\t\t\t\tbool isBelowSurface = ! surf.volumeParticle && dot( scatterRec.direction, surf.faceNormal ) < 0.0;\r\n\t\t\t\t\t\tvec3 hitPoint = stepRayOrigin( ray.origin, ray.direction, isBelowSurface ? - surf.faceNormal : surf.faceNormal, surfaceHit.dist );\r\n\r\n\t\t\t\t\t\t// next event estimation\r\n\t\t\t\t\t\t#if FEATURE_MIS\r\n\r\n\t\t\t\t\t\tgl_FragColor.rgb += directLightContribution( - ray.direction, surf, state, hitPoint );\r\n\r\n\t\t\t\t\t\t#endif\r\n\r\n\t\t\t\t\t\t// accumulate a roughness value to offset diffuse, specular, diffuse rays that have high contribution\r\n\t\t\t\t\t\t// to a single pixel resulting in fireflies\r\n\t\t\t\t\t\t// TODO: handle transmissive surfaces\r\n\t\t\t\t\t\tif ( ! surf.volumeParticle && ! isBelowSurface ) {\r\n\r\n\t\t\t\t\t\t\t// determine if this is a rough normal or not by checking how far off straight up it is\r\n\t\t\t\t\t\t\tvec3 halfVector = normalize( - ray.direction + scatterRec.direction );\r\n\t\t\t\t\t\t\tstate.accumulatedRoughness += max(\r\n\t\t\t\t\t\t\t\tsin( acosApprox( dot( halfVector, surf.normal ) ) ),\r\n\t\t\t\t\t\t\t\tsin( acosApprox( dot( halfVector, surf.clearcoatNormal ) ) )\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tstate.transmissiveRay = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// accumulate emissive color\r\n\t\t\t\t\t\tgl_FragColor.rgb += ( surf.emission * state.throughputColor );\r\n\r\n\t\t\t\t\t\t// skip the sample if our PDF or ray is impossible\r\n\t\t\t\t\t\tif ( scatterRec.pdf <= 0.0 || ! isDirectionValid( scatterRec.direction, surf.normal, surf.faceNormal ) ) {\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// if we're bouncing around the inside a transmissive material then decrement\r\n\t\t\t\t\t\t// perform this separate from a bounce\r\n\t\t\t\t\t\tbool isTransmissiveRay = ! surf.volumeParticle && dot( scatterRec.direction, surf.faceNormal * surfaceHit.side ) < 0.0;\r\n\t\t\t\t\t\tif ( ( isTransmissiveRay || isBelowSurface ) && state.transmissiveTraversals > 0 ) {\r\n\r\n\t\t\t\t\t\t\tstate.transmissiveTraversals --;\r\n\t\t\t\t\t\t\ti --;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//\r\n\r\n\t\t\t\t\t\t// handle throughput color transformation\r\n\t\t\t\t\t\t// attenuate the throughput color by the medium color\r\n\t\t\t\t\t\tif ( ! surf.frontFace ) {\r\n\r\n\t\t\t\t\t\t\tstate.throughputColor *= transmissionAttenuation( surfaceHit.dist, surf.attenuationColor, surf.attenuationDistance );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t#if FEATURE_RUSSIAN_ROULETTE\r\n\r\n\t\t\t\t\t\t// russian roulette path termination\r\n\t\t\t\t\t\t// https://www.arnoldrenderer.com/research/physically_based_shader_design_in_arnold.pdf\r\n\t\t\t\t\t\tuint minBounces = 3u;\r\n\t\t\t\t\t\tfloat depthProb = float( state.depth < minBounces );\r\n\r\n\t\t\t\t\t\tfloat rrProb = luminance( state.throughputColor * scatterRec.color / scatterRec.pdf );\r\n\t\t\t\t\t\trrProb /= luminance( state.throughputColor );\r\n\t\t\t\t\t\trrProb = sqrt( rrProb );\r\n\t\t\t\t\t\trrProb = max( rrProb, depthProb );\r\n\t\t\t\t\t\trrProb = min( rrProb, 1.0 );\r\n\t\t\t\t\t\tif ( rand( 8 ) > rrProb ) {\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// perform sample clamping here to avoid bright pixels\r\n\t\t\t\t\t\tstate.throughputColor *= min( 1.0 / rrProb, 20.0 );\r\n\r\n\t\t\t\t\t\t#endif\r\n\r\n\t\t\t\t\t\t// adjust the throughput and discard and exit if we find discard the sample if there are any NaNs\r\n\t\t\t\t\t\tstate.throughputColor *= scatterRec.color / scatterRec.pdf;\r\n\t\t\t\t\t\tif ( any( isnan( state.throughputColor ) ) || any( isinf( state.throughputColor ) ) ) {\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//\r\n\r\n\t\t\t\t\t\t// prepare for next ray\r\n\t\t\t\t\t\tray.direction = scatterRec.direction;\r\n\t\t\t\t\t\tray.origin = hitPoint;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgl_FragColor.a *= opacity;\r\n\r\n\t\t\t\t\t#if DEBUG_MODE == 1\r\n\r\n\t\t\t\t\t// output the number of rays checked in the path and number of\r\n\t\t\t\t\t// transmissive rays encountered.\r\n\t\t\t\t\tgl_FragColor.rgb = vec3(\r\n\t\t\t\t\t\tfloat( state.depth ),\r\n\t\t\t\t\t\ttransmissiveBounces - state.transmissiveTraversals,\r\n\t\t\t\t\t\t0.0\r\n\t\t\t\t\t);\r\n\t\t\t\t\tgl_FragColor.a = 1.0;\r\n\r\n\t\t\t\t\t#endif\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`\r\n\r\n\t\t} );\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n}\n","import { RGBAFormat, FloatType, Color, Vector2, WebGLRenderTarget, NoBlending, NormalBlending, Vector4, NearestFilter } from 'three';\r\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\r\nimport { BlendMaterial } from '../materials/fullscreen/BlendMaterial.js';\r\nimport { SobolNumberMapGenerator } from '../utils/SobolNumberMapGenerator.js';\r\nimport { PhysicalPathTracingMaterial } from '../materials/pathtracing/PhysicalPathTracingMaterial.js';\r\n\r\nfunction* renderTask() {\r\n\r\n\tconst {\r\n\t\t_renderer,\r\n\t\t_fsQuad,\r\n\t\t_blendQuad,\r\n\t\t_primaryTarget,\r\n\t\t_blendTargets,\r\n\t\t_sobolTarget,\r\n\t\t_subframe,\r\n\t\talpha,\r\n\t\tmaterial,\r\n\t} = this;\r\n\tconst _ogScissor = new Vector4();\r\n\tconst _ogViewport = new Vector4();\r\n\r\n\tconst blendMaterial = _blendQuad.material;\r\n\tlet [ blendTarget1, blendTarget2 ] = _blendTargets;\r\n\r\n\twhile ( true ) {\r\n\r\n\t\tif ( alpha ) {\r\n\r\n\t\t\tblendMaterial.opacity = this._opacityFactor / ( this.samples + 1 );\r\n\t\t\tmaterial.blending = NoBlending;\r\n\t\t\tmaterial.opacity = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterial.opacity = this._opacityFactor / ( this.samples + 1 );\r\n\t\t\tmaterial.blending = NormalBlending;\r\n\r\n\t\t}\r\n\r\n\t\tconst [ subX, subY, subW, subH ] = _subframe;\r\n\r\n\t\tconst w = _primaryTarget.width;\r\n\t\tconst h = _primaryTarget.height;\r\n\t\tmaterial.resolution.set( w * subW, h * subH );\r\n\t\tmaterial.sobolTexture = _sobolTarget.texture;\r\n\t\tmaterial.stratifiedTexture.init( 20, material.bounces + material.transmissiveBounces + 5 );\r\n\t\tmaterial.stratifiedTexture.next();\r\n\t\tmaterial.seed ++;\r\n\r\n\t\tconst tilesX = this.tiles.x || 1;\r\n\t\tconst tilesY = this.tiles.y || 1;\r\n\t\tconst totalTiles = tilesX * tilesY;\r\n\r\n\t\tconst pxSubW = Math.ceil( w * subW );\r\n\t\tconst pxSubH = Math.ceil( h * subH );\r\n\t\tconst pxSubX = Math.floor( subX * w );\r\n\t\tconst pxSubY = Math.floor( subY * h );\r\n\r\n\t\tconst pxTileW = Math.ceil( pxSubW / tilesX );\r\n\t\tconst pxTileH = Math.ceil( pxSubH / tilesY );\r\n\r\n\t\tfor ( let y = 0; y < tilesY; y ++ ) {\r\n\r\n\t\t\tfor ( let x = 0; x < tilesX; x ++ ) {\r\n\r\n\t\t\t\t// store og state\r\n\t\t\t\tconst ogRenderTarget = _renderer.getRenderTarget();\r\n\t\t\t\tconst ogAutoClear = _renderer.autoClear;\r\n\t\t\t\tconst ogScissorTest = _renderer.getScissorTest();\r\n\t\t\t\t_renderer.getScissor( _ogScissor );\r\n\t\t\t\t_renderer.getViewport( _ogViewport );\r\n\r\n\t\t\t\tlet tx = x;\r\n\t\t\t\tlet ty = y;\r\n\t\t\t\tif ( ! this.stableTiles ) {\r\n\r\n\t\t\t\t\tconst tileIndex = ( this._currentTile ) % ( tilesX * tilesY );\r\n\t\t\t\t\ttx = tileIndex % tilesX;\r\n\t\t\t\t\tty = ~ ~ ( tileIndex / tilesX );\r\n\r\n\t\t\t\t\tthis._currentTile = tileIndex + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// set the scissor and the viewport on the render target\r\n\t\t\t\t// note that when using the webgl renderer set viewport the device pixel ratio\r\n\t\t\t\t// is multiplied into the field causing some pixels to not be rendered\r\n\t\t\t\tconst reverseTy = tilesY - ty - 1;\r\n\t\t\t\t_primaryTarget.scissor.set(\r\n\t\t\t\t\tpxSubX + tx * pxTileW,\r\n\t\t\t\t\tpxSubY + reverseTy * pxTileH,\r\n\t\t\t\t\tMath.min( pxTileW, pxSubW - tx * pxTileW ),\r\n\t\t\t\t\tMath.min( pxTileH, pxSubH - reverseTy * pxTileH ),\r\n\t\t\t\t);\r\n\r\n\t\t\t\t_primaryTarget.viewport.set(\r\n\t\t\t\t\tpxSubX,\r\n\t\t\t\t\tpxSubY,\r\n\t\t\t\t\tpxSubW,\r\n\t\t\t\t\tpxSubH,\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// three.js renderer takes values relative to the current pixel ratio\r\n\t\t\t\t_renderer.setRenderTarget( _primaryTarget );\r\n\t\t\t\t_renderer.setScissorTest( true );\r\n\r\n\t\t\t\t_renderer.autoClear = false;\r\n\t\t\t\t_fsQuad.render( _renderer );\r\n\r\n\t\t\t\t// reset original renderer state\r\n\t\t\t\t_renderer.setViewport( _ogViewport );\r\n\t\t\t\t_renderer.setScissor( _ogScissor );\r\n\t\t\t\t_renderer.setScissorTest( ogScissorTest );\r\n\t\t\t\t_renderer.setRenderTarget( ogRenderTarget );\r\n\t\t\t\t_renderer.autoClear = ogAutoClear;\r\n\r\n\t\t\t\t// swap and blend alpha targets\r\n\t\t\t\tif ( alpha ) {\r\n\r\n\t\t\t\t\tblendMaterial.target1 = blendTarget1.texture;\r\n\t\t\t\t\tblendMaterial.target2 = _primaryTarget.texture;\r\n\r\n\t\t\t\t\t_renderer.setRenderTarget( blendTarget2 );\r\n\t\t\t\t\t_blendQuad.render( _renderer );\r\n\t\t\t\t\t_renderer.setRenderTarget( ogRenderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.samples += ( 1 / totalTiles );\r\n\r\n\t\t\t\t// round the samples value if we've finished the tiles\r\n\t\t\t\tif ( x === tilesX - 1 && y === tilesY - 1 ) {\r\n\r\n\t\t\t\t\tthis.samples = Math.round( this.samples );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tyield;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t[ blendTarget1, blendTarget2 ] = [ blendTarget2, blendTarget1 ];\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst ogClearColor = new Color();\r\nexport class PathTracingRenderer {\r\n\r\n\tget material() {\r\n\r\n\t\treturn this._fsQuad.material;\r\n\r\n\t}\r\n\r\n\tset material( v ) {\r\n\r\n\t\tthis._fsQuad.material.removeEventListener( 'recompilation', this._compileFunction );\r\n\t\tv.addEventListener( 'recompilation', this._compileFunction );\r\n\r\n\t\tthis._fsQuad.material = v;\r\n\r\n\t}\r\n\r\n\tget target() {\r\n\r\n\t\treturn this._alpha ? this._blendTargets[ 1 ] : this._primaryTarget;\r\n\r\n\t}\r\n\r\n\tset alpha( v ) {\r\n\r\n\t\tif ( this._alpha === v ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! v ) {\r\n\r\n\t\t\tthis._blendTargets[ 0 ].dispose();\r\n\t\t\tthis._blendTargets[ 1 ].dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis._alpha = v;\r\n\t\tthis.reset();\r\n\r\n\t}\r\n\r\n\tget alpha() {\r\n\r\n\t\treturn this._alpha;\r\n\r\n\t}\r\n\r\n\tget isCompiling() {\r\n\r\n\t\treturn Boolean( this._compilePromise );\r\n\r\n\t}\r\n\r\n\tconstructor( renderer ) {\r\n\r\n\t\tthis.camera = null;\r\n\t\tthis.tiles = new Vector2( 3, 3 );\r\n\r\n\t\tthis.stableNoise = false;\r\n\t\tthis.stableTiles = true;\r\n\r\n\t\tthis.samples = 0;\r\n\t\tthis._subframe = new Vector4( 0, 0, 1, 1 );\r\n\t\tthis._opacityFactor = 1.0;\r\n\t\tthis._renderer = renderer;\r\n\t\tthis._alpha = false;\r\n\t\tthis._fsQuad = new FullScreenQuad( new PhysicalPathTracingMaterial() );\r\n\t\tthis._blendQuad = new FullScreenQuad( new BlendMaterial() );\r\n\t\tthis._task = null;\r\n\t\tthis._currentTile = 0;\r\n\t\tthis._compilePromise = null;\r\n\r\n\t\tthis._sobolTarget = new SobolNumberMapGenerator().generate( renderer );\r\n\r\n\t\tthis._primaryTarget = new WebGLRenderTarget( 1, 1, {\r\n\t\t\tformat: RGBAFormat,\r\n\t\t\ttype: FloatType,\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t} );\r\n\t\tthis._blendTargets = [\r\n\t\t\tnew WebGLRenderTarget( 1, 1, {\r\n\t\t\t\tformat: RGBAFormat,\r\n\t\t\t\ttype: FloatType,\r\n\t\t\t\tmagFilter: NearestFilter,\r\n\t\t\t\tminFilter: NearestFilter,\r\n\t\t\t} ),\r\n\t\t\tnew WebGLRenderTarget( 1, 1, {\r\n\t\t\t\tformat: RGBAFormat,\r\n\t\t\t\ttype: FloatType,\r\n\t\t\t\tmagFilter: NearestFilter,\r\n\t\t\t\tminFilter: NearestFilter,\r\n\t\t\t} ),\r\n\t\t];\r\n\r\n\t\t// Debounced compile: wait one frame so multiple define/param changes in one burst cause a single compile.\r\n\t\t// Reduces GPU exhaustion when toggling options or loading scenes.\r\n\t\tthis._compileScheduled = false;\r\n\t\tthis._compileFunction = () => {\r\n\r\n\t\t\tif ( this._compileScheduled ) return;\r\n\t\t\tthis._compileScheduled = true;\r\n\r\n\t\t\tconst self = this;\r\n\t\t\trequestAnimationFrame( function doCompile() {\r\n\r\n\t\t\t\tself._compileScheduled = false;\r\n\t\t\t\tconst promise = self.compileMaterial( self._fsQuad._mesh );\r\n\t\t\t\tpromise.then( () => {\r\n\r\n\t\t\t\t\tif ( self._compilePromise === promise ) {\r\n\r\n\t\t\t\t\t\tself._compilePromise = null;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tself._compilePromise = promise;\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t\tthis.material.addEventListener( 'recompilation', this._compileFunction );\r\n\r\n\t}\r\n\r\n\tcompileMaterial() {\r\n\r\n\t\treturn this._renderer.compileAsync( this._fsQuad._mesh );\r\n\r\n\t}\r\n\r\n\tsetCamera( camera ) {\r\n\r\n\t\tconst { material } = this;\r\n\t\tmaterial.cameraWorldMatrix.copy( camera.matrixWorld );\r\n\t\tmaterial.invProjectionMatrix.copy( camera.projectionMatrixInverse );\r\n\t\tmaterial.physicalCamera.updateFrom( camera );\r\n\r\n\t\t// Perspective camera (default)\r\n\t\tlet cameraType = 0;\r\n\r\n\t\t// An orthographic projection matrix will always have the bottom right element == 1\r\n\t\t// And a perspective projection matrix will always have the bottom right element == 0\r\n\t\tif ( camera.projectionMatrix.elements[ 15 ] > 0 ) {\r\n\r\n\t\t\t// Orthographic\r\n\t\t\tcameraType = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( camera.isEquirectCamera ) {\r\n\r\n\t\t\t// Equirectangular\r\n\t\t\tcameraType = 2;\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.setDefine( 'CAMERA_TYPE', cameraType );\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t}\r\n\r\n\tsetSize( w, h ) {\r\n\r\n\t\tw = Math.ceil( w );\r\n\t\th = Math.ceil( h );\r\n\r\n\t\tif ( this._primaryTarget.width === w && this._primaryTarget.height === h ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis._primaryTarget.setSize( w, h );\r\n\t\tthis._blendTargets[ 0 ].setSize( w, h );\r\n\t\tthis._blendTargets[ 1 ].setSize( w, h );\r\n\t\tthis.reset();\r\n\r\n\t}\r\n\r\n\tgetSize( target ) {\r\n\r\n\t\ttarget.x = this._primaryTarget.width;\r\n\t\ttarget.y = this._primaryTarget.height;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis._primaryTarget.dispose();\r\n\t\tthis._blendTargets[ 0 ].dispose();\r\n\t\tthis._blendTargets[ 1 ].dispose();\r\n\t\tthis._sobolTarget.dispose();\r\n\r\n\t\tthis._fsQuad.dispose();\r\n\t\tthis._blendQuad.dispose();\r\n\t\tthis._task = null;\r\n\t\tthis._compilePromise = null;\r\n\t\tthis._compileScheduled = false;\r\n\r\n\t}\r\n\r\n\treset() {\r\n\r\n\t\tconst { _renderer, _primaryTarget, _blendTargets } = this;\r\n\t\tconst ogRenderTarget = _renderer.getRenderTarget();\r\n\t\tconst ogClearAlpha = _renderer.getClearAlpha();\r\n\t\t_renderer.getClearColor( ogClearColor );\r\n\r\n\t\t_renderer.setRenderTarget( _primaryTarget );\r\n\t\t_renderer.setClearColor( 0, 0 );\r\n\t\t_renderer.clearColor();\r\n\r\n\t\t_renderer.setRenderTarget( _blendTargets[ 0 ] );\r\n\t\t_renderer.setClearColor( 0, 0 );\r\n\t\t_renderer.clearColor();\r\n\r\n\t\t_renderer.setRenderTarget( _blendTargets[ 1 ] );\r\n\t\t_renderer.setClearColor( 0, 0 );\r\n\t\t_renderer.clearColor();\r\n\r\n\t\t_renderer.setClearColor( ogClearColor, ogClearAlpha );\r\n\t\t_renderer.setRenderTarget( ogRenderTarget );\r\n\r\n\t\tthis.samples = 0;\r\n\t\tthis._task = null;\r\n\r\n\t\tthis.material.stratifiedTexture.stableNoise = this.stableNoise;\r\n\t\tif ( this.stableNoise ) {\r\n\r\n\t\t\tthis.material.seed = 0;\r\n\t\t\tthis.material.stratifiedTexture.reset();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\t// ensure we've updated our defines before rendering so we can ensure we\r\n\t\t// can wait for compilation to finish\r\n\t\tthis.material.onBeforeRender();\r\n\t\tif ( this.isCompiling ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! this._task ) {\r\n\r\n\t\t\tthis._task = renderTask.call( this );\r\n\r\n\t\t}\r\n\r\n\t\tthis._task.next();\r\n\r\n\t}\r\n\r\n}\r\n","import {\r\n\tClampToEdgeWrapping,\r\n\tColor,\r\n\tDataTexture,\r\n\tEquirectangularReflectionMapping,\r\n\tLinearFilter,\r\n\tRepeatWrapping,\r\n\tRGBAFormat,\r\n\tSpherical,\r\n\tVector2,\r\n\tFloatType\r\n} from 'three';\r\n\r\nconst _uv = new Vector2();\r\nconst _coord = new Vector2();\r\nconst _polar = new Spherical();\r\nconst _color = new Color();\r\nexport class ProceduralEquirectTexture extends DataTexture {\r\n\r\n\tconstructor( width = 512, height = 512 ) {\r\n\r\n\t\tsuper(\r\n\t\t\tnew Float32Array( width * height * 4 ),\r\n\t\t\twidth, height, RGBAFormat, FloatType, EquirectangularReflectionMapping,\r\n\t\t\tRepeatWrapping, ClampToEdgeWrapping, LinearFilter, LinearFilter,\r\n\t\t);\r\n\r\n\t\tthis.generationCallback = null;\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tthis.dispose();\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t\tconst { data, width, height } = this.image;\r\n\t\tfor ( let x = 0; x < width; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y < height; y ++ ) {\r\n\r\n\t\t\t\t_coord.set( width, height );\r\n\r\n\t\t\t\t_uv.set( x / width, y / height );\r\n\t\t\t\t_uv.x -= 0.5;\r\n\t\t\t\t_uv.y = 1.0 - _uv.y;\r\n\r\n\t\t\t\t_polar.theta = _uv.x * 2.0 * Math.PI;\r\n\t\t\t\t_polar.phi = _uv.y * Math.PI;\r\n\t\t\t\t_polar.radius = 1.0;\r\n\r\n\t\t\t\tthis.generationCallback( _polar, _uv, _coord, _color );\r\n\r\n\t\t\t\tconst i = y * width + x;\r\n\t\t\t\tconst i4 = 4 * i;\r\n\t\t\t\tdata[ i4 + 0 ] = ( _color.r );\r\n\t\t\t\tdata[ i4 + 1 ] = ( _color.g );\r\n\t\t\t\tdata[ i4 + 2 ] = ( _color.b );\r\n\t\t\t\tdata[ i4 + 3 ] = ( 1.0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcopy( other ) {\r\n\r\n\t\tsuper.copy( other );\r\n\t\tthis.generationCallback = other.generationCallback;\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n","import { Color, Vector3 } from 'three';\r\nimport { ProceduralEquirectTexture } from './ProceduralEquirectTexture.js';\r\n\r\nconst _direction = new Vector3();\r\nexport class GradientEquirectTexture extends ProceduralEquirectTexture {\r\n\r\n\tconstructor( resolution = 512 ) {\r\n\r\n\t\tsuper( resolution, resolution );\r\n\r\n\t\tthis.topColor = new Color().set( 0xffffff );\r\n\t\tthis.bottomColor = new Color().set( 0x000000 );\r\n\t\tthis.exponent = 2;\r\n\t\tthis.generationCallback = ( polar, uv, coord, color ) => {\r\n\r\n\t\t\t_direction.setFromSpherical( polar );\r\n\r\n\t\t\tconst t = _direction.y * 0.5 + 0.5;\r\n\t\t\tcolor.lerpColors( this.bottomColor, this.topColor, t ** this.exponent );\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tcopy( other ) {\r\n\r\n\t\tsuper.copy( other );\r\n\r\n\t\tthis.topColor.copy( other.topColor );\r\n\t\tthis.bottomColor.copy( other.bottomColor );\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n","import { ShaderMaterial } from 'three';\n\n// Material that tone maps a texture before performing interpolation to prevent\n// unexpected high values during texture stretching interpolation.\n// Emulates browser image stretching\nexport class ClampedInterpolationMaterial extends ShaderMaterial {\n\n\tget map() {\n\n\t\treturn this.uniforms.map.value;\n\n\t}\n\n\tset map( v ) {\n\n\t\tthis.uniforms.map.value = v;\n\n\t}\n\n\tget opacity() {\n\n\t\treturn this.uniforms.opacity.value;\n\n\t}\n\n\tset opacity( v ) {\n\n\t\tif ( this.uniforms ) {\n\n\t\t\tthis.uniforms.opacity.value = v;\n\n\t\t}\n\n\t}\n\n\tget saturation() {\n\n\t\treturn this.uniforms?.saturation?.value ?? 1;\n\n\t}\n\n\tset saturation( v ) {\n\n\t\tif ( this.uniforms?.saturation ) this.uniforms.saturation.value = v;\n\n\t}\n\n\tget contrast() {\n\n\t\treturn this.uniforms?.contrast?.value ?? 1;\n\n\t}\n\n\tset contrast( v ) {\n\n\t\tif ( this.uniforms?.contrast ) this.uniforms.contrast.value = v;\n\n\t}\n\n\tconstructor( params ) {\n\n\t\tsuper( {\n\t\t\tuniforms: {\n\n\t\t\t\tmap: { value: null },\n\t\t\t\topacity: { value: 1 },\n\t\t\t\tsaturation: { value: 1 },\n\t\t\t\tcontrast: { value: 1 },\n\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\t\t\t\tuniform sampler2D map;\n\t\t\t\tuniform float opacity;\n\t\t\t\tuniform float saturation;\n\t\t\t\tuniform float contrast;\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tvec4 clampedTexelFatch( sampler2D map, ivec2 px, int lod ) {\n\n\t\t\t\t\tvec4 res = texelFetch( map, ivec2( px.x, px.y ), 0 );\n\n\t\t\t\t\t#if defined( TONE_MAPPING )\n\n\t\t\t\t\tres.xyz = toneMapping( res.xyz );\n\n\t\t\t\t\t#endif\n\n\t\t\t  \t\treturn linearToOutputTexel( res );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec2 size = vec2( textureSize( map, 0 ) );\n\t\t\t\t\tvec2 pxUv = vUv * size;\n\t\t\t\t\tvec2 pxCurr = floor( pxUv );\n\t\t\t\t\tvec2 pxFrac = fract( pxUv ) - 0.5;\n\t\t\t\t\tvec2 pxOffset;\n\t\t\t\t\tpxOffset.x = pxFrac.x > 0.0 ? 1.0 : - 1.0;\n\t\t\t\t\tpxOffset.y = pxFrac.y > 0.0 ? 1.0 : - 1.0;\n\n\t\t\t\t\tvec2 pxNext = clamp( pxOffset + pxCurr, vec2( 0.0 ), size - 1.0 );\n\t\t\t\t\tvec2 alpha = abs( pxFrac );\n\n\t\t\t\t\tvec4 p1 = mix(\n\t\t\t\t\t\tclampedTexelFatch( map, ivec2( pxCurr.x, pxCurr.y ), 0 ),\n\t\t\t\t\t\tclampedTexelFatch( map, ivec2( pxNext.x, pxCurr.y ), 0 ),\n\t\t\t\t\t\talpha.x\n\t\t\t\t\t);\n\n\t\t\t\t\tvec4 p2 = mix(\n\t\t\t\t\t\tclampedTexelFatch( map, ivec2( pxCurr.x, pxNext.y ), 0 ),\n\t\t\t\t\t\tclampedTexelFatch( map, ivec2( pxNext.x, pxNext.y ), 0 ),\n\t\t\t\t\t\talpha.x\n\t\t\t\t\t);\n\n\t\t\t\t\tgl_FragColor = mix( p1, p2, alpha.y );\n\n\t\t\t\t\t// product saturation (1 = unchanged, 0 = grayscale, >1 = more vivid)\n\t\t\t\t\tfloat lum = dot( gl_FragColor.rgb, vec3( 0.2126, 0.7152, 0.0722 ) );\n\t\t\t\t\tgl_FragColor.rgb = mix( vec3( lum ), gl_FragColor.rgb, saturation );\n\n\t\t\t\t\t// product contrast (1 = unchanged, >1 = more contrast)\n\t\t\t\t\tgl_FragColor.rgb = ( gl_FragColor.rgb - 0.5 ) * contrast + 0.5;\n\t\t\t\t\tgl_FragColor.rgb = clamp( gl_FragColor.rgb, 0.0, 1.0 );\n\n\t\t\t\t\tgl_FragColor.a *= opacity;\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t\t\t}\n\t\t\t`\n\t\t} );\n\n\t\tthis.setValues( params );\n\n\t}\n\n}\n","import {\r\n\tDataTexture,\r\n\tDataUtils,\r\n\tEquirectangularReflectionMapping,\r\n\tFloatType,\r\n\tHalfFloatType,\r\n\tLinearFilter,\r\n\tLinearMipMapLinearFilter,\r\n\tRGBAFormat,\r\n\tRepeatWrapping,\r\n\tShaderMaterial,\r\n\tWebGLRenderTarget,\r\n} from 'three';\r\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\r\nimport * as CommonGLSL from '../shader/common/index.js';\r\n\r\nclass CubeToEquirectMaterial extends ShaderMaterial {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tenvMap: { value: null },\r\n\t\t\t\tflipEnvMap: { value: - 1 },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\t\t\t\t#define ENVMAP_TYPE_CUBE_UV\r\n\r\n\t\t\t\tuniform samplerCube envMap;\r\n\t\t\t\tuniform float flipEnvMap;\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\t#include <common>\r\n\t\t\t\t#include <cube_uv_reflection_fragment>\r\n\r\n\t\t\t\t${ CommonGLSL.util_functions }\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvec3 rayDirection = equirectUvToDirection( vUv );\r\n\t\t\t\t\trayDirection.x *= flipEnvMap;\r\n\t\t\t\t\tgl_FragColor = textureCube( envMap, rayDirection );\r\n\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t\tthis.depthWrite = false;\r\n\t\tthis.depthTest = false;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class CubeToEquirectGenerator {\r\n\r\n\tconstructor( renderer ) {\r\n\r\n\t\tthis._renderer = renderer;\r\n\t\tthis._quad = new FullScreenQuad( new CubeToEquirectMaterial() );\r\n\r\n\t}\r\n\r\n\tgenerate( source, width = null, height = null ) {\r\n\r\n\t\tif ( ! source.isCubeTexture ) {\r\n\r\n\t\t\tthrow new Error( 'CubeToEquirectMaterial: Source can only be cube textures.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst image = source.images[ 0 ];\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst quad = this._quad;\r\n\r\n\t\t// determine the dimensions if not provided\r\n\t\tif ( width === null ) {\r\n\r\n\t\t\twidth = 4 * image.height;\r\n\r\n\t\t}\r\n\r\n\t\tif ( height === null ) {\r\n\r\n\t\t\theight = 2 * image.height;\r\n\r\n\t\t}\r\n\r\n\t\tconst target = new WebGLRenderTarget( width, height, {\r\n\t\t\ttype: FloatType,\r\n\t\t\tcolorSpace: image.colorSpace,\r\n\t\t} );\r\n\r\n\t\t// prep the cube map data\r\n\t\tconst imageHeight = image.height;\r\n\t\tconst maxMip = Math.log2( imageHeight ) - 2;\r\n\t\tconst texelHeight = 1.0 / imageHeight;\r\n\t\tconst texelWidth = 1.0 / ( 3 * Math.max( Math.pow( 2, maxMip ), 7 * 16 ) );\r\n\r\n\t\tquad.material.defines.CUBEUV_MAX_MIP = `${ maxMip }.0`;\r\n\t\tquad.material.defines.CUBEUV_TEXEL_WIDTH = texelWidth;\r\n\t\tquad.material.defines.CUBEUV_TEXEL_HEIGHT = texelHeight;\r\n\t\tquad.material.uniforms.envMap.value = source;\r\n\t\tquad.material.uniforms.flipEnvMap.value = source.isRenderTargetTexture ? 1 : - 1;\r\n\t\tquad.material.needsUpdate = true;\r\n\r\n\t\t// save state and render the contents\r\n\t\tconst currentTarget = renderer.getRenderTarget();\r\n\t\tconst currentAutoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = true;\r\n\t\trenderer.setRenderTarget( target );\r\n\t\tquad.render( renderer );\r\n\t\trenderer.setRenderTarget( currentTarget );\r\n\t\trenderer.autoClear = currentAutoClear;\r\n\r\n\t\t// read the data back\r\n\t\tconst buffer = new Uint16Array( width * height * 4 );\r\n\t\tconst readBuffer = new Float32Array( width * height * 4 );\r\n\t\trenderer.readRenderTargetPixels( target, 0, 0, width, height, readBuffer );\r\n\t\ttarget.dispose();\r\n\r\n\t\tfor ( let i = 0, l = readBuffer.length; i < l; i ++ ) {\r\n\r\n\t\t\tbuffer[ i ] = DataUtils.toHalfFloat( readBuffer[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\t// produce the data texture\r\n\t\tconst result = new DataTexture( buffer, width, height, RGBAFormat, HalfFloatType );\r\n\t\tresult.minFilter = LinearMipMapLinearFilter;\r\n\t\tresult.magFilter = LinearFilter;\r\n\t\tresult.wrapS = RepeatWrapping;\r\n\t\tresult.wrapT = RepeatWrapping;\r\n\t\tresult.mapping = EquirectangularReflectionMapping;\r\n\t\tresult.needsUpdate = true;\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis._quad.dispose();\r\n\r\n\t}\r\n\r\n}\r\n","import {\r\n\tPerspectiveCamera,\r\n\tScene,\r\n\tVector2,\r\n\tClock,\r\n\tNormalBlending,\r\n\tNoBlending,\r\n\tAdditiveBlending,\r\n\tDataTexture,\r\n\tDataUtils,\r\n\tFloatType,\r\n\tHalfFloatType,\r\n\tRGBAFormat,\r\n\tEquirectangularReflectionMapping,\r\n\tRepeatWrapping,\r\n\tClampToEdgeWrapping,\r\n\tLinearFilter\r\n} from 'three';\r\nimport { PathTracingSceneGenerator } from './PathTracingSceneGenerator.js';\r\nimport { PathTracingRenderer } from './PathTracingRenderer.js';\r\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\r\nimport { GradientEquirectTexture } from '../textures/GradientEquirectTexture.js';\r\nimport { getIesTextures, getLights, getTextures } from './utils/sceneUpdateUtils.js';\r\nimport { ClampedInterpolationMaterial } from '../materials/fullscreen/ClampedInterpolationMaterial.js';\r\nimport { CubeToEquirectGenerator } from '../utils/CubeToEquirectGenerator.js';\r\n\r\nfunction supportsFloatBlending( renderer ) {\r\n\r\n\treturn renderer.extensions.get( 'EXT_float_blend' );\r\n\r\n}\r\n\r\nconst _resolution = new Vector2();\r\nexport class WebGLPathTracer {\r\n\r\n\tget multipleImportanceSampling() {\r\n\r\n\t\treturn Boolean( this._pathTracer.material.defines.FEATURE_MIS );\r\n\r\n\t}\r\n\r\n\tset multipleImportanceSampling( v ) {\r\n\r\n\t\tthis._pathTracer.material.setDefine( 'FEATURE_MIS', v ? 1 : 0 );\r\n\r\n\t}\r\n\r\n\tget transmissiveBounces() {\r\n\r\n\t\treturn this._pathTracer.material.transmissiveBounces;\r\n\r\n\t}\r\n\r\n\tset transmissiveBounces( v ) {\r\n\r\n\t\tthis._pathTracer.material.transmissiveBounces = v;\r\n\r\n\t}\r\n\r\n\tget bounces() {\r\n\r\n\t\treturn this._pathTracer.material.bounces;\r\n\r\n\t}\r\n\r\n\tset bounces( v ) {\r\n\r\n\t\tthis._pathTracer.material.bounces = v;\r\n\r\n\t}\r\n\r\n\tget filterGlossyFactor() {\r\n\r\n\t\treturn this._pathTracer.material.filterGlossyFactor;\r\n\r\n\t}\r\n\r\n\tset filterGlossyFactor( v ) {\r\n\r\n\t\tthis._pathTracer.material.filterGlossyFactor = v;\r\n\r\n\t}\r\n\r\n\tget samples() {\r\n\r\n\t\treturn this._pathTracer.samples;\r\n\r\n\t}\r\n\r\n\tget target() {\r\n\r\n\t\treturn this._pathTracer.target;\r\n\r\n\t}\r\n\r\n\tget tiles() {\r\n\r\n\t\treturn this._pathTracer.tiles;\r\n\r\n\t}\r\n\r\n\tget stableNoise() {\r\n\r\n\t\treturn this._pathTracer.stableNoise;\r\n\r\n\t}\r\n\r\n\tset stableNoise( v ) {\r\n\r\n\t\tthis._pathTracer.stableNoise = v;\r\n\r\n\t}\r\n\r\n\tget isCompiling() {\r\n\r\n\t\treturn Boolean( this._pathTracer.isCompiling );\r\n\r\n\t}\r\n\r\n\tget productSaturation() {\r\n\r\n\t\treturn this._quad.material.saturation;\r\n\r\n\t}\r\n\r\n\tset productSaturation( v ) {\r\n\r\n\t\tthis._quad.material.saturation = v;\r\n\r\n\t}\r\n\r\n\tget productContrast() {\r\n\r\n\t\treturn this._quad.material.contrast;\r\n\r\n\t}\r\n\r\n\tset productContrast( v ) {\r\n\r\n\t\tthis._quad.material.contrast = v;\r\n\r\n\t}\r\n\r\n\tconstructor( renderer ) {\r\n\r\n\t\t// members\r\n\t\tthis._renderer = renderer;\r\n\t\tthis._generator = new PathTracingSceneGenerator();\r\n\t\tthis._pathTracer = new PathTracingRenderer( renderer );\r\n\t\tthis._queueReset = false;\r\n\t\tthis._clock = new Clock();\r\n\t\tthis._compilePromise = null;\r\n\r\n\t\tthis._lowResPathTracer = new PathTracingRenderer( renderer );\r\n\t\tthis._lowResPathTracer.tiles.set( 1, 1 );\r\n\t\tthis._quad = new FullScreenQuad( new ClampedInterpolationMaterial( {\r\n\t\t\tmap: null,\r\n\t\t\ttransparent: true,\r\n\t\t\tblending: NoBlending,\r\n\r\n\t\t\tpremultipliedAlpha: renderer.getContextAttributes().premultipliedAlpha,\r\n\t\t} ) );\r\n\t\tthis._materials = null;\r\n\r\n\t\tthis._previousEnvironment = null;\r\n\t\tthis._previousBackground = null;\r\n\t\tthis._internalBackground = null;\r\n\t\tthis._rasterEnvMap = null; // FloatType copy for scene.environment (raster PBR)\r\n\t\tthis._previousRasterEnvMapSource = null;\r\n\t\tthis._rasterEnvMapScheduled = false;\r\n\t\tthis._pendingMaterialIndexUpdate = null;\r\n\t\tthis._pendingGeometry = null;\r\n\r\n\t\t// options\r\n\t\tthis.renderDelay = 100;\r\n\t\tthis.minSamples = 5;\r\n\t\tthis.fadeDuration = 500;\r\n\t\tthis.enablePathTracing = true;\r\n\t\tthis.pausePathTracing = false;\r\n\t\tthis.dynamicLowRes = false;\r\n\t\tthis.lowResScale = 0.25;\r\n\t\tthis.renderScale = 1;\r\n\t\tthis.synchronizeRenderSize = true;\r\n\t\tthis.rasterizeScene = true;\r\n\t\tthis.renderToCanvas = true;\r\n\t\tthis.textureSize = new Vector2( 1024, 1024 ); // preview default; final render bumps to 4096\r\n\t\tthis.rasterizeSceneCallback = ( scene, camera ) => {\r\n\r\n\t\t\tthis._renderer.render( scene, camera );\r\n\r\n\t\t};\r\n\r\n\t\tthis.renderToCanvasCallback = ( target, renderer, quad ) => {\r\n\r\n\t\t\tconst currentAutoClear = renderer.autoClear;\r\n\t\t\trenderer.autoClear = false;\r\n\t\t\tquad.render( renderer );\r\n\t\t\trenderer.autoClear = currentAutoClear;\r\n\r\n\t\t};\r\n\r\n\t\t// initialize the scene so it doesn't fail\r\n\t\tthis.setScene( new Scene(), new PerspectiveCamera() );\r\n\r\n\t}\r\n\r\n\tsetBVHWorker( worker ) {\r\n\r\n\t\tthis._generator.setBVHWorker( worker );\r\n\r\n\t}\r\n\r\n\tsetScene( scene, camera, options = {} ) {\r\n\r\n\t\tscene.updateMatrixWorld( true );\r\n\t\tcamera.updateMatrixWorld();\r\n\r\n\t\tconst generator = this._generator;\r\n\t\tgenerator.setObjects( scene );\r\n\r\n\t\tif ( this._buildAsync ) {\r\n\r\n\t\t\treturn generator.generateAsync( options.onProgress ).then( result => {\r\n\r\n\t\t\t\tthis._updateFromResults( scene, camera, result );\r\n\t\t\t\treturn this._deferredSceneUpdates().then( () => result );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst result = generator.generate();\r\n\t\t\tthis._updateFromResults( scene, camera, result );\r\n\t\t\tif ( result.needsMaterialIndexUpdate && result.geometry ) {\r\n\r\n\t\t\t\tthis._pathTracer.material.materialIndexAttribute.updateFrom( result.geometry.attributes.materialIndex );\r\n\r\n\t\t\t}\n\r\n\t\t\tthis.updateMaterials();\r\n\t\t\tthis.updateLights();\r\n\t\t\tthis.updateEnvironment();\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tsetSceneAsync( ...args ) {\r\n\r\n\t\tthis._buildAsync = true;\r\n\t\tconst result = this.setScene( ...args );\r\n\t\tthis._buildAsync = false;\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tsetCamera( camera ) {\r\n\r\n\t\tthis.camera = camera;\r\n\t\tthis.updateCamera();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Compile the path tracing material (e.g. after setScene) so the first frame doesn't do compile + path trace together.\r\n\t * Reduces GPU load on initial load. Returns a promise that resolves when compilation is done.\r\n\t */\r\n\tcompileAsync() {\r\n\r\n\t\treturn this._pathTracer.compileMaterial();\r\n\r\n\t}\r\n\r\n\tupdateCamera() {\r\n\r\n\t\tconst camera = this.camera;\r\n\t\tcamera.updateMatrixWorld();\r\n\r\n\t\tthis._pathTracer.setCamera( camera );\r\n\t\tthis._lowResPathTracer.setCamera( camera );\r\n\t\tthis.reset();\r\n\r\n\t}\r\n\r\n\tupdateMaterials() {\r\n\r\n\t\tconst material = this._pathTracer.material;\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst materials = this._materials;\r\n\t\tconst textureSize = this.textureSize;\r\n\r\n\t\t// reduce texture sources here - we don't want to do this in the\r\n\t\t// textures array because we need to pass the textures array into the\r\n\t\t// material target\r\n\t\tconst textures = getTextures( materials );\r\n\t\tmaterial.textures.setTextures( renderer, textures, textureSize.x, textureSize.y );\r\n\t\tmaterial.materials.updateFrom( materials, textures );\r\n\t\t// Copy shadow catcher reflection intensity from any floor material that uses it\r\n\t\tmaterial.shadowCatcherReflectionIntensity = 1.0;\r\n\t\tfor ( let i = 0, l = materials.length; i < l; i ++ ) {\n\r\n\t\t\tconst m = materials[ i ];\r\n\t\t\tif ( m.shadowReflectionCatcher && m.shadowCatcherReflectionIntensity != null ) {\n\r\n\t\t\t\tmaterial.shadowCatcherReflectionIntensity = m.shadowCatcherReflectionIntensity;\r\n\t\t\t\tbreak;\r\n\n\t\t\t}\r\n\n\t\t}\n\r\n\t\tthis.reset();\r\n\r\n\t}\r\n\r\n\tupdateLights() {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst material = this._pathTracer.material;\r\n\r\n\t\tconst lights = getLights( scene );\r\n\t\tconst iesTextures = getIesTextures( lights );\r\n\t\tmaterial.lights.updateFrom( lights, iesTextures );\r\n\t\tmaterial.iesProfiles.setTextures( renderer, iesTextures );\r\n\t\tthis.reset();\r\n\r\n\t}\r\n\r\n\tupdateEnvironment() {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst material = this._pathTracer.material;\r\n\r\n\t\tif ( this._internalBackground ) {\r\n\r\n\t\t\tthis._internalBackground.dispose();\r\n\t\t\tthis._internalBackground = null;\r\n\r\n\t\t}\r\n\r\n\t\t// update scene background\r\n\t\tmaterial.backgroundBlur = scene.backgroundBlurriness;\r\n\t\tmaterial.backgroundIntensity = scene.backgroundIntensity ?? 1;\r\n\t\tmaterial.backgroundRotation.makeRotationFromEuler( scene.backgroundRotation ).invert();\r\n\t\tif ( scene.background === null ) {\r\n\r\n\t\t\tmaterial.backgroundMap = null;\r\n\t\t\tmaterial.backgroundAlpha = 0;\r\n\r\n\t\t} else if ( scene.background.isColor ) {\r\n\r\n\t\t\tthis._colorBackground = this._colorBackground || new GradientEquirectTexture( 16 );\r\n\r\n\t\t\tconst colorBackground = this._colorBackground;\r\n\t\t\tif ( ! colorBackground.topColor.equals( scene.background ) ) {\r\n\r\n\t\t\t\t// set the texture color\r\n\t\t\t\tcolorBackground.topColor.set( scene.background );\r\n\t\t\t\tcolorBackground.bottomColor.set( scene.background );\r\n\t\t\t\tcolorBackground.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// assign to material\r\n\t\t\tmaterial.backgroundMap = colorBackground;\r\n\t\t\tmaterial.backgroundAlpha = 1;\r\n\r\n\t\t} else if ( scene.background.isCubeTexture ) {\r\n\r\n\t\t\tif ( scene.background !== this._previousBackground ) {\r\n\r\n\t\t\t\tconst background = new CubeToEquirectGenerator( this._renderer ).generate( scene.background );\r\n\t\t\t\tthis._internalBackground = background;\r\n\t\t\t\tmaterial.backgroundMap = background;\r\n\t\t\t\tmaterial.backgroundAlpha = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterial.backgroundMap = scene.background;\r\n\t\t\tmaterial.backgroundAlpha = 1;\r\n\r\n\t\t}\r\n\r\n\t\t// update scene environment\r\n\t\tmaterial.environmentIntensity = scene.environment !== null ? ( scene.environmentIntensity ?? 1 ) : 0;\r\n\t\tmaterial.environmentSaturation = scene.userData?.environmentSaturation ?? 1;\r\n\t\tmaterial.environmentRotation.makeRotationFromEuler( scene.environmentRotation ).invert();\r\n\t\tif ( this._previousEnvironment !== scene.environment ) {\r\n\r\n\t\t\tif ( scene.environment !== null ) {\r\n\r\n\t\t\t\tif ( scene.environment.isCubeTexture ) {\r\n\r\n\t\t\t\t\tconst environment = new CubeToEquirectGenerator( this._renderer ).generate( scene.environment );\r\n\t\t\t\t\tmaterial.envMapInfo.updateFrom( environment );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// TODO: Consider setting this to the highest supported bit depth by checking for\r\n\t\t\t\t\t// OES_texture_float_linear or OES_texture_half_float_linear. Requires changes to\r\n\t\t\t\t\t// the equirect uniform\r\n\t\t\t\t\tmaterial.envMapInfo.updateFrom( scene.environment );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use sanitized env map for raster view so Infinity/NaN in raw HDR don't cause black materials.\r\n\t\t// Raster PBR (WebGLRenderer) often fails with HalfFloatType env maps; use a FloatType copy.\r\n\t\tconst sanitizedMap = material.envMapInfo.map;\r\n\t\tif ( scene.environment !== null && sanitizedMap ) {\r\n\r\n\t\t\tif ( sanitizedMap.type === HalfFloatType ) {\r\n\r\n\t\t\t\t// Reuse or create FloatType copy for raster view (deferred to avoid blocking first frame with CPU-heavy fromHalfFloat loop)\r\n\t\t\t\tif ( this._previousRasterEnvMapSource !== sanitizedMap && this._rasterEnvMap ) {\r\n\r\n\t\t\t\t\tthis._rasterEnvMap.dispose();\r\n\t\t\t\t\tthis._rasterEnvMap = null;\r\n\r\n\t\t\t\t}\n\r\n\t\t\t\tif ( ! this._rasterEnvMap ) {\r\n\r\n\t\t\t\t\tif ( ! this._rasterEnvMapScheduled ) {\r\n\r\n\t\t\t\t\t\tthis._rasterEnvMapScheduled = true;\r\n\t\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t\tconst source = sanitizedMap;\r\n\t\t\t\t\t\tconst sc = scene;\r\n\t\t\t\t\t\trequestAnimationFrame( function buildRasterEnvMap() {\r\n\r\n\t\t\t\t\t\t\tself._rasterEnvMapScheduled = false;\r\n\t\t\t\t\t\t\tif ( self._previousRasterEnvMapSource !== source || self._rasterEnvMap ) return;\r\n\r\n\t\t\t\t\t\t\tconst { width, height, data } = source.image;\r\n\t\t\t\t\t\t\tconst stride = Math.floor( data.length / ( width * height ) );\r\n\t\t\t\t\t\t\tconst floatData = new Float32Array( width * height * 4 );\r\n\t\t\t\t\t\t\tfor ( let i = 0; i < width * height; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tfloatData[ 4 * i + 0 ] = DataUtils.fromHalfFloat( data[ stride * i + 0 ] );\r\n\t\t\t\t\t\t\t\tfloatData[ 4 * i + 1 ] = DataUtils.fromHalfFloat( data[ stride * i + 1 ] );\r\n\t\t\t\t\t\t\t\tfloatData[ 4 * i + 2 ] = DataUtils.fromHalfFloat( data[ stride * i + 2 ] );\r\n\t\t\t\t\t\t\t\tfloatData[ 4 * i + 3 ] = stride >= 4 ? DataUtils.fromHalfFloat( data[ stride * i + 3 ] ) : 1.0;\r\n\r\n\t\t\t\t\t\t\t}\n\r\n\t\t\t\t\t\t\tself._rasterEnvMap = new DataTexture( floatData, width, height, RGBAFormat, FloatType, EquirectangularReflectionMapping, RepeatWrapping, ClampToEdgeWrapping, LinearFilter, LinearFilter );\r\n\t\t\t\t\t\t\tself._rasterEnvMap.needsUpdate = true;\r\n\t\t\t\t\t\t\tself._previousRasterEnvMapSource = source;\r\n\t\t\t\t\t\t\tsc.environment = self._rasterEnvMap;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// This frame: raster may use HalfFloat (one-frame delay); path tracer uses envMapInfo.map as-is\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tscene.environment = this._rasterEnvMap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( this._rasterEnvMap ) {\r\n\r\n\t\t\t\t\tthis._rasterEnvMap.dispose();\r\n\t\t\t\t\tthis._rasterEnvMap = null;\r\n\t\t\t\t\tthis._previousRasterEnvMapSource = null;\r\n\r\n\t\t\t\t}\n\r\n\t\t\t\tscene.environment = sanitizedMap;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._previousEnvironment = scene.environment;\r\n\t\tthis._previousBackground = scene.background;\r\n\t\tthis.reset();\r\n\r\n\t}\r\n\r\n\t_updateFromResults( scene, camera, results ) {\r\n\r\n\t\tconst {\r\n\t\t\tmaterials,\r\n\t\t\tgeometry,\r\n\t\t\tbvh,\r\n\t\t\tbvhChanged,\r\n\t\t\tneedsMaterialIndexUpdate,\r\n\t\t} = results;\r\n\r\n\t\tthis._materials = materials;\r\n\r\n\t\tconst pathTracer = this._pathTracer;\r\n\t\tconst material = pathTracer.material;\r\n\r\n\t\tif ( bvhChanged ) {\r\n\r\n\t\t\tmaterial.bvh.updateFrom( bvh );\r\n\t\t\tmaterial.attributesArray.updateFrom(\r\n\t\t\t\tgeometry.attributes.normal,\r\n\t\t\t\tgeometry.attributes.tangent,\r\n\t\t\t\tgeometry.attributes.uv,\r\n\t\t\t\tgeometry.attributes.color,\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t\t// Defer material index + materials/lights/env to staggered rAFs (reduces GPU exhaustion on initial load)\r\n\t\tif ( needsMaterialIndexUpdate ) {\r\n\r\n\t\t\tthis._pendingMaterialIndexUpdate = true;\r\n\t\t\tthis._pendingGeometry = geometry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis._pendingMaterialIndexUpdate = false;\r\n\t\t\tthis._pendingGeometry = null;\r\n\r\n\t\t}\r\n\r\n\t\t// save previously used items\r\n\t\tthis._previousScene = scene;\r\n\t\tthis.scene = scene;\r\n\t\tthis.camera = camera;\r\n\r\n\t\tthis.updateCamera();\r\n\r\n\t\treturn results;\r\n\r\n\t}\r\n\r\n\t// Staggered updates across two frames: rAF1 = material index + materials + lights; rAF2 = env. Reduces GPU exhaustion on initial load.\r\n\t_deferredSceneUpdates() {\r\n\r\n\t\tconst self = this;\r\n\t\treturn new Promise( ( resolve ) => {\r\n\r\n\t\t\trequestAnimationFrame( () => {\r\n\r\n\t\t\t\tif ( self._pendingMaterialIndexUpdate && self._pendingGeometry ) {\r\n\r\n\t\t\t\t\tself._pathTracer.material.materialIndexAttribute.updateFrom( self._pendingGeometry.attributes.materialIndex );\r\n\t\t\t\t\tself._pendingMaterialIndexUpdate = false;\r\n\t\t\t\t\tself._pendingGeometry = null;\r\n\r\n\t\t\t\t}\n\r\n\t\t\t\tself.updateMaterials();\r\n\t\t\t\tself.updateLights();\r\n\r\n\t\t\t\trequestAnimationFrame( () => {\r\n\r\n\t\t\t\t\tself.updateEnvironment();\r\n\t\t\t\t\tresolve();\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\trenderSample() {\r\n\r\n\t\tconst lowResPathTracer = this._lowResPathTracer;\r\n\t\tconst pathTracer = this._pathTracer;\r\n\t\tconst renderer = this._renderer;\r\n\t\tconst clock = this._clock;\r\n\t\tconst quad = this._quad;\r\n\r\n\t\tthis._updateScale();\r\n\r\n\t\tif ( this._queueReset ) {\r\n\r\n\t\t\tpathTracer.reset();\r\n\t\t\tlowResPathTracer.reset();\r\n\t\t\tthis._queueReset = false;\r\n\r\n\t\t\tquad.material.opacity = 0;\r\n\t\t\tclock.start();\r\n\r\n\t\t}\r\n\r\n\t\t// render the path tracing sample after enough time has passed\r\n\t\tconst delta = clock.getDelta() * 1e3;\r\n\t\tconst elapsedTime = clock.getElapsedTime() * 1e3;\r\n\t\tif ( ! this.pausePathTracing && this.enablePathTracing && this.renderDelay <= elapsedTime && ! this.isCompiling ) {\r\n\r\n\t\t\tpathTracer.update();\r\n\r\n\t\t}\r\n\r\n\t\t// when alpha is enabled we use a manual blending system rather than\r\n\t\t// rendering with a blend function\r\n\t\tpathTracer.alpha = pathTracer.material.backgroundAlpha !== 1 || ! supportsFloatBlending( renderer );\r\n\t\tlowResPathTracer.alpha = pathTracer.alpha;\r\n\r\n\t\tif ( this.renderToCanvas ) {\r\n\r\n\t\t\tconst renderer = this._renderer;\r\n\t\t\tconst minSamples = this.minSamples;\r\n\r\n\t\t\tif ( elapsedTime >= this.renderDelay && this.samples >= this.minSamples ) {\r\n\r\n\t\t\t\tif ( this.fadeDuration !== 0 ) {\r\n\r\n\t\t\t\t\tquad.material.opacity = Math.min( quad.material.opacity + delta / this.fadeDuration, 1 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tquad.material.opacity = 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// render the fallback if we haven't rendered enough samples, are paused, or are occluded\r\n\t\t\tif ( ! this.enablePathTracing || this.samples < minSamples || quad.material.opacity < 1 ) {\r\n\r\n\t\t\t\tif ( this.dynamicLowRes && ! this.isCompiling ) {\r\n\r\n\t\t\t\t\tif ( lowResPathTracer.samples < 1 ) {\r\n\r\n\t\t\t\t\t\tlowResPathTracer.material = pathTracer.material;\r\n\t\t\t\t\t\tlowResPathTracer.update();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst currentOpacity = quad.material.opacity;\r\n\t\t\t\t\tquad.material.opacity = 1 - quad.material.opacity;\r\n\t\t\t\t\tquad.material.map = lowResPathTracer.target.texture;\r\n\t\t\t\t\tquad.render( renderer );\r\n\t\t\t\t\tquad.material.opacity = currentOpacity;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! this.dynamicLowRes && this.rasterizeScene || this.dynamicLowRes && this.isCompiling ) {\r\n\r\n\t\t\t\t\tthis.rasterizeSceneCallback( this.scene, this.camera );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( this.enablePathTracing && quad.material.opacity > 0 ) {\r\n\r\n\t\t\t\tif ( quad.material.opacity < 1 ) {\r\n\r\n\t\t\t\t\t// use additive blending when the low res texture is rendered so we can fade the\r\n\t\t\t\t\t// background out while the full res fades in\r\n\t\t\t\t\tquad.material.blending = this.dynamicLowRes ? AdditiveBlending : NormalBlending;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tquad.material.map = pathTracer.target.texture;\r\n\t\t\t\tthis.renderToCanvasCallback( pathTracer.target, renderer, quad );\r\n\t\t\t\tquad.material.blending = NoBlending;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treset() {\r\n\r\n\t\tthis._queueReset = true;\r\n\t\tthis._pathTracer.samples = 0;\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tif ( this._rasterEnvMap ) {\r\n\r\n\t\t\tthis._rasterEnvMap.dispose();\r\n\t\t\tthis._rasterEnvMap = null;\r\n\t\t\tthis._previousRasterEnvMapSource = null;\r\n\r\n\t\t}\n\r\n\t\tthis._quad.dispose();\r\n\t\tthis._quad.material.dispose();\r\n\t\tthis._pathTracer.dispose();\r\n\r\n\t}\r\n\r\n\t_updateScale() {\r\n\r\n\t\t// update the path tracer scale if it has changed\r\n\t\tif ( this.synchronizeRenderSize ) {\r\n\r\n\t\t\tthis._renderer.getDrawingBufferSize( _resolution );\r\n\r\n\t\t\tconst w = Math.floor( this.renderScale * _resolution.x );\r\n\t\t\tconst h = Math.floor( this.renderScale * _resolution.y );\r\n\r\n\t\t\tthis._pathTracer.getSize( _resolution );\r\n\t\t\tif ( _resolution.x !== w || _resolution.y !== h ) {\r\n\r\n\t\t\t\tconst lowResScale = this.lowResScale;\r\n\t\t\t\tthis._pathTracer.setSize( w, h );\r\n\t\t\t\tthis._lowResPathTracer.setSize( Math.floor( w * lowResScale ), Math.floor( h * lowResScale ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { Camera } from 'three';\r\n\r\nexport class EquirectCamera extends Camera {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.isEquirectCamera = true;\r\n\r\n\t}\r\n\r\n}\r\n","import { SpotLight } from 'three';\r\n\r\nexport class PhysicalSpotLight extends SpotLight {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\r\n\t\tthis.iesMap = null;\r\n\t\tthis.radius = 0;\r\n\r\n\t}\r\n\r\n\tcopy( source, recursive ) {\r\n\r\n\t\tsuper.copy( source, recursive );\r\n\r\n\t\tthis.iesMap = source.iesMap;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n","import { RectAreaLight } from 'three';\r\n\r\nexport class ShapedAreaLight extends RectAreaLight {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\t\tthis.isCircular = false;\r\n\r\n\t}\r\n\r\n\tcopy( source, recursive ) {\r\n\r\n\t\tsuper.copy( source, recursive );\r\n\r\n\t\tthis.isCircular = source.isCircular;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\r\n","import { WebGLRenderTarget, RGBAFormat, HalfFloatType, PMREMGenerator, DataTexture, EquirectangularReflectionMapping, FloatType, DataUtils } from 'three';\r\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\r\nimport { MaterialBase } from '../materials/MaterialBase.js';\r\nimport * as CommonGLSL from '../shader/common/index.js';\r\n\r\nclass PMREMCopyMaterial extends MaterialBase {\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tenvMap: { value: null },\r\n\t\t\t\tblur: { value: 0 },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}\r\n\r\n\t\t\t`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\t\t#include <common>\r\n\t\t\t\t#include <cube_uv_reflection_fragment>\r\n\r\n\t\t\t\t${ CommonGLSL.util_functions }\r\n\r\n\t\t\t\tuniform sampler2D envMap;\r\n\t\t\t\tuniform float blur;\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvec3 rayDirection = equirectUvToDirection( vUv );\r\n\t\t\t\t\tgl_FragColor = textureCubeUV( envMap, rayDirection, blur );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`,\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport class BlurredEnvMapGenerator {\r\n\r\n\tconstructor( renderer ) {\r\n\r\n\t\tthis.renderer = renderer;\r\n\t\tthis.pmremGenerator = new PMREMGenerator( renderer );\r\n\t\tthis.copyQuad = new FullScreenQuad( new PMREMCopyMaterial() );\r\n\t\tthis.renderTarget = new WebGLRenderTarget( 1, 1, { type: FloatType, format: RGBAFormat } );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.pmremGenerator.dispose();\r\n\t\tthis.copyQuad.dispose();\r\n\t\tthis.renderTarget.dispose();\r\n\r\n\t}\r\n\r\n\tgenerate( texture, blur ) {\r\n\r\n\t\tconst { pmremGenerator, renderTarget, copyQuad, renderer } = this;\r\n\r\n\t\t// get the pmrem target\r\n\t\tconst pmremTarget = pmremGenerator.fromEquirectangular( texture );\r\n\r\n\t\t// set up the material\r\n\t\tconst { width, height } = texture.image;\r\n\t\trenderTarget.setSize( width, height );\r\n\t\tcopyQuad.material.envMap = pmremTarget.texture;\r\n\t\tcopyQuad.material.blur = blur;\r\n\r\n\t\t// render\r\n\t\tconst prevRenderTarget = renderer.getRenderTarget();\r\n\t\tconst prevClear = renderer.autoClear;\r\n\r\n\t\trenderer.setRenderTarget( renderTarget );\r\n\t\trenderer.autoClear = true;\r\n\t\tcopyQuad.render( renderer );\r\n\r\n\t\trenderer.setRenderTarget( prevRenderTarget );\r\n\t\trenderer.autoClear = prevClear;\r\n\r\n\t\t// read the data back\r\n\t\tconst buffer = new Uint16Array( width * height * 4 );\r\n\t\tconst readBuffer = new Float32Array( width * height * 4 );\r\n\t\trenderer.readRenderTargetPixels( renderTarget, 0, 0, width, height, readBuffer );\r\n\r\n\t\tfor ( let i = 0, l = readBuffer.length; i < l; i ++ ) {\r\n\r\n\t\t\tbuffer[ i ] = DataUtils.toHalfFloat( readBuffer[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\tconst result = new DataTexture( buffer, width, height, RGBAFormat, HalfFloatType );\r\n\t\tresult.minFilter = texture.minFilter;\r\n\t\tresult.magFilter = texture.magFilter;\r\n\t\tresult.wrapS = texture.wrapS;\r\n\t\tresult.wrapT = texture.wrapT;\r\n\t\tresult.mapping = EquirectangularReflectionMapping;\r\n\t\tresult.needsUpdate = true;\r\n\r\n\t\t// dispose of the now unneeded target\r\n\t\tpmremTarget.dispose();\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n}\r\n","import { NoBlending } from 'three';\r\nimport { MaterialBase } from '../MaterialBase.js';\r\n\r\nexport class DenoiseMaterial extends MaterialBase {\r\n\r\n\tconstructor( parameters ) {\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tblending: NoBlending,\r\n\r\n\t\t\ttransparent: false,\r\n\r\n\t\t\tdepthWrite: false,\r\n\r\n\t\t\tdepthTest: false,\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\tUSE_SLIDER: 0,\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tsigma: { value: 5.0 },\r\n\t\t\t\tthreshold: { value: 0.03 },\r\n\t\t\t\tkSigma: { value: 1.0 },\r\n\r\n\t\t\t\tmap: { value: null },\r\n\t\t\t\topacity: { value: 1 },\r\n\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: /* glsl */`\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`,\r\n\r\n\t\t\tfragmentShader: /* glsl */`\r\n\r\n\t\t\t\t//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n\t\t\t\t//  Copyright (c) 2018-2019 Michele Morrone\r\n\t\t\t\t//  All rights reserved.\r\n\t\t\t\t//\r\n\t\t\t\t//  https://michelemorrone.eu - https://BrutPitt.com\r\n\t\t\t\t//\r\n\t\t\t\t//  me@michelemorrone.eu - brutpitt@gmail.com\r\n\t\t\t\t//  twitter: @BrutPitt - github: BrutPitt\r\n\t\t\t\t//\r\n\t\t\t\t//  https://github.com/BrutPitt/glslSmartDeNoise/\r\n\t\t\t\t//\r\n\t\t\t\t//  This software is distributed under the terms of the BSD 2-Clause license\r\n\t\t\t\t//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n\r\n\t\t\t\tuniform sampler2D map;\r\n\r\n\t\t\t\tuniform float sigma;\r\n\t\t\t\tuniform float threshold;\r\n\t\t\t\tuniform float kSigma;\r\n\t\t\t\tuniform float opacity;\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\t\t#define INV_SQRT_OF_2PI 0.39894228040143267793994605993439\r\n\t\t\t\t#define INV_PI 0.31830988618379067153776752674503\r\n\r\n\t\t\t\t// Parameters:\r\n\t\t\t\t//\t sampler2D tex\t - sampler image / texture\r\n\t\t\t\t//\t vec2 uv\t\t   - actual fragment coord\r\n\t\t\t\t//\t float sigma  >  0 - sigma Standard Deviation\r\n\t\t\t\t//\t float kSigma >= 0 - sigma coefficient\r\n\t\t\t\t//\t\t kSigma * sigma  -->  radius of the circular kernel\r\n\t\t\t\t//\t float threshold   - edge sharpening threshold\r\n\t\t\t\tvec4 smartDeNoise( sampler2D tex, vec2 uv, float sigma, float kSigma, float threshold ) {\r\n\r\n\t\t\t\t\tfloat radius = round( kSigma * sigma );\r\n\t\t\t\t\tfloat radQ = radius * radius;\r\n\r\n\t\t\t\t\tfloat invSigmaQx2 = 0.5 / ( sigma * sigma );\r\n\t\t\t\t\tfloat invSigmaQx2PI = INV_PI * invSigmaQx2;\r\n\r\n\t\t\t\t\tfloat invThresholdSqx2 = 0.5 / ( threshold * threshold );\r\n\t\t\t\t\tfloat invThresholdSqrt2PI = INV_SQRT_OF_2PI / threshold;\r\n\r\n\t\t\t\t\tvec4 centrPx = texture2D( tex, uv );\r\n\t\t\t\t\tcentrPx.rgb *= centrPx.a;\r\n\r\n\t\t\t\t\tfloat zBuff = 0.0;\r\n\t\t\t\t\tvec4 aBuff = vec4( 0.0 );\r\n\t\t\t\t\tvec2 size = vec2( textureSize( tex, 0 ) );\r\n\r\n\t\t\t\t\tvec2 d;\r\n\t\t\t\t\tfor ( d.x = - radius; d.x <= radius; d.x ++ ) {\r\n\r\n\t\t\t\t\t\tfloat pt = sqrt( radQ - d.x * d.x );\r\n\r\n\t\t\t\t\t\tfor ( d.y = - pt; d.y <= pt; d.y ++ ) {\r\n\r\n\t\t\t\t\t\t\tfloat blurFactor = exp( - dot( d, d ) * invSigmaQx2 ) * invSigmaQx2PI;\r\n\r\n\t\t\t\t\t\t\tvec4 walkPx = texture2D( tex, uv + d / size );\r\n\t\t\t\t\t\t\twalkPx.rgb *= walkPx.a;\r\n\r\n\t\t\t\t\t\t\tvec4 dC = walkPx - centrPx;\r\n\t\t\t\t\t\t\tfloat deltaFactor = exp( - dot( dC.rgba, dC.rgba ) * invThresholdSqx2 ) * invThresholdSqrt2PI * blurFactor;\r\n\r\n\t\t\t\t\t\t\tzBuff += deltaFactor;\r\n\t\t\t\t\t\t\taBuff += deltaFactor * walkPx;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn aBuff / zBuff;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tgl_FragColor = smartDeNoise( map, vec2( vUv.x, vUv.y ), sigma, kSigma, threshold );\r\n\t\t\t\t\t#include <tonemapping_fragment>\r\n\t\t\t\t\t#include <colorspace_fragment>\r\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\r\n\r\n\t\t\t\t\tgl_FragColor.a *= opacity;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t`\r\n\r\n\t\t} );\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n}\r\n","import { Color, MeshStandardMaterial } from 'three';\r\n\r\nexport class FogVolumeMaterial extends MeshStandardMaterial {\r\n\r\n\tconstructor( params ) {\r\n\r\n\t\tsuper( params );\r\n\r\n\t\tthis.isFogVolumeMaterial = true;\r\n\r\n\t\tthis.density = 0.015;\r\n\t\tthis.emissive = new Color();\r\n\t\tthis.emissiveIntensity = 0.0;\r\n\t\tthis.opacity = 0.15;\r\n\t\tthis.transparent = true;\r\n\t\tthis.roughness = 1.0;\r\n\t\tthis.metalness = 0.0;\r\n\r\n\t\tthis.setValues( params );\r\n\r\n\t}\r\n\r\n}\r\n","// core\r\nexport * from './core/PathTracingSceneGenerator.js';\r\nexport * from './core/WebGLPathTracer.js';\r\n\r\n// objects\r\nexport * from './objects/PhysicalCamera.js';\r\nexport * from './objects/EquirectCamera.js';\r\nexport * from './objects/PhysicalSpotLight.js';\r\nexport * from './objects/ShapedAreaLight.js';\r\n\r\n// textures\r\nexport * from './textures/ProceduralEquirectTexture.js';\r\nexport * from './textures/GradientEquirectTexture.js';\r\n\r\n// utils\r\nexport * from './utils/BlurredEnvMapGenerator.js';\r\n\r\n// materials\r\nexport * from './materials/fullscreen/DenoiseMaterial.js';\r\nexport * from './materials/surface/FogVolumeMaterial.js';\r\n\r\n// deprecated\r\nexport * from './materials/pathtracing/PhysicalPathTracingMaterial.js';\r\nexport * from './core/PathTracingRenderer.js';\r\n"],"names":["_box1","_box2","Box3","BufferAttribute","shapecastFunc","Vector3","Vector2","Plane","Line3","Triangle","Matrix4","temp1","REVISION","BackSide","DoubleSide","_raycast","_xyzFields","_raycastFirst","boundingBox","triangle","triangle2","invertedMat","obb","obb2","_intersectsGeometry","tempMatrix","temp2","temp3","temp4","_ray","Ray","_direction","FrontSide","_inverseMatrix","_box","Object3D","Mesh","BufferGeometry","Group","LineBasicMaterial","MeshBasicMaterial","Line","LineSegments","LineLoop","Points","BatchedMesh","Sphere","RedFormat","RGFormat","RGBAFormat","RedIntegerFormat","RGIntegerFormat","RGBAIntegerFormat","DataTexture","NearestFilter","FloatType","UnsignedIntType","IntType","UnsignedByteType","ByteType","ShortType","UnsignedShortType","_positionVector","_normalVector","_tangentVector","_tangentVector4","Vector4","_morphVector","_temp","_skinIndex","_skinWeight","_matrix","_boneMatrix","validateAttributes","createAttributeClone","copyAttributeContents","addScaledMatrix","boneNormalTransform","applyMorphTarget","invertGeometry","StaticGeometryGenerator","Matrix3","BVHShaderGLSL.bvh_struct_definitions","BVHShaderGLSL.bvh_distance_functions","BVHShaderGLSL.common_functions","BVHShaderGLSL.bvh_ray_functions","getTextures","getLights","ShaderMaterial","NoBlending","WebGLRenderTarget","FullScreenQuad","PerspectiveCamera","DataUtils","HalfFloatType","Source","LinearFilter","RepeatWrapping","ClampToEdgeWrapping","Quaternion","DataArrayTexture","getTextureHash","Color","WebGLArrayRenderTarget","NoToneMapping","StructsGLSL.camera_struct","StructsGLSL.lights_struct","StructsGLSL.equirect_struct","StructsGLSL.material_struct","StructsGLSL.surface_record_struct","RandomGLSL.stratified_functions","RandomGLSL.pcg_functions","RandomGLSL.sobol_common","RandomGLSL.sobol_functions","CommonGLSL.texture_sample_functions","CommonGLSL.fresnel_functions","CommonGLSL.util_functions","CommonGLSL.math_functions","CommonGLSL.shape_intersection_functions","SamplingGLSL.shape_sampling_functions","SamplingGLSL.equirect_functions","SamplingGLSL.light_sampling_functions","PTBVHGLSL.inside_fog_volume_function","BSDFGLSL.ggx_functions","BSDFGLSL.sheen_functions","BSDFGLSL.iridescence_functions","BSDFGLSL.fog_functions","BSDFGLSL.bsdf_functions","RenderGLSL.render_structs","RenderGLSL.camera_util_functions","RenderGLSL.trace_scene_function","RenderGLSL.attenuate_hit_function","RenderGLSL.direct_light_contribution_function","RenderGLSL.get_surface_record_function","NormalBlending","Spherical","EquirectangularReflectionMapping","LinearMipMapLinearFilter","Clock","Scene","AdditiveBlending","Camera","SpotLight","RectAreaLight","PMREMGenerator","MeshStandardMaterial"],"mappings":"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AAU,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;AAClF;CACA,IAAI;AACJ;CACA,GAAGD,oBAAkB,EAAE,UAAU,EAAE,GAAG,EAAE,EAAE,gBAAgB,EAAE,GAAG,EAAE,EAAE,CAAC;CACpE,GAAGE,uBAAqB,EAAE,UAAU,EAAE,GAAG,EAAE,EAAE,gBAAgB,EAAE,GAAG,EAAE,EAAE,CAAC;AACvE;CACA,GAAG;AACH;CACA,EAAE,KAAK,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,GAAG,CAAC,GAAG;AAC5C;CACA,GAAGI,gBAAc,EAAE,cAAc,EAAE,CAAC;AACpC;CACA,GAAG;AACH;CACA,EAAE,OAAO,cAAc,CAAC;AACxB;CACA,EAAE;AACF;CACA;;CCrwBO,MAAM,gBAAgB,aAAa,CAAC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CClFD;CACO,MAAM,sBAAsB,aAAa,CAAC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CClMM,MAAM,iBAAiB,aAAa,CAAC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCpND;CACA;CACA;CACO,MAAM,sBAAsB,aAAa,CAAC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;CCKM,MAAM,aAAa,GAAGG,sBAAoC,CAAC;CAC3D,MAAM,sBAAsB,GAAGC,sBAAoC,CAAC;CACpE,MAAM,uBAAuB,GAAG,CAAC;AACxC,CAAC,GAAGC,gBAA8B,EAAE;AACpC,CAAC,GAAGC,iBAA+B,EAAE;AACrC,CAAC;;CCrBD;CACA;CACO,SAAS,qBAAqB,EAAE,IAAI,EAAE,MAAM,EAAE,YAAY,GAAG,CAAC,GAAG;AACxE;CACA,CAAC,KAAK,IAAI,CAAC,4BAA4B,GAAG;AAC1C;CACA,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CACjC,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACjD;CACA,GAAG,MAAM,EAAE,GAAG,CAAC,GAAG,YAAY,CAAC;CAC/B,GAAG,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;CACrC,GAAG,KAAK,QAAQ,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;CAC1D,GAAG,KAAK,QAAQ,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;CAC1D,GAAG,KAAK,QAAQ,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC;AAC1D;CACA,GAAG;AACH;CACA,EAAE,MAAM;AACR;CACA,EAAE,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;CAC7B,EAAE,MAAM,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC;CACjC,EAAE,MAAM,UAAU,GAAG,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC;CAC5E,EAAE,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,KAAK,CAAC,MAAM,EAAE,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;CACvE,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACzB;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA;CACO,SAAS,oBAAoB,EAAE,IAAI,EAAE,aAAa,GAAG,IAAI,GAAG;AACnE;CACA,CAAC,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;CACrC,CAAC,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;CACpC,CAAC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAChC,CAAC,MAAM,KAAK,GAAG,aAAa,KAAK,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC;AACnE;CACA,CAAC,OAAO,IAAIlF,qBAAe,EAAE,IAAI,IAAI,EAAE,QAAQ,GAAG,KAAK,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC;AAClF;CACA,CAAC;AACD;CACA;CACO,SAAS,kBAAkB,EAAE,KAAK,EAAE,KAAK,GAAG;AACnD;CACA,CAAC,KAAK,EAAE,KAAK,IAAI,EAAE,KAAK,GAAG;AAC3B;CACA,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA,CAAC,KAAK,OAAO,EAAE,KAAK,EAAE,KAAK,OAAO,EAAE,KAAK,EAAE,GAAG;AAC9C;CACA,EAAE,OAAO,KAAK,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,MAAM,SAAS,GAAG,KAAK,CAAC,KAAK,KAAK,KAAK,CAAC,KAAK,CAAC;CAC/C,CAAC,MAAM,cAAc,GAAG,KAAK,CAAC,UAAU,KAAK,KAAK,CAAC,UAAU,CAAC;CAC9D,CAAC,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,WAAW,KAAK,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC;CACtE,CAAC,MAAM,YAAY,GAAG,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,CAAC;AACxD;CACA,CAAC,KAAK,EAAE,SAAS,IAAI,EAAE,cAAc,IAAI,EAAE,QAAQ,IAAI,EAAE,YAAY,GAAG;AACxE;CACA,EAAE,OAAO,KAAK,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,OAAO,IAAI,CAAC;AACb;CACA;;CCpEA,SAAS,oBAAoB,EAAE,UAAU,GAAG;AAC5C;CACA,CAAC,MAAM,SAAS,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC;CAClD,CAAC,MAAM,cAAc,GAAG,IAAI,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC;CAC7E,CAAC,KAAK,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,UAAU,EAAE,GAAG;AACrD;CACA,EAAE,MAAM,IAAI,KAAK,EAAE,0DAA0D,EAAE,CAAC;AAChF;CACA,EAAE;AACF;CACA,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,GAAG,CAAC,GAAG;AAChD;CACA,EAAE,MAAM,QAAQ,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC;CACnC,EAAE,IAAI,eAAe,GAAG,CAAC,CAAC;AAC1B;CACA;CACA,EAAE,KAAK,SAAS,OAAO,QAAQ,CAAC,KAAK,KAAK,IAAI,EAAE,GAAG;AACnD;CACA,GAAG,MAAM,IAAI,KAAK,EAAE,qJAAqJ,EAAE,CAAC;AAC5K;CACA,GAAG;AACH;CACA;CACA,EAAE,MAAM,MAAM,IAAI,IAAI,QAAQ,CAAC,UAAU,GAAG;AAC5C;CACA,GAAG,KAAK,EAAE,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG;AACvC;CACA,IAAI,MAAM,IAAI,KAAK,EAAE,sFAAsF,GAAG,IAAI,GAAG,8DAA8D,EAAE,CAAC;AACtL;CACA,IAAI;AACJ;CACA,GAAG,eAAe,GAAG,CAAC;AACtB;CACA,GAAG;AACH;CACA;CACA,EAAE,KAAK,eAAe,KAAK,cAAc,CAAC,IAAI,GAAG;AACjD;CACA,GAAG,MAAM,IAAI,KAAK,EAAE,kFAAkF,EAAE,CAAC;AACzG;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA,SAAS,kBAAkB,EAAE,UAAU,GAAG;AAC1C;CACA,CAAC,IAAI,MAAM,GAAG,CAAC,CAAC;CAChB,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACvD;CACA,EAAE,MAAM,IAAI,UAAU,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC;AAC7C;CACA,EAAE;AACF;CACA,CAAC,OAAO,MAAM,CAAC;AACf;CACA,CAAC;AACD;CACA,SAAS,sBAAsB,EAAE,UAAU,GAAG;AAC9C;CACA,CAAC,IAAI,MAAM,GAAG,CAAC,CAAC;CAChB,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACvD;CACA,EAAE,MAAM,IAAI,UAAU,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,UAAU,EAAE,CAAC,KAAK,CAAC;AAC7D;CACA,EAAE;AACF;CACA,CAAC,OAAO,MAAM,CAAC;AACf;CACA,CAAC;AACD;CACA,SAAS,wBAAwB,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,GAAG;AACnE;CACA,CAAC,KAAK,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,KAAK,KAAK,UAAU,GAAG;AAC1D;CACA,EAAE,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC;AAC1B;CACA,EAAE;AACF;CACA,CAAC,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;CACtC,CAAC,MAAM,MAAM,GAAG,IAAI,UAAU,GAAG;AACjC;CACA,EAAE,MAAM,IAAI,GAAG,UAAU,EAAE,GAAG,EAAE,CAAC;CACjC,EAAE,KAAK,IAAI,CAAC,KAAK,KAAK,SAAS,GAAG;AAClC;CACA,GAAG,MAAM,CAAC,eAAe,EAAE,GAAG,EAAE,CAAC;AACjC;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA;CACO,SAAS,eAAe,EAAE,UAAU,EAAE,OAAO,GAAG,EAAE,EAAE,cAAc,GAAG,IAAIkC,oBAAc,EAAE,GAAG;AACnG;CACA,CAAC,MAAM;CACP,EAAE,SAAS,GAAG,KAAK;CACnB,EAAE,WAAW,GAAG,KAAK;CACrB,EAAE,uBAAuB,GAAG,EAAE;CAC9B,EAAE,cAAc,GAAG,IAAI;CACvB,EAAE,GAAG,OAAO,CAAC;AACb;CACA;CACA,CAAC,oBAAoB,EAAE,UAAU,EAAE,CAAC;AACpC;CACA,CAAC,MAAM,SAAS,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC,KAAK,KAAK,IAAI,CAAC;CAClD,CAAC,MAAM,eAAe,GAAG,SAAS,GAAG,kBAAkB,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC;CAC5E,CAAC,MAAM,mBAAmB,GAAG,sBAAsB,EAAE,UAAU,EAAE,CAAC;CAClE,CAAC,wBAAwB,EAAE,cAAc,EAAE,eAAe,EAAE,mBAAmB,EAAE,CAAC;AAClF;CACA;CACA,CAAC,KAAK,SAAS,GAAG;AAClB;CACA,EAAE,IAAI,MAAM,GAAG,CAAC,CAAC;CACjB,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACxD;CACA,GAAG,MAAM,QAAQ,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC;AACpC;CACA,GAAG,IAAI,cAAc,CAAC;CACtB,GAAG,KAAK,SAAS,GAAG;AACpB;CACA,IAAI,cAAc,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC;AAC/C;CACA,IAAI,MAAM;AACV;CACA,IAAI,cAAc,GAAG,QAAQ,CAAC,YAAY,EAAE,UAAU,EAAE,CAAC,KAAK,CAAC;AAC/D;CACA,IAAI;AACJ;CACA,GAAG,cAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,cAAc,EAAE,CAAC,EAAE,CAAC;CACxD,GAAG,MAAM,IAAI,cAAc,CAAC;AAC5B;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;CACA;CACA,CAAC,KAAK,SAAS,GAAG;AAClB;CACA;CACA,EAAE,IAAI,gBAAgB,GAAG,KAAK,CAAC;CAC/B,EAAE,KAAK,EAAE,cAAc,CAAC,KAAK,GAAG;AAChC;CACA,GAAG,cAAc,CAAC,QAAQ,EAAE,IAAIlC,qBAAe,EAAE,IAAI,WAAW,EAAE,eAAe,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;CAClG,GAAG,gBAAgB,GAAG,IAAI,CAAC;AAC3B;CACA,GAAG;AACH;CACA,EAAE,KAAK,gBAAgB,IAAI,cAAc,GAAG;AAC5C;CACA;CACA,GAAG,IAAI,YAAY,GAAG,CAAC,CAAC;CACxB,GAAG,IAAI,WAAW,GAAG,CAAC,CAAC;CACvB,GAAG,MAAM,WAAW,GAAG,cAAc,CAAC,QAAQ,EAAE,CAAC;CACjD,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACzD;CACA,IAAI,MAAM,QAAQ,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC;CACrC,IAAI,MAAM,KAAK,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC;CACtC,IAAI,MAAM,IAAI,GAAG,EAAE,WAAW,IAAI,EAAE,gBAAgB,IAAI,uBAAuB,EAAE,CAAC,EAAE,CAAC;CACrF,IAAI,KAAK,EAAE,IAAI,GAAG;AAClB;CACA,KAAK,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,GAAG;AAC9C;CACA,MAAM,WAAW,CAAC,IAAI,EAAE,YAAY,GAAG,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,WAAW,EAAE,CAAC;AAC1E;CACA,MAAM;AACN;CACA,KAAK;AACL;CACA,IAAI,YAAY,IAAI,KAAK,CAAC,KAAK,CAAC;CAChC,IAAI,WAAW,IAAI,QAAQ,CAAC,YAAY,EAAE,UAAU,EAAE,CAAC,KAAK,CAAC;AAC7D;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;CACA,CAAC,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC;CAC9D,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACvD;CACA,EAAE,IAAI,eAAe,GAAG,KAAK,CAAC;CAC9B,EAAE,MAAM,GAAG,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC;CAC9B,EAAE,KAAK,EAAE,cAAc,CAAC,YAAY,EAAE,GAAG,EAAE,GAAG;AAC9C;CACA,GAAG,MAAM,SAAS,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC,YAAY,EAAE,GAAG,EAAE,CAAC;CACzD,GAAG,cAAc,CAAC,YAAY,EAAE,GAAG,EAAE,oBAAoB,EAAE,SAAS,EAAE,mBAAmB,EAAE,EAAE,CAAC;CAC9F,GAAG,eAAe,GAAG,IAAI,CAAC;AAC1B;CACA,GAAG;AACH;CACA,EAAE,IAAI,MAAM,GAAG,CAAC,CAAC;CACjB,EAAE,MAAM,eAAe,GAAG,cAAc,CAAC,YAAY,EAAE,GAAG,EAAE,CAAC;CAC7D,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACxD;CACA,GAAG,MAAM,QAAQ,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC;CACpC,GAAG,MAAM,IAAI,GAAG,EAAE,WAAW,IAAI,EAAE,eAAe,IAAI,uBAAuB,EAAE,CAAC,EAAE,CAAC;CACnF,GAAG,MAAM,IAAI,GAAG,QAAQ,CAAC,YAAY,EAAE,GAAG,EAAE,CAAC;CAC7C,IAAI,KAAK,EAAE,IAAI,GAAG;AAClB;CACA,IAAI,KAAK,GAAG,KAAK,OAAO,IAAI,eAAe,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,GAAG;AACzE;CACA;CACA,KAAK,MAAM,IAAI,KAAK,GAAG,MAAM,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,GAAG;AACrE;CACA,MAAM,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,CAAC;AAC9H;CACA,MAAM;AACN;CACA,KAAK,MAAM;AACX;CACA,KAAK,qBAAqB,EAAE,IAAI,EAAE,eAAe,EAAE,MAAM,EAAE,CAAC;AAC5D;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA,GAAG,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC;AACxB;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;;CCpOO,SAAS,4BAA4B,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,GAAG;AAClF;CACA,CAAC,MAAM,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC;CAClC,CAAC,MAAM,OAAO,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC;CAC9C,CAAC,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;CACjC,CAAC,MAAM,UAAU,GAAG,SAAS,GAAG,SAAS,CAAC,KAAK,GAAG,SAAS,CAAC;CAC5D,CAAC,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;CAC9B,CAAC,KAAK,MAAM,CAAC,MAAM,KAAK,CAAC,GAAG;AAC5B;CACA,EAAE,MAAM,GAAG,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC;AACjE;CACA,EAAE;AACF;CACA,CAAC,IAAI,sBAAsB,GAAG,QAAQ,CAAC,YAAY,EAAE,eAAe,EAAE,CAAC;CACvE,CAAC,KAAK,EAAE,sBAAsB,IAAI,sBAAsB,CAAC,KAAK,KAAK,SAAS,GAAG;AAC/E;CACA;CACA,EAAE,IAAI,KAAK,CAAC;CACZ,EAAE,KAAK,YAAY,CAAC,MAAM,IAAI,GAAG,GAAG;AACpC;CACA,GAAG,KAAK,GAAG,IAAI,UAAU,EAAE,SAAS,EAAE,CAAC;AACvC;CACA,GAAG,MAAM;AACT;CACA,GAAG,KAAK,GAAG,IAAI,WAAW,EAAE,SAAS,EAAE,CAAC;AACxC;CACA,GAAG;AACH;CACA,EAAE,sBAAsB,GAAG,IAAIA,qBAAe,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC;CAClE,EAAE,QAAQ,CAAC,eAAe,EAAE,eAAe,EAAE,CAAC;CAC9C,EAAE,QAAQ,CAAC,YAAY,EAAE,eAAe,EAAE,sBAAsB,EAAE,CAAC;AACnE;CACA,EAAE;AACF;CACA,CAAC,MAAM,aAAa,GAAG,sBAAsB,CAAC,KAAK,CAAC;CACpD,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG;AAC5C;CACA,EAAE,MAAM,KAAK,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC;CAC5B,EAAE,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;CAC5B,EAAE,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;CAC5B,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,UAAU,GAAG,KAAK,EAAE,CAAC;AACzD;CACA,EAAE,MAAM,GAAG,GAAG,KAAK,CAAC,OAAO,EAAE,SAAS,EAAE,GAAG,SAAS,EAAE,KAAK,CAAC,aAAa,EAAE,GAAG,SAAS,CAAC;CACxF,EAAE,MAAM,aAAa,GAAG,YAAY,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC;AACpD;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,GAAG,GAAG;AACxC;CACA,GAAG,IAAI,KAAK,GAAG,KAAK,GAAG,CAAC,CAAC;CACzB,GAAG,KAAK,SAAS,GAAG;AACpB;CACA,IAAI,KAAK,GAAG,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;AACpC;CACA,IAAI;AACJ;CACA,GAAG,aAAa,EAAE,KAAK,EAAE,GAAG,aAAa,CAAC;AAC1C;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC;AACD;CACO,SAAS,mBAAmB,EAAE,QAAQ,EAAE,UAAU,GAAG;AAC5D;CACA,CAAC,KAAK,EAAE,QAAQ,CAAC,KAAK,GAAG;AACzB;CACA;CACA,EAAE,MAAM,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;CACxD,EAAE,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,UAAU,EAAE,CAAC;CACxC,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,GAAG,GAAG;AAC1C;CACA,GAAG,KAAK,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;AAClB;CACA,GAAG;AACH;CACA,EAAE,QAAQ,CAAC,QAAQ,EAAE,KAAK,EAAE,CAAC;AAC7B;CACA,EAAE;AACF;CACA,CAAC,KAAK,EAAE,QAAQ,CAAC,UAAU,CAAC,MAAM,MAAM,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,GAAG;AAC1F;CACA,EAAE,QAAQ,CAAC,oBAAoB,EAAE,CAAC;AAClC;CACA,EAAE;AACF;CACA,CAAC,KAAK,EAAE,QAAQ,CAAC,UAAU,CAAC,EAAE,MAAM,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE,GAAG;AAClF;CACA,EAAE,MAAM,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;CACvD,EAAE,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,IAAIA,qBAAe,EAAE,IAAI,YAAY,EAAE,SAAS,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;AACpG;CACA,EAAE;AACF;CACA,CAAC,KAAK,EAAE,QAAQ,CAAC,UAAU,CAAC,GAAG,MAAM,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE,GAAG;AACpF;CACA,EAAE,MAAM,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;CACvD,EAAE,QAAQ,CAAC,YAAY,EAAE,KAAK,EAAE,IAAIA,qBAAe,EAAE,IAAI,YAAY,EAAE,SAAS,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;AACrG;CACA,EAAE;AACF;CACA,CAAC,KAAK,EAAE,QAAQ,CAAC,UAAU,CAAC,OAAO,MAAM,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE,GAAG;AAC5F;CACA;CACA,EAAE,KAAK,QAAQ,CAAC,UAAU,CAAC,EAAE,IAAI,QAAQ,CAAC,UAAU,CAAC,MAAM,GAAG;AAC9D;CACA,GAAG,QAAQ,CAAC,eAAe,EAAE,CAAC;AAC9B;CACA,GAAG,MAAM;AACT;CACA,GAAG,MAAM,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;CACxD,GAAG,QAAQ,CAAC,YAAY,EAAE,SAAS,EAAE,IAAIA,qBAAe,EAAE,IAAI,YAAY,EAAE,SAAS,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;AAC1G;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,KAAK,EAAE,QAAQ,CAAC,UAAU,CAAC,KAAK,MAAM,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE,OAAO,EAAE,EAAE,GAAG;AACxF;CACA,EAAE,MAAM,SAAS,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC;CACvD,EAAE,MAAM,KAAK,GAAG,IAAI,YAAY,EAAE,SAAS,GAAG,CAAC,EAAE,CAAC;CAClD,EAAE,KAAK,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC;CACpB,EAAE,QAAQ,CAAC,YAAY,EAAE,OAAO,EAAE,IAAIA,qBAAe,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;AACpE;CACA,EAAE;AACF;CACA;;CC9HA;CACA;CACO,SAAS,YAAY,EAAE,MAAM,GAAG;AACvC;CACA,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;AACd;CACA,CAAC,KAAK,MAAM,CAAC,UAAU,KAAK,CAAC,GAAG;AAChC;CACA,EAAE,MAAM,SAAS,GAAG,IAAI,UAAU,EAAE,MAAM,EAAE,CAAC;CAC7C,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC,GAAG,GAAG;AACjD;CACA,GAAG,MAAM,IAAI,GAAG,SAAS,EAAE,CAAC,EAAE,CAAC;CAC/B,GAAG,IAAI,GAAG,EAAE,EAAE,IAAI,IAAI,CAAC,KAAK,IAAI,KAAK,IAAI,CAAC;CAC1C,GAAG,IAAI,IAAI,CAAC,CAAC;AACb;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,OAAO,IAAI,CAAC;AACb;CACA;;CClBA,SAAS,eAAe,EAAE,QAAQ,GAAG;AACrC;CACA,CAAC,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;CAC1B,CAAC,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,EAAE,QAAQ,CAAC,UAAU,EAAE,CAAC;CACzD,CAAC,KAAK,QAAQ,CAAC,KAAK,GAAG;AACvB;CACA,EAAE,UAAU,CAAC,IAAI,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC;CACpC,EAAE,IAAI,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AAC9C;CACA,EAAE;AACF;CACA,CAAC,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC,IAAI,EAAE,CAAC;CAC/C,CAAC,MAAM,MAAM,GAAG,IAAI,IAAI,GAAG;AAC3B;CACA,EAAE,MAAM,IAAI,GAAG,UAAU,EAAE,GAAG,EAAE,CAAC;CACjC,EAAE,IAAI,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;AACxC;CACA,EAAE;AACF;CACA,CAAC,OAAO,IAAI,CAAC;AACb;CACA,CAAC;AACD;CACA,SAAS,eAAe,EAAE,IAAI,GAAG;AACjC;CACA,CAAC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAChC,CAAC,KAAK,QAAQ,GAAG;AACjB;CACA,EAAE,KAAK,EAAE,QAAQ,CAAC,WAAW,GAAG;AAChC;CACA,GAAG,QAAQ,CAAC,kBAAkB,EAAE,CAAC;AACjC;CACA,GAAG;AACH;CACA;CACA;CACA,EAAE,MAAM,QAAQ,GAAG,YAAY,EAAE,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;CAC1E,EAAE,OAAO,CAAC,GAAG,QAAQ,EAAE,CAAC,GAAG,QAAQ,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC;AACxD;CACA,EAAE,MAAM;AACR;CACA,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA;CACO,MAAM,QAAQ,CAAC;AACtB;CACA,CAAC,WAAW,EAAE,IAAI,GAAG,IAAI,GAAG;AAC5B;CACA,EAAE,IAAI,CAAC,WAAW,GAAG,IAAIO,aAAO,EAAE,CAAC;CACnC,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;CAC3B,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;CAC3B,EAAE,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC,CAAC;AAC5B;CACA,EAAE,KAAK,IAAI,KAAK,IAAI,GAAG;AACvB;CACA,GAAG,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE,CAAC;AAC3B;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,UAAU,EAAE,IAAI,GAAG;AACpB;CACA,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CACjC,EAAE,MAAM,cAAc,GAAG,EAAE,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC,CAAC;CAC5G,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;CAC5C,EAAE,IAAI,CAAC,YAAY,GAAG,eAAe,EAAE,QAAQ,EAAE,CAAC;CAClD,EAAE,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;CACvC,EAAE,IAAI,CAAC,YAAY,GAAG,eAAe,EAAE,IAAI,EAAE,CAAC;AAC9C;CACA,EAAE;AACF;CACA,CAAC,SAAS,EAAE,IAAI,GAAG;AACnB;CACA,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CACjC,EAAE,MAAM,cAAc,GAAG,EAAE,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC,CAAC;AAC5G;CACA,EAAE,MAAM,SAAS;CACjB,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE;CAC9C,GAAG,IAAI,CAAC,YAAY,KAAK,eAAe,EAAE,QAAQ,EAAE;CACpD,GAAG,IAAI,CAAC,YAAY,KAAK,eAAe,EAAE,IAAI,EAAE;CAChD,GAAG,IAAI,CAAC,cAAc,KAAK,cAAc,CAAC;AAC1C;CACA,EAAE,OAAO,EAAE,SAAS,CAAC;AACrB;CACA,EAAE;AACF;CACA;;CC3FA,MAAM,eAAe,iBAAiB,IAAIL,aAAO,EAAE,CAAC;CACpD,MAAM,aAAa,iBAAiB,IAAIA,aAAO,EAAE,CAAC;CAClD,MAAM,cAAc,iBAAiB,IAAIA,aAAO,EAAE,CAAC;CACnD,MAAM,eAAe,iBAAiB,IAAI6D,aAAO,EAAE,CAAC;AACpD;CACA,MAAM,YAAY,iBAAiB,IAAI7D,aAAO,EAAE,CAAC;CACjD,MAAM,KAAK,iBAAiB,IAAIA,aAAO,EAAE,CAAC;AAC1C;CACA,MAAM,UAAU,iBAAiB,IAAI6D,aAAO,EAAE,CAAC;CAC/C,MAAM,WAAW,iBAAiB,IAAIA,aAAO,EAAE,CAAC;CAChD,MAAM,OAAO,iBAAiB,IAAIxD,aAAO,EAAE,CAAC;CAC5C,MAAM,WAAW,iBAAiB,IAAIA,aAAO,EAAE,CAAC;AAChD;CACA;CACA,SAAS,mBAAmB,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,GAAG;AACpD;CACA,CAAC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAChC,CAAC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAChC,CAAC,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;CAC9B,CAAC,MAAM,YAAY,GAAG,QAAQ,CAAC,YAAY,CAAC;AAC5C;CACA,CAAC,UAAU,CAAC,mBAAmB,EAAE,QAAQ,CAAC,UAAU,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC;CACxE,CAAC,WAAW,CAAC,mBAAmB,EAAE,QAAQ,CAAC,UAAU,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC;AAC1E;CACA,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;AAC5B;CACA,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AAChC;CACA,EAAE,MAAM,MAAM,GAAG,WAAW,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC;AAC/C;CACA,EAAE,KAAK,MAAM,KAAK,CAAC,GAAG;AACtB;CACA,GAAG,MAAM,SAAS,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC;CAClD,GAAG,WAAW,CAAC,gBAAgB,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,WAAW,EAAE,YAAY,EAAE,SAAS,EAAE,EAAE,CAAC;AAC7F;CACA,GAAG,eAAe,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;AACnD;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,EAAE,CAAC;CAC3E,CAAC,MAAM,CAAC,kBAAkB,EAAE,OAAO,EAAE,CAAC;AACtC;CACA,CAAC,OAAO,MAAM,CAAC;AACf;CACA,CAAC;AACD;CACA;CACA,SAAS,gBAAgB,EAAE,SAAS,EAAE,eAAe,EAAE,oBAAoB,EAAE,CAAC,EAAE,MAAM,GAAG;AACzF;CACA,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAC7B,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG;AACxD;CACA,EAAE,MAAM,SAAS,GAAG,eAAe,EAAE,CAAC,EAAE,CAAC;CACzC,EAAE,MAAM,cAAc,GAAG,SAAS,EAAE,CAAC,EAAE,CAAC;AACxC;CACA,EAAE,KAAK,SAAS,KAAK,CAAC,GAAG,SAAS;AAClC;CACA,EAAE,KAAK,CAAC,mBAAmB,EAAE,cAAc,EAAE,CAAC,EAAE,CAAC;AACjD;CACA,EAAE,KAAK,oBAAoB,GAAG;AAC9B;CACA,GAAG,YAAY,CAAC,eAAe,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC;AACpD;CACA,GAAG,MAAM;AACT;CACA,GAAG,YAAY,CAAC,eAAe,EAAE,KAAK,CAAC,GAAG,EAAE,MAAM,EAAE,EAAE,SAAS,EAAE,CAAC;AAClE;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,MAAM,CAAC,GAAG,EAAE,YAAY,EAAE,CAAC;AAC5B;CACA,CAAC;AACD;CACA;CACA,SAAS,eAAe,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,GAAG;AAClD;CACA,CAAC,MAAM,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC;CACrC,CAAC,MAAM,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC;CACrC,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACxD;CACA,EAAE,WAAW,EAAE,CAAC,EAAE,IAAI,WAAW,EAAE,CAAC,EAAE,GAAG,KAAK,CAAC;AAC/C;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA;CACA,SAAS,cAAc,EAAE,QAAQ,GAAG;AACpC;CACA,CAAC,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,QAAQ,CAAC;CACxC,CAAC,KAAK,KAAK,GAAG;AACd;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG;AACpD;CACA,GAAG,MAAM,EAAE,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;CAC9B,GAAG,MAAM,EAAE,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;CAClC,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;CACvB,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC;AAC3B;CACA,GAAG;AACH;CACA,EAAE,MAAM;AACR;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,UAAU,GAAG;AAClC;CACA,GAAG,MAAM,IAAI,GAAG,UAAU,EAAE,GAAG,EAAE,CAAC;CAClC,GAAG,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAClC,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG;AACpD;CACA,IAAI,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,GAAG,GAAG;AAC1C;CACA,KAAK,MAAM,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAC1C,KAAK,MAAM,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC;CAC9C,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;CACnC,KAAK,IAAI,CAAC,YAAY,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;AACvC;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,OAAO,QAAQ,CAAC;AACjB;CACA,CAAC;AACD;CACO,SAAS,uBAAuB,EAAE,IAAI,EAAE,OAAO,GAAG,EAAE,EAAE,cAAc,GAAG,IAAI2B,oBAAc,EAAE,GAAG;AACrG;CACA,CAAC,OAAO,GAAG;CACX,EAAE,oBAAoB,EAAE,IAAI;CAC5B,EAAE,UAAU,EAAE,EAAE;CAChB,EAAE,GAAG,OAAO;CACZ,EAAE,CAAC;AACH;CACA,CAAC,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CAChC,CAAC,MAAM,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAC;CAC3D,CAAC,MAAM,aAAa,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC;CAC/D,CAAC,MAAM,cAAc,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,SAAS,EAAE,CAAC;CACjE,CAAC,MAAM,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC;CACxC,CAAC,MAAM,gBAAgB,GAAG,cAAc,CAAC,UAAU,CAAC;AACpD;CACA;CACA,CAAC,MAAM,MAAM,GAAG,IAAI,cAAc,CAAC,UAAU,GAAG;AAChD;CACA,EAAE,KAAK,EAAE,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,UAAU,EAAE,GAAG;AAClF;CACA,GAAG,cAAc,CAAC,eAAe,EAAE,GAAG,EAAE,CAAC;AACzC;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;CACA,CAAC,KAAK,EAAE,cAAc,CAAC,KAAK,IAAI,QAAQ,CAAC,KAAK,GAAG;AACjD;CACA,EAAE,cAAc,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AAChD;CACA,EAAE;AACF;CACA,CAAC,KAAK,EAAE,gBAAgB,CAAC,QAAQ,GAAG;AACpC;CACA,EAAE,cAAc,CAAC,YAAY,EAAE,UAAU,EAAE,oBAAoB,EAAE,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC;AACzF;CACA,EAAE;AACF;CACA,CAAC,KAAK,aAAa,IAAI,EAAE,gBAAgB,CAAC,MAAM,IAAI,UAAU,CAAC,MAAM,GAAG;AACxE;CACA,EAAE,cAAc,CAAC,YAAY,EAAE,QAAQ,EAAE,oBAAoB,EAAE,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC;AACrF;CACA,EAAE;AACF;CACA,CAAC,KAAK,cAAc,IAAI,EAAE,gBAAgB,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,GAAG;AAC3E;CACA,EAAE,cAAc,CAAC,YAAY,EAAE,SAAS,EAAE,oBAAoB,EAAE,UAAU,CAAC,OAAO,EAAE,EAAE,CAAC;AACvF;CACA,EAAE;AACF;CACA;CACA,CAAC,kBAAkB,EAAE,QAAQ,CAAC,KAAK,EAAE,cAAc,CAAC,KAAK,EAAE,CAAC;CAC5D,CAAC,kBAAkB,EAAE,UAAU,CAAC,QAAQ,EAAE,gBAAgB,CAAC,QAAQ,EAAE,CAAC;AACtE;CACA,CAAC,KAAK,aAAa,GAAG;AACtB;CACA,EAAE,kBAAkB,EAAE,UAAU,CAAC,MAAM,EAAE,gBAAgB,CAAC,MAAM,EAAE,CAAC;AACnE;CACA,EAAE;AACF;CACA,CAAC,KAAK,cAAc,GAAG;AACvB;CACA,EAAE,kBAAkB,EAAE,UAAU,CAAC,OAAO,EAAE,gBAAgB,CAAC,OAAO,EAAE,CAAC;AACrE;CACA,EAAE;AACF;CACA;CACA,CAAC,MAAM,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;CACtC,CAAC,MAAM,MAAM,GAAG,aAAa,GAAG,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;CACzD,CAAC,MAAM,OAAO,GAAG,cAAc,GAAG,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;CAC5D,CAAC,MAAM,aAAa,GAAG,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC;CACzD,CAAC,MAAM,WAAW,GAAG,QAAQ,CAAC,eAAe,CAAC,MAAM,CAAC;CACrD,CAAC,MAAM,YAAY,GAAG,QAAQ,CAAC,eAAe,CAAC,OAAO,CAAC;CACvD,CAAC,MAAM,oBAAoB,GAAG,QAAQ,CAAC,oBAAoB,CAAC;CAC5D,CAAC,MAAM,eAAe,GAAG,IAAI,CAAC,qBAAqB,CAAC;CACpD,CAAC,MAAM,YAAY,GAAG,IAAI4C,aAAO,EAAE,CAAC;CACpC,CAAC,YAAY,CAAC,eAAe,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;AAClD;CACA;CACA,CAAC,KAAK,QAAQ,CAAC,KAAK,GAAG;AACvB;CACA,EAAE,cAAc,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;AACzD;CACA,EAAE;AACF;CACA;CACA,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AAC/D;CACA,EAAE,eAAe,CAAC,mBAAmB,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;CACrD,EAAE,KAAK,MAAM,GAAG;AAChB;CACA,GAAG,aAAa,CAAC,mBAAmB,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC;AAClD;CACA,GAAG;AACH;CACA,EAAE,KAAK,OAAO,GAAG;AACjB;CACA,GAAG,eAAe,CAAC,mBAAmB,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;CACrD,GAAG,cAAc,CAAC,mBAAmB,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;AACpD;CACA,GAAG;AACH;CACA;CACA,EAAE,KAAK,eAAe,GAAG;AACzB;CACA,GAAG,KAAK,aAAa,GAAG;AACxB;CACA,IAAI,gBAAgB,EAAE,aAAa,EAAE,eAAe,EAAE,oBAAoB,EAAE,CAAC,EAAE,eAAe,EAAE,CAAC;AACjG;CACA,IAAI;AACJ;CACA,GAAG,KAAK,WAAW,GAAG;AACtB;CACA,IAAI,gBAAgB,EAAE,WAAW,EAAE,eAAe,EAAE,oBAAoB,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC;AAC7F;CACA,IAAI;AACJ;CACA,GAAG,KAAK,YAAY,GAAG;AACvB;CACA,IAAI,gBAAgB,EAAE,YAAY,EAAE,eAAe,EAAE,oBAAoB,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC;AAC/F;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA;CACA,EAAE,KAAK,IAAI,CAAC,aAAa,GAAG;AAC5B;CACA,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC,EAAE,eAAe,EAAE,CAAC;CACjD,GAAG,KAAK,MAAM,GAAG;AACjB;CACA,IAAI,mBAAmB,EAAE,IAAI,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC;AAClD;CACA,IAAI;AACJ;CACA,GAAG,KAAK,OAAO,GAAG;AAClB;CACA,IAAI,mBAAmB,EAAE,IAAI,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC;AACnD;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA;CACA,EAAE,KAAK,oBAAoB,GAAG;AAC9B;CACA,GAAG,eAAe,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;AACpD;CACA,GAAG;AACH;CACA,EAAE,gBAAgB,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,CAAC;AACjG;CACA,EAAE,KAAK,MAAM,GAAG;AAChB;CACA,GAAG,KAAK,oBAAoB,GAAG;AAC/B;CACA,IAAI,aAAa,CAAC,iBAAiB,EAAE,YAAY,EAAE,CAAC;AACpD;CACA,IAAI;AACJ;CACA,GAAG,gBAAgB,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,aAAa,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC,EAAE,CAAC;AAC1F;CACA,GAAG;AACH;CACA,EAAE,KAAK,OAAO,GAAG;AACjB;CACA,GAAG,KAAK,oBAAoB,GAAG;AAC/B;CACA,IAAI,cAAc,CAAC,kBAAkB,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;AAC1D;CACA,IAAI;AACJ;CACA,GAAG,gBAAgB,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,cAAc,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,CAAC;AAClH;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;CACA,CAAC,MAAM,MAAM,CAAC,IAAI,OAAO,CAAC,UAAU,GAAG;AACvC;CACA,EAAE,MAAM,GAAG,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC;CACtC,EAAE,KAAK,GAAG,KAAK,UAAU,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,QAAQ,IAAI,IAAI,GAAG,IAAI,UAAU,EAAE,GAAG;AAChG;CACA,GAAG,SAAS;AACZ;CACA,GAAG;AACH;CACA,EAAE,KAAK,EAAE,gBAAgB,EAAE,GAAG,EAAE,GAAG;AACnC;CACA,GAAG,cAAc,CAAC,YAAY,EAAE,GAAG,EAAE,oBAAoB,EAAE,UAAU,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;AACjF;CACA,GAAG;AACH;CACA,EAAE,kBAAkB,EAAE,UAAU,EAAE,GAAG,EAAE,EAAE,gBAAgB,EAAE,GAAG,EAAE,EAAE,CAAC;CACnE,EAAE,qBAAqB,EAAE,UAAU,EAAE,GAAG,EAAE,EAAE,gBAAgB,EAAE,GAAG,EAAE,EAAE,CAAC;AACtE;CACA,EAAE;AACF;CACA,CAAC,KAAK,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,GAAG,CAAC,GAAG;AAC3C;CACA,EAAE,cAAc,EAAE,cAAc,EAAE,CAAC;AACnC;CACA,EAAE;AACF;CACA,CAAC,OAAO,cAAc,CAAC;AACvB;CACA;;CClVO,MAAM,aAAa,SAAS5C,oBAAc,CAAC;AAClD;CACA,CAAC,WAAW,GAAG;AACf;CACA,EAAE,KAAK,EAAE,CAAC;CACV,EAAE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;CACnB,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;CACnB,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,EAAE,CAAC;AAC9B;CACA,EAAE;AACF;CACA;CACA;CACA,CAAC,YAAY,EAAE,IAAI,EAAE,UAAU,GAAG;AAClC;CACA,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;CACjC,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG;AACjD;CACA,GAAG,MAAM,GAAG,GAAG,UAAU,EAAE,CAAC,EAAE,CAAC;CAC/B,GAAG,MAAM,KAAK,GAAG,QAAQ,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC;CAC5C,GAAG,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC;CACxC,GAAG,KAAK,KAAK,IAAI,EAAE,kBAAkB,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG;AACxD;CACA,IAAI,OAAO,KAAK,CAAC;AACjB;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA,CAAC,UAAU,EAAE,IAAI,EAAE,OAAO,GAAG;AAC7B;CACA,EAAE,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;CAC1B,EAAE,KAAK,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,GAAG;AAChC;CACA,GAAG,uBAAuB,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;CAClD,GAAG,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE,CAAC;CAC3B,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC;CACnB,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;CAClD,GAAG,OAAO,IAAI,CAAC;AACf;CACA,GAAG,MAAM;AACT;CACA,GAAG,OAAO,KAAK,CAAC;AAChB;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;;CCpDO,MAAM,SAAS,GAAG,CAAC,CAAC;CACpB,MAAM,iBAAiB,GAAG,CAAC,CAAC;CAC5B,MAAM,gBAAgB,GAAG,CAAC,CAAC;AAClC;CACA;CACA,SAAS,kBAAkB,EAAE,OAAO,EAAE,EAAE,GAAG;AAC3C;CACA,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACpD;CACA,EAAE,MAAM,MAAM,GAAG,OAAO,EAAE,CAAC,EAAE,CAAC;CAC9B,EAAE,MAAM,CAAC,eAAe,EAAE,CAAC,IAAI;AAC/B;CACA,GAAG,KAAK,CAAC,CAAC,MAAM,GAAG;AACnB;CACA,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC;AACZ;CACA,IAAI;AACJ;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA;CACA,SAAS,YAAY,EAAE,MAAM,GAAG;AAChC;CACA,CAAC,MAAM,SAAS,GAAG,EAAE,CAAC;CACtB,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACnD;CACA,EAAE,MAAM,IAAI,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC;CAC3B,EAAE,KAAK,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,GAAG;AACxC;CACA,GAAG,SAAS,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AACtC;CACA,GAAG,MAAM;AACT;CACA,GAAG,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;AACnC;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,OAAO,SAAS,CAAC;AAClB;CACA,CAAC;AACD;CACA,SAAS,iBAAiB,EAAE,UAAU,EAAE,MAAM,EAAE,OAAO,GAAG;AAC1D;CACA;CACA,CAAC,KAAK,UAAU,CAAC,MAAM,KAAK,CAAC,GAAG;AAChC;CACA;CACA,EAAE,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC;AAC1B;CACA;CACA,EAAE,MAAM,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC;CAClC,EAAE,MAAM,MAAM,GAAG,IAAI,KAAK,GAAG;AAC7B;CACA,GAAG,MAAM,CAAC,eAAe,EAAE,GAAG,EAAE,CAAC;AACjC;CACA,GAAG;AACH;CACA;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,UAAU,GAAG;AAC1C;CACA,GAAG,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,UAAU,EAAE,GAAG,EAAE,EAAE,IAAIlC,qBAAe,EAAE,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;AAC5G;CACA,GAAG;AACH;CACA,EAAE,MAAM;AACR;CACA,EAAE,eAAe,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;AACjD;CACA,EAAE;AACF;CACA;CACA,CAAC,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,UAAU,GAAG;AACxC;CACA,EAAE,MAAM,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC;AAC9C;CACA,EAAE;AACF;CACA,CAAC;AACD;AACA;CACO,MAAM,uBAAuB,CAAC;AACrC;CACA,CAAC,WAAW,EAAE,OAAO,GAAG;AACxB;CACA,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;CACtB,EAAE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;CACxB,EAAE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;CACnC,EAAE,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC;CACxC,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;CAC7B,EAAE,IAAI,CAAC,UAAU,GAAG,EAAE,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;CAC9E,EAAE,IAAI,CAAC,qBAAqB,GAAG,IAAI,GAAG,EAAE,CAAC;CACzC,EAAE,IAAI,CAAC,kBAAkB,GAAG,IAAI,OAAO,EAAE,CAAC;CAC1C,EAAE,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;CACxB,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACzB;CACA,EAAE,IAAI,CAAC,UAAU,EAAE,OAAO,IAAI,EAAE,EAAE,CAAC;AACnC;CACA,EAAE;AACF;CACA,CAAC,aAAa,GAAG;AACjB;CACA;CACA,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,GAAG;AAC3B;CACA,GAAG,MAAM,aAAa,GAAG,IAAIqC,uBAAiB,EAAE,CAAC;CACjD,GAAG,MAAM,aAAa,GAAG,IAAIH,oBAAc,EAAE,CAAC;CAC9C,GAAG,aAAa,CAAC,YAAY,EAAE,UAAU,EAAE,IAAIlC,qBAAe,EAAE,IAAI,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;CAC7F,GAAG,IAAI,CAAC,UAAU,GAAG,IAAIiC,UAAI,EAAE,aAAa,EAAE,aAAa,EAAE,CAAC;AAC9D;CACA,GAAG;AACH;CACA,EAAE,OAAO,IAAI,CAAC,UAAU,CAAC;AACzB;CACA,EAAE;AACF;CACA,CAAC,UAAU,GAAG;AACd;CACA;CACA,EAAE,MAAM,MAAM,GAAG,EAAE,CAAC;CACpB,EAAE,kBAAkB,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,IAAI;AAC5C;CACA,GAAG,MAAM,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC;AACvB;CACA,GAAG,EAAE,CAAC;AACN;CACA;CACA,EAAE,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM;AAC3B;CACA,GAAG,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC;CACnC,GAAG,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,OAAO,EAAE,CAAC,CAAC;CACrC,GAAG,OAAO,CAAC,CAAC;AACZ;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE,KAAK,MAAM,CAAC,MAAM,KAAK,CAAC,GAAG;AAC7B;CACA,GAAG,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC;AACvC;CACA,GAAG;AACH;CACA,EAAE,OAAO,MAAM,CAAC;AAChB;CACA,EAAE;AACF;CACA,CAAC,6BAA6B,GAAG;AACjC;CACA,EAAE,MAAM,EAAE,qBAAqB,EAAE,GAAG,IAAI,CAAC;AACzC;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;CACnC,EAAE,MAAM,cAAc,GAAG,IAAI,GAAG,EAAE,qBAAqB,CAAC,IAAI,EAAE,EAAE,CAAC;CACjE,EAAE,MAAM,cAAc,GAAG;CACzB,GAAG,UAAU,EAAE,IAAI,CAAC,UAAU;CAC9B,GAAG,oBAAoB,EAAE,IAAI,CAAC,oBAAoB;CAClD,GAAG,CAAC;AACJ;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACpD;CACA,GAAG,MAAM,IAAI,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC;CAC5B,GAAG,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;CAC7B,GAAG,cAAc,CAAC,MAAM,EAAE,OAAO,EAAE,CAAC;AACpC;CACA;CACA;CACA;CACA,GAAG,IAAI,IAAI,GAAG,qBAAqB,CAAC,GAAG,EAAE,OAAO,EAAE,CAAC;CACnD,GAAG,KAAK,EAAE,IAAI,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG;AACjE;CACA,IAAI,KAAK,IAAI,GAAG;AAChB;CACA,KAAK,IAAI,CAAC,OAAO,EAAE,CAAC;AACpB;CACA,KAAK;AACL;CACA,IAAI,IAAI,GAAG,IAAI,aAAa,EAAE,CAAC;CAC/B,IAAI,qBAAqB,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AAC/C;CACA,IAAI;AACJ;CACA;CACA;CACA,GAAG,KAAK,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE,cAAc,EAAE,GAAG;AAClD;CACA;CACA;CACA,IAAI,KAAK,IAAI,CAAC,yBAAyB,GAAG;AAC1C;CACA,KAAK,mBAAmB,EAAE,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC;AAClD;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,cAAc,CAAC,OAAO,EAAE,GAAG,IAAI;AACjC;CACA,GAAG,qBAAqB,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC;AACvC;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE;AACF;CACA,CAAC,UAAU,EAAE,OAAO,GAAG;AACvB;CACA,EAAE,KAAK,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,GAAG;AAClC;CACA,GAAG,IAAI,CAAC,OAAO,GAAG,EAAE,GAAG,OAAO,EAAE,CAAC;AACjC;CACA,GAAG,MAAM;AACT;CACA,GAAG,IAAI,CAAC,OAAO,GAAG,EAAE,OAAO,EAAE,CAAC;AAC9B;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,QAAQ,EAAE,cAAc,GAAG,IAAIC,oBAAc,EAAE,GAAG;AACnD;CACA;CACA,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,qBAAqB,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC;AACxF;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;CACnC,EAAE,MAAM,uBAAuB,GAAG,EAAE,CAAC;CACrC,EAAE,MAAM,aAAa,GAAG,EAAE,CAAC;CAC3B,EAAE,MAAM,iBAAiB,GAAG,kBAAkB,CAAC,GAAG,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC;AAC3E;CACA;CACA,EAAE,IAAI,CAAC,6BAA6B,EAAE,CAAC;AACvC;CACA;CACA,EAAE,IAAI,WAAW,GAAG,KAAK,CAAC;CAC1B,EAAE,KAAK,MAAM,CAAC,MAAM,KAAK,iBAAiB,CAAC,MAAM,GAAG;AACpD;CACA,GAAG,WAAW,GAAG,IAAI,CAAC;AACtB;CACA,GAAG;AACH;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACpD;CACA,GAAG,MAAM,IAAI,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC;CAC5B,GAAG,MAAM,IAAI,GAAG,qBAAqB,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;CACvD,GAAG,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC;AAC9B;CACA,GAAG,MAAM,IAAI,GAAG,iBAAiB,EAAE,CAAC,EAAE,CAAC;CACvC,GAAG,KAAK,EAAE,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,GAAG;AAC5C;CACA,IAAI,uBAAuB,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;CAC1C,IAAI,WAAW,GAAG,IAAI,CAAC;AACvB;CACA,IAAI,MAAM,KAAK,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,GAAG;AAC/C;CACA,IAAI,uBAAuB,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;AAC1C;CACA,IAAI,MAAM;AACV;CACA,IAAI,uBAAuB,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC;AACzC;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA;CACA,EAAE,iBAAiB,EAAE,aAAa,EAAE,cAAc,EAAE,EAAE,SAAS,EAAE,WAAW,EAAE,uBAAuB,EAAE,cAAc,EAAE,EAAE,CAAC;AAC1H;CACA;CACA,EAAE,KAAK,WAAW,GAAG;AACrB;CACA,GAAG,cAAc,CAAC,OAAO,EAAE,CAAC;AAC5B;CACA,GAAG;AACH;CACA,EAAE,kBAAkB,CAAC,GAAG,EAAE,cAAc,EAAE,aAAa,CAAC,GAAG,EAAE,CAAC,MAAM;CACpE,GAAG,OAAO,EAAE,CAAC,CAAC,OAAO;CACrB,GAAG,IAAI,EAAE,CAAC,CAAC,IAAI;CACf,GAAG,EAAE,EAAE,EAAE,CAAC;AACV;CACA,EAAE,IAAI,UAAU,GAAG,SAAS,CAAC;CAC7B,EAAE,KAAK,WAAW,GAAG,UAAU,GAAG,gBAAgB,CAAC;CACnD,OAAO,KAAK,uBAAuB,CAAC,QAAQ,EAAE,KAAK,EAAE,GAAG,UAAU,GAAG,iBAAiB,CAAC;AACvF;CACA,EAAE,OAAO;CACT,GAAG,UAAU;CACb,GAAG,SAAS,EAAE,YAAY,EAAE,MAAM,EAAE;CACpC,GAAG,QAAQ,EAAE,cAAc;CAC3B,GAAG,CAAC;AACJ;CACA,EAAE;AACF;CACA;;CCtSA;CACA,SAASiD,aAAW,EAAE,SAAS,GAAG;AAClC;CACA,CAAC,MAAM,UAAU,GAAG,IAAI,GAAG,EAAE,CAAC;CAC9B,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACtD;CACA,EAAE,MAAM,QAAQ,GAAG,SAAS,EAAE,CAAC,EAAE,CAAC;CAClC,EAAE,MAAM,MAAM,GAAG,IAAI,QAAQ,GAAG;AAChC;CACA,GAAG,MAAM,KAAK,GAAG,QAAQ,EAAE,GAAG,EAAE,CAAC;CACjC,GAAG,KAAK,KAAK,IAAI,KAAK,CAAC,SAAS,GAAG;AACnC;CACA,IAAI,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC;AAC5B;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,OAAO,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC;AACjC;CACA,CAAC;AACD;CACA;CACA,SAASC,WAAS,EAAE,OAAO,GAAG;AAC9B;CACA,CAAC,MAAM,MAAM,GAAG,EAAE,CAAC;CACnB,CAAC,MAAM,MAAM,GAAG,IAAI,GAAG,EAAE,CAAC;CAC1B,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACpD;CACA,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,IAAI;AAC9B;CACA,GAAG,KAAK,CAAC,CAAC,OAAO,GAAG;AACpB;CACA,IAAI;CACJ,KAAK,CAAC,CAAC,eAAe;CACtB,KAAK,CAAC,CAAC,WAAW;CAClB,KAAK,CAAC,CAAC,YAAY;CACnB,KAAK,CAAC,CAAC,kBAAkB;CACzB,MAAM;AACN;CACA,KAAK,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;AACtB;CACA,KAAK,KAAK,CAAC,CAAC,MAAM,GAAG;AACrB;CACA,MAAM,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;AAC7B;CACA,MAAM;AACN;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE;AACF;CACA,CAAC,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,MAAM;AAC5D;CACA,EAAE,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC;CAClC,EAAE,KAAK,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,OAAO,EAAE,CAAC,CAAC;CACpC,EAAE,OAAO,CAAC,CAAC;AACX;CACA,EAAE,EAAE,CAAC;AACL;CACA,CAAC,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC;AAChC;CACA,CAAC;AACD;CACO,MAAM,yBAAyB,CAAC;AACvC;CACA,CAAC,IAAI,WAAW,GAAG;AACnB;CACA,EAAE,OAAO,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;AAC7B;CACA,EAAE;AACF;CACA,CAAC,WAAW,EAAE,OAAO,GAAG;AACxB;CACA;CACA,EAAE,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;CACvB,EAAE,IAAI,CAAC,UAAU,GAAG,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;CAC9E,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAC1B;CACA;CACA,EAAE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;CAClB,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAIlD,oBAAc,EAAE,CAAC;CACvC,EAAE,IAAI,CAAC,uBAAuB,GAAG,IAAI,uBAAuB,EAAE,OAAO,EAAE,CAAC;CACxE,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;CACzB,EAAE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;CAC/B,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;CAC3B,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC7B;CACA,EAAE;AACF;CACA,CAAC,UAAU,EAAE,OAAO,GAAG;AACvB;CACA,EAAE,IAAI,CAAC,uBAAuB,CAAC,UAAU,EAAE,OAAO,EAAE,CAAC;AACrD;CACA,EAAE;AACF;CACA,CAAC,YAAY,EAAE,SAAS,GAAG;AAC3B;CACA,EAAE,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;AAC9B;CACA,EAAE;AACF;CACA,CAAC,MAAM,aAAa,EAAE,UAAU,GAAG,IAAI,GAAG;AAC1C;CACA,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,GAAG;AAC3B;CACA,GAAG,MAAM,IAAI,KAAK,EAAE,gGAAgG,EAAE,CAAC;AACvH;CACA,GAAG;AACH;CACA,EAAE,KAAK,IAAI,CAAC,GAAG,YAAY,OAAO,GAAG;AACrC;CACA;CACA;CACA,GAAG,KAAK,EAAE,IAAI,CAAC,gBAAgB,GAAG;AAClC;CACA,IAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,OAAO,EAAE,YAAY;AACrD;CACA,KAAK,MAAM,IAAI,CAAC,GAAG,CAAC;CACpB,KAAK,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAClC;CACA;CACA,KAAK,OAAO,IAAI,CAAC,aAAa,EAAE,UAAU,EAAE,CAAC;AAC7C;CACA,KAAK,EAAE,CAAC;AACR;CACA,IAAI;AACJ;CACA,GAAG,OAAO,IAAI,CAAC,gBAAgB,CAAC;AAChC;CACA,GAAG,MAAM;AACT;CACA,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC3B,GAAG,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,CAAC;CAC9C,GAAG,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAC5B;CACA,GAAG,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,MAAM,MAAM,CAAC,GAAG,CAAC;CAC5C,GAAG,OAAO,MAAM,CAAC;AACjB;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,QAAQ,EAAE,UAAU,GAAG,IAAI,GAAG;AAC/B;CACA,EAAE,MAAM,EAAE,uBAAuB,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;CACjE,EAAE,MAAM,OAAO,GAAG,uBAAuB,CAAC,OAAO,CAAC;CAClD,EAAE,uBAAuB,CAAC,UAAU,GAAG,UAAU,CAAC;AAClD;CACA;CACA;CACA,EAAE,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI;AACxB;CACA,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,IAAI;AACpB;CACA,IAAI,KAAK,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,QAAQ,GAAG;AACzC;CACA,KAAK,CAAC,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;AACzB;CACA,KAAK;AACL;CACA,IAAI,EAAE,CAAC;AACP;CACA,GAAG,EAAE,CAAC;AACN;CACA;CACA,EAAE,MAAM,MAAM,GAAG,uBAAuB,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC;CAC9D,EAAE,MAAM,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC;CACrC,EAAE,IAAI,wBAAwB,GAAG,MAAM,CAAC,UAAU,KAAK,SAAS,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,KAAK,MAAM,CAAC;CAC1I,EAAE,KAAK,EAAE,wBAAwB,GAAG;AACpC;CACA,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,GAAG;AAClE;CACA,IAAI,MAAM,QAAQ,GAAG,SAAS,EAAE,CAAC,EAAE,CAAC;CACpC,IAAI,KAAK,QAAQ,CAAC,IAAI,KAAK,IAAI,CAAC,cAAc,EAAE,CAAC,EAAE,GAAG;AACtD;CACA,KAAK,wBAAwB,GAAG,IAAI,CAAC;CACrC,KAAK,MAAM;AACX;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,MAAM,QAAQ,GAAGiD,aAAW,EAAE,SAAS,EAAE,CAAC;CAC5C,EAAE,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAGC,WAAS,EAAE,OAAO,EAAE,CAAC;CACvD,EAAE,KAAK,wBAAwB,GAAG;AAClC;CACA,GAAG,4BAA4B,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC;CAClE,GAAG,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC,GAAG,EAAE,QAAQ,IAAI,QAAQ,CAAC,IAAI,EAAE,CAAC;AACpE;CACA,GAAG;AACH;CACA;CACA,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG;AAC1B;CACA,GAAG,KAAK,IAAI,CAAC,GAAG,YAAY,OAAO,GAAG;AACtC;CACA,IAAI,MAAM,IAAI,KAAK,EAAE,oEAAoE,EAAE,CAAC;AAC5F;CACA,IAAI;AACJ;CACA,GAAG,KAAK,MAAM,CAAC,UAAU,KAAK,gBAAgB,GAAG;AACjD;CACA,IAAI,MAAM,UAAU,GAAG;CACvB,KAAK,QAAQ,EAAE,GAAG;CAClB,KAAK,WAAW,EAAE,CAAC;CACnB,KAAK,QAAQ,EAAE,IAAI;CACnB,KAAK,UAAU;CACf,KAAK,GAAG,IAAI,CAAC,UAAU;CACvB,KAAK,CAAC;AACN;CACA,IAAI,KAAK,IAAI,CAAC,WAAW,GAAG;AAC5B;CACA,KAAK,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC;AACjE;CACA,KAAK,MAAM;AACX;CACA,KAAK,IAAI,CAAC,GAAG,GAAG,IAAI,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC;AACpD;CACA,KAAK;AACL;CACA,IAAI,MAAM,KAAK,MAAM,CAAC,UAAU,KAAK,iBAAiB,GAAG;AACzD;CACA,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC;AACrB;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,OAAO;CACT,GAAG,UAAU,EAAE,MAAM,CAAC,UAAU,KAAK,SAAS;CAC9C,GAAG,GAAG,EAAE,IAAI,CAAC,GAAG;CAChB,GAAG,wBAAwB;CAC3B,GAAG,MAAM;CACT,GAAG,WAAW;CACd,GAAG,QAAQ;CACX,GAAG,SAAS;CACZ,GAAG,QAAQ;CACX,GAAG,OAAO;CACV,GAAG,CAAC;AACJ;CACA,EAAE;AACF;CACA,CAAC;AACD;CACO,MAAM,gCAAgC,SAAS,yBAAyB,CAAC;AAChF;CACA,CAAC,WAAW,EAAE,GAAG,IAAI,GAAG;AACxB;CACA,EAAE,KAAK,EAAE,GAAG,IAAI,EAAE,CAAC;CACnB,EAAE,OAAO,CAAC,IAAI,EAAE,kGAAkG,EAAE,CAAC;AACrH;CACA,EAAE;AACF;CACA,CAAC;AACD;CACO,MAAM,sBAAsB,SAAS,yBAAyB,CAAC;AACtE;CACA,CAAC,WAAW,EAAE,GAAG,IAAI,GAAG;AACxB;CACA,EAAE,KAAK,EAAE,GAAG,IAAI,EAAE,CAAC;CACnB,EAAE,OAAO,CAAC,IAAI,EAAE,wFAAwF,EAAE,CAAC;AAC3G;CACA,EAAE;AACF;CACA;;CCpRO,MAAM,YAAY,SAASC,oBAAc,CAAC;AACjD;CACA,CAAC,IAAI,WAAW,EAAE,CAAC,GAAG;AACtB;CACA,EAAE,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;CAC3B,EAAE,IAAI,CAAC,aAAa,EAAE;AACtB;CACA,GAAG,IAAI,EAAE,eAAe;AACxB;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE;AACF;CACA,CAAC,WAAW,EAAE,MAAM,GAAG;AACvB;CACA,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AAClB;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,IAAI,CAAC,QAAQ,GAAG;AACrC;CACA,GAAG,MAAM,CAAC,cAAc,EAAE,IAAI,EAAE,GAAG,EAAE;AACrC;CACA,IAAI,GAAG,GAAG;AACV;CACA,KAAK,OAAO,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC;AACvC;CACA,KAAK;AACL;CACA,IAAI,GAAG,EAAE,CAAC,GAAG;AACb;CACA,KAAK,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;AACpC;CACA,KAAK;AACL;CACA,IAAI,EAAE,CAAC;AACP;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;CACA,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,GAAG,SAAS,GAAG;AACtC;CACA,EAAE,KAAK,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,GAAG;AAC/C;CACA,GAAG,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,GAAG;AAC/B;CACA,IAAI,OAAO,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC;CAChC,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC5B,IAAI,OAAO,IAAI,CAAC;AAChB;CACA,IAAI;AACJ;CACA,GAAG,MAAM;AACT;CACA,GAAG,KAAK,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,KAAK,GAAG;AACzC;CACA,IAAI,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC;CACjC,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC5B,IAAI,OAAO,IAAI,CAAC;AAChB;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,OAAO,KAAK,CAAC;AACf;CACA,EAAE;AACF;CACA;;CCnEO,MAAM,aAAa,SAAS,YAAY,CAAC;AAChD;CACA,CAAC,WAAW,EAAE,UAAU,GAAG;AAC3B;CACA,EAAE,KAAK,EAAE;AACT;CACA,GAAG,QAAQ,EAAEC,gBAAU;AACvB;CACA,GAAG,QAAQ,EAAE;AACb;CACA,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CAC5B,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CAC5B,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE;AAC3B;CACA,IAAI;AACJ;CACA,GAAG,YAAY,YAAY,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CAAC;AACN;CACA,GAAG,cAAc,YAAY,CAAC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CAAC;AACN;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE,IAAI,CAAC,SAAS,EAAE,UAAU,EAAE,CAAC;AAC/B;CACA,EAAE;AACF;CACA;;CClEA;CACA;CACA;AACA;CACA;CACA;CACA,SAAS,6BAA6B,EAAE,GAAG,GAAG,CAAC,GAAG;AAClD;CACA,CAAC,IAAI,IAAI,GAAG,MAAM,CAAC;CACnB,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG;AAChB;CACA,EAAE,IAAI,GAAG,MAAM,GAAG,GAAG,CAAC;AACtB;CACA,EAAE;AACF;CACA,CAAC,iBAAiB,CAAC;AACnB,EAAE,GAAG,IAAI,EAAE,mBAAmB,GAAG,IAAI,EAAE;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,EAAE;AAClD;AACA,uBAAuB,GAAG,IAAI,EAAE;AAChC;AACA;AACA;AACA,EAAE,GAAG,IAAI,EAAE,8BAA8B,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,GAAG,IAAI,EAAE,6BAA6B,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,CAAC;AACH;CACA,CAAC;AACD;CACA,SAAS,4BAA4B,EAAE,GAAG,GAAG,CAAC,GAAG;AACjD;CACA,CAAC,IAAI,KAAK,GAAG,MAAM,CAAC;CACpB,CAAC,IAAI,KAAK,GAAG,OAAO,CAAC;CACrB,CAAC,IAAI,GAAG,GAAG,EAAE,CAAC;CACd,CAAC,IAAI,UAAU,GAAG,IAAI,CAAC;CACvB,CAAC,IAAI,aAAa,GAAG,IAAI,CAAC;CAC1B,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG;AAChB;CACA,EAAE,KAAK,GAAG,MAAM,GAAG,GAAG,CAAC;CACvB,EAAE,KAAK,GAAG,KAAK,GAAG,GAAG,CAAC;CACtB,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC;CACjB,EAAE,KAAK,GAAG,KAAK,CAAC,GAAG;AACnB;CACA,GAAG,UAAU,GAAG,KAAK,CAAC;CACtB,GAAG,aAAa,GAAG,iBAAiB,CAAC;AACrC;CACA,GAAG,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG;AAC1B;CACA,GAAG,UAAU,GAAG,MAAM,CAAC;CACvB,GAAG,aAAa,GAAG,qBAAqB,CAAC;AACzC;CACA,GAAG,MAAM;AACT;CACA,GAAG,UAAU,GAAG,EAAE,CAAC;CACnB,GAAG,aAAa,GAAG,yBAAyB,CAAC;AAC7C;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,iBAAiB,CAAC;AACnB;AACA,EAAE,GAAG,KAAK,EAAE,MAAM,GAAG,GAAG,EAAE;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG,KAAK,EAAE,kDAAkD,GAAG,UAAU,EAAE;AAC9E,GAAG,GAAG,KAAK,EAAE,UAAU,GAAG,KAAK,EAAE;AACjC;AACA,GAAG,GAAG,KAAK,EAAE,iCAAiC,GAAG,aAAa,EAAE;AAChE;AACA;AACA,yBAAyB,GAAG,KAAK,EAAE;AACnC;AACA;AACA,CAAC,CAAC,CAAC;AACH;CACA,CAAC;AACD;CACO,MAAM,YAAY,aAAa,CAAC;AACvC;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG,6BAA6B,EAAE,CAAC,EAAE,EAAE;AACxC,CAAC,GAAG,6BAA6B,EAAE,CAAC,EAAE,EAAE;AACxC,CAAC,GAAG,6BAA6B,EAAE,CAAC,EAAE,EAAE;AACxC,CAAC,GAAG,6BAA6B,EAAE,CAAC,EAAE,EAAE;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC;AACF;CACO,MAAM,sBAAsB,aAAa,CAAC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC;AACF;CACO,MAAM,eAAe,aAAa,CAAC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,GAAG,4BAA4B,EAAE,CAAC,EAAE,EAAE;AACvC,CAAC,GAAG,4BAA4B,EAAE,CAAC,EAAE,EAAE;AACvC,CAAC,GAAG,4BAA4B,EAAE,CAAC,EAAE,EAAE;AACvC,CAAC,GAAG,4BAA4B,EAAE,CAAC,EAAE,EAAE;AACvC;AACA,CAAC;;CC1PD,MAAM,oBAAoB,SAAS,YAAY,CAAC;AAChD;CACA,CAAC,WAAW,GAAG;AACf;CACA,EAAE,KAAK,EAAE;AACT;CACA,GAAG,QAAQ,EAAEA,gBAAU;AACvB;CACA,GAAG,QAAQ,EAAE;AACb;CACA,IAAI,UAAU,EAAE,EAAE,KAAK,EAAE,IAAInF,aAAO,EAAE,EAAE;AACxC;CACA,IAAI;AACJ;CACA,GAAG,YAAY,YAAY,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CA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A;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCZM,MAAM,aAAa,aAAa,CAAC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCtFM,MAAM,eAAe,cAAc,CAAC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCnNM,MAAM,qBAAqB,aAAa,CAAC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CC9DM,MAAM,kBAAkB,aAAa,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCnEM,MAAM,wBAAwB,aAAa,CAAC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCtNM,MAAM,wBAAwB,aAAa,CAAC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCrFM,MAAM,iBAAiB,aAAa,CAAC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCvGM,MAAM,cAAc,aAAa,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CChFM,MAAM,4BAA4B,aAAa,CAAC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CC5DM,MAAM,wBAAwB,YAAY,CAAC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCxBM,MAAM,cAAc,aAAa,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCnHM,MAAM,aAAa,aAAa,CAAC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCxDM,MAAM,oBAAoB,aAAa,CAAC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCjDD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;AACA;CACO,MAAM,cAAc,aAAa,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CClcM,MAAM,aAAa,aAAa,CAAC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCrBM,MAAM,aAAa,aAAa,CAAC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCrGM,MAAM,qBAAqB,aAAa,CAAC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCtIM,MAAM,eAAe,aAAa,CAAC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCjGM,MAAM,0BAA0B,aAAa,CAAC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CC7DM,MAAM,oBAAoB,aAAa,CAAC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CC3EM,MAAM,sBAAsB,aAAa,CAAC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CClLM,MAAM,qBAAqB,aAAa,CAAC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CC5FM,MAAM,kCAAkC,WAAW,CAAC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CC/FM,MAAM,2BAA2B,aAAa,CAAC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCnUM,MAAM,cAAc,aAAa,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;CCjDM,MAAM,oBAAoB,aAAa,CAAC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC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,IAAI,EAAEC,4BAAuC,CAAC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,EAAEC,wBAAqC,CAAC;AAC5C,IAAI,EAAEC,kBAA+B,CAAC;AACtC,IAAI,EAAEC,wBAAqC,CAAC;AAC5C;AACA,IAAI,EAAEC,0BAAoC,CAAC;AAC3C,IAAI,EAAEC,aAAsB,CAAC;AAC7B,IAAI,EAAEC,eAAwB,CAAC;AAC/B,IAAI,EAAEC,qBAA8B,CAAC;AACrC,IAAI,EAAEC,aAAsB,CAAC;AAC7B,IAAI,EAAEC,cAAuB,CAAC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,EAAEC,cAAyB,CAAC;AAChC,IAAI,EAAEC,qBAAgC,CAAC;AACvC,IAAI,EAAEC,oBAA+B,CAAC;AACtC,IAAI,EAAEC,sBAAiC,CAAC;AACxC,IAAI,EAAEC,kCAA6C,CAAC;AACpD,IAAI,EAAEC,2BAAsC,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE,IAAI,CAAC,SAAS,EAAE,UAAU,EAAE,CAAC;AAC/B;CACA,EAAE;AACF;CACA;;CCprBA,UAAU,UAAU,GAAG;AACvB;CACA,CAAC,MAAM;CACP,EAAE,SAAS;CACX,EAAE,OAAO;CACT,EAAE,UAAU;CACZ,EAAE,cAAc;CAChB,EAAE,aAAa;CACf,EAAE,YAAY;CACd,EAAE,SAAS;CACX,EAAE,KAAK;CACP,EAAE,QAAQ;CACV,EAAE,GAAG,IAAI,CAAC;CACV,CAAC,MAAM,UAAU,GAAG,IAAInE,aAAO,EAAE,CAAC;CAClC,CAAC,MAAM,WAAW,GAAG,IAAIA,aAAO,EAAE,CAAC;AACnC;CACA,CAAC,MAAM,aAAa,GAAG,UAAU,CAAC,QAAQ,CAAC;CAC3C,CAAC,IAAI,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,aAAa,CAAC;AACpD;CACA,CAAC,QAAQ,IAAI,GAAG;AAChB;CACA,EAAE,KAAK,KAAK,GAAG;AACf;CACA,GAAG,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,CAAC;CACtE,GAAG,QAAQ,CAAC,QAAQ,GAAGuB,gBAAU,CAAC;CAClC,GAAG,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC;AACxB;CACA,GAAG,MAAM;AACT;CACA,GAAG,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,CAAC;CACjE,GAAG,QAAQ,CAAC,QAAQ,GAAG6C,oBAAc,CAAC;AACtC;CACA,GAAG;AACH;CACA,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,SAAS,CAAC;AAC/C;CACA,EAAE,MAAM,CAAC,GAAG,cAAc,CAAC,KAAK,CAAC;CACjC,EAAE,MAAM,CAAC,GAAG,cAAc,CAAC,MAAM,CAAC;CAClC,EAAE,QAAQ,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC;CAChD,EAAE,QAAQ,CAAC,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC;CAC/C,EAAE,QAAQ,CAAC,iBAAiB,CAAC,IAAI,EAAE,EAAE,EAAE,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,mBAAmB,GAAG,CAAC,EAAE,CAAC;CAC7F,EAAE,QAAQ,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;CACpC,EAAE,QAAQ,CAAC,IAAI,GAAG,CAAC;AACnB;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;CACnC,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;CACnC,EAAE,MAAM,UAAU,GAAG,MAAM,GAAG,MAAM,CAAC;AACrC;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC;CACvC,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC;CACvC,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,GAAG,CAAC,EAAE,CAAC;CACxC,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,GAAG,CAAC,EAAE,CAAC;AACxC;CACA,EAAE,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,MAAM,GAAG,MAAM,EAAE,CAAC;CAC/C,EAAE,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE,MAAM,GAAG,MAAM,EAAE,CAAC;AAC/C;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,GAAG;AACtC;CACA,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,GAAG;AACvC;CACA;CACA,IAAI,MAAM,cAAc,GAAG,SAAS,CAAC,eAAe,EAAE,CAAC;CACvD,IAAI,MAAM,WAAW,GAAG,SAAS,CAAC,SAAS,CAAC;CAC5C,IAAI,MAAM,aAAa,GAAG,SAAS,CAAC,cAAc,EAAE,CAAC;CACrD,IAAI,SAAS,CAAC,UAAU,EAAE,UAAU,EAAE,CAAC;CACvC,IAAI,SAAS,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC;AACzC;CACA,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC;CACf,IAAI,IAAI,EAAE,GAAG,CAAC,CAAC;CACf,IAAI,KAAK,EAAE,IAAI,CAAC,WAAW,GAAG;AAC9B;CACA,KAAK,MAAM,SAAS,GAAG,EAAE,IAAI,CAAC,YAAY,OAAO,MAAM,GAAG,MAAM,EAAE,CAAC;CACnE,KAAK,EAAE,GAAG,SAAS,GAAG,MAAM,CAAC;CAC7B,KAAK,EAAE,GAAG,EAAE,IAAI,SAAS,GAAG,MAAM,EAAE,CAAC;AACrC;CACA,KAAK,IAAI,CAAC,YAAY,GAAG,SAAS,GAAG,CAAC,CAAC;AACvC;CACA,KAAK;AACL;CACA;CACA;CACA;CACA,IAAI,MAAM,SAAS,GAAG,MAAM,GAAG,EAAE,GAAG,CAAC,CAAC;CACtC,IAAI,cAAc,CAAC,OAAO,CAAC,GAAG;CAC9B,KAAK,MAAM,GAAG,EAAE,GAAG,OAAO;CAC1B,KAAK,MAAM,GAAG,SAAS,GAAG,OAAO;CACjC,KAAK,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,MAAM,GAAG,EAAE,GAAG,OAAO,EAAE;CAC/C,KAAK,IAAI,CAAC,GAAG,EAAE,OAAO,EAAE,MAAM,GAAG,SAAS,GAAG,OAAO,EAAE;CACtD,KAAK,CAAC;AACN;CACA,IAAI,cAAc,CAAC,QAAQ,CAAC,GAAG;CAC/B,KAAK,MAAM;CACX,KAAK,MAAM;CACX,KAAK,MAAM;CACX,KAAK,MAAM;CACX,KAAK,CAAC;AACN;CACA;CACA,IAAI,SAAS,CAAC,eAAe,EAAE,cAAc,EAAE,CAAC;CAChD,IAAI,SAAS,CAAC,cAAc,EAAE,IAAI,EAAE,CAAC;AACrC;CACA,IAAI,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;CAChC,IAAI,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,CAAC;AAChC;CACA;CACA,IAAI,SAAS,CAAC,WAAW,EAAE,WAAW,EAAE,CAAC;CACzC,IAAI,SAAS,CAAC,UAAU,EAAE,UAAU,EAAE,CAAC;CACvC,IAAI,SAAS,CAAC,cAAc,EAAE,aAAa,EAAE,CAAC;CAC9C,IAAI,SAAS,CAAC,eAAe,EAAE,cAAc,EAAE,CAAC;CAChD,IAAI,SAAS,CAAC,SAAS,GAAG,WAAW,CAAC;AACtC;CACA;CACA,IAAI,KAAK,KAAK,GAAG;AACjB;CACA,KAAK,aAAa,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,CAAC;CAClD,KAAK,aAAa,CAAC,OAAO,GAAG,cAAc,CAAC,OAAO,CAAC;AACpD;CACA,KAAK,SAAS,CAAC,eAAe,EAAE,YAAY,EAAE,CAAC;CAC/C,KAAK,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE,CAAC;CACpC,KAAK,SAAS,CAAC,eAAe,EAAE,cAAc,EAAE,CAAC;AACjD;CACA,KAAK;AACL;CACA,IAAI,IAAI,CAAC,OAAO,MAAM,CAAC,GAAG,UAAU,EAAE,CAAC;AACvC;CACA;CACA,IAAI,KAAK,CAAC,KAAK,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,MAAM,GAAG,CAAC,GAAG;AAChD;CACA,KAAK,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;AAC/C;CACA,KAAK;AACL;CACA,IAAI,KAAK,CAAC;AACV;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC;AAClE;CACA,EAAE;AACF;CACA,CAAC;AACD;CACA,MAAM,YAAY,GAAG,IAAIhC,WAAK,EAAE,CAAC;CAC1B,MAAM,mBAAmB,CAAC;AACjC;CACA,CAAC,IAAI,QAAQ,GAAG;AAChB;CACA,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;AAC/B;CACA,EAAE;AACF;CACA,CAAC,IAAI,QAAQ,EAAE,CAAC,GAAG;AACnB;CACA,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,mBAAmB,EAAE,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC;CACtF,EAAE,CAAC,CAAC,gBAAgB,EAAE,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC/D;CACA,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;AAC5B;CACA,EAAE;AACF;CACA,CAAC,IAAI,MAAM,GAAG;AACd;CACA,EAAE,OAAO,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;AACrE;CACA,EAAE;AACF;CACA,CAAC,IAAI,KAAK,EAAE,CAAC,GAAG;AAChB;CACA,EAAE,KAAK,IAAI,CAAC,MAAM,KAAK,CAAC,GAAG;AAC3B;CACA,GAAG,OAAO;AACV;CACA,GAAG;AACH;CACA,EAAE,KAAK,EAAE,CAAC,GAAG;AACb;CACA,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;CACrC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;AACrC;CACA,GAAG;AACH;CACA,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;CAClB,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,IAAI,KAAK,GAAG;AACb;CACA,EAAE,OAAO,IAAI,CAAC,MAAM,CAAC;AACrB;CACA,EAAE;AACF;CACA,CAAC,IAAI,WAAW,GAAG;AACnB;CACA,EAAE,OAAO,OAAO,EAAE,IAAI,CAAC,eAAe,EAAE,CAAC;AACzC;CACA,EAAE;AACF;CACA,CAAC,WAAW,EAAE,QAAQ,GAAG;AACzB;CACA,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;CACrB,EAAE,IAAI,CAAC,KAAK,GAAG,IAAIhG,aAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACnC;CACA,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;CAC3B,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAC1B;CACA,EAAE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;CACnB,EAAE,IAAI,CAAC,SAAS,GAAG,IAAI4D,aAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAC7C,EAAE,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;CAC5B,EAAE,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;CAC5B,EAAE,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;CACtB,EAAE,IAAI,CAAC,OAAO,GAAG,IAAIyB,sBAAc,EAAE,IAAI,2BAA2B,EAAE,EAAE,CAAC;CACzE,EAAE,IAAI,CAAC,UAAU,GAAG,IAAIA,sBAAc,EAAE,IAAI,aAAa,EAAE,EAAE,CAAC;CAC9D,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;CACpB,EAAE,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;CACxB,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC9B;CACA,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,uBAAuB,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,CAAC;AACzE;CACA,EAAE,IAAI,CAAC,cAAc,GAAG,IAAID,uBAAiB,EAAE,CAAC,EAAE,CAAC,EAAE;CACrD,GAAG,MAAM,EAAEzC,gBAAU;CACrB,GAAG,IAAI,EAAEM,eAAS;CAClB,GAAG,SAAS,EAAED,mBAAa;CAC3B,GAAG,SAAS,EAAEA,mBAAa;CAC3B,GAAG,EAAE,CAAC;CACN,EAAE,IAAI,CAAC,aAAa,GAAG;CACvB,GAAG,IAAIoC,uBAAiB,EAAE,CAAC,EAAE,CAAC,EAAE;CAChC,IAAI,MAAM,EAAEzC,gBAAU;CACtB,IAAI,IAAI,EAAEM,eAAS;CACnB,IAAI,SAAS,EAAED,mBAAa;CAC5B,IAAI,SAAS,EAAEA,mBAAa;CAC5B,IAAI,EAAE;CACN,GAAG,IAAIoC,uBAAiB,EAAE,CAAC,EAAE,CAAC,EAAE;CAChC,IAAI,MAAM,EAAEzC,gBAAU;CACtB,IAAI,IAAI,EAAEM,eAAS;CACnB,IAAI,SAAS,EAAED,mBAAa;CAC5B,IAAI,SAAS,EAAEA,mBAAa;CAC5B,IAAI,EAAE;CACN,GAAG,CAAC;AACJ;CACA;CACA;CACA,EAAE,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;CACjC,EAAE,IAAI,CAAC,gBAAgB,GAAG,MAAM;AAChC;CACA,GAAG,KAAK,IAAI,CAAC,iBAAiB,GAAG,OAAO;CACxC,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;AACjC;CACA,GAAG,MAAM,IAAI,GAAG,IAAI,CAAC;CACrB,GAAG,qBAAqB,EAAE,SAAS,SAAS,GAAG;AAC/C;CACA,IAAI,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;CACnC,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;CAC/D,IAAI,OAAO,CAAC,IAAI,EAAE,MAAM;AACxB;CACA,KAAK,KAAK,IAAI,CAAC,eAAe,KAAK,OAAO,GAAG;AAC7C;CACA,MAAM,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAClC;CACA,MAAM;AACN;CACA,KAAK,EAAE,CAAC;AACR;CACA,IAAI,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;AACnC;CACA,IAAI,EAAE,CAAC;AACP;CACA,GAAG,CAAC;AACJ;CACA,EAAE,IAAI,CAAC,QAAQ,CAAC,gBAAgB,EAAE,eAAe,EAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC3E;CACA,EAAE;AACF;CACA,CAAC,eAAe,GAAG;AACnB;CACA,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;AAC3D;CACA,EAAE;AACF;CACA,CAAC,SAAS,EAAE,MAAM,GAAG;AACrB;CACA,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;CAC5B,EAAE,QAAQ,CAAC,iBAAiB,CAAC,IAAI,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC;CACxD,EAAE,QAAQ,CAAC,mBAAmB,CAAC,IAAI,EAAE,MAAM,CAAC,uBAAuB,EAAE,CAAC;CACtE,EAAE,QAAQ,CAAC,cAAc,CAAC,UAAU,EAAE,MAAM,EAAE,CAAC;AAC/C;CACA;CACA,EAAE,IAAI,UAAU,GAAG,CAAC,CAAC;AACrB;CACA;CACA;CACA,EAAE,KAAK,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,EAAE,EAAE,GAAG,CAAC,GAAG;AACpD;CACA;CACA,GAAG,UAAU,GAAG,CAAC,CAAC;AAClB;CACA,GAAG;AACH;CACA,EAAE,KAAK,MAAM,CAAC,gBAAgB,GAAG;AACjC;CACA;CACA,GAAG,UAAU,GAAG,CAAC,CAAC;AAClB;CACA,GAAG;AACH;CACA,EAAE,QAAQ,CAAC,SAAS,EAAE,aAAa,EAAE,UAAU,EAAE,CAAC;AAClD;CACA,EAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACvB;CACA,EAAE;AACF;CACA,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,GAAG;AACjB;CACA,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;CACrB,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;AACrB;CACA,EAAE,KAAK,IAAI,CAAC,cAAc,CAAC,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,KAAK,CAAC,GAAG;AAC7E;CACA,GAAG,OAAO;AACV;CACA,GAAG;AACH;CACA,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CACtC,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAC1C,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAC1C,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,OAAO,EAAE,MAAM,GAAG;AACnB;CACA,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;CACvC,EAAE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;AACxC;CACA,EAAE;AACF;CACA,CAAC,OAAO,GAAG;AACX;CACA,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;CAChC,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;CACpC,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC;CACpC,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;AAC9B;CACA,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;CACzB,EAAE,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;CAC5B,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;CACpB,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;CAC9B,EAAE,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;AACjC;CACA,EAAE;AACF;CACA,CAAC,KAAK,GAAG;AACT;CACA,EAAE,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC;CAC5D,EAAE,MAAM,cAAc,GAAG,SAAS,CAAC,eAAe,EAAE,CAAC;CACrD,EAAE,MAAM,YAAY,GAAG,SAAS,CAAC,aAAa,EAAE,CAAC;CACjD,EAAE,SAAS,CAAC,aAAa,EAAE,YAAY,EAAE,CAAC;AAC1C;CACA,EAAE,SAAS,CAAC,eAAe,EAAE,cAAc,EAAE,CAAC;CAC9C,EAAE,SAAS,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAClC,EAAE,SAAS,CAAC,UAAU,EAAE,CAAC;AACzB;CACA,EAAE,SAAS,CAAC,eAAe,EAAE,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC;CAClD,EAAE,SAAS,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAClC,EAAE,SAAS,CAAC,UAAU,EAAE,CAAC;AACzB;CACA,EAAE,SAAS,CAAC,eAAe,EAAE,aAAa,EAAE,CAAC,EAAE,EAAE,CAAC;CAClD,EAAE,SAAS,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAClC,EAAE,SAAS,CAAC,UAAU,EAAE,CAAC;AACzB;CACA,EAAE,SAAS,CAAC,aAAa,EAAE,YAAY,EAAE,YAAY,EAAE,CAAC;CACxD,EAAE,SAAS,CAAC,eAAe,EAAE,cAAc,EAAE,CAAC;AAC9C;CACA,EAAE,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;CACnB,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AACpB;CACA,EAAE,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;CACjE,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG;AAC1B;CACA,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,CAAC,CAAC;CAC1B,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;AAC3C;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,MAAM,GAAG;AACV;CACA;CACA;CACA,EAAE,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;CACjC,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG;AAC1B;CACA,GAAG,OAAO;AACV;CACA,GAAG;AACH;CACA,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG;AACtB;CACA,GAAG,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC;AACxC;CACA,GAAG;AACH;CACA,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;AACpB;CACA,EAAE;AACF;CACA;;CClZA,MAAM,GAAG,GAAG,IAAIhD,aAAO,EAAE,CAAC;CAC1B,MAAM,MAAM,GAAG,IAAIA,aAAO,EAAE,CAAC;CAC7B,MAAM,MAAM,GAAG,IAAIiI,eAAS,EAAE,CAAC;CAC/B,MAAM,MAAM,GAAG,IAAIjC,WAAK,EAAE,CAAC;CACpB,MAAM,yBAAyB,SAASjD,iBAAW,CAAC;AAC3D;CACA,CAAC,WAAW,EAAE,KAAK,GAAG,GAAG,EAAE,MAAM,GAAG,GAAG,GAAG;AAC1C;CACA,EAAE,KAAK;CACP,GAAG,IAAI,YAAY,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE;CACzC,GAAG,KAAK,EAAE,MAAM,EAAEJ,gBAAU,EAAEM,eAAS,EAAEiF,sCAAgC;CACzE,GAAGvC,oBAAc,EAAEC,yBAAmB,EAAEF,kBAAY,EAAEA,kBAAY;CAClE,GAAG,CAAC;AACJ;CACA,EAAE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AACjC;CACA,EAAE;AACF;CACA,CAAC,MAAM,GAAG;AACV;CACA,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;CACjB,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AAC1B;CACA,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;CAC7C,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG;AACrC;CACA,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,GAAG;AACvC;CACA,IAAI,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AAChC;CACA,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC;CACrC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC;CACjB,IAAI,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;AACxB;CACA,IAAI,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;CACzC,IAAI,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;CACjC,IAAI,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;AACxB;CACA,IAAI,IAAI,CAAC,kBAAkB,EAAE,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;AAC3D;CACA,IAAI,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;CAC5B,IAAI,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;CACrB,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC;CAClC,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC;CAClC,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC;CAClC,IAAI,IAAI,EAAE,EAAE,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,CAAC;AAC7B;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,IAAI,EAAE,KAAK,GAAG;AACf;CACA,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;CACtB,EAAE,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC,kBAAkB,CAAC;CACrD,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA;;CCvEA,MAAM,UAAU,GAAG,IAAI3F,aAAO,EAAE,CAAC;CAC1B,MAAM,uBAAuB,SAAS,yBAAyB,CAAC;AACvE;CACA,CAAC,WAAW,EAAE,UAAU,GAAG,GAAG,GAAG;AACjC;CACA,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,CAAC;AAClC;CACA,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAIiG,WAAK,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,CAAC;CAC9C,EAAE,IAAI,CAAC,WAAW,GAAG,IAAIA,WAAK,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,CAAC;CACjD,EAAE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;CACpB,EAAE,IAAI,CAAC,kBAAkB,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,MAAM;AAC3D;CACA,GAAG,UAAU,CAAC,gBAAgB,EAAE,KAAK,EAAE,CAAC;AACxC;CACA,GAAG,MAAM,CAAC,GAAG,UAAU,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC;CACtC,GAAG,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;AAC3E;CACA,GAAG,CAAC;AACJ;CACA,EAAE;AACF;CACA,CAAC,IAAI,EAAE,KAAK,GAAG;AACf;CACA,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,CAAC;AACtB;CACA,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC;CACvC,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,WAAW,EAAE,CAAC;CAC7C,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA;;CChCA;CACA;CACA;CACO,MAAM,4BAA4B,SAASd,oBAAc,CAAC;AACjE;CACA,CAAC,IAAI,GAAG,GAAG;AACX;CACA,EAAE,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC;AACjC;CACA,EAAE;AACF;CACA,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG;AACd;CACA,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC;AAC9B;CACA,EAAE;AACF;CACA,CAAC,IAAI,OAAO,GAAG;AACf;CACA,EAAE,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC;AACrC;CACA,EAAE;AACF;CACA,CAAC,IAAI,OAAO,EAAE,CAAC,GAAG;AAClB;CACA,EAAE,KAAK,IAAI,CAAC,QAAQ,GAAG;AACvB;CACA,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;AACnC;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,IAAI,UAAU,GAAG;AAClB;CACA,EAAE,OAAO,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,KAAK,IAAI,CAAC,CAAC;AAC/C;CACA,EAAE;AACF;CACA,CAAC,IAAI,UAAU,EAAE,CAAC,GAAG;AACrB;CACA,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;AACtE;CACA,EAAE;AACF;CACA,CAAC,IAAI,QAAQ,GAAG;AAChB;CACA,EAAE,OAAO,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,IAAI,CAAC,CAAC;AAC7C;CACA,EAAE;AACF;CACA,CAAC,IAAI,QAAQ,EAAE,CAAC,GAAG;AACnB;CACA,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC;AAClE;CACA,EAAE;AACF;CACA,CAAC,WAAW,EAAE,MAAM,GAAG;AACvB;CACA,EAAE,KAAK,EAAE;CACT,GAAG,QAAQ,EAAE;AACb;CACA,IAAI,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CACxB,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE;CACzB,IAAI,UAAU,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE;CAC5B,IAAI,QAAQ,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE;AAC1B;CACA,IAAI;AACJ;CACA,GAAG,YAAY,YAAY,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CACA,GAAG,cAAc,YAAY,CAAC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;CACJ,GAAG,EAAE,CAAC;AACN;CACA,EAAE,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,CAAC;AAC3B;CACA,EAAE;AACF;CACA;;CCpIA,MAAM,sBAAsB,SAASA,oBAAc,CAAC;AACpD;CACA,CAAC,WAAW,GAAG;AACf;CACA,EAAE,KAAK,EAAE;AACT;CACA,GAAG,QAAQ,EAAE;AACb;CACA,IAAI,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CAC3B,IAAI,UAAU,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,EAAE;AAC9B;CACA,IAAI;AACJ;CACA,GAAG,YAAY,YAAY,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CAAC;AACN;CACA,GAAG,cAAc,YAAY,CAAC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,GAAG4B,cAAyB,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CAAC;CACN,GAAG,EAAE,CAAC;AACN;CACA,EAAE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;CAC1B,EAAE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;AACzB;CACA,EAAE;AACF;CACA,CAAC;AACD;CACO,MAAM,uBAAuB,CAAC;AACrC;CACA,CAAC,WAAW,EAAE,QAAQ,GAAG;AACzB;CACA,EAAE,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;CAC5B,EAAE,IAAI,CAAC,KAAK,GAAG,IAAIzB,sBAAc,EAAE,IAAI,sBAAsB,EAAE,EAAE,CAAC;AAClE;CACA,EAAE;AACF;CACA,CAAC,QAAQ,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,EAAE,MAAM,GAAG,IAAI,GAAG;AACjD;CACA,EAAE,KAAK,EAAE,MAAM,CAAC,aAAa,GAAG;AAChC;CACA,GAAG,MAAM,IAAI,KAAK,EAAE,2DAA2D,EAAE,CAAC;AAClF;CACA,GAAG;AACH;CACA,EAAE,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC;CACnC,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;CAClC,EAAE,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;AAC1B;CACA;CACA,EAAE,KAAK,KAAK,KAAK,IAAI,GAAG;AACxB;CACA,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;AAC5B;CACA,GAAG;AACH;CACA,EAAE,KAAK,MAAM,KAAK,IAAI,GAAG;AACzB;CACA,GAAG,MAAM,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;AAC7B;CACA,GAAG;AACH;CACA,EAAE,MAAM,MAAM,GAAG,IAAID,uBAAiB,EAAE,KAAK,EAAE,MAAM,EAAE;CACvD,GAAG,IAAI,EAAEnC,eAAS;CAClB,GAAG,UAAU,EAAE,KAAK,CAAC,UAAU;CAC/B,GAAG,EAAE,CAAC;AACN;CACA;CACA,EAAE,MAAM,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;CACnC,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,GAAG,CAAC,CAAC;CAC9C,EAAE,MAAM,WAAW,GAAG,GAAG,GAAG,WAAW,CAAC;CACxC,EAAE,MAAM,UAAU,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC;AAC7E;CACA,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,cAAc,GAAG,CAAC,GAAG,MAAM,EAAE,EAAE,CAAC,CAAC;CACzD,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,kBAAkB,GAAG,UAAU,CAAC;CACxD,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,mBAAmB,GAAG,WAAW,CAAC;CAC1D,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC;CAC/C,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,GAAG,MAAM,CAAC,qBAAqB,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;CACnF,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;AACnC;CACA;CACA,EAAE,MAAM,aAAa,GAAG,QAAQ,CAAC,eAAe,EAAE,CAAC;CACnD,EAAE,MAAM,gBAAgB,GAAG,QAAQ,CAAC,SAAS,CAAC;CAC9C,EAAE,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;CAC5B,EAAE,QAAQ,CAAC,eAAe,EAAE,MAAM,EAAE,CAAC;CACrC,EAAE,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,CAAC;CAC1B,EAAE,QAAQ,CAAC,eAAe,EAAE,aAAa,EAAE,CAAC;CAC5C,EAAE,QAAQ,CAAC,SAAS,GAAG,gBAAgB,CAAC;AACxC;CACA;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,WAAW,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE,CAAC;CACvD,EAAE,MAAM,UAAU,GAAG,IAAI,YAAY,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE,CAAC;CAC5D,EAAE,QAAQ,CAAC,sBAAsB,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;CAC7E,EAAE,MAAM,CAAC,OAAO,EAAE,CAAC;AACnB;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACxD;CACA,GAAG,MAAM,EAAE,CAAC,EAAE,GAAGsC,eAAS,CAAC,WAAW,EAAE,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC;AAC1D;CACA,GAAG;AACH;CACA;CACA,EAAE,MAAM,MAAM,GAAG,IAAIxC,iBAAW,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAEJ,gBAAU,EAAE6C,mBAAa,EAAE,CAAC;CACrF,EAAE,MAAM,CAAC,SAAS,GAAG2C,8BAAwB,CAAC;CAC9C,EAAE,MAAM,CAAC,SAAS,GAAGzC,kBAAY,CAAC;CAClC,EAAE,MAAM,CAAC,KAAK,GAAGC,oBAAc,CAAC;CAChC,EAAE,MAAM,CAAC,KAAK,GAAGA,oBAAc,CAAC;CAChC,EAAE,MAAM,CAAC,OAAO,GAAGuC,sCAAgC,CAAC;CACpD,EAAE,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;AAC5B;CACA,EAAE,OAAO,MAAM,CAAC;AAChB;CACA,EAAE;AACF;CACA,CAAC,OAAO,GAAG;AACX;CACA,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;AACvB;CACA,EAAE;AACF;CACA;;CCpIA,SAAS,qBAAqB,EAAE,QAAQ,GAAG;AAC3C;CACA,CAAC,OAAO,QAAQ,CAAC,UAAU,CAAC,GAAG,EAAE,iBAAiB,EAAE,CAAC;AACrD;CACA,CAAC;AACD;CACA,MAAM,WAAW,GAAG,IAAIlI,aAAO,EAAE,CAAC;CAC3B,MAAM,eAAe,CAAC;AAC7B;CACA,CAAC,IAAI,0BAA0B,GAAG;AAClC;CACA,EAAE,OAAO,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;AAClE;CACA,EAAE;AACF;CACA,CAAC,IAAI,0BAA0B,EAAE,CAAC,GAAG;AACrC;CACA,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,EAAE,aAAa,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC;AAClE;CACA,EAAE;AACF;CACA,CAAC,IAAI,mBAAmB,GAAG;AAC3B;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,mBAAmB,CAAC;AACvD;CACA,EAAE;AACF;CACA,CAAC,IAAI,mBAAmB,EAAE,CAAC,GAAG;AAC9B;CACA,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,mBAAmB,GAAG,CAAC,CAAC;AACpD;CACA,EAAE;AACF;CACA,CAAC,IAAI,OAAO,GAAG;AACf;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC;AAC3C;CACA,EAAE;AACF;CACA,CAAC,IAAI,OAAO,EAAE,CAAC,GAAG;AAClB;CACA,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC;AACxC;CACA,EAAE;AACF;CACA,CAAC,IAAI,kBAAkB,GAAG;AAC1B;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC;AACtD;CACA,EAAE;AACF;CACA,CAAC,IAAI,kBAAkB,EAAE,CAAC,GAAG;AAC7B;CACA,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,kBAAkB,GAAG,CAAC,CAAC;AACnD;CACA,EAAE;AACF;CACA,CAAC,IAAI,OAAO,GAAG;AACf;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;AAClC;CACA,EAAE;AACF;CACA,CAAC,IAAI,MAAM,GAAG;AACd;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;AACjC;CACA,EAAE;AACF;CACA,CAAC,IAAI,KAAK,GAAG;AACb;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;AAChC;CACA,EAAE;AACF;CACA,CAAC,IAAI,WAAW,GAAG;AACnB;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;AACtC;CACA,EAAE;AACF;CACA,CAAC,IAAI,WAAW,EAAE,CAAC,GAAG;AACtB;CACA,EAAE,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,CAAC,CAAC;AACnC;CACA,EAAE;AACF;CACA,CAAC,IAAI,WAAW,GAAG;AACnB;CACA,EAAE,OAAO,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;AACjD;CACA,EAAE;AACF;CACA,CAAC,IAAI,iBAAiB,GAAG;AACzB;CACA,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC;AACxC;CACA,EAAE;AACF;CACA,CAAC,IAAI,iBAAiB,EAAE,CAAC,GAAG;AAC5B;CACA,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,GAAG,CAAC,CAAC;AACrC;CACA,EAAE;AACF;CACA,CAAC,IAAI,eAAe,GAAG;AACvB;CACA,EAAE,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC;AACtC;CACA,EAAE;AACF;CACA,CAAC,IAAI,eAAe,EAAE,CAAC,GAAG;AAC1B;CACA,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAC;AACnC;CACA,EAAE;AACF;CACA,CAAC,WAAW,EAAE,QAAQ,GAAG;AACzB;CACA;CACA,EAAE,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;CAC5B,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,yBAAyB,EAAE,CAAC;CACpD,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,mBAAmB,EAAE,QAAQ,EAAE,CAAC;CACzD,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;CAC3B,EAAE,IAAI,CAAC,MAAM,GAAG,IAAIoI,WAAK,EAAE,CAAC;CAC5B,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC9B;CACA,EAAE,IAAI,CAAC,iBAAiB,GAAG,IAAI,mBAAmB,EAAE,QAAQ,EAAE,CAAC;CAC/D,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CAC3C,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI/C,sBAAc,EAAE,IAAI,4BAA4B,EAAE;CACrE,GAAG,GAAG,EAAE,IAAI;CACZ,GAAG,WAAW,EAAE,IAAI;CACpB,GAAG,QAAQ,EAAEF,gBAAU;AACvB;CACA,GAAG,kBAAkB,EAAE,QAAQ,CAAC,oBAAoB,EAAE,CAAC,kBAAkB;CACzE,GAAG,EAAE,EAAE,CAAC;CACR,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AACzB;CACA,EAAE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;CACnC,EAAE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;CAClC,EAAE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;CAClC,EAAE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;CAC5B,EAAE,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;CAC1C,EAAE,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;CACtC,EAAE,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;CAC1C,EAAE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC/B;CACA;CACA,EAAE,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;CACzB,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;CACtB,EAAE,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;CAC1B,EAAE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;CAChC,EAAE,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;CAChC,EAAE,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;CAC7B,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC1B,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;CACvB,EAAE,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;CACpC,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;CAC7B,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;CAC7B,EAAE,IAAI,CAAC,WAAW,GAAG,IAAInF,aAAO,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;CAC/C,EAAE,IAAI,CAAC,sBAAsB,GAAG,EAAE,KAAK,EAAE,MAAM,MAAM;AACrD;CACA,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AAC1C;CACA,GAAG,CAAC;AACJ;CACA,EAAE,IAAI,CAAC,sBAAsB,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,MAAM;AAC9D;CACA,GAAG,MAAM,gBAAgB,GAAG,QAAQ,CAAC,SAAS,CAAC;CAC/C,GAAG,QAAQ,CAAC,SAAS,GAAG,KAAK,CAAC;CAC9B,GAAG,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,CAAC;CAC3B,GAAG,QAAQ,CAAC,SAAS,GAAG,gBAAgB,CAAC;AACzC;CACA,GAAG,CAAC;AACJ;CACA;CACA,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAIqI,WAAK,EAAE,EAAE,IAAI/C,uBAAiB,EAAE,EAAE,CAAC;AACxD;CACA,EAAE;AACF;CACA,CAAC,YAAY,EAAE,MAAM,GAAG;AACxB;CACA,EAAE,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,MAAM,EAAE,CAAC;AACzC;CACA,EAAE;AACF;CACA,CAAC,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,GAAG,EAAE,GAAG;AACzC;CACA,EAAE,KAAK,CAAC,iBAAiB,EAAE,IAAI,EAAE,CAAC;CAClC,EAAE,MAAM,CAAC,iBAAiB,EAAE,CAAC;AAC7B;CACA,EAAE,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;CACpC,EAAE,SAAS,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC;AAChC;CACA,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG;AAC1B;CACA,GAAG,OAAO,SAAS,CAAC,aAAa,EAAE,OAAO,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE,MAAM,IAAI;AACxE;CACA,IAAI,IAAI,CAAC,kBAAkB,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;CACrD,IAAI,OAAO,IAAI,CAAC,qBAAqB,EAAE,CAAC,IAAI,EAAE,MAAM,MAAM,EAAE,CAAC;AAC7D;CACA,IAAI,EAAE,CAAC;AACP;CACA,GAAG,MAAM;AACT;CACA,GAAG,MAAM,MAAM,GAAG,SAAS,CAAC,QAAQ,EAAE,CAAC;CACvC,GAAG,IAAI,CAAC,kBAAkB,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC;CACpD,GAAG,KAAK,MAAM,CAAC,wBAAwB,IAAI,MAAM,CAAC,QAAQ,GAAG;AAC7D;CACA,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,sBAAsB,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC;AAC5G;CACA,IAAI;AACJ;CACA,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;CAC1B,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;CACvB,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;CAC5B,GAAG,OAAO,MAAM,CAAC;AACjB;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,aAAa,EAAE,GAAG,IAAI,GAAG;AAC1B;CACA,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC1B,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAG,IAAI,EAAE,CAAC;CAC1C,EAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAC3B;CACA,EAAE,OAAO,MAAM,CAAC;AAChB;CACA,EAAE;AACF;CACA,CAAC,SAAS,EAAE,MAAM,GAAG;AACrB;CACA,EAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;CACvB,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC;AACtB;CACA,EAAE;AACF;CACA;CACA;CACA;CACA;CACA,CAAC,YAAY,GAAG;AAChB;CACA,EAAE,OAAO,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;AAC5C;CACA,EAAE;AACF;CACA,CAAC,YAAY,GAAG;AAChB;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;CAC7B,EAAE,MAAM,CAAC,iBAAiB,EAAE,CAAC;AAC7B;CACA,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,MAAM,EAAE,CAAC;CACvC,EAAE,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE,MAAM,EAAE,CAAC;CAC7C,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,eAAe,GAAG;AACnB;CACA,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;CAC7C,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;CAClC,EAAE,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;CACpC,EAAE,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;AACvC;CACA;CACA;CACA;CACA,EAAE,MAAM,QAAQ,GAAG,WAAW,EAAE,SAAS,EAAE,CAAC;CAC5C,EAAE,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,EAAE,CAAC;CACpF,EAAE,QAAQ,CAAC,SAAS,CAAC,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC;CACvD;CACA,EAAE,QAAQ,CAAC,gCAAgC,GAAG,GAAG,CAAC;CAClD,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACvD;CACA,GAAG,MAAM,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,CAAC;CAC5B,GAAG,KAAK,CAAC,CAAC,uBAAuB,IAAI,CAAC,CAAC,gCAAgC,IAAI,IAAI,GAAG;AAClF;CACA,IAAI,QAAQ,CAAC,gCAAgC,GAAG,CAAC,CAAC,gCAAgC,CAAC;CACnF,IAAI,MAAM;AACV;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,YAAY,GAAG;AAChB;CACA,EAAE,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;CAC3B,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;CAClC,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;AAC7C;CACA,EAAE,MAAM,MAAM,GAAG,SAAS,EAAE,KAAK,EAAE,CAAC;CACpC,EAAE,MAAM,WAAW,GAAG,cAAc,EAAE,MAAM,EAAE,CAAC;CAC/C,EAAE,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC;CACpD,EAAE,QAAQ,CAAC,WAAW,CAAC,WAAW,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC;CAC5D,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,iBAAiB,GAAG;AACrB;CACA,EAAE,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;CAC3B,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;AAC7C;CACA,EAAE,KAAK,IAAI,CAAC,mBAAmB,GAAG;AAClC;CACA,GAAG,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC;CACtC,GAAG,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AACnC;CACA,GAAG;AACH;CACA;CACA,EAAE,QAAQ,CAAC,cAAc,GAAG,KAAK,CAAC,oBAAoB,CAAC;CACvD,EAAE,QAAQ,CAAC,mBAAmB,GAAG,KAAK,CAAC,mBAAmB,IAAI,CAAC,CAAC;CAChE,EAAE,QAAQ,CAAC,kBAAkB,CAAC,qBAAqB,EAAE,KAAK,CAAC,kBAAkB,EAAE,CAAC,MAAM,EAAE,CAAC;CACzF,EAAE,KAAK,KAAK,CAAC,UAAU,KAAK,IAAI,GAAG;AACnC;CACA,GAAG,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;CACjC,GAAG,QAAQ,CAAC,eAAe,GAAG,CAAC,CAAC;AAChC;CACA,GAAG,MAAM,KAAK,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG;AACzC;CACA,GAAG,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,IAAI,IAAI,uBAAuB,EAAE,EAAE,EAAE,CAAC;AACtF;CACA,GAAG,MAAM,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC;CACjD,GAAG,KAAK,EAAE,eAAe,CAAC,QAAQ,CAAC,MAAM,EAAE,KAAK,CAAC,UAAU,EAAE,GAAG;AAChE;CACA;CACA,IAAI,eAAe,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,CAAC,UAAU,EAAE,CAAC;CACrD,IAAI,eAAe,CAAC,WAAW,CAAC,GAAG,EAAE,KAAK,CAAC,UAAU,EAAE,CAAC;CACxD,IAAI,eAAe,CAAC,MAAM,EAAE,CAAC;AAC7B;CACA,IAAI;AACJ;CACA;CACA,GAAG,QAAQ,CAAC,aAAa,GAAG,eAAe,CAAC;CAC5C,GAAG,QAAQ,CAAC,eAAe,GAAG,CAAC,CAAC;AAChC;CACA,GAAG,MAAM,KAAK,KAAK,CAAC,UAAU,CAAC,aAAa,GAAG;AAC/C;CACA,GAAG,KAAK,KAAK,CAAC,UAAU,KAAK,IAAI,CAAC,mBAAmB,GAAG;AACxD;CACA,IAAI,MAAM,UAAU,GAAG,IAAI,uBAAuB,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ,EAAE,KAAK,CAAC,UAAU,EAAE,CAAC;CAClG,IAAI,IAAI,CAAC,mBAAmB,GAAG,UAAU,CAAC;CAC1C,IAAI,QAAQ,CAAC,aAAa,GAAG,UAAU,CAAC;CACxC,IAAI,QAAQ,CAAC,eAAe,GAAG,CAAC,CAAC;AACjC;CACA,IAAI;AACJ;CACA,GAAG,MAAM;AACT;CACA,GAAG,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC,UAAU,CAAC;CAC7C,GAAG,QAAQ,CAAC,eAAe,GAAG,CAAC,CAAC;AAChC;CACA,GAAG;AACH;CACA;CACA,EAAE,QAAQ,CAAC,oBAAoB,GAAG,KAAK,CAAC,WAAW,KAAK,IAAI,KAAK,KAAK,CAAC,oBAAoB,IAAI,CAAC,KAAK,CAAC,CAAC;CACvG,EAAE,QAAQ,CAAC,qBAAqB,GAAG,KAAK,CAAC,QAAQ,EAAE,qBAAqB,IAAI,CAAC,CAAC;CAC9E,EAAE,QAAQ,CAAC,mBAAmB,CAAC,qBAAqB,EAAE,KAAK,CAAC,mBAAmB,EAAE,CAAC,MAAM,EAAE,CAAC;CAC3F,EAAE,KAAK,IAAI,CAAC,oBAAoB,KAAK,KAAK,CAAC,WAAW,GAAG;AACzD;CACA,GAAG,KAAK,KAAK,CAAC,WAAW,KAAK,IAAI,GAAG;AACrC;CACA,IAAI,KAAK,KAAK,CAAC,WAAW,CAAC,aAAa,GAAG;AAC3C;CACA,KAAK,MAAM,WAAW,GAAG,IAAI,uBAAuB,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,QAAQ,EAAE,KAAK,CAAC,WAAW,EAAE,CAAC;CACrG,KAAK,QAAQ,CAAC,UAAU,CAAC,UAAU,EAAE,WAAW,EAAE,CAAC;AACnD;CACA,KAAK,MAAM;AACX;CACA;CACA;CACA;CACA,KAAK,QAAQ,CAAC,UAAU,CAAC,UAAU,EAAE,KAAK,CAAC,WAAW,EAAE,CAAC;AACzD;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA;CACA;CACA,EAAE,MAAM,YAAY,GAAG,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC;CAC/C,EAAE,KAAK,KAAK,CAAC,WAAW,KAAK,IAAI,IAAI,YAAY,GAAG;AACpD;CACA,GAAG,KAAK,YAAY,CAAC,IAAI,KAAKE,mBAAa,GAAG;AAC9C;CACA;CACA,IAAI,KAAK,IAAI,CAAC,2BAA2B,KAAK,YAAY,IAAI,IAAI,CAAC,aAAa,GAAG;AACnF;CACA,KAAK,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;CAClC,KAAK,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC/B;CACA,KAAK;AACL;CACA,IAAI,KAAK,EAAE,IAAI,CAAC,aAAa,GAAG;AAChC;CACA,KAAK,KAAK,EAAE,IAAI,CAAC,sBAAsB,GAAG;AAC1C;CACA,MAAM,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;CACzC,MAAM,MAAM,IAAI,GAAG,IAAI,CAAC;CACxB,MAAM,MAAM,MAAM,GAAG,YAAY,CAAC;CAClC,MAAM,MAAM,EAAE,GAAG,KAAK,CAAC;CACvB,MAAM,qBAAqB,EAAE,SAAS,iBAAiB,GAAG;AAC1D;CACA,OAAO,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;CAC3C,OAAO,KAAK,IAAI,CAAC,2BAA2B,KAAK,MAAM,IAAI,IAAI,CAAC,aAAa,GAAG,OAAO;AACvF;CACA,OAAO,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,CAAC,KAAK,CAAC;CACpD,OAAO,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,KAAK,KAAK,GAAG,MAAM,EAAE,EAAE,CAAC;CACrE,OAAO,MAAM,SAAS,GAAG,IAAI,YAAY,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE,CAAC;CAChE,OAAO,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,GAAG,MAAM,EAAE,CAAC,GAAG,GAAG;AACnD;CACA,QAAQ,SAAS,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAGD,eAAS,CAAC,aAAa,EAAE,IAAI,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC;CACnF,QAAQ,SAAS,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAGA,eAAS,CAAC,aAAa,EAAE,IAAI,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC;CACnF,QAAQ,SAAS,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAGA,eAAS,CAAC,aAAa,EAAE,IAAI,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC;CACnF,QAAQ,SAAS,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,GAAGA,eAAS,CAAC,aAAa,EAAE,IAAI,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,GAAG,CAAC;AACvG;CACA,QAAQ;AACR;CACA,OAAO,IAAI,CAAC,aAAa,GAAG,IAAIxC,iBAAW,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAEJ,gBAAU,EAAEM,eAAS,EAAEiF,sCAAgC,EAAEvC,oBAAc,EAAEC,yBAAmB,EAAEF,kBAAY,EAAEA,kBAAY,EAAE,CAAC;CAClM,OAAO,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC;CAC7C,OAAO,IAAI,CAAC,2BAA2B,GAAG,MAAM,CAAC;CACjD,OAAO,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;AAC3C;CACA,OAAO,EAAE,CAAC;AACV;CACA,MAAM;CACN;AACA;CACA,KAAK,MAAM;AACX;CACA,KAAK,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;AAC5C;CACA,KAAK;AACL;CACA,IAAI,MAAM;AACV;CACA,IAAI,KAAK,IAAI,CAAC,aAAa,GAAG;AAC9B;CACA,KAAK,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;CAClC,KAAK,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;CAC/B,KAAK,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AAC7C;CACA,KAAK;AACL;CACA,IAAI,KAAK,CAAC,WAAW,GAAG,YAAY,CAAC;AACrC;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC,WAAW,CAAC;CAChD,EAAE,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC,UAAU,CAAC;CAC9C,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC;AACf;CACA,EAAE;AACF;CACA,CAAC,kBAAkB,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,GAAG;AAC9C;CACA,EAAE,MAAM;CACR,GAAG,SAAS;CACZ,GAAG,QAAQ;CACX,GAAG,GAAG;CACN,GAAG,UAAU;CACb,GAAG,wBAAwB;CAC3B,GAAG,GAAG,OAAO,CAAC;AACd;CACA,EAAE,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;AAC9B;CACA,EAAE,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;CACtC,EAAE,MAAM,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;AACvC;CACA,EAAE,KAAK,UAAU,GAAG;AACpB;CACA,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC;CAClC,GAAG,QAAQ,CAAC,eAAe,CAAC,UAAU;CACtC,IAAI,QAAQ,CAAC,UAAU,CAAC,MAAM;CAC9B,IAAI,QAAQ,CAAC,UAAU,CAAC,OAAO;CAC/B,IAAI,QAAQ,CAAC,UAAU,CAAC,EAAE;CAC1B,IAAI,QAAQ,CAAC,UAAU,CAAC,KAAK;CAC7B,IAAI,CAAC;AACL;CACA,GAAG;AACH;CACA;CACA,EAAE,KAAK,wBAAwB,GAAG;AAClC;CACA,GAAG,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;CAC3C,GAAG,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC;AACpC;CACA,GAAG,MAAM;AACT;CACA,GAAG,IAAI,CAAC,2BAA2B,GAAG,KAAK,CAAC;CAC5C,GAAG,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAChC;CACA,GAAG;AACH;CACA;CACA,EAAE,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;CAC9B,EAAE,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;CACrB,EAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACvB;CACA,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC;AACtB;CACA,EAAE,OAAO,OAAO,CAAC;AACjB;CACA,EAAE;AACF;CACA;CACA,CAAC,qBAAqB,GAAG;AACzB;CACA,EAAE,MAAM,IAAI,GAAG,IAAI,CAAC;CACpB,EAAE,OAAO,IAAI,OAAO,EAAE,EAAE,OAAO,MAAM;AACrC;CACA,GAAG,qBAAqB,EAAE,MAAM;AAChC;CACA,IAAI,KAAK,IAAI,CAAC,2BAA2B,IAAI,IAAI,CAAC,gBAAgB,GAAG;AACrE;CACA,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,sBAAsB,CAAC,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC;CACnH,KAAK,IAAI,CAAC,2BAA2B,GAAG,KAAK,CAAC;CAC9C,KAAK,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAClC;CACA,KAAK;AACL;CACA,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;CAC3B,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AACxB;CACA,IAAI,qBAAqB,EAAE,MAAM;AACjC;CACA,KAAK,IAAI,CAAC,iBAAiB,EAAE,CAAC;CAC9B,KAAK,OAAO,EAAE,CAAC;AACf;CACA,KAAK,EAAE,CAAC;AACR;CACA,IAAI,EAAE,CAAC;AACP;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE;AACF;CACA,CAAC,YAAY,GAAG;AAChB;CACA,EAAE,MAAM,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;CAClD,EAAE,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;CACtC,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;CAClC,EAAE,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;CAC5B,EAAE,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;AAC1B;CACA,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC;AACtB;CACA,EAAE,KAAK,IAAI,CAAC,WAAW,GAAG;AAC1B;CACA,GAAG,UAAU,CAAC,KAAK,EAAE,CAAC;CACtB,GAAG,gBAAgB,CAAC,KAAK,EAAE,CAAC;CAC5B,GAAG,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;AAC5B;CACA,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC;CAC7B,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;AACjB;CACA,GAAG;AACH;CACA;CACA,EAAE,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC;CACvC,EAAE,MAAM,WAAW,GAAG,KAAK,CAAC,cAAc,EAAE,GAAG,GAAG,CAAC;CACnD,EAAE,KAAK,EAAE,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,WAAW,IAAI,WAAW,IAAI,EAAE,IAAI,CAAC,WAAW,GAAG;AACpH;CACA,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC;AACvB;CACA,GAAG;AACH;CACA;CACA;CACA,EAAE,UAAU,CAAC,KAAK,GAAG,UAAU,CAAC,QAAQ,CAAC,eAAe,KAAK,CAAC,IAAI,EAAE,qBAAqB,EAAE,QAAQ,EAAE,CAAC;CACtG,EAAE,gBAAgB,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;AAC5C;CACA,EAAE,KAAK,IAAI,CAAC,cAAc,GAAG;AAC7B;CACA,GAAG,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;CACnC,GAAG,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACtC;CACA,GAAG,KAAK,WAAW,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,GAAG;AAC7E;CACA,IAAI,KAAK,IAAI,CAAC,YAAY,KAAK,CAAC,GAAG;AACnC;CACA,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC;AAC9F;CACA,KAAK,MAAM;AACX;CACA,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,CAAC;AAC/B;CACA,KAAK;AACL;CACA,IAAI;AACJ;CACA;CACA,GAAG,KAAK,EAAE,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,OAAO,GAAG,UAAU,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,GAAG;AAC7F;CACA,IAAI,KAAK,IAAI,CAAC,aAAa,IAAI,EAAE,IAAI,CAAC,WAAW,GAAG;AACpD;CACA,KAAK,KAAK,gBAAgB,CAAC,OAAO,GAAG,CAAC,GAAG;AACzC;CACA,MAAM,gBAAgB,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;CACtD,MAAM,gBAAgB,CAAC,MAAM,EAAE,CAAC;AAChC;CACA,MAAM;AACN;CACA,KAAK,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;CAClD,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;CACvD,KAAK,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC;CACzD,KAAK,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,CAAC;CAC7B,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,cAAc,CAAC;AAC5C;CACA,KAAK;AACL;CACA,IAAI,KAAK,EAAE,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,GAAG;AACjG;CACA,KAAK,IAAI,CAAC,sBAAsB,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC;AAC5D;CACA,KAAK;AACL;CACA,IAAI;AACJ;AACA;CACA,GAAG,KAAK,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,GAAG;AAC9D;CACA,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,CAAC,GAAG;AACrC;CACA;CACA;CACA,KAAK,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,IAAI,CAAC,aAAa,GAAG4C,sBAAgB,GAAGN,oBAAc,CAAC;AACrF;CACA,KAAK;AACL;CACA,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC;CAClD,IAAI,IAAI,CAAC,sBAAsB,EAAE,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;CACrE,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG7C,gBAAU,CAAC;AACxC;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA,CAAC,KAAK,GAAG;AACT;CACA,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC1B,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,GAAG,CAAC,CAAC;AAC/B;CACA,EAAE;AACF;CACA,CAAC,OAAO,GAAG;AACX;CACA,EAAE,KAAK,IAAI,CAAC,aAAa,GAAG;AAC5B;CACA,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;CAChC,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;CAC7B,GAAG,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;AAC3C;CACA,GAAG;AACH;CACA,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;CACvB,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;CAChC,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;AAC7B;CACA,EAAE;AACF;CACA,CAAC,YAAY,GAAG;AAChB;CACA;CACA,EAAE,KAAK,IAAI,CAAC,qBAAqB,GAAG;AACpC;CACA,GAAG,IAAI,CAAC,SAAS,CAAC,oBAAoB,EAAE,WAAW,EAAE,CAAC;AACtD;CACA,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;CAC5D,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC,CAAC,EAAE,CAAC;AAC5D;CACA,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,WAAW,EAAE,CAAC;CAC3C,GAAG,KAAK,WAAW,CAAC,CAAC,KAAK,CAAC,IAAI,WAAW,CAAC,CAAC,KAAK,CAAC,GAAG;AACrD;CACA,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;CACzC,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;CACrC,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,GAAG,WAAW,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,GAAG,WAAW,EAAE,EAAE,CAAC;AACnG;CACA,IAAI;AACJ;CACA,GAAG;AACH;CACA,EAAE;AACF;CACA;;CCltBO,MAAM,cAAc,SAASoD,YAAM,CAAC;AAC3C;CACA,CAAC,WAAW,GAAG;AACf;CACA,EAAE,KAAK,EAAE,CAAC;AACV;CACA,EAAE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AAC/B;CACA,EAAE;AACF;CACA;;CCVO,MAAM,iBAAiB,SAASC,eAAS,CAAC;AACjD;CACA,CAAC,WAAW,EAAE,GAAG,IAAI,GAAG;AACxB;CACA,EAAE,KAAK,EAAE,GAAG,IAAI,EAAE,CAAC;AACnB;CACA,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;CACrB,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;AAClB;CACA,EAAE;AACF;CACA,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,GAAG;AAC3B;CACA,EAAE,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;AAClC;CACA,EAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;CAC9B,EAAE,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;AAC9B;CACA,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA;;CCtBO,MAAM,eAAe,SAASC,mBAAa,CAAC;AACnD;CACA,CAAC,WAAW,EAAE,GAAG,IAAI,GAAG;AACxB;CACA,EAAE,KAAK,EAAE,GAAG,IAAI,EAAE,CAAC;CACnB,EAAE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AAC1B;CACA,EAAE;AACF;CACA,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,GAAG;AAC3B;CACA,EAAE,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;AAClC;CACA,EAAE,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;AACtC;CACA,EAAE,OAAO,IAAI,CAAC;AACd;CACA,EAAE;AACF;CACA;;CChBA,MAAM,iBAAiB,SAAS,YAAY,CAAC;AAC7C;CACA,CAAC,WAAW,GAAG;AACf;CACA,EAAE,KAAK,EAAE;AACT;CACA,GAAG,QAAQ,EAAE;AACb;CACA,IAAI,MAAM,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CAC3B,IAAI,IAAI,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE;AACtB;CACA,IAAI;AACJ;CACA,GAAG,YAAY,YAAY,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CACA,GAAG,cAAc,YAAY,CAAC;AAC9B;AACA;AACA;AACA;AACA,IAAI,GAAG3B,cAAyB,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE;AACF;CACA,CAAC;AACD;CACO,MAAM,sBAAsB,CAAC;AACpC;CACA,CAAC,WAAW,EAAE,QAAQ,GAAG;AACzB;CACA,EAAE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;CAC3B,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI4B,oBAAc,EAAE,QAAQ,EAAE,CAAC;CACvD,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAIrD,sBAAc,EAAE,IAAI,iBAAiB,EAAE,EAAE,CAAC;CAChE,EAAE,IAAI,CAAC,YAAY,GAAG,IAAID,uBAAiB,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,IAAI,EAAEnC,eAAS,EAAE,MAAM,EAAEN,gBAAU,EAAE,EAAE,CAAC;AAC7F;CACA,EAAE;AACF;CACA,CAAC,OAAO,GAAG;AACX;CACA,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;CAChC,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;CAC1B,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;AAC9B;CACA,EAAE;AACF;CACA,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,GAAG;AAC3B;CACA,EAAE,MAAM,EAAE,cAAc,EAAE,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC;AACpE;CACA;CACA,EAAE,MAAM,WAAW,GAAG,cAAc,CAAC,mBAAmB,EAAE,OAAO,EAAE,CAAC;AACpE;CACA;CACA,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC;CAC1C,EAAE,YAAY,CAAC,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;CACxC,EAAE,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,WAAW,CAAC,OAAO,CAAC;CACjD,EAAE,QAAQ,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;AAChC;CACA;CACA,EAAE,MAAM,gBAAgB,GAAG,QAAQ,CAAC,eAAe,EAAE,CAAC;CACtD,EAAE,MAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;AACvC;CACA,EAAE,QAAQ,CAAC,eAAe,EAAE,YAAY,EAAE,CAAC;CAC3C,EAAE,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC;CAC5B,EAAE,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,CAAC;AAC9B;CACA,EAAE,QAAQ,CAAC,eAAe,EAAE,gBAAgB,EAAE,CAAC;CAC/C,EAAE,QAAQ,CAAC,SAAS,GAAG,SAAS,CAAC;AACjC;CACA;CACA,EAAE,MAAM,MAAM,GAAG,IAAI,WAAW,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE,CAAC;CACvD,EAAE,MAAM,UAAU,GAAG,IAAI,YAAY,EAAE,KAAK,GAAG,MAAM,GAAG,CAAC,EAAE,CAAC;CAC5D,EAAE,QAAQ,CAAC,sBAAsB,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;AACnF;CACA,EAAE,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG;AACxD;CACA,GAAG,MAAM,EAAE,CAAC,EAAE,GAAG4C,eAAS,CAAC,WAAW,EAAE,UAAU,EAAE,CAAC,EAAE,EAAE,CAAC;AAC1D;CACA,GAAG;AACH;CACA,EAAE,MAAM,MAAM,GAAG,IAAIxC,iBAAW,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAEJ,gBAAU,EAAE6C,mBAAa,EAAE,CAAC;CACrF,EAAE,MAAM,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;CACvC,EAAE,MAAM,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;CACvC,EAAE,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;CAC/B,EAAE,MAAM,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;CAC/B,EAAE,MAAM,CAAC,OAAO,GAAG0C,sCAAgC,CAAC;CACpD,EAAE,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;AAC5B;CACA;CACA,EAAE,WAAW,CAAC,OAAO,EAAE,CAAC;AACxB;CACA,EAAE,OAAO,MAAM,CAAC;AAChB;CACA,EAAE;AACF;CACA;;CCvHO,MAAM,eAAe,SAAS,YAAY,CAAC;AAClD;CACA,CAAC,WAAW,EAAE,UAAU,GAAG;AAC3B;CACA,EAAE,KAAK,EAAE;AACT;CACA,GAAG,QAAQ,EAAE/C,gBAAU;AACvB;CACA,GAAG,WAAW,EAAE,KAAK;AACrB;CACA,GAAG,UAAU,EAAE,KAAK;AACpB;CACA,GAAG,SAAS,EAAE,KAAK;AACnB;CACA,GAAG,OAAO,EAAE;AACZ;CACA,IAAI,UAAU,EAAE,CAAC;AACjB;CACA,IAAI;AACJ;CACA,GAAG,QAAQ,EAAE;AACb;CACA,IAAI,KAAK,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE;CACzB,IAAI,SAAS,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CAC9B,IAAI,MAAM,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE;AAC1B;CACA,IAAI,GAAG,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;CACxB,IAAI,OAAO,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE;AACzB;CACA,IAAI;AACJ;CACA,GAAG,YAAY,YAAY,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CACA,GAAG,cAAc,YAAY,CAAC;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,CAAC;AACJ;CACA,GAAG,EAAE,CAAC;AACN;CACA,EAAE,IAAI,CAAC,SAAS,EAAE,UAAU,EAAE,CAAC;AAC/B;CACA,EAAE;AACF;CACA;;CC/IO,MAAM,iBAAiB,SAASwD,0BAAoB,CAAC;AAC5D;CACA,CAAC,WAAW,EAAE,MAAM,GAAG;AACvB;CACA,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AAClB;CACA,EAAE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;AAClC;CACA,EAAE,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;CACvB,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI3C,WAAK,EAAE,CAAC;CAC9B,EAAE,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;CAC/B,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;CACtB,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;CAC1B,EAAE,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;CACvB,EAAE,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;AACvB;CACA,EAAE,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,CAAC;AAC3B;CACA,EAAE;AACF;CACA;;CCtBA;;;;;;;;;;;;;;;;;;;;;;;;"}